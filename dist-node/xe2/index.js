/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var e={99256:(e,t,r)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.copyright=void 0;var o=null!==(n="".concat("xbsj-xe2","/").concat(r.j))&&void 0!==n?n:"-",i=((Date.now()-1702091535e3)/36e5).toFixed(1),c="%c🌏 ".concat(o,"%c ").concat("0.1.0",".").concat("43e254ce2f0180fc62dca04488232442ee13fbed".slice(0,8),".").concat("2023-12-09T03:12:15.000Z"," (距今").concat(i,"个小时)\n%c").concat("xbsj-xe2\n","当前网站正在使用").concat(o,"，此软件版权归").concat("北京西部世界科技有限公司","所有\n");t.copyright=Object.seal({get owner(){return"北京西部世界科技有限公司"},get ownerlink(){return"https://work.weixin.qq.com/kfid/kfc0a426187a0ce9a9a"},get gituri(){return"https://codeup.aliyun.com/xbsj/2022/xe2-packages-202210/commit/${commitId}".replace("${commitId}","43e254ce2f0180fc62dca04488232442ee13fbed")},get info(){return c},get date(){return"2023-12-09T03:12:15.000Z"},get author(){return"vtxf, ysp"},get version(){return"0.1.0"},get name(){return"xbsj-xe2"},get commitId(){return"43e254ce2f0180fc62dca04488232442ee13fbed"},print:function(e){void 0===e&&(e=!1),!e&&window._xe2_no_copy_print||console.info(this.info,"\n            font-size: 18px;\n            font-weight: 1000;\n            line-height: 1;\n            color: rgb(0, 120, 215);\n            padding-top: 20px;\n            padding-bottom: 10px;\n            ","\n            font-size: 10px;\n            font-weight: 1000;\n            color: rgb(0, 120, 215);\n            ","\n            font-size: 10px;\n            line-height: 1.5;\n            color: rgb(0, 120, 215);\n            padding-bottom: 2px;\n            padding-left: 35px;\n            ")}}),window.g_xe2CopyRights=window.g_xe2CopyRights||{},window.g_xe2CopyRights[o]=t.copyright},80796:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.DoWithAllowPickingOnCreating=void 0;var i=r(43938),c=r(19239),a=function(e){function t(t,r){var n=e.call(this)||this;return n._projectManager=r,"pickedEvent"in t&&n._projectManager.allowPickingOnCreating&&Reflect.has(t,"allowPicking")&&(t.allowPicking=!0),n}return o(t,e),t}(c.Destroyable),s=function(e){function t(t){var r=e.call(this)||this;return r._projectManager=t,r._sol=r.disposeVar(new i.SceneObjectsListening(r._projectManager.sceneObjectsManager,(function(e){return new a(e,r._projectManager)}))),r}return o(t,e),t}(c.Destroyable);t.DoWithAllowPickingOnCreating=s},9116:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectConfig=void 0;var i=r(43938),c=r(19239),a=function(e){function t(t){var r=e.call(this)||this;return r._projectManager=t,r._settings=r.disposeVar((0,c.reactJson)({positionsEditing:i.PositionsEditing.defaultConfig,positionEditing:i.PositionEditing.defaultConfig})),r}return o(t,e),Object.defineProperty(t.prototype,"settings",{get:function(){return this._settings.value},set:function(e){this._settings.value=e,console.error("抱歉本方法已失效，未来会移除，请使用最新的defaultConfig的方式来设置编辑交互配置！https://www.wolai.com/vtxf/vYh5xrcX7CN5jfWBPwBLKg")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"settingsChanged",{get:function(){return this._settings.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"projectManager",{get:function(){return this._projectManager},enumerable:!1,configurable:!0}),t}(c.Destroyable);t.ProjectConfig=a},28745:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneObjectEditingManager=t.SceneObjectEditing=void 0;var a=r(19239);function s(e,t,r,n){if(r)n.currentActiveEditing=[e,t];else if(n.currentActiveEditing){var o=i(n.currentActiveEditing,2),c=o[0],a=o[1];c===e&&a===t&&(r||(n.currentActiveEditing=void 0))}}var u=["editing","positionEditing","locationEditing","pointEditing"],l=function(e){function t(t,r){var n,o,i=e.call(this)||this;i._sceneObject=t;var a=i._sceneObject,l=function(e){var t=a[e+"Changed"];if(t){var n=a[e];s(a,e,n,r),f.dispose(t.disposableOn((function(t){return s(a,e,t,r)})))}},f=this;try{for(var p=c(u),d=p.next();!d.done;d=p.next())l(d.value)}catch(e){n={error:e}}finally{try{d&&!d.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}return i}return o(t,e),Object.defineProperty(t.prototype,"sceneObject",{get:function(){return this._sceneObject},enumerable:!1,configurable:!0}),t}(a.Destroyable);t.SceneObjectEditing=l;var f=function(e){function t(t){var r=e.call(this)||this;r._sceneObjectsManager=t,r._currentActiveEditing=r.disposeVar((0,a.reactArrayWithUndefined)(void 0)),r._currentActiveEditingLastChangedTime=0;var n=r._sceneObjectsManager;r.dispose(r._currentActiveEditing.changed.disposableOn((function(e,t){if(r._currentActiveEditingLastChangedTime=Date.now(),t){var n=i(t,2);!0===(o=n[0])[c=n[1]]&&(o[c]=!1)}if(e){var o,c,a=i(e,2);(o=a[0])[c=a[1]]=!0}})));var o=new Map,s=function(e,t){var n,i,a,s,u,f,p=r.currentActiveEditing&&r.currentActiveEditing[0];try{for(var d=c(e),h=d.next();!h.done;h=d.next())if((g=h.value)===p){r.currentActiveEditing=void 0;break}}catch(e){n={error:e}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}try{for(var b=c(e),y=b.next();!y.done;y=b.next()){var g=y.value;if(!(j=o.get(g)))throw new Error("!sceneObjectEditing");j.destroy(),o.delete(g)}}catch(e){a={error:e}}finally{try{y&&!y.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}try{for(var v=c(t),O=v.next();!O.done;O=v.next()){var j;if(g=O.value,j=o.get(g))throw new Error("sceneObjectEditing");o.set(g,new l(g,r))}}catch(e){u={error:e}}finally{try{O&&!O.done&&(f=v.return)&&f.call(v)}finally{if(u)throw u.error}}};return s([],n.sceneObjects),r.dispose(n.sceneObjectsToChange.disposableOn(s)),r}return o(t,e),Object.defineProperty(t.prototype,"currentActiveEditing",{get:function(){return this._currentActiveEditing.value},set:function(e){this._currentActiveEditing.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentActiveEditingChanged",{get:function(){return this._currentActiveEditing.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentActiveEditingLastChangedTime",{get:function(){return this._currentActiveEditingLastChangedTime},enumerable:!1,configurable:!0}),t}(a.Destroyable);t.SceneObjectEditingManager=f},49185:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SceneObjectsPicking=void 0;var i=r(43938),c=r(19239),a=function(e){function t(t){var r=e.call(this)||this;return r._sceneObjectsPicking=t,r._viewersPicking=r.disposeVar(i.ViewersPicking.create(r._sceneObjectsPicking.projectManager.sceneObjectsManager,r._sceneObjectsPicking.pointerEventFuncs)),r.dispose(r._viewersPicking.sceneObjectPickedEvent.disposableOn((function(e,t,n){r._sceneObjectsPicking.pickedFunc&&r._sceneObjectsPicking.pickedFunc(e,t,n),r._sceneObjectsPicking.pickedEvent.emit(e,t,n)}))),r}return o(t,e),Object.defineProperty(t.prototype,"viewersPicking",{get:function(){return this._viewersPicking},enumerable:!1,configurable:!0}),t}(c.Destroyable),s=function(e){function t(r){var n=e.call(this)||this;return n._projectManager=r,n.pickedFunc=function(e,r,o){t.pickedFuncs.edit(e,r,o,n._projectManager)},n._pickedEvent=n.disposeVar(new c.Event),n._pointerEventFuncs=n.disposeVar((0,c.react)([["click",function(e){return!e.altKey&&!e.ctrlKey}]])),n._viewersPickingResetting=n.disposeVar(new i.ObjResettingWithEvent(n.pointerEventFuncsChanged,(function(){return new a(n)}))),n}return o(t,e),Object.defineProperty(t.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointerEventFuncs",{get:function(){return this._pointerEventFuncs.value},set:function(e){this._pointerEventFuncs.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointerEventFuncsChanged",{get:function(){return this._pointerEventFuncs.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewersPickingResetting",{get:function(){return this._viewersPickingResetting},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"projectManager",{get:function(){return this._projectManager},enumerable:!1,configurable:!0}),t.pickedFuncs={edit:function(e,t,r,n){if(n.editingOnPicking){var o=e&&e.sceneObject;n.sceneObjectEditingManager.currentActiveEditing||(o&&(Reflect.has(o,"editing")?o.editing=!0:Reflect.has(o,"positionEditing")&&(o.positionEditing=!0)),n.selectSingleTreeItemWithSceneObject(o))}},info:function(e,t,r){var n=e&&e.sceneObject,o=n?"拾取到的场景对象的名称是：".concat(n.name):"没有拾取到场景对象！";alert(o)}},t}(c.Destroyable);t.SceneObjectsPicking=s},60915:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c},c=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneTreeWrapper=void 0;var s=r(19239),u=r(60434),l=r(44564),f=function(e){function t(t,r,n){var o=e.call(this)||this;o._projectManager=t,o._sceneTree=o.disposeVar(new u.SceneTree(r,o._projectManager.dragstartDataMananger,n,o._projectManager));var s=o._projectManager.sceneObjectsManager;return o.dispose(o.sceneTree.itemsDeleted.disposableOn((function(e){var t,r,n,o,u;try{for(var f=a(e),p=f.next();!p.done;p=f.next()){var d=p.value,h=d,b=h.sceneObject;b&&s.deleteSceneObject(b)&&b.destroy()&&(0,l.setSceneObjectTreeItem)(b,void 0);try{for(var y=(n=void 0,a(h.getDescendants())),g=y.next();!g.done;g=y.next()){var v=g.value.sceneObject;v&&s.deleteSceneObject(v)&&v.destroy()&&(0,l.setSceneObjectTreeItem)(v,void 0)}}catch(e){n={error:e}}finally{try{g&&!g.done&&(o=y.return)&&o.call(y)}finally{if(n)throw n.error}}c([u=d],i(u.getDescendants()),!1).forEach((function(e){return e.destroy()}))}}catch(e){t={error:e}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}}))),o.dispose(o.sceneTree.itemsAdded.disposableOn((function(e){var t,r,n,o;try{for(var i=a(e),c=i.next();!c.done;c=i.next()){var u=c.value;u.sceneObject&&s.addSceneObject(u.sceneObject)&&(0,l.setSceneObjectTreeItem)(u.sceneObject,u);try{for(var f=(n=void 0,a(u.getDescendants())),p=f.next();!p.done;p=f.next()){var d=p.value;d.sceneObject&&s.addSceneObject(d.sceneObject)&&(0,l.setSceneObjectTreeItem)(d.sceneObject,d)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}))),o.dispose(o.sceneTree.selectedItems.changedEvent.disposableOn((function(){if(o.showPropUiOnSelecting){o._projectManager.propUiTreeManager.sceneObject=void 0;var e=o.sceneTree.lastSelectedItem;e&&(o._projectManager.propUiTreeManager.sceneObject=e.sceneObject)}}))),o}return o(t,e),Object.defineProperty(t.prototype,"sceneTree",{get:function(){return this._sceneTree},enumerable:!1,configurable:!0}),t}(s.Destroyable);t.SceneTreeWrapper=f,function(e){e.createDefaultProps=function(){return{showPropUiOnSelecting:!0}}}(f=t.SceneTreeWrapper||(t.SceneTreeWrapper={})),t.SceneTreeWrapper=f,(0,s.extendClassProps)(f.prototype,f.createDefaultProps)},22265:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectManager=t.SceneObjectsPicking=void 0;var s=r(43938),u=r(19239),l=r(9207),f=r(16554),p=r(80796),d=r(9116),h=r(28745),b=r(60915),y=r(42286),g=r(44564),v=r(49185);Object.defineProperty(t,"SceneObjectsPicking",{enumerable:!0,get:function(){return v.SceneObjectsPicking}});var O=function(e){function t(t,r){void 0===r&&(r=24);var n=e.call(this)||this;return n._itemDivHeight=r,n._dragstartDataMananger=n.disposeVar(new f.DragStartDataManager),n._asset=n.disposeVar((0,u.createProps)({name:"未命名项目",createdTime:"",modifiedTime:""})),n._sceneObjectsManager=n.disposeVar(new s.SceneObjectsManager),n._sceneObjectEditingManager=n.disposeVar(new h.SceneObjectEditingManager(n._sceneObjectsManager)),n._viewersManager=n.disposeVar(new s.ViewersManager(n._sceneObjectsManager)),n._userCreatedSceneObjects=new Set,n._defaultSceneTreeWrapper=n.disposeVar(new b.SceneTreeWrapper(n,"default",n._itemDivHeight)),n._sceneTreeWrapperMap=new Map,n.updateSceneObjectOnPickingFunc=g.defaultUpdateSceneObjectOnPickingFunc,n.initSceneObjectOnCreatingFunc=g.defaultInitSceneObjectOnCreatingFunc,n._config=n.disposeVar(new d.ProjectConfig(n)),n._doWithAllowPickingOnCreating=n.disposeVar(new p.DoWithAllowPickingOnCreating(n)),n._sceneObjectsPicking=n.disposeVar(new v.SceneObjectsPicking(n)),n._propUiTreeManager=n.disposeVar(new l.PropUiTreeManager(n._itemDivHeight)),n.dispose((function(){n._userCreatedSceneObjects.size>0&&(console.warn("警告：存在用户自行创建的场景对象没有销毁！请在销毁ProjectManager之前提前调用destroySceneObject/destroyAllSceneObjects来完成场景对象的销毁！"),n.printAllUserCreatedSceneObjects(),n.destroyAllSceneObjects()),n.sceneTree.root.children&&n.sceneTree.root.children.length>0&&(console.warn("警告：有场景节点没有销毁！请在销毁ProjectManager之前提前调用destroySceneObjectTreeItem/destroyAllSceneObjectTreeItems来销毁场景节点！"),n.destroyAllSceneObjectTreeItems())})),n.defaultContainerOrId=t,n}return o(t,e),t.setEnv=function(e,t){s.SceneObject.context.setEnv(e,t)},t.getEnv=function(e){return s.SceneObject.context.getEnv(e)},t.envs=function(){return s.SceneObject.context.environmentVariables},Object.defineProperty(t.prototype,"dragstartDataMananger",{get:function(){return this._dragstartDataMananger},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"asset",{get:function(){return this._asset},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propUiTreeManager",{get:function(){return this._propUiTreeManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneObjectsManager",{get:function(){return this._sceneObjectsManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneObjectEditingManager",{get:function(){return this._sceneObjectEditingManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewersManager",{get:function(){return this._viewersManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userCreatedSceneObjects",{get:function(){return this._userCreatedSceneObjects},enumerable:!1,configurable:!0}),t.prototype.printAllUserCreatedSceneObjects=function(){var e,t;try{for(var r=i(this._userCreatedSceneObjects),n=r.next();!n.done;n=r.next()){var o=n.value,c=o.name,a=o.typeName,s=o.id;console.log("sceneObject name: ".concat(c," type: ").concat(a," id: ").concat(s))}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.propTreeCallback=function(e){return(0,y.propTreeCallback)(this,e)},Object.defineProperty(t.prototype,"defaultContainer",{get:function(){return this._viewersManager.defaultContainer},set:function(e){this._viewersManager.defaultContainer=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultContainerOrId",{set:function(e){this._viewersManager.defaultContainerOrId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultSceneTreeWrapper",{get:function(){return this._defaultSceneTreeWrapper},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneTree",{get:function(){return this._defaultSceneTreeWrapper.sceneTree},enumerable:!1,configurable:!0}),t.prototype.getSceneTreeWrapper=function(e,t){if(void 0===t&&(t=24),"default"===e)return this._defaultSceneTreeWrapper;if(!this._sceneTreeWrapperMap.has(e)){var r=this.disposeVar(new b.SceneTreeWrapper(this,e,t));this._sceneTreeWrapperMap.set(e,r)}return this._sceneTreeWrapperMap.get(e)},Object.defineProperty(t.prototype,"jsonLoadingEvent",{get:function(){return this._defaultSceneTreeWrapper.sceneTree.jsonLoadingEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doWithAllowPickingOnCreating",{get:function(){return this._doWithAllowPickingOnCreating},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneObjectsPicking",{get:function(){return this._sceneObjectsPicking},enumerable:!1,configurable:!0}),t.prototype._getJson=function(){return this.asset.modifiedTime=(new Date).toISOString(),{asset:{version:"0.1.0",createdTime:this.asset.createdTime,modifiedTime:this.asset.modifiedTime,name:this.asset.name},sceneTree:this.sceneTree.json}},Object.defineProperty(t.prototype,"json",{get:function(){return this._getJson()},set:function(e){this._setJson(e)},enumerable:!1,configurable:!0}),t.prototype._setJson=function(e){try{if("0.1.0"!==e.asset.version)return void console.warn("无法解析！");this.asset.createdTime=e.asset&&e.asset.createdTime||(new Date).toISOString(),this.asset.modifiedTime=e.asset&&e.asset.modifiedTime||"",this.asset.name=e.asset&&e.asset.name||"未命名项目",this.defaultSceneTreeWrapper.sceneTree.json=e.sceneTree||{}}catch(e){console.error("json数据装配时发生错误！error: ".concat(e))}},Object.defineProperty(t.prototype,"jsonStr",{get:function(){return JSON.stringify(this.json,void 0,"    ")},set:function(e){try{this.json=e&&JSON.parse(e)||{asset:{version:"0.1.0"}}}catch(e){console.error("ProjectManager解析json数据时发生错误！error: ".concat(e))}},enumerable:!1,configurable:!0}),t.prototype.createSceneObject=function(e,t){var r=s.SceneObject.create(e,t);if(r)return this.sceneObjectsManager.addSceneObject(r),this._userCreatedSceneObjects.add(r),r},t.prototype.createSceneObjectFromClass=function(e,t){var r=s.SceneObject.createFromClass(e,t);if(r)return this.sceneObjectsManager.addSceneObject(r),this._userCreatedSceneObjects.add(r),r},t.prototype.createSceneObjectFromJson=function(e){var t=s.SceneObject.createFromJson(e);if(t)return this.sceneObjectsManager.addSceneObject(t),this._userCreatedSceneObjects.add(t),t},t.prototype.destroySceneObject=function(e){this._userCreatedSceneObjects.delete(e),this.sceneObjectsManager.deleteSceneObject(e),e.destroy()},t.prototype.destroyAllSceneObjects=function(){var e,t,r=a([],c(this._userCreatedSceneObjects),!1);try{for(var n=i(r),o=n.next();!o.done;o=n.next()){var s=o.value;this.destroySceneObject(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.createSceneObjectTreeItem=function(e,t,r,n){return this.sceneTree.createSceneObjectTreeItem(e,t,r,n)},t.prototype.createGroupTreeItem=function(e,t,r,n){return this.sceneTree.createGroupTreeItem(e,t,r,n)},t.prototype.createSceneObjectTreeItemFromClass=function(e,t,r,n){return this.sceneTree.createSceneObjectTreeItemFromClass(e,t,r,n)},t.prototype.createSceneObjectTreeItemFromJson=function(e,t,r){return this.sceneTree.createSceneObjectTreeItemFromJson(e,t,r)},t.prototype.destroySceneObjectTreeItem=function(e){return this.sceneTree.destroySceneObjectTreeItem(e)},t.prototype.destroyAllSceneObjectTreeItems=function(){return this.sceneTree.destroyAllSceneObjectTreeItems()},t.prototype.getTreeItemFromSceneObject=function(e){return(0,g.getSceneObjectTreeItem)(e)},t.prototype.getSceneObjectById=function(e){return s.SceneObject.getSceneObjById(e)},t.prototype.selectSingleTreeItemWithSceneObject=function(e){if(this.sceneTree.uiTree.clearAllSelectedItems(),e){var t=(0,g.getSceneObjectTreeItem)(e);if(t){var r=t.uiTreeObject;r&&(r.selected=!0)}}},t.defaultUpdateSceneObjectOnPickingFunc=g.defaultUpdateSceneObjectOnPickingFunc,t.defaultInitSceneObjectOnCreatingFunc=g.defaultInitSceneObjectOnCreatingFunc,t}(u.Destroyable);t.ProjectManager=O,function(e){e.createDefaultProps=function(){return{currentPlayer:void 0,showPlayerView:!1,currentViewCollection:void 0,currenESCameraViewCollection:void 0,showESViewCollectionVue3UI:!1,showViewCollectionView:!1,currentESPlayer:void 0,showESPlayerVue3UI:!1,editingOnPicking:!0,allowPickingOnCreating:!0}}}(O=t.ProjectManager||(t.ProjectManager={})),t.ProjectManager=O,(0,u.extendClassProps)(O.prototype,O.createDefaultProps)},42286:function(e,t,r){var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c};Object.defineProperty(t,"__esModule",{value:!0}),t.propTreeCallback=void 0;var o=r(60434),i=r(16554),c=r(43938);function a(e){if(e.data){var t=e.data,r=t.type,n=t.value;if("UITreeA"===r&&n instanceof o.SceneTreeItem){var i=n.sceneObject;if(i)return i.id}}}t.propTreeCallback=function(e,t){var r=t.property,o=t.customEventName,s=t.otherParams,u=e.dragstartDataMananger;if(r instanceof c.PositionProperty);else if(r instanceof c.PositionsProperty);else if(r instanceof c.StringProperty){var l=n((0,i.getReactFuncs)(r.reactVar),2),f=(l[0],l[1]);if("ondragover"===o){if(console.log("ondragover"),!s)throw new Error("!otherParams");if((h=s[0]).preventDefault(),!h.dataTransfer)return;a(u)?h.dataTransfer.dropEffect="move":h.dataTransfer.dropEffect="none"}else if("ondrop"===o){if(!s)throw new Error("!otherParams");(h=s[0]).preventDefault(),void 0!==(d=a(u))&&f(d)}}else if(r instanceof c.StringsProperty){var p=n((0,i.getReactFuncs)(r.reactVar),2);if(p[0],f=p[1],"ondragover"===o){if(console.log("ondragover"),!s)throw new Error("!otherParams");if((h=s[0]).preventDefault(),!h.dataTransfer)return;a(u)?h.dataTransfer.dropEffect="move":h.dataTransfer.dropEffect="none"}else if("ondrop"===o){if(!s)throw new Error("!otherParams");var d,h=s[0].$event,b=s[0].strinsPropDom,y=s[0].index;if(h.preventDefault(),void 0!==(d=a(u))){b[y].firstChild.value=d;var g=new Event("input",{bubbles:!0,cancelable:!0});b[y].firstChild.dispatchEvent(g)}}}else if(r instanceof c.String2sProperty){var v=n((0,i.getReactFuncs)(r.reactVar),2);v[0],f=v[1]}}},75114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultInitSceneObjectOnCreatingFunc=void 0,t.defaultInitSceneObjectOnCreatingFunc=function(e){["Czm3DTiles","View","ESCameraView","OlView","GeoCameraController"].includes(e.typeName)||(Reflect.has(e,"editing")?e.editing=!0:Reflect.has(e,"positionEditing")&&(e.positionEditing=!0)),"function"==typeof e.execOnCreating&&e.execOnCreating()}},83785:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUpdateSceneObjectOnPickingFunc=void 0,t.defaultUpdateSceneObjectOnPickingFunc=function(e,t){t&&(Reflect.has(t,"editing")?t.editing=!0:Reflect.has(t,"positionEditing")&&(t.positionEditing=!0))}},44564:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(83785),t),o(r(75114),t),o(r(95443),t)},95443:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSceneObjectTreeItem=t.setSceneObjectTreeItem=void 0;var n=r(19239);t.setSceneObjectTreeItem=function(e,t){(0,n.getExtProp)(e,"__treeItem")&&console.error("setSceneObjectTreeItem error!"),(0,n.setExtProp)(e,"__treeItem",t)},t.getSceneObjectTreeItem=function(e){return(0,n.getExtProp)(e,"__treeItem")}},14101:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.PropTree=void 0;var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"propUiTree",{get:function(){return this.uiTree},enumerable:!1,configurable:!0}),t}(r(16554).Tree);t.PropTree=i},77852:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.GroupPropTreeItem=t.LeafPropTreeItem=t.BasePropTreeItem=void 0;var i=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o._property=n,o}return o(t,e),Object.defineProperty(t.prototype,"property",{get:function(){return this._property},enumerable:!1,configurable:!0}),t}(r(16554).TreeItem);t.BasePropTreeItem=i;var c=function(e){function t(t,r){return e.call(this,t,!1,r)||this}return o(t,e),t}(i);t.LeafPropTreeItem=c;var a=function(e){function t(t,r){return e.call(this,t,!0,r)||this}return o(t,e),Object.defineProperty(t.prototype,"groupChildren",{get:function(){return this.children},enumerable:!1,configurable:!0}),t}(i);t.GroupPropTreeItem=a},56906:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.PropUiTreeManager=t.createPropTreeFromSceneObject=void 0;var s=r(19239),u=r(43938),l=r(43938),f=r(10070),p=r(14101),d=r(77852);function h(e,t){var r,n,o,s,l=new p.PropTree(t),f=e.getProperties("chinese"),h=[],b=function(e){if(e instanceof u.GroupProperty){var t=new d.GroupPropTreeItem(l,e);t.dispose((function(){return e.destroy()})),l.children.push(t),h.push(t)}else{var r=new d.LeafPropTreeItem(l,e);l.children.push(r),r.dispose((function(){return e.destroy()}))}};try{for(var y=i(f),g=y.next();!g.done;g=y.next())b(g.value)}catch(e){r={error:e}}finally{try{g&&!g.done&&(n=y.return)&&n.call(y)}finally{if(r)throw r.error}}for(;h.length>0;){var v=h.pop();if(!v)throw new Error("should not be here!");var O=v;if(!(O.property instanceof u.GroupProperty))throw new Error("!(treeItem.property instanceof GroupProperty)");var j=function(e){if(e instanceof u.GroupProperty){var t=new d.GroupPropTreeItem(l,e);t.dispose((function(){return e.destroy()})),O.groupChildren.push(t),h.push(t)}else{var r=new d.LeafPropTreeItem(l,e);O.groupChildren.push(r),r.dispose((function(){return e.destroy()}))}};try{for(var _=(o=void 0,i(O.property.children)),m=_.next();!m.done;m=_.next())j(m.value)}catch(e){o={error:e}}finally{try{m&&!m.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}}return l.dispose((function(){l.itemChildrenChanged.reset(),l.itemChildrenToChange.reset();var e=a([],c(l.getDescendants()),!1);e.forEach((function(e){e.children&&(e.children.length=0),e.destroy()})),e.length=0})),l}t.createPropTreeFromSceneObject=h;var b=function(e){function t(t){var r=e.call(this)||this;return r._propTreeReact=r.disposeVar((0,s.react)(void 0)),r.dispose((function(){return r._propTreeReact.value=void 0})),r.disposeVar(new f.ObjResettingWithEvent(r.sceneObjectChanged,(function(e){if(e){var t=new s.Destroyable;return t.dispose(e.toDestroyEvent.disposableOn((function(){r.sceneObject=void 0}))),t}}))),r.dispose(r.sceneObjectChanged.disposableOn((function(e){r._propTreeReact.value=void 0,e&&e instanceof l.ESSceneObject&&(r._propTreeReact.value=h(e,t))}))),r}return o(t,e),Object.defineProperty(t.prototype,"propTree",{get:function(){return this._propTreeReact.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propTreeChanged",{get:function(){return this._propTreeReact.changed},enumerable:!1,configurable:!0}),t}(s.Destroyable);t.PropUiTreeManager=b,function(e){e.createDefaultProps=function(){return{sceneObject:void 0}}}(b=t.PropUiTreeManager||(t.PropUiTreeManager={})),t.PropUiTreeManager=b,(0,s.extendClassProps)(b.prototype,b.createDefaultProps)},9207:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(14101),t),o(r(77852),t),o(r(56906),t)},49658:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c},c=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneTree=void 0;var s=r(43938),u=r(16554),l=r(61978),f=r(46178),p=r(70552),d=r(37688),h=r(82618),b=r(58346),y=r(28883);function g(e){return e.name+"_clone"}function v(e,t,r){return e instanceof l.SceneTreeItem?e.insertNewTreeItem(t,r):e.insertNewTreeItem({FolderInnerOrAfter:"InnerOrAfter",FolderInnerOrBefore:"InnerOrBefore",FolderInner:"Inner",InnerOrAfter:"InnerOrAfter",InnerOrBefore:"InnerOrBefore",Inner:"Inner",After:"After",Before:"Before"}[t],r)}var O=function(e){function t(r,n,o,i){var c=e.call(this,o)||this;return c._name=r,c._dragStartDataManager=n,c._projectManager=i,c._jsonLoading=c.disposeVar(new f.SceneTreeJsonLoading(c)),c.createSceneObjectFunc=t.defaultCreateSceneObjectFunc,c.createTreeItemDragDropFunc=t.defaultCreateTreeItemDragDropFunc,c.preloadFunc=t.defaultPreload,c.getSceneObjectShowFunc=t.defaultGetSceneObjectShow,c.setSceneObjectShowFunc=t.defaultSetSceneObjectShow,c.getSceneTreeItemCloneNameFunc=t.defaultGetSceneTreeItemCloneNameFunc,c.debug=!1,c._contextMenu=c.disposeVar(new y.SceneTreeContextMenu(c,c.projectManager)),c.dispose(c.selectedItems.changedEvent.disposableOn((function(){var e,t;window.lssn=c.lastSelectedItem,window.lsso=null===(e=c.lastSelectedItem)||void 0===e?void 0:e.sceneObject,c.debug&&console.log(null===(t=c.lastSelectedItem)||void 0===t?void 0:t.sceneObject)}))),c}return o(t,e),Object.defineProperty(t.prototype,"json",{get:function(){return this._jsonLoading.json},set:function(e){this._jsonLoading.json=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"jsonStr",{get:function(){return this._jsonLoading.jsonStr},set:function(e){this._jsonLoading.jsonStr=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"jsonLoadingEvent",{get:function(){return this._jsonLoading.jsonLoadingEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"projectManager",{get:function(){return this._projectManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contextMenu",{get:function(){return this._contextMenu},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneUiTree",{get:function(){return this.uiTree},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragStartDataManager",{get:function(){return this._dragStartDataManager},enumerable:!1,configurable:!0}),t.prototype.getJson=function(){return{root:{children:c([],i(this.children),!1).map((function(e){return e.json}))}}},t.prototype.setJson=function(e){var t,r,n,o;e.root=e.root||{};var i=null!==(n=e.root.children)&&void 0!==n?n:[];this.root.resetChildren(!0);try{for(var c=a(i),s=c.next();!s.done;s=c.next()){var u=s.value,f=new l.SceneTreeItem(this,!0);f.json=u,null===(o=this.root.children)||void 0===o||o.push(f)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}},t.prototype.testAddNewTreeItem=function(e,t){var r=e||this.lastSelectedItem||this.root;return!!r&&v(r,t)},t.prototype.addNewTreeItem=function(e,t,r,n){var o=e||this.lastSelectedItem||this.root;if(o&&v(o,t)){var i=new l.SceneTreeItem(this,r);if(i.sceneObject=n,!v(o,t,i))throw new Error("currentTreeItem.insertNewTreeItem return false!");return i}},t.prototype.createSceneObjectTreeItem=function(e,t,r,n){var o=null!=n?n:"FolderInnerOrAfter";if(this.testAddNewTreeItem(r,o)){var i=s.SceneObject.create(e,t);if(i)return this.addNewTreeItem(r,null!=n?n:"FolderInnerOrAfter",!0,i)}else console.warn("cannot addNewTreeItem! currentTreeItem(".concat(r?r.id:"root",")"))},t.prototype.createGroupTreeItem=function(e,t,r,n){var o=null!=n?n:"FolderInnerOrAfter";if(this.testAddNewTreeItem(r,o)){var i=this.addNewTreeItem(r,null!=n?n:"FolderInnerOrAfter",!0);if(i)return i.name=null!=e?e:"未命名组节点",i;console.warn("addNewTreeItem error!")}else console.warn("cannot addNewTreeItem! currentTreeItem(".concat(r?r.id:"root",")"))},t.prototype.createSceneObjectTreeItemFromClass=function(e,t,r,n){var o=null!=n?n:"FolderInnerOrAfter";if(this.testAddNewTreeItem(r,o)){var i=s.SceneObject.createFromClass(e,t);if(i)return this.addNewTreeItem(r,o,!0,i)}},t.prototype.createSceneObjectTreeItemFromJson=function(e,t,r){var n=null!=r?r:"FolderInnerOrAfter";if(this.testAddNewTreeItem(t,n)){var o=s.SceneObject.createFromJson(e);if(o)return this.addNewTreeItem(t,null!=r?r:"FolderInnerOrAfter",!0,o)}},t.prototype.destroySceneObjectTreeItem=function(e){e!==this.root?e.detachFromParent():console.warn("cannot destroy root! please use function destroyAllSceneObjectTreeItems!")},t.prototype.destroyAllSceneObjectTreeItems=function(){var e,t;if(this.root.children){var r=c([],i(this.root.children),!1);try{for(var n=a(r),o=n.next();!o.done;o=n.next()){var s=o.value;this.destroySceneObjectTreeItem(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}}},t.defaultCreateSceneObjectFunc=p.defaultCreateSceneObject,t.defaultCreateTreeItemDragDropFunc=d.defaultCreateTreeItemDragDrop,t.defaultPreload=b.preload,t.defaultGetSceneObjectShow=h.getSceneObjectShow,t.defaultSetSceneObjectShow=h.setSceneObjectShow,t.defaultGetSceneTreeItemCloneNameFunc=g,t}(u.Tree);t.SceneTree=O},28883:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SceneTreeContextMenu=void 0;var i=r(19239),c=r(43938),a=function(e){function t(r,n){var o=e.call(this)||this;return o._sceneTree=r,o._projectManager=n,o.treeItemContexMenuCallback=t.defaultTreeItemContexMenuCallback,o}return o(t,e),Object.defineProperty(t.prototype,"sceneTree",{get:function(){return this._sceneTree},enumerable:!1,configurable:!0}),t.defaultPlayerTreeItemContexMenuCallback=function(e,t,r,n){if(t){var o=t.sceneObject;if(o&&o instanceof c.Player){var i={text:"详情面板",keys:"",func:function(){n.currentPlayer=o,n.showPlayerView=!0}};e.unshift(i)}}},t.defaultTreeItemContexMenuCallback=function(e,r,n,o){t.defaultPlayerTreeItemContexMenuCallback(e,r,n,o)},t}(i.Destroyable);t.SceneTreeContextMenu=a},61978:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneTreeItem=void 0;var s=r(19239),u=r(16554),l=r(10070);function f(e){var t=e.children&&(0,s.every)(e.children,(function(e){if(!(e instanceof p))throw new Error("!(treeItem instanceof SceneTreeItem)");return!e.show}))||!1,r=e.sceneTree.getSceneObjectShowFunc(e.sceneObject);return!t||r}var p=function(e){function t(r,n,o){void 0===n&&(n=!1);var c,a=e.call(this,r,n,o)||this;a._showChangedNotAffectChildren=!1,a._showChangedNotAffectParent=!1,a._type=a.disposeVar((0,s.react)("Unknown")),a.dispose(a.nameChanged.disposableOn((function(){return a.tree&&a.tree.itemsChanged.emit([a])}))),a.name="未命名条目(".concat(a.id,")");var u=function(){c&&(c(),c=void 0)};a.dispose(u),a.dispose(a.sceneObjectChanged.disposableOn((function(e){u(),e&&(c=(0,s.bind)([a,"name"],[e,"name"]))}))),a.dispose(a.showChanged.disposableOn((function(e){var n,o;if(r.setSceneObjectShowFunc(a.sceneObject,e),a.tree&&a.tree.forceRedraw(),a.children&&!a._showChangedNotAffectChildren)try{for(var c=i(a.children),s=c.next();!s.done;s=c.next()){var u=s.value;u instanceof t&&(u._showChangedNotAffectParent=!0,u.show=e,u._showChangedNotAffectParent=!1)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}a.parent&&a.parent instanceof t&&!a._showChangedNotAffectParent&&(a.parent._showChangedNotAffectChildren=!0,a.parent.show=f(a.parent),a.parent._showChangedNotAffectChildren=!1)}))),a.disposeVar(new l.ObjResettingWithEvent(a.sceneObjectChanged,(function(){if(a.sceneObject){var e=new s.Destroyable;if("show"in a.sceneObject&&"showChanged"in a.sceneObject&&a.sceneObject.showChanged instanceof s.Event)(t=function(){a.show=r.getSceneObjectShowFunc(a.sceneObject)})(),e.dispose(a.sceneObject.showChanged.disposableOn(t));else if("enabled"in a.sceneObject&&"enabledChanged"in a.sceneObject&&a.sceneObject.enabledChanged instanceof s.Event){var t;(t=function(){a.show=r.getSceneObjectShowFunc(a.sceneObject)})(),e.dispose(a.sceneObject.enabledChanged.disposableOn(t))}return e}}))),a.childrenChangedEvent.disposableOn((function(){var e=f(a);a._showChangedNotAffectChildren=!0,a.show=e,a._showChangedNotAffectChildren=!1}));var p=function(){var e="Unknown";a.sceneObject?e=a.sceneObject.typeName:a.children&&(e="Folder"),a._type.value=e};return a.dispose(a.sceneObjectChanged.disposableOn(p)),a.dispose(a.childrenResetedEvent.disposableOn(p)),p(),a}return o(t,e),Object.defineProperty(t.prototype,"dragDrop",{get:function(){return this._dragDrop||(this._dragDrop=this.disposeVar(this.sceneTree.createTreeItemDragDropFunc(this))),this._dragDrop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"typeChanged",{get:function(){return this._type.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneTree",{get:function(){return this.tree},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"jsonStr",{get:function(){return JSON.stringify(this.json,void 0,"    ")},set:function(e){try{this.json=JSON.parse(e)}catch(e){console.error("sceneTreeItem.jsonStr error ".concat(e),e)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"json",{get:function(){return{name:this.name,show:!!this.show&&void 0,collapsed:!!this.uiTreeObject.collapsed||void 0,sceneObj:this.sceneObject&&this.sceneObject.json,children:this.children&&a([],c(this.children),!1).map((function(e){return e.json}))}},set:function(e){var r,n,o,c;if(void 0!==e.name&&(this.name=e.name),this._showChangedNotAffectChildren=!0,this._showChangedNotAffectParent=!0,this.show=null===(o=e.show)||void 0===o||o,this._showChangedNotAffectChildren=!1,this._showChangedNotAffectParent=!1,this.uiTreeObject.collapsed=null!==(c=e.collapsed)&&void 0!==c&&c,this.sceneObject=void 0,e.sceneObj&&(this.sceneObject=this.sceneTree.createSceneObjectFunc(e.sceneObj,this)),e.children){if(this.resetChildren(!0),!this.children)throw new Error("resetChildren(true) cannot get children!");try{for(var a=i(e.children),s=a.next();!s.done;s=a.next()){var u=s.value,l=new t(this.tree,!0);l.json=u,this.children.push(l)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}}},enumerable:!1,configurable:!0}),t.prototype.clone=function(){try{var e=new t(this.sceneTree,!!this.children);return e.json=this.json,e.name=this.sceneTree.getSceneTreeItemCloneNameFunc(this),e}catch(e){console.error("SceneTreeItem.clone error: ".concat(e),e)}},t.prototype.insertNewTreeItem=function(t,r){if("FolderInnerOrAfter"===t||"FolderInnerOrBefore"===t||"FolderInner"===t){if(r&&r.tree!==this.tree)return console.warn("newTreeItem.tree !== this.tree"),!1;if(this.children&&this.sceneObject&&t.startsWith("FolderInner"))return r&&this.children.push(r),!0;if("FolderInner"===t)return!1;if("FolderInnerOrAfter"===t)return e.prototype.insertNewTreeItem.call(this,"After",r);if("FolderInnerOrBefore"===t)return e.prototype.insertNewTreeItem.call(this,"Before",r);throw new Error("should not be here!")}return e.prototype.insertNewTreeItem.call(this,t,r)},t}(u.TreeItem);t.SceneTreeItem=p,function(e){e.createDefaultProps=function(){return{name:"未命名条目",nameEditing:!1,sceneObject:void 0,show:!0}}}(p=t.SceneTreeItem||(t.SceneTreeItem={})),t.SceneTreeItem=p,(0,s.extendClassProps)(p.prototype,p.createDefaultProps)},16220:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c},c=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneTreeItemDragDrop=void 0;var a=r(10070);function s(e,t,r){var n=t.offsetY;return t.target&&"clientTop"in t.target?(n+=2,n+=t.target.clientTop,e.children?n<=.3*r?"before":n>=.7*r?!e.uiTreeObject.collapsed&&e.children.length>0?"inner":"after":"inner":n<=.5*r?"before":"after"):"none"}var u=function(e){function t(t){var r=e.call(this)||this;r._treeItem=t;var n=r._treeItem.sceneTree.dragStartDataManager,o="none",u=r.disposeVar((0,a.createTimeoutWithStartValues)((function(){r._treeItem.uiTreeObject.moveToPositionMode=o,console.log("uiTreeObject.moveToPositionMode = lastDragMode(".concat(o,");"))}),200));function l(e){o!==e&&(o=e,u.restart())}return r.dispose(r._dragStartEvent.disposableOn((function(e){n.data={type:"UITreeA",value:r._treeItem}}))),r.dispose(r._dragOverEvent.disposableOn((function(e){if(e.dataTransfer){e.preventDefault();do{var t=n;if(!t.data||"UITreeA"!==t.data.type||void 0===t.data.value)break;var o=t.data.value,u=r._treeItem,f=u.tree;if(!f)break;var p=c([],i(f.selectedItems),!1);~p.indexOf(o)||p.push(o);var d=s(u,e,f.itemDivHeight);if("none"===d)break;if(!a.Tree.canMoveToTreeItems(p,u,d))break;return e.dataTransfer.dropEffect="move",void l(d)}while(0);e.dataTransfer.dropEffect="none",l("none")}}))),r.dispose(r._dropEvent.disposableOn((function(e){var t=n;if(t.data&&"UITreeA"===t.data.type&&void 0!==t.data.value){var o=t.data.value,u=r._treeItem,f=u.tree;if(f){var p=c([],i(f.selectedItems),!1);~p.indexOf(o)||p.push(o);var d=s(u,e,f.itemDivHeight);"none"!==d&&a.Tree.canMoveToTreeItems(p,u,d)&&(a.Tree.moveToTreeItems(p,u,d),t.data=void 0,l("none"))}}}))),r.dispose(r._dragLeaveEvent.disposableOn((function(){o="none",u.restart()}))),r}return o(t,e),t}(r(52371).TreeItemDragDrop);t.SceneTreeItemDragDrop=u},46178:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function c(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(c,a)}s((n=n.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var r,n,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneTreeJsonLoading=void 0;var a=r(19239),s=r(10070),u=function(e){function t(t){var r=e.call(this)||this;return r._sceneTree=t,r._jsonLoadingEvent=r.disposeVar(new a.Event),r._setJsonProcessing=r.disposeVar((0,s.createProcessingFromAsyncFunc)((function(e,t){return i(r,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return this._jsonLoadingEvent.emit({type:"init"}),this._jsonLoadingEvent.emit({type:"loading"}),t?[4,e.promise(this._sceneTree.preloadFunc(t))]:[3,2];case 1:r.sent(),r.label=2;case 2:return this._setJson(t),this._jsonLoadingEvent.emit({type:"loaded"}),[2]}}))}))}))),r._setJsonProcessing.errorFunc=function(e){r._jsonLoadingEvent.emit({type:"error",error:e})},r}return o(t,e),Object.defineProperty(t.prototype,"jsonLoadingEvent",{get:function(){return this._jsonLoadingEvent},enumerable:!1,configurable:!0}),t.prototype._setJson=function(e){try{this._sceneTree.setJson(e||{})}catch(e){console.error("json数据装配时发生错误！error: ".concat(e))}},Object.defineProperty(t.prototype,"json",{get:function(){return this._sceneTree.getJson()},set:function(e){this._setJsonProcessing.restart(new s.CancelError("JSON重新赋值！"),e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"jsonStr",{get:function(){return JSON.stringify(this.json,void 0,"    ")},set:function(e){this.json=JSON.parse(e)},enumerable:!1,configurable:!0}),t}(a.Destroyable);t.SceneTreeJsonLoading=u},70552:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCreateSceneObject=void 0;var n=r(43938);t.defaultCreateSceneObject=function(e,t){var r=e.type,o=e.id;if(r){var i=n.SceneObject.create(r,o);if(i)return i.json=e,i;console.warn("cannot create sceneObject from type(".concat(r,")"))}else console.warn("cannot create sceneObject from type(".concat(r,")"))}},37688:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCreateTreeItemDragDrop=void 0;var n=r(61978),o=r(16220);t.defaultCreateTreeItemDragDrop=function(e){if(!(e instanceof n.SceneTreeItem))throw new Error("defaultCreateTreeItemDragDrop !(treeItem instanceof SceneTreeItem)");return new o.SceneTreeItemDragDrop(e)}},82618:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setSceneObjectShow=t.getSceneObjectShow=void 0,t.getSceneObjectShow=function(e){var t,r,n=!1;do{if(!e)break;"show"in e?n=null===(t=e.show)||void 0===t||t:"enabled"in e&&(n=null===(r=e.enabled)||void 0===r||r)}while(0);return n},t.setSceneObjectShow=function(e,t){e&&("show"in e?e.show=t:"enabled"in e&&(e.enabled=t))}},60434:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(49658),t),o(r(61978),t),o(r(16220),t),o(r(52371),t),o(r(28883),t)},58346:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function c(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(c,a)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.preload=void 0;var c=r(43938),a=["EnvironmentVariables","ScriptsLoader","SceneScript"];t.preload=function(e,t){var r,s;return n(this,void 0,void 0,(function(){var n,u,l,f,p,d,h,b,y,g,v,O,j,_,m;return o(this,(function(o){switch(o.label){case 0:n=function(e){for(var t,r,n=[],o=e.root,c=[void 0===o?{}:o];c.length>0;){var s=c.pop();if(!s)throw new Error("!todo");if(s.children)try{for(var u=(t=void 0,i(s.children)),l=u.next();!l.done;l=u.next()){var f=l.value;if(f.children&&c.unshift(f),f.sceneObj){var p=f.sceneObj.type,d=void 0===p?void 0:p;d||(console.warn("sceneObjJson has no type! treeItem.sceneObj: "),console.warn(f.sceneObj)),d&&a.includes(d)&&n.push(f.sceneObj)}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}}return n}(e),u=0,l=n.length,o.label=1;case 1:o.trys.push([1,19,20,21]),f=i(n),p=f.next(),o.label=2;case 2:return p.done?[3,18]:(d=p.value,"EnvironmentVariables"!==(h=d).type?[3,3]:(null==(b=c.SceneObject.createFromJson(h))||b.destroy(),[3,16]));case 3:return"ScriptLoader"!==h.type?[3,7]:(y=c.SceneObject.createFromJson(h))?null===(r=y.enabled)||void 0===r||r?[4,y.load()]:[3,5]:[3,6];case 4:o.sent(),o.label=5;case 5:y.destroy(),o.label=6;case 6:return[3,16];case 7:return"ScriptsLoader"!==h.type?[3,11]:(g=c.SceneObject.createFromJson(h))?null===(s=g.enabled)||void 0===s||s?[4,g.load()]:[3,9]:[3,10];case 8:o.sent(),o.label=9;case 9:g.destroy(),o.label=10;case 10:return[3,16];case 11:return"SceneScript"!==h.type?[3,15]:(v=c.SceneObject.createFromJson(h))?v.runOnLoaded&&(O=v.exec())instanceof Promise?[4,O]:[3,13]:[3,14];case 12:o.sent(),o.label=13;case 13:v.destroy(),o.label=14;case 14:return[3,16];case 15:console.warn("preload warn：sceneObjJson.type: ".concat(h.type," cannot be handled!")),o.label=16;case 16:++u,t&&t(u/l,u,l),o.label=17;case 17:return p=f.next(),[3,2];case 18:return[3,21];case 19:return j=o.sent(),_={error:j},[3,21];case 20:try{p&&!p.done&&(m=f.return)&&m.call(f)}finally{if(_)throw _.error}return[7];case 21:return[2]}}))}))}},43019:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.DragStartDataManager=void 0;var i=r(19239),c=function(e){function t(){var t=e.call(this)||this;return t._data=t.disposeVar((0,i.react)(void 0)),t}return o(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data.value},set:function(e){this._data.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChanged",{get:function(){return this._data.changed},enumerable:!1,configurable:!0}),t}(i.Destroyable);t.DragStartDataManager=c},52371:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TreeItemDragDrop=void 0;var i=r(19239),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._dragStartEvent=t.disposeVar(new i.Event),t._dragOverEvent=t.disposeVar(new i.Event),t._dragLeaveEvent=t.disposeVar(new i.Event),t._dropEvent=t.disposeVar(new i.Event),t}return o(t,e),t.prototype.dragStart=function(e){this._dragStartEvent.emit(e)},t.prototype.dragOver=function(e){this._dragOverEvent.emit(e)},t.prototype.dragLeave=function(e){this._dragLeaveEvent.emit(e)},t.prototype.drop=function(e){this._dropEvent.emit(e)},t}(i.Destroyable);t.TreeItemDragDrop=c},16554:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.moveToTreeItem=t.getReactFuncs=t.canMoveToTreeItem=t.UiTreeObject=t.UiTree=t.TreeItem=t.Tree=void 0;var i=r(10070);Object.defineProperty(t,"Tree",{enumerable:!0,get:function(){return i.Tree}}),Object.defineProperty(t,"TreeItem",{enumerable:!0,get:function(){return i.TreeItem}}),Object.defineProperty(t,"UiTree",{enumerable:!0,get:function(){return i.UiTree}}),Object.defineProperty(t,"UiTreeObject",{enumerable:!0,get:function(){return i.UiTreeObject}}),Object.defineProperty(t,"canMoveToTreeItem",{enumerable:!0,get:function(){return i.canMoveToTreeItem}}),Object.defineProperty(t,"getReactFuncs",{enumerable:!0,get:function(){return i.getReactFuncs}}),Object.defineProperty(t,"moveToTreeItem",{enumerable:!0,get:function(){return i.moveToTreeItem}}),o(r(43019),t),o(r(52371),t)},57619:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.copyright=void 0,(0,r(10070).registerScript)();var i=r(99256);Object.defineProperty(t,"copyright",{enumerable:!0,get:function(){return i.copyright}}),i.copyright.print(),o(r(22265),t),o(r(60434),t),o(r(9207),t),o(r(16554),t)},43938:e=>{e.exports=require("../xe2-base-objects")},19239:e=>{e.exports=require("../xe2-base-utils")},10070:e=>{e.exports=require("../xe2-utils")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.j=90;var n=r(57619);module.exports=n})();