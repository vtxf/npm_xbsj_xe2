/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={25913:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(51208)),o=i(n(93737)),s=i(n(31013)),a=n(84102),l=n(10611);e.default=function(t,e,n){void 0===n&&(n={});for(var i=l.getGeom(t).coordinates,u=0,c=0;c<i.length&&!(e>=u&&c===i.length-1);c++){if(u>=e){var h=e-u;if(h){var p=r.default(i[c],i[c-1])-180;return o.default(i[c],h,p,n)}return a.point(i[c])}u+=s.default(i[c],i[c+1],n)}return a.point(i[i.length-1])}},8517:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(51208)),o=n(84102),s=i(n(16912));e.default=function(t,e,n,i){if(void 0===i&&(i={}),!o.isObject(i))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var a=t,l=e,u=n,c=o.bearingToAzimuth(!0!==i.mercator?r.default(a,l):s.default(a,l)),h=o.bearingToAzimuth(!0!==i.mercator?r.default(u,l):s.default(u,l)),p=Math.abs(c-h);return!0===i.explementary?360-p:p}},41070:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(31540),r=6378137;function o(t){var e=0;if(t&&t.length>0){e+=Math.abs(s(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(s(t[n]))}return e}function s(t){var e,n,i,o,s,l,u=0,c=t.length;if(c>2){for(l=0;l<c;l++)l===c-2?(i=c-2,o=c-1,s=0):l===c-1?(i=c-1,o=0,s=1):(i=l,o=l+1,s=l+2),e=t[i],n=t[o],u+=(a(t[s][0])-a(e[0]))*Math.sin(a(n[1]));u=u*r*r/2}return u}function a(t){return t*Math.PI/180}e.default=function(t){return i.geomReduce(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return o(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=o(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}},30173:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102),r=n(10611),o=n(41383);function s(t,e){for(var n=[],i=0,r=t;i<r.length;i++){var s=r[i],a=o.polygonclip(s,e);a.length>0&&(a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]||a.push(a[0]),a.length>=4&&n.push(a))}return n}e.default=function(t,e){var n=r.getGeom(t),a=n.type,l="Feature"===t.type?t.properties:{},u=n.coordinates;switch(a){case"LineString":case"MultiLineString":var c=[];return"LineString"===a&&(u=[u]),u.forEach((function(t){o.lineclip(t,e,c)})),1===c.length?i.lineString(c[0],l):i.multiLineString(c,l);case"Polygon":return i.polygon(s(u,e),l);case"MultiPolygon":return i.multiPolygon(u.map((function(t){return s(t,e)})),l);default:throw new Error("geometry "+a+" not supported")}}},41383:(t,e)=>{"use strict";function n(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function i(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}Object.defineProperty(e,"__esModule",{value:!0}),e.lineclip=function(t,e,r){var o,s,a,l,u,c=t.length,h=i(t[0],e),p=[];for(r||(r=[]),o=1;o<c;o++){for(l=t[o-1],s=a=i(u=t[o],e);;){if(!(h|s)){p.push(l),s!==a?(p.push(u),o<c-1&&(r.push(p),p=[])):o===c-1&&p.push(u);break}if(h&s)break;h?h=i(l=n(l,u,h,e),e):s=i(u=n(l,u,s,e),e)}h=a}return p.length&&r.push(p),r},e.polygonclip=function(t,e){var r,o,s,a,l,u,c;for(o=1;o<=8;o*=2){for(r=[],a=!(i(s=t[t.length-1],e)&o),l=0;l<t.length;l++)(c=!(i(u=t[l],e)&o))!==a&&r.push(n(s,u,o,e)),c&&r.push(u),s=u,a=c;if(!(t=r).length)break}return r}},13652:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102);e.default=function(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),o=Number(t[2]),s=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r],l=[n,s],u=[o,s],c=[o,r];return i.polygon([[a,c,u,l,a]],e.properties,{bbox:t,id:e.id})}},9705:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(31540);function r(t){var e=[1/0,1/0,-1/0,-1/0];return i.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}r.default=r,e.default=r},51208:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102),r=n(10611);e.default=function t(e,n,o){if(void 0===o&&(o={}),!0===o.final)return function(e,n){var i=t(n,e);return(i+180)%360}(e,n);var s=r.getCoord(e),a=r.getCoord(n),l=i.degreesToRadians(s[0]),u=i.degreesToRadians(a[0]),c=i.degreesToRadians(s[1]),h=i.degreesToRadians(a[1]),p=Math.sin(u-l)*Math.cos(h),d=Math.cos(c)*Math.sin(h)-Math.sin(c)*Math.cos(h)*Math.cos(u-l);return i.radiansToDegrees(Math.atan2(p,d))}},97478:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=n(10611),s=i(n(50915));e.default=function(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,i=e.sharpness||.85,a=[],l=o.getGeom(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),u=new s.default({duration:n,points:l,sharpness:i}),c=function(t){var e=u.pos(t);Math.floor(t/100)%2==0&&a.push([e.x,e.y])},h=0;h<u.duration;h+=10)c(h);return c(u.duration),r.lineString(a,e.properties)}},50915:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(t,e,n,i,r){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])},t}();e.default=n},3809:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10611);e.default=function(t){for(var e,n,r=i.getCoords(t),o=0,s=1;s<r.length;)e=n||r[0],o+=((n=r[s])[0]-e[0])*(n[1]+e[1]),s++;return o>0}},72584:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(9705)),o=i(n(88147)),s=i(n(72793)),a=n(10611);function l(t,e){var n,i=!1;for(n=0;n<t.coordinates.length;n++)if(y(t.coordinates[n],e.coordinates)){i=!0;break}return i}function u(t,e){for(var n=0,i=e.coordinates;n<i.length;n++){for(var r=i[n],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(y(r,a[s])){o=!0;break}if(!o)return!1}return!0}function c(t,e){for(var n=!1,i=0,r=e.coordinates;i<r.length;i++){var o=r[i];if(s.default(o,t,{ignoreEndVertices:!0})&&(n=!0),!s.default(o,t))return!1}return!!n}function h(t,e){for(var n=0,i=e.coordinates;n<i.length;n++){var r=i[n];if(!o.default(r,t,{ignoreBoundary:!0}))return!1}return!0}function p(t,e){for(var n=!1,i=0,r=e.coordinates;i<r.length;i++){var o=r[i];if(s.default({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!s.default({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}function d(t,e){var n=!1,i=0;if(!g(r.default(t),r.default(e)))return!1;for(;i<e.coordinates.length-1;i++){var s=_(e.coordinates[i],e.coordinates[i+1]);if(o.default({type:"Point",coordinates:s},t,{ignoreBoundary:!0})){n=!0;break}}return n}function f(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!g(r.default(t),r.default(e)))return!1;for(var n=0,i=a.getGeom(e).coordinates;n<i.length;n++)for(var s=0,l=i[n];s<l.length;s++){var u=l[s];if(!o.default(u,t))return!1}return!0}function g(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function y(t,e){return t[0]===e[0]&&t[1]===e[1]}function _(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}e.default=function(t,e){var n=a.getGeom(t),i=a.getGeom(e),r=n.type,g=i.type,_=n.coordinates,m=i.coordinates;switch(r){case"Point":if("Point"===g)return y(_,m);throw new Error("feature2 "+g+" geometry not supported");case"MultiPoint":switch(g){case"Point":return l(n,i);case"MultiPoint":return u(n,i);default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return s.default(i,n,{ignoreEndVertices:!0});case"LineString":return p(n,i);case"MultiPoint":return c(n,i);default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return o.default(i,n,{ignoreBoundary:!0});case"LineString":return d(n,i);case"Polygon":return f(n,i);case"MultiPoint":return h(n,i);default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},e.isPointInMultiPoint=l,e.isMultiPointInMultiPoint=u,e.isMultiPointOnLine=c,e.isMultiPointInPoly=h,e.isLineOnLine=p,e.isLineInPoly=d,e.isPolyInPoly=f,e.doBBoxOverlap=g,e.compareCoords=y,e.getMidpoint=_},17656:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(73663)),o=n(97383),s=i(n(88147)),a=n(10611),l=n(84102);function u(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),p(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:i=!0}o++}return n&&i}function c(t,e){var n=o.polygonToLine(e);return r.default(t,n).features.length>0}function h(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&(!n||!i);o++)s.default(l.point(t.coordinates[o]),e)?n=!0:i=!0;return i&&n}function p(t,e,n,i){var r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==r*a-o*s&&(i?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}e.default=function(t,e){var n=a.getGeom(t),i=a.getGeom(e),o=n.type,s=i.type;switch(o){case"MultiPoint":switch(s){case"LineString":return u(n,i);case"Polygon":return h(n,i);default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"MultiPoint":return u(i,n);case"LineString":return function(t,e){if(r.default(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var i=0;i<e.coordinates.length-1;i++){var o=!0;if(0!==i&&i!==e.coordinates.length-2||(o=!1),p(t.coordinates[n],t.coordinates[n+1],e.coordinates[i],o))return!0}return!1}(n,i);case"Polygon":return c(n,i);default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"MultiPoint":return h(i,n);case"LineString":return c(i,n);default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+o+" geometry not supported")}}},55883:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(88147)),o=i(n(73663)),s=n(31540),a=i(n(97383));function l(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(c(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function u(t,e){for(var n=0,i=e.coordinates;n<i.length;n++){var s=i[n];if(r.default(s,t))return!0}return o.default(e,a.default(t)).features.length>0}function c(t,e,n){var i=n[0]-t[0],r=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==i*s-r*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}e.default=function(t,e){var n=!0;return s.flattenEach(t,(function(t){s.flattenEach(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return s=t.coordinates,c=e.coordinates,!(s[0]===c[0]&&s[1]===c[1]);case"LineString":return!l(e,t);case"Polygon":return!r.default(t,e)}break;case"LineString":switch(e.type){case"Point":return!l(t,e);case"LineString":return n=t,i=e,!(o.default(n,i).features.length>0);case"Polygon":return!u(e,t)}break;case"Polygon":switch(e.type){case"Point":return!r.default(e,t);case"LineString":return!u(t,e);case"Polygon":return!function(t,e){for(var n=0,i=t.coordinates[0];n<i.length;n++){var s=i[n];if(r.default(s,e))return!0}for(var l=0,u=e.coordinates[0];l<u.length;l++){var c=u[l];if(r.default(c,t))return!0}return o.default(a.default(t),a.default(e)).features.length>0}(e,t)}}var n,i,s,c;return!1}(t.geometry,e.geometry)}))})),n}},39482:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(29657)),o=i(n(71435)),s=n(10611);e.default=function(t,e){return s.getGeom(t).type===s.getGeom(e).type&&new r.default({precision:6}).compare(o.default(t),o.default(e))}},84255:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(55883)),o=n(31540);e.default=function(t,e){var n=!1;return o.flattenEach(t,(function(t){o.flattenEach(e,(function(e){if(!0===n)return!0;n=!r.default(t.geometry,e.geometry)}))})),n}},57612:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(31540),o=n(10611),s=i(n(90273)),a=i(n(73663)),l=i(n(29657));e.default=function(t,e){var n=o.getGeom(t),i=o.getGeom(e),u=n.type,c=i.type;if("MultiPoint"===u&&"MultiPoint"!==c||("LineString"===u||"MultiLineString"===u)&&"LineString"!==c&&"MultiLineString"!==c||("Polygon"===u||"MultiPolygon"===u)&&"Polygon"!==c&&"MultiPolygon"!==c)throw new Error("features must be of the same type");if("Point"===u)throw new Error("Point geometry not supported");if(new l.default({precision:6}).compare(t,e))return!1;var h=0;switch(u){case"MultiPoint":for(var p=0;p<n.coordinates.length;p++)for(var d=0;d<i.coordinates.length;d++){var f=n.coordinates[p],g=i.coordinates[d];if(f[0]===g[0]&&f[1]===g[1])return!0}return!1;case"LineString":case"MultiLineString":r.segmentEach(t,(function(t){r.segmentEach(e,(function(e){s.default(t,e).features.length&&h++}))}));break;case"Polygon":case"MultiPolygon":r.segmentEach(t,(function(t){r.segmentEach(e,(function(e){a.default(t,e).features.length&&h++}))}))}return h>0}},24840:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(71435)),o=i(n(54590)),s=i(n(16912)),a=n(84102);function l(t,e){return a.bearingToAzimuth(s.default(t[0],t[1]))===a.bearingToAzimuth(s.default(e[0],e[1]))}function u(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}e.default=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==u(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==u(e,"line2"))throw new Error("line2 must be a LineString");for(var n=o.default(r.default(t)).features,i=o.default(r.default(e)).features,s=0;s<n.length;s++){var a=n[s].geometry.coordinates;if(!i[s])break;if(!l(a,i[s].geometry.coordinates))return!1}return!0}},88147:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10611);function r(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var s=e[r][0],a=e[r][1],l=e[o][0],u=e[o][1];if(t[1]*(s-l)+a*(l-t[0])+u*(t[0]-s)==0&&(s-t[0])*(l-t[0])<=0&&(a-t[1])*(u-t[1])<=0)return!n;a>t[1]!=u>t[1]&&t[0]<(l-s)*(t[1]-a)/(u-a)+s&&(i=!i)}return i}e.default=function(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var o=i.getCoord(t),s=i.getGeom(e),a=s.type,l=e.bbox,u=s.coordinates;if(l&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(o,l))return!1;"Polygon"===a&&(u=[u]);for(var c=!1,h=0;h<u.length&&!c;h++)if(r(o,u[h][0],n.ignoreBoundary)){for(var p=!1,d=1;d<u[h].length&&!p;)r(o,u[h][d],!n.ignoreBoundary)&&(p=!0),d++;p||(c=!0)}return c}},72793:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10611);function r(t,e,n,i,r){var o=n[0],s=n[1],a=t[0],l=t[1],u=e[0],c=e[1],h=u-a,p=c-l,d=(n[0]-a)*p-(n[1]-l)*h;if(null!==r){if(Math.abs(d)>r)return!1}else if(0!==d)return!1;return i?"start"===i?Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<=u:u<=o&&o<a:p>0?l<s&&s<=c:c<=s&&s<l:"end"===i?Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<u:u<o&&o<=a:p>0?l<=s&&s<c:c<s&&s<=l:"both"===i&&(Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<u:u<o&&o<a:p>0?l<s&&s<c:c<s&&s<l):Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<=u:u<=o&&o<=a:p>0?l<=s&&s<=c:c<=s&&s<=l}e.default=function(t,e,n){void 0===n&&(n={});for(var o=i.getCoord(t),s=i.getCoords(e),a=0;a<s.length-1;a++){var l=!1;if(n.ignoreEndVertices&&(0===a&&(l="start"),a===s.length-2&&(l="end"),0===a&&a+1===s.length-1&&(l="both")),r(s[a],s[a+1],o,l,void 0===n.epsilon?null:n.epsilon))return!0}return!1}},45184:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(9705)),o=i(n(72793)),s=i(n(88147)),a=n(10611);function l(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function u(t,e){return t[0]===e[0]&&t[1]===e[1]}e.default=function(t,e){var n=a.getGeom(t),i=a.getGeom(e),c=n.type,h=i.type;switch(c){case"Point":switch(h){case"MultiPoint":return function(t,e){var n,i=!1;for(n=0;n<e.coordinates.length;n++)if(u(e.coordinates[n],t.coordinates)){i=!0;break}return i}(n,i);case"LineString":return o.default(n,i,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return s.default(n,i,{ignoreBoundary:!0});default:throw new Error("feature2 "+h+" geometry not supported")}case"MultiPoint":switch(h){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var i=!1,r=0;r<e.coordinates.length;r++)u(t.coordinates[n],e.coordinates[r])&&(i=!0);if(!i)return!1}return!0}(n,i);case"LineString":return function(t,e){for(var n=!1,i=0;i<t.coordinates.length;i++){if(!o.default(t.coordinates[i],e))return!1;n||(n=o.default(t.coordinates[i],e,{ignoreEndVertices:!0}))}return n}(n,i);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,i=!1,r=0;r<t.coordinates.length;r++){if(!(i=s.default(t.coordinates[1],e))){n=!1;break}i=s.default(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(n,i);default:throw new Error("feature2 "+h+" geometry not supported")}case"LineString":switch(h){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!o.default(t.coordinates[n],e))return!1;return!0}(n,i);case"Polygon":case"MultiPolygon":return function(t,e){var n,i;if(!l(r.default(e),r.default(t)))return!1;for(var o=!1,a=0;a<t.coordinates.length-1;a++){if(!s.default(t.coordinates[a],e))return!1;if(o||(o=s.default(t.coordinates[a],e,{ignoreBoundary:!0})),!o){var u=(n=t.coordinates[a],i=t.coordinates[a+1],[(n[0]+i[0])/2,(n[1]+i[1])/2]);o=s.default(u,e,{ignoreBoundary:!0})}}return o}(n,i);default:throw new Error("feature2 "+h+" geometry not supported")}case"Polygon":switch(h){case"Polygon":case"MultiPolygon":return function(t,e){var n=r.default(t);if(!l(r.default(e),n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!s.default(t.coordinates[0][i],e))return!1;return!0}(n,i);default:throw new Error("feature2 "+h+" geometry not supported")}default:throw new Error("feature1 "+c+" geometry not supported")}}},35419:(t,e,n)=>{"use strict";var i=n(78230),r=n(25214),o=n(31540),s=n(41688),a=n(84102);function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(i);function c(t,e,n){var i=(n=n||{}).units||"kilometers",r=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var s=[];switch(t.type){case"GeometryCollection":return o.geomEach(t,(function(t){var n=h(t,e,i,r);n&&s.push(n)})),a.featureCollection(s);case"FeatureCollection":return o.featureEach(t,(function(t){var n=h(t,e,i,r);n&&o.featureEach(n,(function(t){t&&s.push(t)}))})),a.featureCollection(s)}return h(t,e,i,r)}function h(t,e,n,i){var l=t.properties||{},c="Feature"===t.type?t.geometry:t;if("GeometryCollection"===c.type){var g=[];return o.geomEach(t,(function(t){var r=h(t,e,n,i);r&&g.push(r)})),a.featureCollection(g)}var y=function(t){var e=u.default(t).geometry.coordinates,n=[-e[0],-e[1]];return s.geoAzimuthalEquidistant().rotate(n).scale(a.earthRadius)}(c),_={type:c.type,coordinates:d(c.coordinates,y)},m=(new r.GeoJSONReader).read(_),v=a.radiansToLength(a.lengthToRadians(e,n),"meters"),b=r.BufferOp.bufferOp(m,v,i);if(!p((b=(new r.GeoJSONWriter).write(b)).coordinates)){var x={type:b.type,coordinates:f(b.coordinates,y)};return a.feature(x,l)}}function p(t){return Array.isArray(t[0])?p(t[0]):isNaN(t[0])}function d(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return d(t,e)}))}function f(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return f(t,e)}))}t.exports=c,t.exports.default=c},76320:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(31540),r=n(84102);e.default=function(t,e){void 0===e&&(e={});var n=0,o=0,s=0;return i.geomEach(t,(function(t,a,l){var u=e.weight?null==l?void 0:l[e.weight]:void 0;if(u=null==u?1:u,!r.isNumber(u))throw new Error("weight value must be a number for feature index "+a);(u=Number(u))>0&&i.coordEach(t,(function(t){n+=t[0]*u,o+=t[1]*u,s+=u}))})),r.point([n/s,o/s],e.properties,e)}},12935:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(76320)),o=i(n(31013)),s=i(n(66338)),a=n(84102),l=n(31540);function u(t,e,n,i,r){var s=i.tolerance||.001,c=0,h=0,p=0,d=0;if(l.featureEach(n,(function(e){var n,i=null===(n=e.properties)||void 0===n?void 0:n.weight,r=null==i?1:i;if(r=Number(r),!a.isNumber(r))throw new Error("weight value must be a number");if(r>0){d+=1;var s=r*o.default(e,t);0===s&&(s=1);var l=r/s;c+=e.geometry.coordinates[0]*l,h+=e.geometry.coordinates[1]*l,p+=l}})),d<1)throw new Error("no features to measure");var f=c/p,g=h/p;return 1===d||0===r||Math.abs(f-e[0])<s&&Math.abs(g-e[1])<s?a.point([f,g],{medianCandidates:i.medianCandidates}):(i.medianCandidates.push([f,g]),u([f,g],t,n,i,r-1))}e.default=function(t,e){if(void 0===e&&(e={}),e=e||{},!a.isObject(e))throw new Error("options is invalid");var n=e.counter||10;if(!a.isNumber(n))throw new Error("counter must be a number");var i=e.weight,o=r.default(t,{weight:e.weight}),c=a.featureCollection([]);l.featureEach(t,(function(t){var e;c.features.push(s.default(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[i]}}))}));var h={tolerance:e.tolerance,medianCandidates:[]};return u(o.geometry.coordinates,[0,0],c,h,n)}},25084:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(77382)),o=i(n(66338)),s=n(84102),a=n(10611),l=n(31540);e.default=function t(e,n){switch(void 0===n&&(n={}),a.getType(e)){case"Point":return s.point(a.getCoord(e),n.properties);case"Polygon":var i=[];l.coordEach(e,(function(t){i.push(t)}));var u,c,h,p,d,f,g,y,_=o.default(e,{properties:n.properties}),m=_.geometry.coordinates,v=0,b=0,x=0,w=i.map((function(t){return[t[0]-m[0],t[1]-m[1]]}));for(u=0;u<i.length-1;u++)p=(c=w[u])[0],f=c[1],d=(h=w[u+1])[0],x+=y=p*(g=h[1])-d*f,v+=(p+d)*y,b+=(f+g)*y;if(0===x)return _;var E=1/(.5*x*6);return s.point([m[0]+E*v,m[1]+E*b],n.properties);default:var P=r.default(e);return P?t(P,{properties:n.properties}):o.default(e,{properties:n.properties})}}},78230:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(9705)),o=n(84102);e.default=function(t,e){void 0===e&&(e={});var n=r.default(t),i=(n[0]+n[2])/2,s=(n[1]+n[3])/2;return o.point([i,s],e.properties,e)}},66338:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(31540),r=n(84102);e.default=function(t,e){void 0===e&&(e={});var n=0,o=0,s=0;return i.coordEach(t,(function(t){n+=t[0],o+=t[1],s++}),!0),r.point([n/s,o/s],e.properties)}},90265:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(93737)),o=n(84102);e.default=function(t,e,n){void 0===n&&(n={});for(var i=n.steps||64,s=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},a=[],l=0;l<i;l++)a.push(r.default(t,e,-360*l/i,n).geometry.coordinates);return a.push(a[0]),o.polygon([a],s)}},71435:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102),r=n(10611);function o(t){var e=r.getCoords(t);if(2===e.length&&!s(e[0],e[1]))return e;var n=[],i=e.length-1,o=n.length;n.push(e[0]);for(var l=1;l<i;l++){var u=n[n.length-1];e[l][0]===u[0]&&e[l][1]===u[1]||(n.push(e[l]),(o=n.length)>2&&a(n[o-3],n[o-1],n[o-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),o=n.length,s(e[0],e[e.length-1])&&o<4)throw new Error("invalid polygon");return a(n[o-3],n[o-1],n[o-2])&&n.splice(n.length-2,1),n}function s(t,e){return t[0]===e[0]&&t[1]===e[1]}function a(t,e,n){var i=n[0],r=n[1],o=t[0],s=t[1],a=e[0],l=e[1],u=a-o,c=l-s;return 0==(i-o)*c-(r-s)*u&&(Math.abs(u)>=Math.abs(c)?u>0?o<=i&&i<=a:a<=i&&i<=o:c>0?s<=r&&r<=l:l<=r&&r<=s)}e.default=function(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var s=r.getType(t),a=[];switch(s){case"LineString":a=o(t);break;case"MultiLineString":case"Polygon":r.getCoords(t).forEach((function(t){a.push(o(t))}));break;case"MultiPolygon":r.getCoords(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(o(t))})),a.push(e)}));break;case"Point":return t;case"MultiPoint":var l={};r.getCoords(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(l,e)||(a.push(t),l[e]=!0)}));break;default:throw new Error(s+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=a,t):{type:s,coordinates:a}:!0===n?(t.geometry.coordinates=a,t):i.feature({type:s,coordinates:a},t.properties,{bbox:t.bbox,id:t.id})}},76565:(t,e)=>{"use strict";function n(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=i(t.properties),e.geometry=r(t.geometry),e}function i(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=i(r):e[n]=r})),e):e}function r(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return r(t)})),e):(e.coordinates=o(t.coordinates),e)}function o(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return o(t)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return n(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return n(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return r(t);default:throw new Error("unknown GeoJSON type")}}},61495:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(76565)),o=i(n(31013)),s=n(31540),a=n(84102),l=i(n(52606));e.default=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=r.default(t)),n.minPoints=n.minPoints||3;var i=new l.default.DBSCAN,u=i.run(s.coordAll(t),a.convertLength(e,n.units),n.minPoints,o.default),c=-1;return u.forEach((function(e){c++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=c,n.properties.dbscan="core"}))})),i.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t}},56398:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(76565)),o=n(31540),s=i(n(21160));e.default=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=r.default(t));var i=o.coordAll(t),a=i.slice(0,e.numberOfClusters),l=s.default(i,e.numberOfClusters,a),u={};return l.centroids.forEach((function(t,e){u[e]=t})),o.featureEach(t,(function(t,e){var n=l.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]})),t}},53140:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(31540),r=n(84102);function o(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var i=s(t,e),o=Object.keys(i),a=0;a<o.length;a++){for(var l=o[a],u=i[l],c=[],h=0;h<u.length;h++)c.push(t.features[u[h]]);n(r.featureCollection(c),l,a)}}function s(t,e){var n={};return i.featureEach(t,(function(t,i){var r=t.properties||{};if(Object.prototype.hasOwnProperty.call(r,String(e))){var o=r[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(i):n[o]=[i]}})),n}function a(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!a(t,e[i]))return!1;return!0}return l(t,e)}function l(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];if(t[r]!==e[r])return!1}return!0}e.getCluster=function(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return i.featureEach(t,(function(t){a(t.properties,e)&&n.push(t)})),r.featureCollection(n)},e.clusterEach=o,e.clusterReduce=function(t,e,n,i){var r=i;return o(t,e,(function(t,e,o){r=0===o&&void 0===i?t:n(r,t,e,o)})),r},e.createBins=s,e.applyFilter=a,e.propertiesContainsFilter=l,e.filterProperties=function(t,e){if(!e)return{};if(!e.length)return{};for(var n={},i=0;i<e.length;i++){var r=e[i];Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}},70305:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(9705)),o=i(n(88147)),s=i(n(67));e.default=function(t,e,n,i){var a=s.default(6),l=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}}));return a.load(l),t.features.forEach((function(t){t.properties||(t.properties={});var e=r.default(t),n=a.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),s=[];n.forEach((function(e){o.default([e.minX,e.minY],t)&&s.push(e.property)})),t.properties[i]=s})),t}},27269:function(t){t.exports=function(){"use strict";function t(n,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=i-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-l*c/a+h)),Math.min(o,Math.floor(i+(a-l)*c/a+h)),s)}var p=n[i],d=r,f=o;for(e(n,r,i),s(n[o],p)>0&&e(n,r,o);d<f;){for(e(n,d,f),d++,f--;s(n[d],p)<0;)d++;for(;s(n[f],p)>0;)f--}0===s(n[r],p)?e(n,r,f):e(n,++f,o),f<=i&&(r=f+1),i<=f&&(o=f-1)}}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}return function(e,i,r,o,s){t(e,i,r||0,o||e.length-1,s||n)}}()},67:(t,e,n)=>{"use strict";t.exports=r,t.exports.default=r;var i=n(27269);function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],l(r,t.leaf?i(o):o);return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,r,o){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((n-e)/r/2)*r,i(t,s,e,n,o),a.push(e,s,s,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!f(t,e))return n;for(var r,o,s,a,l=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],f(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):d(t,a)?this._all(s,n):l.push(s));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!f(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],f(t,s=e.leaf?n(o):o)){if(e.leaf||d(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,s,a=this.data,l=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),i=u[u.length-1],n=c.pop(),s=!0),a.leaf&&-1!==(r=o(t,a.children,e)))return a.children.splice(r,1),u.push(a),this._condense(u),this;s||a.leaf||!d(a,l)?i?(n++,a=i.children[n],s=!1):a=null:(u.push(a),c.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return s(r=g(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=g([])).leaf=!1,r.height=i;var l,u,c,h,p=Math.ceil(o/a),d=p*Math.ceil(Math.sqrt(a));for(y(t,e,n,d,this.compareMinX),l=e;l<=n;l+=d)for(y(t,l,c=Math.min(l+d-1,n),p,this.compareMinY),u=l;u<=c;u+=p)h=Math.min(u+p-1,c),r.children.push(this._build(t,u,h,i-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,l,u,c,p,d,f;i.push(e),!e.leaf&&i.length-1!==n;){for(c=p=1/0,r=0,o=e.children.length;r<o;r++)l=h(s=e.children[r]),d=t,f=s,(u=(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-l)<p?(p=u,c=l<c?l:c,a=s):u===p&&l<c&&(c=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),l(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=g(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,l,u,c,p,d,f,g,y,_,m;for(u=c=1/0,i=e;i<=n-e;i++)d=r=a(t,0,i,this.toBBox),f=o=a(t,i,n,this.toBBox),void 0,void 0,void 0,void 0,g=Math.max(d.minX,f.minX),y=Math.max(d.minY,f.minY),_=Math.min(d.maxX,f.maxX),m=Math.min(d.maxY,f.maxY),s=Math.max(0,_-g)*Math.max(0,m-y),l=h(r)+h(o),s<u?(u=s,p=i,c=l<c?l:c):s===u&&l<c&&(c=l,p=i);return p},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,u=a(t,0,e,s),c=a(t,n-e,n,s),h=p(u)+p(c);for(r=e;r<n-e;r++)o=t.children[r],l(u,t.leaf?s(o):o),h+=p(u);for(r=n-e-1;r>=e;r--)o=t.children[r],l(c,t.leaf?s(o):o),h+=p(c);return h},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)l(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},28141:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102),r=n(31540);e.default=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return r.featureEach(t,(function(t){var n,i,r,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(i=e.MultiLineString.coordinates).push.apply(i,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(r=e.MultiPolygon.coordinates).push.apply(r,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}})),i.featureCollection(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){var n={type:t,coordinates:e[t].coordinates},r={collectedProperties:e[t].properties};return i.feature(n,r)})))}},68538:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(31013)),o=n(84102),s=n(31540),a=i(n(18829)),l=i(n(85878));e.default=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,i=function(t){var e=[],n={};return s.featureEach(t,(function(t){if(t.geometry){var i=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,i)||(e.push(t),n[i]=!0)}})),o.featureCollection(e)}(t),u=a.default(i);if(u.features=u.features.filter((function(t){var i=t.geometry.coordinates[0][0],o=t.geometry.coordinates[0][1],s=t.geometry.coordinates[0][2],a=r.default(i,o,e),l=r.default(o,s,e),u=r.default(i,s,e);return a<=n&&l<=n&&u<=n})),u.features.length<1)return null;var c=l.default(u);return 1===c.coordinates.length&&(c.coordinates=c.coordinates[0],c.type="Polygon"),o.feature(c)}},85878:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(76565)),o=n(84102),s=n(10611),a=n(31540),l=i(n(44692)),u=i(n(12387));e.default=function(t,e){if(void 0===e&&(e={}),e=e||{},!o.isObject(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==s.getType(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=r.default(t));var i=function(t){var e={};a.flattenEach(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!i)throw new Error("geojson must be homogenous");var c=t;switch(i){case"LineString":return l.default(c,e);case"Polygon":return u.default(c,e);default:throw new Error(i+" is not supported")}}},44692:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(76565)),o=n(84102),s=n(10611),a=n(31540);function l(t){return t[0].toString()+","+t[1].toString()}e.default=function(t,e){if(void 0===e&&(e={}),e=e||{},!o.isObject(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==s.getType(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=r.default(t));var i=[],u=a.lineReduce(t,(function(t,e){return function(t,e){var n,i=t.geometry.coordinates,r=e.geometry.coordinates,s=l(i[0]),a=l(i[i.length-1]),u=l(r[0]),c=l(r[r.length-1]);if(s===c)n=r.concat(i.slice(1));else if(u===a)n=i.concat(r.slice(1));else if(s===u)n=i.slice(1).reverse().concat(r);else{if(a!==c)return null;n=i.concat(r.reverse().slice(1))}return o.lineString(n)}(t,e)||(i.push(t),e)}));return u&&i.push(u),i.length?1===i.length?i[0]:o.multiLineString(i.map((function(t){return t.coordinates}))):null}},12387:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(76565)),o=n(84102),s=n(10611),a=n(31540),l=n(18146),u=n(24255);e.default=function(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==s.getType(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=r.default(t));var n=[];a.flattenEach(t,(function(t){n.push(t.geometry)}));var i=u.topology({geoms:o.geometryCollection(n).geometry});return l.merge(i,i.objects.geoms.geometries)}},77382:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=n(31540),s=i(n(72273));e.default=function(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(o.coordEach(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var i=s.default(n,e.concavity);return i.length>3?r.polygon([i]):null}},93737:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102),r=n(10611);e.default=function(t,e,n,o){void 0===o&&(o={});var s=r.getCoord(t),a=i.degreesToRadians(s[0]),l=i.degreesToRadians(s[1]),u=i.degreesToRadians(n),c=i.lengthToRadians(e,o.units),h=Math.asin(Math.sin(l)*Math.cos(c)+Math.cos(l)*Math.sin(c)*Math.cos(u)),p=a+Math.atan2(Math.sin(u)*Math.sin(c)*Math.cos(l),Math.cos(c)-Math.sin(l)*Math.sin(h)),d=i.radiansToDegrees(p),f=i.radiansToDegrees(h);return i.point([d,f],o.properties)}},68727:(t,e,n)=>{"use strict";var i=n(24629),r=n(84102),o=n(10611);function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=s(i);function l(t,e){var n=o.getGeom(t),i=o.getGeom(e),s=t.properties||{},l=a.default.difference(n.coordinates,i.coordinates);return 0===l.length?null:1===l.length?r.polygon(l[0],s):r.multiPolygon(l,s)}t.exports=l,t.exports.default=l},52407:(t,e,n)=>{"use strict";var i=n(84102),r=n(10611),o=n(31540),s=n(24288),a=n(24629);function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(s),c=l(a);function h(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var n=e.propertyName;r.collectionOf(t,"Polygon","dissolve");var s=[];if(!e.propertyName)return u.default(i.multiPolygon(c.default.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));var a={};o.featureEach(t,(function(t){Object.prototype.hasOwnProperty.call(a,t.properties[n])||(a[t.properties[n]]=[]),a[t.properties[n]].push(t)}));for(var l=Object.keys(a),h=0;h<l.length;h++){var p=i.multiPolygon(c.default.union.apply(null,a[l[h]].map((function(t){return t.geometry.coordinates}))));p.properties[n]=l[h],s.push(p)}return u.default(i.featureCollection(s))}t.exports=h,t.exports.default=h},35366:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(66338)),o=n(10611),s=n(31540);function a(t,e,n){void 0===n&&(n=2);var i=o.getCoord(t),r=o.getCoord(e),s=i[0]-r[0],a=i[1]-r[1];return 1===n?Math.abs(s)+Math.abs(a):Math.pow(Math.pow(s,n)+Math.pow(a,n),1/n)}e.pNormDistance=a,e.default=function(t,e){var n=(e=e||{}).threshold||1e4,i=e.p||2,o=e.binary||!1,l=e.alpha||-1,u=e.standardization||!1,c=[];s.featureEach(t,(function(t){c.push(r.default(t))}));for(var h=[],p=0;p<c.length;p++)h[p]=[];for(p=0;p<c.length;p++)for(var d=p;d<c.length;d++){p===d&&(h[p][d]=0);var f=a(c[p],c[d],i);h[p][d]=f,h[d][p]=f}for(p=0;p<c.length;p++)for(d=0;d<c.length;d++)0!==(f=h[p][d])&&(h[p][d]=o?f<=n?1:0:f<=n?Math.pow(f,l):0);if(u)for(p=0;p<c.length;p++){var g=h[p].reduce((function(t,e){return t+e}),0);for(d=0;d<c.length;d++)h[p][d]=h[p][d]/g}return h}},31013:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10611),r=n(84102);e.default=function(t,e,n){void 0===n&&(n={});var o=i.getCoord(t),s=i.getCoord(e),a=r.degreesToRadians(s[1]-o[1]),l=r.degreesToRadians(s[0]-o[0]),u=r.degreesToRadians(o[1]),c=r.degreesToRadians(s[1]),h=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(u)*Math.cos(c);return r.radiansToLength(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),n.units)}},61211:(t,e,n)=>{"use strict";var i=n(84102),r=n(62054),o=n(90067),s=n(10611);function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(r),u=a(o);function c(t,e,n,r){var o=(r=r||{}).steps||64,a=r.units||"kilometers",c=r.angle||0,p=r.pivot||t,d=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!i.isObject(r))throw new Error("options must be an object");if(!i.isNumber(o))throw new Error("steps must be a number");if(!i.isNumber(c))throw new Error("angle must be a number");var f=s.getCoord(t);if("degrees"===a)var g=i.degreesToRadians(c);else e=l.default(t,e,90,{units:a}),n=l.default(t,n,0,{units:a}),e=s.getCoord(e)[0]-f[0],n=s.getCoord(n)[1]-f[1];for(var y=[],_=0;_<o;_+=1){var m=-360*_/o,v=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(h(m),2)),b=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(h(m),2));if(m<-90&&m>=-270&&(v=-v),m<-180&&m>=-360&&(b=-b),"degrees"===a){var x=v*Math.cos(g)+b*Math.sin(g),w=b*Math.cos(g)-v*Math.sin(g);v=x,b=w}y.push([v+f[0],b+f[1]])}return y.push(y[0]),"degrees"===a?i.polygon([y],d):u.default(i.polygon([y],d),c,{pivot:p})}function h(t){var e=t*Math.PI/180;return Math.tan(e)}t.exports=c,t.exports.default=c},19062:(t,e,n)=>{"use strict";var i=n(9705),r=n(13652);function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=o(i),a=o(r);function l(t){return a.default(s.default(t))}t.exports=l,t.exports.default=l},63922:(t,e,n)=>{"use strict";var i=n(31540),r=n(84102);function o(t){var e=[];return"FeatureCollection"===t.type?i.featureEach(t,(function(t){i.coordEach(t,(function(n){e.push(r.point(n,t.properties))}))})):i.coordEach(t,(function(n){e.push(r.point(n,t.properties))})),r.featureCollection(e)}t.exports=o,t.exports.default=o},24288:(t,e,n)=>{"use strict";var i=n(31540),r=n(84102);function o(t){if(!t)throw new Error("geojson is required");var e=[];return i.flattenEach(t,(function(t){e.push(t)})),r.featureCollection(e)}t.exports=o,t.exports.default=o},37970:(t,e,n)=>{"use strict";var i=n(31540),r=n(84102);function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=o(n(76565));function a(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=s.default(t)),i.coordEach(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t}t.exports=a,t.exports.default=a},25422:(t,e,n)=>{"use strict";var i=n(10611),r=Math.PI/180,o=180/Math.PI,s=function(t,e){this.lon=t,this.lat=e,this.x=r*t,this.y=r*e};s.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},s.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new s(e,t)};var a=function(){this.coords=[],this.length=0};a.prototype.move_to=function(t){this.length++,this.coords.push(t)};var l=function(t){this.properties=t||{},this.geometries=[]};l.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},l.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var u=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new s(t.x,t.y),this.end=new s(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function c(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,o=n.npoints,s=n.offset;return t=i.getCoord(t),e=i.getCoord(e),r=r||{},o=o||100,s=s||10,new u({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(o,{offset:s}).json()}u.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),s=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=o*Math.atan2(s,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[o*Math.atan2(r,i),a]},u.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var o=i*r,s=this.interpolate(o);n.push(s)}for(var u=!1,c=0,h=e&&e.offset?e.offset:10,p=180-h,d=-180+h,f=360-h,g=1;g<n.length;++g){var y=n[g-1][0],_=n[g][0],m=Math.abs(_-y);m>f&&(_>p&&y<d||y>p&&_<d)?u=!0:m>c&&(c=m)}var v=[];if(u&&c<h){var b=[];v.push(b);for(var x=0;x<n.length;++x){var w=parseFloat(n[x][0]);if(x>0&&Math.abs(w-n[x-1][0])>f){var E=parseFloat(n[x-1][0]),P=parseFloat(n[x-1][1]),C=parseFloat(n[x][0]),O=parseFloat(n[x][1]);if(E>-180&&E<d&&180===C&&x+1<n.length&&n[x-1][0]>-180&&n[x-1][0]<d){b.push([-180,n[x][1]]),x++,b.push([n[x][0],n[x][1]]);continue}if(E>p&&E<180&&-180===C&&x+1<n.length&&n[x-1][0]>p&&n[x-1][0]<180){b.push([180,n[x][1]]),x++,b.push([n[x][0],n[x][1]]);continue}if(E<d&&C>p){var S=E;E=C,C=S;var I=P;P=O,O=I}if(E>p&&C<d&&(C+=360),E<=180&&C>=180&&E<C){var L=(180-E)/(C-E),M=L*O+(1-L)*P;b.push([n[x-1][0]>p?180:-180,M]),(b=[]).push([n[x-1][0]>p?-180:180,M]),v.push(b)}else b=[],v.push(b);b.push([w,n[x][1]])}else b.push([n[x][0],n[x][1]])}}else{var T=[];v.push(T);for(var R=0;R<n.length;++R)T.push([n[R][0],n[R][1]])}for(var N=new l(this.properties),A=0;A<v.length;++A){var D=new a;N.geometries.push(D);for(var j=v[A],F=0;F<j.length;++F)D.move_to(j[F])}return N},t.exports=c,t.exports.default=c},84102:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function i(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,i)}function r(t,e,i){void 0===i&&(i={});for(var r=0,o=t;r<o.length;r++){var s=o[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,i)}function o(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,i)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,i){return void 0===i&&(i={}),n({type:"MultiLineString",coordinates:t},e,i)}function l(t,e,i){return void 0===i&&(i={}),n({type:"MultiPoint",coordinates:t},e,i)}function u(t,e,i){return void 0===i&&(i={}),n({type:"MultiPolygon",coordinates:t},e,i)}function c(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t*i}function h(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t/i}function p(t){return t%(2*Math.PI)*180/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return r(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=r,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=l,e.multiPolygon=u,e.geometryCollection=function(t,e,i){return void 0===i&&(i={}),n({type:"GeometryCollection",geometries:t},e,i)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),n)},e.convertArea=function(t,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=e.areaFactors[n];if(!r)throw new Error("invalid original units");var o=e.areaFactors[i];if(!o)throw new Error("invalid final units");return t/r*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},45621:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(31013)),o=i(n(74170)),s=n(84102);function a(t,e,n,i,r,o){for(var a=[],l=0;l<6;l++){var u=t[0]+e*r[l],c=t[1]+n*o[l];a.push([u,c])}return a.push(a[0].slice()),s.polygon([a],i)}function l(t,e,n,i,r,o){for(var a=[],l=0;l<6;l++){var u=[];u.push(t),u.push([t[0]+e*r[l],t[1]+n*o[l]]),u.push([t[0]+e*r[(l+1)%6],t[1]+n*o[(l+1)%6]]),u.push(t),a.push(s.polygon([u],i))}return a}e.default=function(t,e,n){void 0===n&&(n={});var i=JSON.stringify(n.properties||{}),u=t[0],c=t[1],h=t[2],p=t[3],d=(c+p)/2,f=(u+h)/2,g=2*e/r.default([u,d],[h,d],n)*(h-u),y=2*e/r.default([f,c],[f,p],n)*(p-c),_=g/2,m=2*_,v=Math.sqrt(3)/2*y,b=h-u,x=p-c,w=3/4*m,E=v,P=(b-m)/(m-_/2),C=Math.floor(P),O=(C*w-_/2-b)/2-_/2+w/2,S=Math.floor((x-v)/v),I=(x-S*v)/2,L=S*v-x>v/2;L&&(I-=v/4);for(var M=[],T=[],R=0;R<6;R++){var N=2*Math.PI/6*R;M.push(Math.cos(N)),T.push(Math.sin(N))}for(var A=[],D=0;D<=C;D++)for(var j=0;j<=S;j++){var F=D%2==1;if(!(0===j&&F||0===j&&L)){var k=D*w+u-O,G=j*E+c+I;if(F&&(G-=v/2),!0===n.triangles)l([k,G],g/2,y/2,JSON.parse(i),M,T).forEach((function(t){n.mask?o.default(n.mask,t)&&A.push(t):A.push(t)}));else{var V=a([k,G],g/2,y/2,JSON.parse(i),M,T);n.mask?o.default(n.mask,V)&&A.push(V):A.push(V)}}}return s.featureCollection(A)}},25566:(t,e,n)=>{"use strict";var i=n(9705),r=n(45621),o=n(36813),s=n(31013),a=n(66338),l=n(45434),u=n(4686),c=n(76565),h=n(84102),p=n(31540),d=n(10611);function f(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var g=f(i),y=f(r),_=f(o),m=f(s),v=f(a),b=f(l),x=f(u),w=f(c);function E(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.gridType,r=n.property,o=n.weight;if(!t)throw new Error("points is required");if(d.collectionOf(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");r=r||"elevation",i=i||"square",o=o||1;var s,a=g.default(t);switch(i){case"point":case"points":s=_.default(a,e,n);break;case"square":case"squares":s=b.default(a,e,n);break;case"hex":case"hexes":s=y.default(a,e,n);break;case"triangle":case"triangles":s=x.default(a,e,n);break;default:throw new Error("invalid gridType")}var l=[];return p.featureEach(s,(function(e){var s=0,a=0;p.featureEach(t,(function(t){var l,u="point"===i?e:v.default(e),c=m.default(u,t,n);if(void 0!==r&&(l=t.properties[r]),void 0===l&&(l=t.geometry.coordinates[2]),void 0===l)throw new Error("zValue is missing");0===c&&(s=l);var h=1/Math.pow(c,o);a+=h,s+=h*l}));var u=w.default(e);u.properties[r]=s/a,l.push(u)})),h.featureCollection(l)}t.exports=E,t.exports.default=E},74170:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=n(10611),s=i(n(24629));e.default=function(t,e,n){void 0===n&&(n={});var i=o.getGeom(t),a=o.getGeom(e),l=s.default.intersection(i.coordinates,a.coordinates);return 0===l.length?null:1===l.length?r.polygon(l[0],n.properties):r.multiPolygon(l,n.properties)}},10611:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&i.isNumber(e[0])&&i.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0,r=t.features;i<r.length;i++){var o=r[i];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},77406:(t,e,n)=>{"use strict";var i=n(9705),r=n(41070),o=n(88147),s=n(63922),a=n(10611),l=n(84102),u=n(27418),c=n(31540);function h(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var p=h(i),d=h(r),f=h(o),g=h(s),y=h(u);var _={successCallback:null,verbose:!1,polygons:!1},m={};function v(t,e,n,i){i=i||{};for(var r=Object.keys(_),o=0;o<r.length;o++){var s=r[o],a=i[s];a=null!=a?a:_[s],m[s]=a}m.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var l,u=function(t,e,n){for(var i=t.length-1,r=t[0].length-1,o={rows:i,cols:r,cells:[]},s=e+Math.abs(n),a=0;a<i;++a){o.cells[a]=[];for(var l=0;l<r;++l){var u=0,c=t[a+1][l],h=t[a+1][l+1],p=t[a][l+1],d=t[a][l];if(!(isNaN(c)||isNaN(h)||isNaN(p)||isNaN(d))){u|=c<e?0:c>s?128:64,u|=h<e?0:h>s?32:16,u|=p<e?0:p>s?8:4;var f=+(u|=d<e?0:d>s?2:1),g=0;if(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u){var y=(c+h+p+d)/4;g=y>s?2:y<e?0:1,34===u?1===g?u=35:0===g&&(u=136):136===u?1===g?(u=35,g=4):0===g&&(u=34):17===u?1===g?(u=155,g=4):0===g&&(u=153):68===u?1===g?(u=103,g=4):0===g&&(u=102):153===u?1===g&&(u=155):102===u?1===g&&(u=103):152===u?g<2&&(u=156,g=1):137===u?g<2&&(u=139,g=1):98===u?g<2&&(u=99,g=1):38===u?g<2&&(u=39,g=1):18===u?g>0?(u=156,g=4):u=152:33===u?g>0?(u=139,g=4):u=137:72===u?g>0?(u=99,g=4):u=98:132===u&&(g>0?(u=39,g=4):u=38)}if(0!=u&&170!=u){var _,m,v,b,x,w,E,P;_=m=v=b=x=w=E=P=.5;var C=[];1===u?(v=1-ut(e,p,d),P=1-ut(e,c,d),C.push(it[u])):169===u?(v=ut(s,d,p),P=ut(s,d,c),C.push(it[u])):4===u?(w=1-ut(e,h,p),b=ut(e,d,p),C.push(et[u])):166===u?(w=ut(s,p,h),b=1-ut(s,p,d),C.push(et[u])):16===u?(x=ut(e,p,h),m=ut(e,c,h),C.push(tt[u])):154===u?(x=1-ut(s,h,p),m=1-ut(s,h,c),C.push(tt[u])):64===u?(E=ut(e,d,c),_=1-ut(e,h,c),C.push(ot[u])):106===u?(E=1-ut(s,c,d),_=ut(s,c,h),C.push(ot[u])):168===u?(b=ut(s,d,p),v=ut(e,d,p),P=ut(e,d,c),E=ut(s,d,c),C.push(nt[u]),C.push(it[u])):2===u?(b=1-ut(e,p,d),v=1-ut(s,p,d),P=1-ut(s,c,d),E=1-ut(e,c,d),C.push(nt[u]),C.push(it[u])):162===u?(x=ut(s,p,h),w=ut(e,p,h),b=1-ut(e,p,d),v=1-ut(s,p,d),C.push(nt[u]),C.push(it[u])):8===u?(x=1-ut(e,h,p),w=1-ut(s,h,p),b=ut(s,d,p),v=ut(e,d,p),C.push(tt[u]),C.push(et[u])):138===u?(x=1-ut(e,h,p),w=1-ut(s,h,p),_=1-ut(s,h,c),m=1-ut(e,h,c),C.push(tt[u]),C.push(et[u])):32===u?(x=ut(s,p,h),w=ut(e,p,h),_=ut(e,c,h),m=ut(s,c,h),C.push(tt[u]),C.push(et[u])):42===u?(P=1-ut(s,c,d),E=1-ut(e,c,d),_=ut(e,c,h),m=ut(s,c,h),C.push(rt[u]),C.push(ot[u])):128===u&&(P=ut(e,d,c),E=ut(s,d,c),_=1-ut(s,h,c),m=1-ut(e,h,c),C.push(rt[u]),C.push(ot[u])),5===u?(w=1-ut(e,h,p),P=1-ut(e,c,d),C.push(et[u])):165===u?(w=ut(s,p,h),P=ut(s,d,c),C.push(et[u])):20===u?(b=ut(e,d,p),m=ut(e,c,h),C.push(nt[u])):150===u?(b=1-ut(s,p,d),m=1-ut(s,h,c),C.push(nt[u])):80===u?(x=ut(e,p,h),E=ut(e,d,c),C.push(tt[u])):90===u?(x=1-ut(s,h,p),E=1-ut(s,c,d),C.push(tt[u])):65===u?(v=1-ut(e,p,d),_=1-ut(e,h,c),C.push(it[u])):105===u?(v=ut(s,d,p),_=ut(s,c,h),C.push(it[u])):160===u?(x=ut(s,p,h),w=ut(e,p,h),P=ut(e,d,c),E=ut(s,d,c),C.push(tt[u]),C.push(et[u])):10===u?(x=1-ut(e,h,p),w=1-ut(s,h,p),P=1-ut(s,c,d),E=1-ut(e,c,d),C.push(tt[u]),C.push(et[u])):130===u?(b=1-ut(e,p,d),v=1-ut(s,p,d),_=1-ut(s,h,c),m=1-ut(e,h,c),C.push(nt[u]),C.push(it[u])):40===u?(b=ut(s,d,p),v=ut(e,d,p),_=ut(e,c,h),m=ut(s,c,h),C.push(nt[u]),C.push(it[u])):101===u?(w=ut(s,p,h),_=ut(s,c,h),C.push(et[u])):69===u?(w=1-ut(e,h,p),_=1-ut(e,h,c),C.push(et[u])):149===u?(P=ut(s,d,c),m=1-ut(s,h,c),C.push(rt[u])):21===u?(P=1-ut(e,c,d),m=ut(e,c,h),C.push(rt[u])):86===u?(b=1-ut(s,p,d),E=1-ut(s,c,d),C.push(nt[u])):84===u?(b=ut(e,d,p),E=ut(e,d,c),C.push(nt[u])):89===u?(x=1-ut(s,h,p),v=ut(s,d,p),C.push(it[u])):81===u?(x=ut(e,p,h),v=1-ut(e,p,d),C.push(it[u])):96===u?(x=ut(s,p,h),w=ut(e,p,h),E=ut(e,d,c),_=ut(s,c,h),C.push(tt[u]),C.push(et[u])):74===u?(x=1-ut(e,h,p),w=1-ut(s,h,p),E=1-ut(s,c,d),_=1-ut(e,h,c),C.push(tt[u]),C.push(et[u])):24===u?(x=1-ut(s,h,p),b=ut(s,d,p),v=ut(e,d,p),m=ut(e,c,h),C.push(tt[u]),C.push(it[u])):146===u?(x=ut(e,p,h),b=1-ut(e,p,d),v=1-ut(s,p,d),m=1-ut(s,h,c),C.push(tt[u]),C.push(it[u])):6===u?(w=1-ut(e,h,p),b=1-ut(s,p,d),P=1-ut(s,c,d),E=1-ut(e,c,d),C.push(et[u]),C.push(nt[u])):164===u?(w=ut(s,p,h),b=ut(e,d,p),P=ut(e,d,c),E=ut(s,d,c),C.push(et[u]),C.push(nt[u])):129===u?(v=1-ut(e,p,d),P=ut(s,d,c),_=1-ut(s,h,c),m=1-ut(e,h,c),C.push(it[u]),C.push(rt[u])):41===u?(v=ut(s,d,p),P=1-ut(e,c,d),_=ut(e,c,h),m=ut(s,c,h),C.push(it[u]),C.push(rt[u])):66===u?(b=1-ut(e,p,d),v=1-ut(s,p,d),E=1-ut(s,c,d),_=1-ut(e,h,c),C.push(nt[u]),C.push(it[u])):104===u?(b=ut(s,d,p),v=ut(e,d,p),E=ut(e,d,c),_=ut(s,c,h),C.push(it[u]),C.push(st[u])):144===u?(x=ut(e,p,h),P=ut(e,d,c),E=ut(s,d,c),m=1-ut(s,h,c),C.push(tt[u]),C.push(ot[u])):26===u?(x=1-ut(s,h,p),P=1-ut(s,c,d),E=1-ut(e,c,d),m=ut(e,c,h),C.push(tt[u]),C.push(ot[u])):36===u?(w=ut(s,p,h),b=ut(e,d,p),_=ut(e,c,h),m=ut(s,c,h),C.push(et[u]),C.push(nt[u])):134===u?(w=1-ut(e,h,p),b=1-ut(s,p,d),_=1-ut(s,h,c),m=1-ut(e,h,c),C.push(et[u]),C.push(nt[u])):9===u?(x=1-ut(e,h,p),w=1-ut(s,h,p),v=ut(s,d,p),P=1-ut(e,c,d),C.push(tt[u]),C.push(et[u])):161===u?(x=ut(s,p,h),w=ut(e,p,h),v=1-ut(e,p,d),P=ut(s,d,c),C.push(tt[u]),C.push(et[u])):37===u?(w=ut(s,p,h),P=1-ut(e,c,d),_=ut(e,c,h),m=ut(s,c,h),C.push(et[u]),C.push(rt[u])):133===u?(w=1-ut(e,h,p),P=ut(s,d,c),_=1-ut(s,h,c),m=1-ut(e,h,c),C.push(et[u]),C.push(rt[u])):148===u?(b=ut(e,d,p),P=ut(e,d,c),E=ut(s,d,c),m=1-ut(s,h,c),C.push(nt[u]),C.push(ot[u])):22===u?(b=1-ut(s,p,d),P=1-ut(s,c,d),E=1-ut(e,c,d),m=ut(e,c,h),C.push(nt[u]),C.push(ot[u])):82===u?(x=ut(e,p,h),b=1-ut(e,p,d),v=1-ut(s,p,d),E=1-ut(s,c,d),C.push(tt[u]),C.push(it[u])):88===u?(x=1-ut(s,h,p),b=ut(s,d,p),v=ut(e,d,p),E=ut(e,d,c),C.push(tt[u]),C.push(it[u])):73===u?(x=1-ut(e,h,p),w=1-ut(s,h,p),v=ut(s,d,p),_=1-ut(e,h,c),C.push(tt[u]),C.push(et[u])):97===u?(x=ut(s,p,h),w=ut(e,p,h),v=1-ut(e,p,d),_=ut(s,c,h),C.push(tt[u]),C.push(et[u])):145===u?(x=ut(e,p,h),v=1-ut(e,p,d),P=ut(s,d,c),m=1-ut(s,h,c),C.push(tt[u]),C.push(rt[u])):25===u?(x=1-ut(s,h,p),v=ut(s,d,p),P=1-ut(e,c,d),m=ut(e,c,h),C.push(tt[u]),C.push(rt[u])):70===u?(w=1-ut(e,h,p),b=1-ut(s,p,d),E=1-ut(s,c,d),_=1-ut(e,h,c),C.push(et[u]),C.push(nt[u])):100===u?(w=ut(s,p,h),b=ut(e,d,p),E=ut(e,d,c),_=ut(s,c,h),C.push(et[u]),C.push(nt[u])):34===u?(0===g?(x=1-ut(e,h,p),w=1-ut(s,h,p),b=ut(s,d,p),v=ut(e,d,p),P=ut(e,d,c),E=ut(s,d,c),_=1-ut(s,h,c),m=1-ut(e,h,c)):(x=ut(s,p,h),w=ut(e,p,h),b=1-ut(e,p,d),v=1-ut(s,p,d),P=1-ut(s,c,d),E=1-ut(e,c,d),_=ut(e,c,h),m=ut(s,c,h)),C.push(tt[u]),C.push(et[u]),C.push(rt[u]),C.push(ot[u])):35===u?(4===g?(x=1-ut(e,h,p),w=1-ut(s,h,p),b=ut(s,d,p),v=ut(e,d,p),P=ut(e,d,c),E=ut(s,d,c),_=1-ut(s,h,c),m=1-ut(e,h,c)):(x=ut(s,p,h),w=ut(e,p,h),b=1-ut(e,p,d),v=1-ut(s,p,d),P=1-ut(s,c,d),E=1-ut(e,c,d),_=ut(e,c,h),m=ut(s,c,h)),C.push(tt[u]),C.push(et[u]),C.push(it[u]),C.push(ot[u])):136===u?(0===g?(x=ut(s,p,h),w=ut(e,p,h),b=1-ut(e,p,d),v=1-ut(s,p,d),P=1-ut(s,c,d),E=1-ut(e,c,d),_=ut(e,c,h),m=ut(s,c,h)):(x=1-ut(e,h,p),w=1-ut(s,h,p),b=ut(s,d,p),v=ut(e,d,p),P=ut(e,d,c),E=ut(s,d,c),_=1-ut(s,h,c),m=1-ut(e,h,c)),C.push(tt[u]),C.push(et[u]),C.push(rt[u]),C.push(ot[u])):153===u?(0===g?(x=ut(e,p,h),v=1-ut(e,p,d),P=1-ut(e,c,d),m=ut(e,c,h)):(x=1-ut(s,h,p),v=ut(s,d,p),P=ut(s,d,c),m=1-ut(s,h,c)),C.push(tt[u]),C.push(it[u])):102===u?(0===g?(w=1-ut(e,h,p),b=ut(e,d,p),E=ut(e,d,c),_=1-ut(e,h,c)):(w=ut(s,p,h),b=1-ut(s,p,d),E=1-ut(s,c,d),_=ut(s,c,h)),C.push(et[u]),C.push(ot[u])):155===u?(4===g?(x=ut(e,p,h),v=1-ut(e,p,d),P=1-ut(e,c,d),m=ut(e,c,h)):(x=1-ut(s,h,p),v=ut(s,d,p),P=ut(s,d,c),m=1-ut(s,h,c)),C.push(tt[u]),C.push(rt[u])):103===u?(4===g?(w=1-ut(e,h,p),b=ut(e,d,p),E=ut(e,d,c),_=1-ut(e,h,c)):(w=ut(s,p,h),b=1-ut(s,p,d),E=1-ut(s,c,d),_=ut(s,c,h)),C.push(et[u]),C.push(nt[u])):152===u?(0===g?(x=ut(e,p,h),b=1-ut(e,p,d),v=1-ut(s,p,d),P=1-ut(s,c,d),E=1-ut(e,c,d),m=ut(e,c,h)):(x=1-ut(s,h,p),b=ut(s,d,p),v=ut(e,d,p),P=ut(e,d,c),E=ut(s,d,c),m=1-ut(s,h,c)),C.push(tt[u]),C.push(nt[u]),C.push(it[u])):156===u?(4===g?(x=ut(e,p,h),b=1-ut(e,p,d),v=1-ut(s,p,d),P=1-ut(s,c,d),E=1-ut(e,c,d),m=ut(e,c,h)):(x=1-ut(s,h,p),b=ut(s,d,p),v=ut(e,d,p),P=ut(e,d,c),E=ut(s,d,c),m=1-ut(s,h,c)),C.push(tt[u]),C.push(it[u]),C.push(ot[u])):137===u?(0===g?(x=ut(s,p,h),w=ut(e,p,h),v=1-ut(e,p,d),P=1-ut(e,c,d),_=ut(e,c,h),m=ut(s,c,h)):(x=1-ut(e,h,p),w=1-ut(s,h,p),v=ut(s,d,p),P=ut(s,d,c),_=1-ut(s,h,c),m=1-ut(e,h,c)),C.push(tt[u]),C.push(et[u]),C.push(it[u])):139===u?(4===g?(x=ut(s,p,h),w=ut(e,p,h),v=1-ut(e,p,d),P=1-ut(e,c,d),_=ut(e,c,h),m=ut(s,c,h)):(x=1-ut(e,h,p),w=1-ut(s,h,p),v=ut(s,d,p),P=ut(s,d,c),_=1-ut(s,h,c),m=1-ut(e,h,c)),C.push(tt[u]),C.push(et[u]),C.push(rt[u])):98===u?(0===g?(x=1-ut(e,h,p),w=1-ut(s,h,p),b=ut(s,d,p),v=ut(e,d,p),E=ut(e,d,c),_=1-ut(e,h,c)):(x=ut(s,p,h),w=ut(e,p,h),b=1-ut(e,p,d),v=1-ut(s,p,d),E=1-ut(s,c,d),_=ut(s,c,h)),C.push(tt[u]),C.push(et[u]),C.push(ot[u])):99===u?(4===g?(x=1-ut(e,h,p),w=1-ut(s,h,p),b=ut(s,d,p),v=ut(e,d,p),E=ut(e,d,c),_=1-ut(e,h,c)):(x=ut(s,p,h),w=ut(e,p,h),b=1-ut(e,p,d),v=1-ut(s,p,d),E=1-ut(s,c,d),_=ut(s,c,h)),C.push(tt[u]),C.push(et[u]),C.push(it[u])):38===u?(0===g?(w=1-ut(e,h,p),b=ut(e,d,p),P=ut(e,d,c),E=ut(s,d,c),_=1-ut(s,h,c),m=1-ut(e,h,c)):(w=ut(s,p,h),b=1-ut(s,p,d),P=1-ut(s,c,d),E=1-ut(e,c,d),_=ut(e,c,h),m=ut(s,c,h)),C.push(et[u]),C.push(rt[u]),C.push(ot[u])):39===u?(4===g?(w=1-ut(e,h,p),b=ut(e,d,p),P=ut(e,d,c),E=ut(s,d,c),_=1-ut(s,h,c),m=1-ut(e,h,c)):(w=ut(s,p,h),b=1-ut(s,p,d),P=1-ut(s,c,d),E=1-ut(e,c,d),_=ut(e,c,h),m=ut(s,c,h)),C.push(et[u]),C.push(nt[u]),C.push(ot[u])):85===u&&(x=1,w=0,b=1,v=0,P=0,E=1,_=0,m=1),(_<0||_>1||m<0||m>1||x<0||x>1||b<0||b>1||P<0||P>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+f+" "+c+","+h+","+p+","+d+" "+g+" "+_+" "+m+" "+x+" "+w+" "+b+" "+v+" "+P+" "+E),o.cells[a][l]={cval:u,cval_real:f,flipped:g,topleft:_,topright:m,righttop:x,rightbottom:w,bottomright:b,bottomleft:v,leftbottom:P,lefttop:E,edges:C}}}}}return o}(t,e,n);return m.polygons?(m.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),l=function(t){var e=[],n=0;return t.cells.forEach((function(t,i){t.forEach((function(t,r){if(void 0!==t){var o=lt[t.cval](t);"object"==typeof o&&ct(o)?"object"==typeof o[0]&&ct(o[0])?"object"==typeof o[0][0]&&ct(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=r,t[1]+=i})),e[n++]=t})):(o.forEach((function(t){t[0]+=r,t[1]+=i})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(u)):(m.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),l=function(t){for(var e=[],n=t.rows,i=t.cols,r=[],o=0;o<n;o++)for(var s=0;s<i;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=pt(t.cells[o][s]),l=null,u=s,c=o;null!==a&&r.push([a.p[0]+u,a.p[1]+c]);do{if(null===(l=dt(t.cells[c][u],a.x,a.y,a.o)))break;if(r.push([l.p[0]+u,l.p[1]+c]),u+=l.x,a=l,(c+=l.y)<0||c>=n||u<0||u>=i||void 0===t.cells[c][u]){var h=ht(t,u-=l.x,c-=l.y,l.x,l.y,l.o);if(null===h)break;h.path.forEach((function(t){r.push(t)})),u=h.i,c=h.j,a=h}}while(void 0!==t.cells[c][u]&&t.cells[c][u].edges.length>0);e.push(r),r=[],t.cells[o][s].edges.length>0&&s--}return e}(u)),"function"==typeof m.successCallback&&m.successCallback(l),l}var b=64,x=16,w=[],E=[],P=[],C=[],O=[],S=[],I=[],L=[],M=[],T=[],R=[],N=[],A=[],D=[],j=[],F=[],k=[],G=[],V=[],Z=[],z=[],B=[],U=[],W=[];I[85]=T[85]=-1,L[85]=R[85]=0,M[85]=N[85]=1,V[85]=B[85]=1,Z[85]=U[85]=0,z[85]=W[85]=1,w[85]=C[85]=0,E[85]=O[85]=-1,P[85]=j[85]=0,F[85]=A[85]=0,k[85]=D[85]=1,S[85]=G[85]=1,B[1]=B[169]=0,U[1]=U[169]=-1,W[1]=W[169]=0,A[1]=A[169]=-1,D[1]=D[169]=0,j[1]=j[169]=0,T[4]=T[166]=0,R[4]=R[166]=-1,N[4]=N[166]=1,F[4]=F[166]=1,k[4]=k[166]=0,G[4]=G[166]=0,I[16]=I[154]=0,L[16]=L[154]=1,M[16]=M[154]=1,C[16]=C[154]=1,O[16]=O[154]=0,S[16]=S[154]=1,V[64]=V[106]=0,Z[64]=Z[106]=1,z[64]=z[106]=0,w[64]=w[106]=-1,E[64]=E[106]=0,P[64]=P[106]=1,V[2]=V[168]=0,Z[2]=Z[168]=-1,z[2]=z[168]=1,B[2]=B[168]=0,U[2]=U[168]=-1,W[2]=W[168]=0,A[2]=A[168]=-1,D[2]=D[168]=0,j[2]=j[168]=0,F[2]=F[168]=-1,k[2]=k[168]=0,G[2]=G[168]=1,I[8]=I[162]=0,L[8]=L[162]=-1,M[8]=M[162]=0,T[8]=T[162]=0,R[8]=R[162]=-1,N[8]=N[162]=1,A[8]=A[162]=1,D[8]=D[162]=0,j[8]=j[162]=1,F[8]=F[162]=1,k[8]=k[162]=0,G[8]=G[162]=0,I[32]=I[138]=0,L[32]=L[138]=1,M[32]=M[138]=1,T[32]=T[138]=0,R[32]=R[138]=1,N[32]=N[138]=0,w[32]=w[138]=1,E[32]=E[138]=0,P[32]=P[138]=0,C[32]=C[138]=1,O[32]=O[138]=0,S[32]=S[138]=1,B[128]=B[42]=0,U[128]=U[42]=1,W[128]=W[42]=1,V[128]=V[42]=0,Z[128]=Z[42]=1,z[128]=z[42]=0,w[128]=w[42]=-1,E[128]=E[42]=0,P[128]=P[42]=1,C[128]=C[42]=-1,O[128]=O[42]=0,S[128]=S[42]=0,T[5]=T[165]=-1,R[5]=R[165]=0,N[5]=N[165]=0,B[5]=B[165]=1,U[5]=U[165]=0,W[5]=W[165]=0,F[20]=F[150]=0,k[20]=k[150]=1,G[20]=G[150]=1,C[20]=C[150]=0,O[20]=O[150]=-1,S[20]=S[150]=1,I[80]=I[90]=-1,L[80]=L[90]=0,M[80]=M[90]=1,V[80]=V[90]=1,Z[80]=Z[90]=0,z[80]=z[90]=1,A[65]=A[105]=0,D[65]=D[105]=1,j[65]=j[105]=0,w[65]=w[105]=0,E[65]=E[105]=-1,P[65]=P[105]=0,I[160]=I[10]=-1,L[160]=L[10]=0,M[160]=M[10]=1,T[160]=T[10]=-1,R[160]=R[10]=0,N[160]=N[10]=0,B[160]=B[10]=1,U[160]=U[10]=0,W[160]=W[10]=0,V[160]=V[10]=1,Z[160]=Z[10]=0,z[160]=z[10]=1,F[130]=F[40]=0,k[130]=k[40]=1,G[130]=G[40]=1,A[130]=A[40]=0,D[130]=D[40]=1,j[130]=j[40]=0,w[130]=w[40]=0,E[130]=E[40]=-1,P[130]=P[40]=0,C[130]=C[40]=0,O[130]=O[40]=-1,S[130]=S[40]=1,T[37]=T[133]=0,R[37]=R[133]=1,N[37]=N[133]=1,B[37]=B[133]=0,U[37]=U[133]=1,W[37]=W[133]=0,w[37]=w[133]=-1,E[37]=E[133]=0,P[37]=P[133]=0,C[37]=C[133]=1,O[37]=O[133]=0,S[37]=S[133]=0,F[148]=F[22]=-1,k[148]=k[22]=0,G[148]=G[22]=0,B[148]=B[22]=0,U[148]=U[22]=-1,W[148]=W[22]=1,V[148]=V[22]=0,Z[148]=Z[22]=1,z[148]=z[22]=1,C[148]=C[22]=-1,O[148]=O[22]=0,S[148]=S[22]=1,I[82]=I[88]=0,L[82]=L[88]=-1,M[82]=M[88]=1,F[82]=F[88]=1,k[82]=k[88]=0,G[82]=G[88]=1,A[82]=A[88]=-1,D[82]=D[88]=0,j[82]=j[88]=1,V[82]=V[88]=0,Z[82]=Z[88]=-1,z[82]=z[88]=0,I[73]=I[97]=0,L[73]=L[97]=1,M[73]=M[97]=0,T[73]=T[97]=0,R[73]=R[97]=-1,N[73]=N[97]=0,A[73]=A[97]=1,D[73]=D[97]=0,j[73]=j[97]=0,w[73]=w[97]=1,E[73]=E[97]=0,P[73]=P[97]=1,I[145]=I[25]=0,L[145]=L[25]=-1,M[145]=M[25]=0,A[145]=A[25]=1,D[145]=D[25]=0,j[145]=j[25]=1,B[145]=B[25]=0,U[145]=U[25]=1,W[145]=W[25]=1,C[145]=C[25]=-1,O[145]=O[25]=0,S[145]=S[25]=0,T[70]=T[100]=0,R[70]=R[100]=1,N[70]=N[100]=0,F[70]=F[100]=-1,k[70]=k[100]=0,G[70]=G[100]=1,V[70]=V[100]=0,Z[70]=Z[100]=-1,z[70]=z[100]=1,w[70]=w[100]=1,E[70]=E[100]=0,P[70]=P[100]=0,T[101]=T[69]=0,R[101]=R[69]=1,N[101]=N[69]=0,w[101]=w[69]=1,E[101]=E[69]=0,P[101]=P[69]=0,B[149]=B[21]=0,U[149]=U[21]=1,W[149]=W[21]=1,C[149]=C[21]=-1,O[149]=O[21]=0,S[149]=S[21]=0,F[86]=F[84]=-1,k[86]=k[84]=0,G[86]=G[84]=1,V[86]=V[84]=0,Z[86]=Z[84]=-1,z[86]=z[84]=1,I[89]=I[81]=0,L[89]=L[81]=-1,M[89]=M[81]=0,A[89]=A[81]=1,D[89]=D[81]=0,j[89]=j[81]=1,I[96]=I[74]=0,L[96]=L[74]=1,M[96]=M[74]=0,T[96]=T[74]=-1,R[96]=R[74]=0,N[96]=N[74]=1,V[96]=V[74]=1,Z[96]=Z[74]=0,z[96]=z[74]=0,w[96]=w[74]=1,E[96]=E[74]=0,P[96]=P[74]=1,I[24]=I[146]=0,L[24]=L[146]=-1,M[24]=M[146]=1,F[24]=F[146]=1,k[24]=k[146]=0,G[24]=G[146]=1,A[24]=A[146]=0,D[24]=D[146]=1,j[24]=j[146]=1,C[24]=C[146]=0,O[24]=O[146]=-1,S[24]=S[146]=0,T[6]=T[164]=-1,R[6]=R[164]=0,N[6]=N[164]=1,F[6]=F[164]=-1,k[6]=k[164]=0,G[6]=G[164]=0,B[6]=B[164]=0,U[6]=U[164]=-1,W[6]=W[164]=1,V[6]=V[164]=1,Z[6]=Z[164]=0,z[6]=z[164]=0,A[129]=A[41]=0,D[129]=D[41]=1,j[129]=j[41]=1,B[129]=B[41]=0,U[129]=U[41]=1,W[129]=W[41]=0,w[129]=w[41]=-1,E[129]=E[41]=0,P[129]=P[41]=0,C[129]=C[41]=0,O[129]=O[41]=-1,S[129]=S[41]=0,F[66]=F[104]=0,k[66]=k[104]=1,G[66]=G[104]=0,A[66]=A[104]=-1,D[66]=D[104]=0,j[66]=j[104]=1,V[66]=V[104]=0,Z[66]=Z[104]=-1,z[66]=z[104]=0,w[66]=w[104]=0,E[66]=E[104]=-1,P[66]=P[104]=1,I[144]=I[26]=-1,L[144]=L[26]=0,M[144]=M[26]=0,B[144]=B[26]=1,U[144]=U[26]=0,W[144]=W[26]=1,V[144]=V[26]=0,Z[144]=Z[26]=1,z[144]=z[26]=1,C[144]=C[26]=-1,O[144]=O[26]=0,S[144]=S[26]=1,T[36]=T[134]=0,R[36]=R[134]=1,N[36]=N[134]=1,F[36]=F[134]=0,k[36]=k[134]=1,G[36]=G[134]=0,w[36]=w[134]=0,E[36]=E[134]=-1,P[36]=P[134]=1,C[36]=C[134]=1,O[36]=O[134]=0,S[36]=S[134]=0,I[9]=I[161]=-1,L[9]=L[161]=0,M[9]=M[161]=0,T[9]=T[161]=0,R[9]=R[161]=-1,N[9]=N[161]=0,A[9]=A[161]=1,D[9]=D[161]=0,j[9]=j[161]=0,B[9]=B[161]=1,U[9]=U[161]=0,W[9]=W[161]=1,I[136]=0,L[136]=1,M[136]=1,T[136]=0,R[136]=1,N[136]=0,F[136]=-1,k[136]=0,G[136]=1,A[136]=-1,D[136]=0,j[136]=0,B[136]=0,U[136]=-1,W[136]=0,V[136]=0,Z[136]=-1,z[136]=1,w[136]=1,E[136]=0,P[136]=0,C[136]=1,O[136]=0,S[136]=1,I[34]=0,L[34]=-1,M[34]=0,T[34]=0,R[34]=-1,N[34]=1,F[34]=1,k[34]=0,G[34]=0,A[34]=1,D[34]=0,j[34]=1,B[34]=0,U[34]=1,W[34]=1,V[34]=0,Z[34]=1,z[34]=0,w[34]=-1,E[34]=0,P[34]=1,C[34]=-1,O[34]=0,S[34]=0,I[35]=0,L[35]=1,M[35]=1,T[35]=0,R[35]=-1,N[35]=1,F[35]=1,k[35]=0,G[35]=0,A[35]=-1,D[35]=0,j[35]=0,B[35]=0,U[35]=-1,W[35]=0,V[35]=0,Z[35]=1,z[35]=0,w[35]=-1,E[35]=0,P[35]=1,C[35]=1,O[35]=0,S[35]=1,I[153]=0,L[153]=1,M[153]=1,A[153]=-1,D[153]=0,j[153]=0,B[153]=0,U[153]=-1,W[153]=0,C[153]=1,O[153]=0,S[153]=1,T[102]=0,R[102]=-1,N[102]=1,F[102]=1,k[102]=0,G[102]=0,V[102]=0,Z[102]=1,z[102]=0,w[102]=-1,E[102]=0,P[102]=1,I[155]=0,L[155]=-1,M[155]=0,A[155]=1,D[155]=0,j[155]=1,B[155]=0,U[155]=1,W[155]=1,C[155]=-1,O[155]=0,S[155]=0,T[103]=0,R[103]=1,N[103]=0,F[103]=-1,k[103]=0,G[103]=1,V[103]=0,Z[103]=-1,z[103]=1,w[103]=1,E[103]=0,P[103]=0,I[152]=0,L[152]=1,M[152]=1,F[152]=-1,k[152]=0,G[152]=1,A[152]=-1,D[152]=0,j[152]=0,B[152]=0,U[152]=-1,W[152]=0,V[152]=0,Z[152]=-1,z[152]=1,C[152]=1,O[152]=0,S[152]=1,I[156]=0,L[156]=-1,M[156]=1,F[156]=1,k[156]=0,G[156]=1,A[156]=-1,D[156]=0,j[156]=0,B[156]=0,U[156]=-1,W[156]=0,V[156]=0,Z[156]=1,z[156]=1,C[156]=-1,O[156]=0,S[156]=1,I[137]=0,L[137]=1,M[137]=1,T[137]=0,R[137]=1,N[137]=0,A[137]=-1,D[137]=0,j[137]=0,B[137]=0,U[137]=-1,W[137]=0,w[137]=1,E[137]=0,P[137]=0,C[137]=1,O[137]=0,S[137]=1,I[139]=0,L[139]=1,M[139]=1,T[139]=0,R[139]=-1,N[139]=0,A[139]=1,D[139]=0,j[139]=0,B[139]=0,U[139]=1,W[139]=0,w[139]=-1,E[139]=0,P[139]=0,C[139]=1,O[139]=0,S[139]=1,I[98]=0,L[98]=-1,M[98]=0,T[98]=0,R[98]=-1,N[98]=1,F[98]=1,k[98]=0,G[98]=0,A[98]=1,D[98]=0,j[98]=1,V[98]=0,Z[98]=1,z[98]=0,w[98]=-1,E[98]=0,P[98]=1,I[99]=0,L[99]=1,M[99]=0,T[99]=0,R[99]=-1,N[99]=1,F[99]=1,k[99]=0,G[99]=0,A[99]=-1,D[99]=0,j[99]=1,V[99]=0,Z[99]=-1,z[99]=0,w[99]=1,E[99]=0,P[99]=1,T[38]=0,R[38]=-1,N[38]=1,F[38]=1,k[38]=0,G[38]=0,B[38]=0,U[38]=1,W[38]=1,V[38]=0,Z[38]=1,z[38]=0,w[38]=-1,E[38]=0,P[38]=1,C[38]=-1,O[38]=0,S[38]=0,T[39]=0,R[39]=1,N[39]=1,F[39]=-1,k[39]=0,G[39]=0,B[39]=0,U[39]=-1,W[39]=1,V[39]=0,Z[39]=1,z[39]=0,w[39]=-1,E[39]=0,P[39]=1,C[39]=1,O[39]=0,S[39]=0;var q=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},X=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Y=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},H=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},J=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},K=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},$=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Q=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},tt=[],et=[],nt=[],it=[],rt=[],ot=[],st=[],at=[];it[1]=rt[1]=18,it[169]=rt[169]=18,nt[4]=et[4]=12,nt[166]=et[166]=12,tt[16]=at[16]=4,tt[154]=at[154]=4,ot[64]=st[64]=22,ot[106]=st[106]=22,nt[2]=ot[2]=17,it[2]=rt[2]=18,nt[168]=ot[168]=17,it[168]=rt[168]=18,tt[8]=it[8]=9,et[8]=nt[8]=12,tt[162]=it[162]=9,et[162]=nt[162]=12,tt[32]=at[32]=4,et[32]=st[32]=1,tt[138]=at[138]=4,et[138]=st[138]=1,rt[128]=at[128]=21,ot[128]=st[128]=22,rt[42]=at[42]=21,ot[42]=st[42]=22,et[5]=rt[5]=14,et[165]=rt[165]=14,nt[20]=at[20]=6,nt[150]=at[150]=6,tt[80]=ot[80]=11,tt[90]=ot[90]=11,it[65]=st[65]=3,it[105]=st[105]=3,tt[160]=ot[160]=11,et[160]=rt[160]=14,tt[10]=ot[10]=11,et[10]=rt[10]=14,nt[130]=at[130]=6,it[130]=st[130]=3,nt[40]=at[40]=6,it[40]=st[40]=3,et[101]=st[101]=1,et[69]=st[69]=1,rt[149]=at[149]=21,rt[21]=at[21]=21,nt[86]=ot[86]=17,nt[84]=ot[84]=17,tt[89]=it[89]=9,tt[81]=it[81]=9,tt[96]=st[96]=0,et[96]=ot[96]=15,tt[74]=st[74]=0,et[74]=ot[74]=15,tt[24]=nt[24]=8,it[24]=at[24]=7,tt[146]=nt[146]=8,it[146]=at[146]=7,et[6]=ot[6]=15,nt[6]=rt[6]=16,et[164]=ot[164]=15,nt[164]=rt[164]=16,it[129]=at[129]=7,rt[129]=st[129]=20,it[41]=at[41]=7,rt[41]=st[41]=20,nt[66]=st[66]=2,it[66]=ot[66]=19,nt[104]=st[104]=2,it[104]=ot[104]=19,tt[144]=rt[144]=10,ot[144]=at[144]=23,tt[26]=rt[26]=10,ot[26]=at[26]=23,et[36]=at[36]=5,nt[36]=st[36]=2,et[134]=at[134]=5,nt[134]=st[134]=2,tt[9]=rt[9]=10,et[9]=it[9]=13,tt[161]=rt[161]=10,et[161]=it[161]=13,et[37]=at[37]=5,rt[37]=st[37]=20,et[133]=at[133]=5,rt[133]=st[133]=20,nt[148]=rt[148]=16,ot[148]=at[148]=23,nt[22]=rt[22]=16,ot[22]=at[22]=23,tt[82]=nt[82]=8,it[82]=ot[82]=19,tt[88]=nt[88]=8,it[88]=ot[88]=19,tt[73]=st[73]=0,et[73]=it[73]=13,tt[97]=st[97]=0,et[97]=it[97]=13,tt[145]=it[145]=9,rt[145]=at[145]=21,tt[25]=it[25]=9,rt[25]=at[25]=21,et[70]=st[70]=1,nt[70]=ot[70]=17,et[100]=st[100]=1,nt[100]=ot[100]=17,tt[34]=it[34]=9,et[34]=nt[34]=12,rt[34]=at[34]=21,ot[34]=st[34]=22,tt[136]=at[136]=4,et[136]=st[136]=1,nt[136]=ot[136]=17,it[136]=rt[136]=18,tt[35]=at[35]=4,et[35]=nt[35]=12,it[35]=rt[35]=18,ot[35]=st[35]=22,tt[153]=at[153]=4,it[153]=rt[153]=18,et[102]=nt[102]=12,ot[102]=st[102]=22,tt[155]=it[155]=9,rt[155]=at[155]=23,et[103]=st[103]=1,nt[103]=ot[103]=17,tt[152]=at[152]=4,nt[152]=ot[152]=17,it[152]=rt[152]=18,tt[156]=nt[156]=8,it[156]=rt[156]=18,ot[156]=at[156]=23,tt[137]=at[137]=4,et[137]=st[137]=1,it[137]=rt[137]=18,tt[139]=at[139]=4,et[139]=it[139]=13,rt[139]=st[139]=20,tt[98]=it[98]=9,et[98]=nt[98]=12,ot[98]=st[98]=22,tt[99]=st[99]=0,et[99]=nt[99]=12,it[99]=ot[99]=19,et[38]=nt[38]=12,rt[38]=at[38]=21,ot[38]=st[38]=22,et[39]=at[39]=5,nt[39]=rt[39]=16,ot[39]=st[39]=22;var lt=[];function ut(t,e,n){return(t-e)/(n-e)}function ct(t){return t.constructor.toString().indexOf("Array")>-1}function ht(t,e,n,i,r,o){for(var s=t.cells[n][e],a=s.cval_real,l=e+i,u=n+r,c=[],h=!1;!h;){if(void 0===t.cells[u]||void 0===t.cells[u][l])if(u-=r,l-=i,a=(s=t.cells[u][l]).cval_real,-1===r)if(0===o)if(1&a)c.push([l,u]),i=-1,r=0,o=0;else{if(!(4&a)){c.push([l+s.bottomright,u]),i=0,r=1,o=1,h=!0;break}c.push([l+1,u]),i=1,r=0,o=0}else{if(!(1&a)){if(4&a){c.push([l+s.bottomright,u]),i=0,r=1,o=1,h=!0;break}c.push([l+s.bottomleft,u]),i=0,r=1,o=0,h=!0;break}c.push([l,u]),i=-1,r=0,o=0}else if(1===r)if(0===o){if(!(a&x)){if(a&b){c.push([l+s.topleft,u+1]),i=0,r=-1,o=0,h=!0;break}c.push([l+s.topright,u+1]),i=0,r=-1,o=1,h=!0;break}c.push([l+1,u+1]),i=1,r=0,o=1}else c.push([l+1,u+1]),i=1,r=0,o=1;else if(-1===i)if(0===o){if(!(a&b)){if(1&a){c.push([l,u+s.leftbottom]),i=1,r=0,o=0,h=!0;break}c.push([l,u+s.lefttop]),i=1,r=0,o=1,h=!0;break}c.push([l,u+1]),i=0,r=1,o=0}else{if(!(a&b)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([l,u+1]),i=0,r=1,o=0}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){c.push([l+1,u+s.rightbottom]),i=-1,r=0,o=0,h=!0;break}c.push([l+1,u]),i=0,r=-1,o=1}else{if(!(4&a)){if(a&x){c.push([l+1,u+s.righttop]),i=-1,r=0,o=1;break}c.push([l+1,u+s.rightbottom]),i=-1,r=0,o=0,h=!0;break}c.push([l+1,u]),i=0,r=-1,o=1}}else if(a=(s=t.cells[u][l]).cval_real,-1===i)if(0===o)if(void 0!==t.cells[u-1]&&void 0!==t.cells[u-1][l])i=0,r=-1,o=1;else{if(!(1&a)){c.push([l+s.bottomright,u]),i=0,r=1,o=1,h=!0;break}c.push([l,u])}else{if(!(a&b)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+l+","+u);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===i){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u+1]&&void 0!==t.cells[u+1][l])i=0,r=1,o=0;else{if(!(a&x)){c.push([l+s.topleft,u+1]),i=0,r=-1,o=0,h=!0;break}c.push([l+1,u+1]),i=1,r=0,o=1}}else if(-1===r){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l+1])i=1,r=0,o=1;else{if(!(4&a)){c.push([l+1,u+s.righttop]),i=-1,r=0,o=1,h=!0;break}c.push([l+1,u]),i=0,r=-1,o=1}}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l-1])i=-1,r=0,o=0;else{if(!(a&b)){c.push([l,u+s.leftbottom]),i=1,r=0,o=0,h=!0;break}c.push([l,u+1]),i=0,r=1,o=0}}if(u+=r,(l+=i)===e&&u===n)break}return{path:c,i:l,j:u,x:i,y:r,o}}function pt(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&x?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&x?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&b?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&b?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&b?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&b?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&b?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&x?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&b?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&x?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function dt(t,e,n,i){var r,o,s,a,l,u=t.cval;switch(e){case-1:0===i?(r=et[u],s=T[u],a=R[u],l=N[u]):(r=tt[u],s=I[u],a=L[u],l=M[u]);break;case 1:0===i?(r=rt[u],s=B[u],a=U[u],l=W[u]):(r=ot[u],s=V[u],a=Z[u],l=z[u]);break;default:switch(n){case-1:0===i?(r=st[u],s=w[u],a=E[u],l=P[u]):(r=at[u],s=C[u],a=O[u],l=S[u]);break;case 1:0===i?(r=it[u],s=A[u],a=D[u],l=j[u]):(r=nt[u],s=F[u],a=k[u],l=G[u])}}if(o=t.edges.indexOf(r),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),u=t.cval_real,r){case 0:u&x?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&u?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&u?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&u?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:u&x?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&u?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&u?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&u?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&u?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&u?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&u?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:u&b?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&u?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&u?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&u?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:u&b?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&u?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:u&b?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&u?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:u&b?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:u&b?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:u&x?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:u&b?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:u&x?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+l)),{p:[e,n],x:s,y:a,o:l}}function ft(t,e,n){if(n=n||{},!l.isObject(n))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(a.collectionOf(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!l.isObject(r))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=function(t,e){if(e=e||{},!l.isObject(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;a.collectionOf(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return c.featureEach(t,(function(t){var e=a.getCoords(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return a.getCoords(t)[0]-a.getCoords(e)[0]}))})).sort((function(t,n){return e?a.getCoords(t[0])[1]-a.getCoords(n[0])[1]:a.getCoords(n[0])[1]-a.getCoords(t[0])[1]}))}(t,i),s=[],u=0;u<o.length;u++){for(var h=o[u],p=[],d=0;d<h.length;d++){var f=h[d];f.properties[n]?p.push(f.properties[n]):p.push(0),!0===r&&(f.properties.matrixPosition=[u,d])}s.push(p)}return s}(t,{zProperty:i,flip:!0}),u=function(t,e,n){for(var i=[],r=1;r<e.length;r++){var o=+e[r-1],s=+e[r],a=yt(gt(v(t,o,s-o))),l={};l.groupedRings=a,l[n]=o+"-"+s,i.push(l)}return i}(s,e,i);u=function(t,e,n){var i=p.default(n),r=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],l=e[0].length-1,u=e.length-1,c=r/l,h=o/u,d=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(d)}))}))})),t}(u,s,t);var h=u.map((function(t,e){if(o[e]&&!l.isObject(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=y.default({},r,o[e]);return n[i]=t[i],l.multiPolygon(t.groupedRings,n)}));return l.featureCollection(h)}function gt(t){var e=[],n=[];t.forEach((function(t){var i=d.default(l.polygon([t]));n.push(i),e.push({ring:t,area:i})})),n.sort((function(t,e){return e-t}));var i=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){i.push(e[n].ring),e.splice(n,1);break}})),i}function yt(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!mt(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var r=[];r.push(e[i].lrCoordinates),e[i].grouped=!0;for(var o=l.polygon([e[i].lrCoordinates]),s=i+1;s<e.length;s++)e[s].grouped||_t(l.polygon([e[s].lrCoordinates]),o)&&(r.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(r)}return n}function _t(t,e){for(var n=g.default(t),i=0;i<n.features.length;i++)if(!f.default(n.features[i],e))return!1;return!0}function mt(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}lt[1]=lt[169]=q,lt[4]=lt[166]=X,lt[16]=lt[154]=Y,lt[64]=lt[106]=H,lt[168]=lt[2]=J,lt[162]=lt[8]=K,lt[138]=lt[32]=$,lt[42]=lt[128]=Q,lt[5]=lt[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},lt[20]=lt[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},lt[80]=lt[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},lt[65]=lt[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},lt[160]=lt[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},lt[130]=lt[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},lt[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},lt[101]=lt[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},lt[149]=lt[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},lt[86]=lt[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},lt[89]=lt[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},lt[96]=lt[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},lt[24]=lt[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},lt[6]=lt[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},lt[129]=lt[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},lt[66]=lt[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},lt[144]=lt[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},lt[36]=lt[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},lt[9]=lt[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},lt[37]=lt[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},lt[148]=lt[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},lt[82]=lt[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},lt[73]=lt[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},lt[145]=lt[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},lt[70]=lt[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},lt[34]=function(t){return[Q(t),K(t)]},lt[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},lt[136]=function(t){return[$(t),J(t)]},lt[153]=function(t){return[Y(t),q(t)]},lt[102]=function(t){return[X(t),H(t)]},lt[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},lt[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},lt[152]=function(t){return[Y(t),J(t)]},lt[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},lt[137]=function(t){return[$(t),q(t)]},lt[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},lt[98]=function(t){return[K(t),H(t)]},lt[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},lt[38]=function(t){return[X(t),Q(t)]},lt[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},t.exports=ft,t.exports.default=ft},7928:(t,e,n)=>{"use strict";var i=n(9705),r=n(31540),o=n(10611),s=n(84102),a=n(27418);function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(i),c=l(a),h={successCallback:null,verbose:!1},p={};function d(t,e,n){n=n||{};for(var i=Object.keys(h),r=0;r<i.length;r++){var o=i[r],s=n[o];s=null!=s?s:h[o],p[o]=s}p.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a,l,u,c=(a=function(t,e){for(var n=t.length-1,i=t[0].length-1,r={rows:n,cols:i,cells:[]},o=0;o<n;++o){r.cells[o]=[];for(var s=0;s<i;++s){var a=0,l=t[o+1][s],u=t[o+1][s+1],c=t[o][s+1],h=t[o][s];if(!(isNaN(l)||isNaN(u)||isNaN(c)||isNaN(h))){a|=l>=e?8:0,a|=u>=e?4:0,a|=c>=e?2:0;var p,d,g,y,_=!1;if(5==(a|=h>=e?1:0)||10===a){var m=(l+u+c+h)/4;5===a&&m<e?(a=10,_=!0):10===a&&m<e&&(a=5,_=!0)}0!==a&&15!==a&&(p=d=g=y=.5,1===a?(g=1-f(e,l,h),d=1-f(e,c,h)):2===a?(d=f(e,h,c),y=1-f(e,u,c)):3===a?(g=1-f(e,l,h),y=1-f(e,u,c)):4===a?(p=f(e,l,u),y=f(e,c,u)):5===a?(p=f(e,l,u),y=f(e,c,u),d=1-f(e,c,h),g=1-f(e,l,h)):6===a?(d=f(e,h,c),p=f(e,l,u)):7===a?(g=1-f(e,l,h),p=f(e,l,u)):8===a?(g=f(e,h,l),p=1-f(e,u,l)):9===a?(d=1-f(e,c,h),p=1-f(e,u,l)):10===a?(p=1-f(e,u,l),y=1-f(e,u,c),d=f(e,h,c),g=f(e,h,l)):11===a?(p=1-f(e,u,l),y=1-f(e,u,c)):12===a?(g=f(e,h,l),y=f(e,c,u)):13===a?(d=1-f(e,c,h),y=f(e,c,u)):14===a?(g=f(e,h,l),d=f(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),r.cells[o][s]={cval:a,flipped:_,top:p,right:y,bottom:d,left:g})}}}return r}(t,e),l=[],u=0,1e-7,a.cells.forEach((function(t,e){t.forEach((function(t,n){if(void 0!==t&&5!==(p=t).cval&&10!==p.cval&&!g(t)){var i=function(t,e,n){var i,r,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],u=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],c=t[e][n],h=c.cval,p=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][h],d=_(c,p);s.push([n+d[0],e+d[1]]),d=_(c,p=u[h]),s.push([n+d[0],e+d[1]]),y(c);for(var f=n+a[h],g=e+l[h],m=h;f>=0&&g>=0&&g<o&&(f!=n||g!=e)&&void 0!==(c=t[g][f]);){if(0===(h=c.cval)||15===h)return{path:s,info:"mergeable"};p=u[h],i=a[h],r=l[h],5!==h&&10!==h||(5===h?c.flipped?-1===l[m]?(p="left",i=-1,r=0):(p="right",i=1,r=0):-1===a[m]&&(p="bottom",i=0,r=-1):10===h&&(c.flipped?-1===a[m]?(p="top",i=0,r=1):(p="bottom",i=0,r=-1):1===l[m]&&(p="left",i=-1,r=0))),d=_(c,p),s.push([f+d[0],g+d[1]]),y(c),f+=i,g+=r,m=h}return{path:s,info:"closed"}}(a.cells,e,n),r=!1;if("mergeable"===i.info)for(var o=i.path[i.path.length-1][0],s=i.path[i.path.length-1][1],c=u-1;c>=0;c--)if(Math.abs(l[c][0][0]-o)<=1e-7&&Math.abs(l[c][0][1]-s)<=1e-7){for(var h=i.path.length-2;h>=0;--h)l[c].unshift(i.path[h]);r=!0;break}r||(l[u++]=i.path)}var p}))})),l);return"function"==typeof p.successCallback&&p.successCallback(c),c}function f(t,e,n){return(t-e)/(n-e)}function g(t){return 0===t.cval||15===t.cval}function y(t){g(t)||5===t.cval||10===t.cval||(t.cval=15)}function _(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function m(t,e,n){if(n=n||{},!s.isObject(n))throw new Error("options is invalid");var i=n.zProperty||"elevation",a=n.commonProperties||{},l=n.breaksProperties||[];if(o.collectionOf(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!s.isObject(a))throw new Error("commonProperties must be an Object");if(!Array.isArray(l))throw new Error("breaksProperties must be an Array");var h=function(t,e){if(e=e||{},!s.isObject(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,a=e.flags;o.collectionOf(t,"Point","input must contain Points");for(var l=function(t,e){var n={};return r.featureEach(t,(function(t){var e=o.getCoords(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return o.getCoords(t)[0]-o.getCoords(e)[0]}))})).sort((function(t,n){return e?o.getCoords(t[0])[1]-o.getCoords(n[0])[1]:o.getCoords(n[0])[1]-o.getCoords(t[0])[1]}))}(t,i),u=[],c=0;c<l.length;c++){for(var h=l[c],p=[],d=0;d<h.length;d++){var f=h[d];f.properties[n]?p.push(f.properties[n]):p.push(0),!0===a&&(f.properties.matrixPosition=[c,d])}u.push(p)}return u}(t,{zProperty:i,flip:!0}),p=function(t,e,n,i,r){for(var o=[],a=1;a<e.length;a++){var l=+e[a],u=c.default({},i,r[a]);u[n]=l;var h=s.multiLineString(d(t,l),u);o.push(h)}return o}(h,e,i,a,l),f=function(t,e,n){var i=u.default(n),o=i[2]-i[0],s=i[3]-i[1],a=i[0],l=i[1],c=e[0].length-1,h=e.length-1,p=o/c,d=s/h,f=function(t){t[0]=t[0]*p+a,t[1]=t[1]*d+l};return t.forEach((function(t){r.coordEach(t,f)})),t}(p,h,t);return s.featureCollection(f)}t.exports=m,t.exports.default=m},81641:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102);e.default=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var s=(a=t[n][0],l=t[n][1],u=t[n+1][0],c=t[n+1][1],h=e[o][0],p=e[o][1],d=e[o+1][0],f=e[o+1][1],g=void 0,y=void 0,_=void 0,m=void 0,v=void 0,v={x:null,y:null,onLine1:!1,onLine2:!1},0==(g=(f-p)*(u-a)-(d-h)*(c-l))?null!==v.x&&null!==v.y&&v:(m=(u-a)*(y=l-p)-(c-l)*(_=a-h),y=((d-h)*y-(f-p)*_)/g,_=m/g,v.x=a+y*(u-a),v.y=l+y*(c-l),y>=0&&y<=1&&(v.onLine1=!0),_>=0&&_<=1&&(v.onLine2=!0),!(!v.onLine1||!v.onLine2)&&[v.x,v.y]));s&&r.features.push(i.point([s[0],s[1]]))}var a,l,u,c,h,p,d,f,g,y,_,m,v}))})),r}},10091:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(31013)),o=n(31540);e.default=function(t,e){return void 0===e&&(e={}),o.segmentReduce(t,(function(t,n){var i=n.geometry.coordinates;return t+r.default(i[0],i[1],e)}),0)}},67272:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(90265)),o=i(n(93737)),s=n(84102);function a(t){var e=t%360;return e<0&&(e+=360),e}e.default=function(t,e,n,i,l){void 0===l&&(l={});var u=l.steps||64,c=a(n),h=a(i),p=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(c===h)return s.lineString(r.default(t,e,l).geometry.coordinates[0],p);for(var d=c,f=c<h?h:h+360,g=d,y=[],_=0;g<f;)y.push(o.default(t,e,g,l).geometry.coordinates),g=d+360*++_/u;return g>f&&y.push(o.default(t,e,f,l).geometry.coordinates),s.lineString(y,p)}},39632:(t,e,n)=>{"use strict";var i=n(10091),r=n(51378),o=n(31540),s=n(84102);function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(i),u=a(r);function c(t,e,n){if(n=n||{},!s.isObject(n))throw new Error("options is invalid");var i=n.units,r=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var a=[];return o.flattenEach(t,(function(t){r&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,i){var r=l.default(t,{units:n});if(r<=e)return i(t);var o=r/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)i(u.default(t,e*s,e*(s+1),{units:n}))}(t,e,i,(function(t){a.push(t)}))})),s.featureCollection(a)}t.exports=c,t.exports.default=c},73663:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=n(10611),s=i(n(54590)),a=n(31540),l=i(n(51787));function u(t,e){var n=o.getCoords(t),i=o.getCoords(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var s=n[0][0],a=n[0][1],l=n[1][0],u=n[1][1],c=i[0][0],h=i[0][1],p=i[1][0],d=i[1][1],f=(d-h)*(l-s)-(p-c)*(u-a);if(0===f)return null;var g=((p-c)*(a-h)-(d-h)*(s-c))/f,y=((l-s)*(a-h)-(u-a)*(s-c))/f;if(g>=0&&g<=1&&y>=0&&y<=1){var _=s+g*(l-s),m=a+g*(u-a);return r.point([_,m])}return null}e.default=function(t,e){var n={},i=[];if("LineString"===t.type&&(t=r.feature(t)),"LineString"===e.type&&(e=r.feature(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var c=u(t,e);return c&&i.push(c),r.featureCollection(i)}var h=l.default();return h.load(s.default(e)),a.featureEach(s.default(t),(function(t){a.featureEach(h.search(t),(function(e){var r=u(t,e);if(r){var s=o.getCoords(r).join(",");n[s]||(n[s]=!0,i.push(r))}}))})),r.featureCollection(i)}},15668:(t,e,n)=>{"use strict";var i=n(31540),r=n(10611),o=n(84102);function s(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function a(t,e){return t[0]*e[1]-e[0]*t[1]}function l(t,e,n){if(n=n||{},!o.isObject(n))throw new Error("options is invalid");var s=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var a=r.getType(t),l=t.properties;switch(a){case"LineString":return u(t,e,s);case"MultiLineString":var c=[];return i.flattenEach(t,(function(t){c.push(u(t,e,s).geometry.coordinates)})),o.multiLineString(c,l);default:throw new Error("geometry "+a+" is not supported")}}function u(t,e,n){var i=[],l=o.lengthToDegrees(e,n),u=r.getCoords(t),c=[];return u.forEach((function(t,e){if(e!==u.length-1){var n=(d=t,f=u[e+1],g=l,y=Math.sqrt((d[0]-f[0])*(d[0]-f[0])+(d[1]-f[1])*(d[1]-f[1])),_=d[0]+g*(f[1]-d[1])/y,m=f[0]+g*(f[1]-d[1])/y,[[_,d[1]+g*(d[0]-f[0])/y],[m,f[1]+g*(d[0]-f[0])/y]]);if(i.push(n),e>0){var r=i[e-1],o=!function(t,e){return 0===a(s(t),s(e))}(h=n,p=r)&&function(t,e){var n,i,r=t[0],o=s(t),l=e[0],u=s(e),c=a(o,u),h=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(r,function(t,e){return[t*e[0],t*e[1]]}(a((i=r,[(n=l)[0]-i[0],n[1]-i[1]]),u)/c,o));return h}(h,p);!1!==o&&(r[1]=o,n[0]=o),c.push(r[0]),e===u.length-2&&(c.push(n[0]),c.push(n[1]))}2===u.length&&(c.push(n[0]),c.push(n[1]))}var h,p,d,f,g,y,_,m})),o.lineString(c,t.properties)}t.exports=l,t.exports.default=l},90273:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(51787)),o=i(n(54590)),s=i(n(13807)),a=i(n(72793)),l=n(10611),u=n(31540),c=n(84102),h=i(n(10251));function p(t,e){var n=l.getCoords(e),i=l.getCoords(t),r=i[0],o=i[i.length-1],s=t.geometry.coordinates;return h.default(n[0],r)?s.unshift(n[1]):h.default(n[0],o)?s.push(n[1]):h.default(n[1],r)?s.unshift(n[0]):h.default(n[1],o)&&s.push(n[0]),t}e.default=function(t,e,n){if(void 0===n&&(n={}),n=n||{},!c.isObject(n))throw new Error("options is invalid");var i,d=n.tolerance||0,f=[],g=r.default(),y=o.default(t);return g.load(y),u.segmentEach(e,(function(t){var e=!1;t&&(u.featureEach(g.search(t),(function(n){if(!1===e){var r=l.getCoords(t).sort(),o=l.getCoords(n).sort();h.default(r,o)||(0===d?a.default(r[0],n)&&a.default(r[1],n):s.default(n,r[0]).properties.dist<=d&&s.default(n,r[1]).properties.dist<=d)?(e=!0,i=i?p(i,t):t):(0===d?a.default(o[0],t)&&a.default(o[1],t):s.default(t,o[0]).properties.dist<=d&&s.default(t,o[1]).properties.dist<=d)&&(i=i?p(i,n):n)}})),!1===e&&i&&(f.push(i),i=void 0))})),i&&f.push(i),c.featureCollection(f)}},54590:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102),r=n(10611),o=n(31540);e.default=function(t){if(!t)throw new Error("geojson is required");var e=[];return o.flattenEach(t,(function(t){!function(t,e){var n=[],o=t.geometry;if(null!==o){switch(o.type){case"Polygon":n=r.getCoords(o);break;case"LineString":n=[r.getCoords(o)]}n.forEach((function(n){var r=function(t,e){var n=[];return t.reduce((function(t,r){var o,s,a,l,u,c,h=i.lineString([t,r],e);return h.bbox=(s=r,a=(o=t)[0],l=o[1],[a<(u=s[0])?a:u,l<(c=s[1])?l:c,a>u?a:u,l>c?l:c]),n.push(h),r})),n}(n,t.properties);r.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),i.featureCollection(e)}},51378:(t,e,n)=>{"use strict";var i=n(51208),r=n(31013),o=n(93737),s=n(84102);function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(i),u=a(r),c=a(o);function h(t,e,n,i){if(i=i||{},!s.isObject(i))throw new Error("options is invalid");var r,o=[];if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}for(var a,h,p,d=r.length,f=0,g=0;g<r.length&&!(e>=f&&g===r.length-1);g++){if(f>e&&0===o.length){if(!(a=e-f))return o.push(r[g]),s.lineString(o);h=l.default(r[g],r[g-1])-180,p=c.default(r[g],a,h,i),o.push(p.geometry.coordinates)}if(f>=n)return(a=n-f)?(h=l.default(r[g],r[g-1])-180,p=c.default(r[g],a,h,i),o.push(p.geometry.coordinates),s.lineString(o)):(o.push(r[g]),s.lineString(o));if(f>=e&&o.push(r[g]),g===r.length-1)return s.lineString(o);f+=u.default(r[g],r[g+1],i)}if(f<e&&r.length===d)throw new Error("Start position is beyond line");var y=r[r.length-1];return s.lineString([y,y])}t.exports=h,t.exports.default=h},74792:(t,e,n)=>{"use strict";var i=n(10611),r=n(84102);function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=o(n(13807));function a(t,e,n){var o=i.getCoords(n);if("LineString"!==i.getType(n))throw new Error("line must be a LineString");for(var a,l=s.default(n,t),u=s.default(n,e),c=[(a=l.properties.index<=u.properties.index?[l,u]:[u,l])[0].geometry.coordinates],h=a[0].properties.index+1;h<a[1].properties.index+1;h++)c.push(o[h]);return c.push(a[1].geometry.coordinates),r.lineString(c,n.properties)}t.exports=a,t.exports.default=a},7477:(t,e,n)=>{"use strict";var i=n(51787),r=n(55077),o=n(9705),s=n(15608),a=n(54590),l=n(73663),u=n(13807),c=n(10611),h=n(31540),p=n(84102);function d(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f=d(i),g=d(r),y=d(o),_=d(s),m=d(a),v=d(l),b=d(u);function x(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=c.getType(t),i=c.getType(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection");var r=_.default(e,{precision:7});switch(i){case"Point":return E(t,r);case"MultiPoint":return w(t,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return w(t,v.default(t,r))}}function w(t,e){var n=[],i=f.default();return h.flattenEach(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var r=i.search(e);if(r.features.length){var o=P(e,r);n=n.filter((function(t){return t.id!==o.id})),i.remove(o),h.featureEach(E(o,e),(function(t){n.push(t),i.insert(t)}))}}else(n=E(t,e).features).forEach((function(t){t.bbox||(t.bbox=g.default(y.default(t)))})),i.load(p.featureCollection(n))})),p.featureCollection(n)}function E(t,e){var n=[],i=c.getCoords(t)[0],r=c.getCoords(t)[t.geometry.coordinates.length-1];if(C(i,c.getCoord(e))||C(r,c.getCoord(e)))return p.featureCollection([t]);var o=f.default(),s=m.default(t);o.load(s);var a=o.search(e);if(!a.features.length)return p.featureCollection([t]);var l=P(e,a),u=[i],d=h.featureReduce(s,(function(t,i,r){var o=c.getCoords(i)[1],s=c.getCoord(e);return r===l.id?(t.push(s),n.push(p.lineString(t)),C(s,o)?[s]:[s,o]):(t.push(o),t)}),u);return d.length>1&&n.push(p.lineString(d)),p.featureCollection(n)}function P(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,i=1/0;return h.featureEach(e,(function(e){var r=b.default(e,t).properties.dist;r<i&&(n=e,i=r)})),n}function C(t,e){return t[0]===e[0]&&t[1]===e[1]}t.exports=x,t.exports.default=x},41933:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(9705)),o=n(10611),s=n(84102),a=i(n(76565));function l(t,e,n,i){e=e||("Feature"===t.type?t.properties:{});var a=o.getGeom(t),l=a.coordinates,c=a.type;if(!l.length)throw new Error("line must contain coordinates");switch(c){case"LineString":return n&&(l=u(l)),s.polygon([l],e);case"MultiLineString":var h=[],p=0;return l.forEach((function(t){if(n&&(t=u(t)),i){var e=(a=(o=r.default(s.lineString(t)))[0],l=o[1],c=o[2],d=o[3],Math.abs(a-c)*Math.abs(l-d));e>p?(h.unshift(t),p=e):h.push(t)}else h.push(t);var o,a,l,c,d})),s.polygon(h,e);default:throw new Error("geometry type "+c+" is not supported")}}function u(t){var e=t[0],n=e[0],i=e[1],r=t[t.length-1],o=r[0],s=r[1];return n===o&&i===s||t.push(e),t}e.default=function(t,e){var n,i,r;void 0===e&&(e={});var u=e.properties,c=null===(n=e.autoComplete)||void 0===n||n,h=null===(i=e.orderCoords)||void 0===i||i;if(null!==(r=e.mutate)&&void 0!==r&&r||(t=a.default(t)),"FeatureCollection"===t.type){var p=[];return t.features.forEach((function(t){p.push(o.getCoords(l(t,{},c,h)))})),s.multiPolygon(p,u)}return l(t,u,c,h)}},60482:(t,e,n)=>{"use strict";var i=n(84102);function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=r(n(24629));function s(t,e){var n,r=function(t){var e=t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]];return i.polygon(e)}(e);return("FeatureCollection"===t.type?a(2===(n=t).features.length?o.default.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):o.default.union.apply(o.default,n.features.map((function(t){return t.geometry.coordinates})))):a(o.default.union(t.geometry.coordinates))).geometry.coordinates.forEach((function(t){r.geometry.coordinates.push(t[0])})),r}function a(t){return i.multiPolygon(t)}t.exports=s,t.exports.default=s},31540:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102);function r(t,e,n){if(null!==t)for(var i,o,s,a,l,u,c,h,p=0,d=0,f=t.type,g="FeatureCollection"===f,y="Feature"===f,_=g?t.features.length:1,m=0;m<_;m++){l=(h=!!(c=g?t.features[m].geometry:y?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<l;v++){var b=0,x=0;if(null!==(a=h?c.geometries[v]:c)){u=a.coordinates;var w=a.type;switch(p=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,d,m,b,x))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],d,m,b,x))return!1;d++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(o=0;o<u[i].length-p;o++){if(!1===e(u[i][o],d,m,b,x))return!1;d++}"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(x=0,o=0;o<u[i].length;o++){for(s=0;s<u[i][o].length-p;s++){if(!1===e(u[i][o][s],d,m,b,x))return!1;d++}x++}b++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===r(a.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,i,r,o,s,a,l,u,c,h,p=0,d="FeatureCollection"===t.type,f="Feature"===t.type,g=d?t.features.length:1;for(n=0;n<g;n++){for(a=d?t.features[n].geometry:f?t.geometry:t,u=d?t.features[n].properties:f?t.properties:{},c=d?t.features[n].bbox:f?t.bbox:void 0,h=d?t.features[n].id:f?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=l?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,u,c,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],p,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,u,c,h))return!1;p++}}function l(t,e){a(t,(function(t,n,r,o,s){var a,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(i.feature(t,r,{bbox:o,id:s}),n,0)&&void 0}switch(l){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c={type:a,coordinates:t.coordinates[u]};if(!1===e(i.feature(c,r),n,u))return!1}}))}function u(t,e){l(t,(function(t,n,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var l,u=0,c=0,h=0;return!1!==r(t,(function(r,a,p,d,f){if(void 0===l||n>u||d>c||f>h)return l=r,u=n,c=d,h=f,void(s=0);var g=i.lineString([l,r],t.properties);if(!1===e(g,n,o,f,s))return!1;s++,l=r}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");l(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.type,s=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(i.lineString(s[a],t.properties),n,r,a))return!1}}}))}e.coordAll=function(t){var e=[];return r(t,(function(t){e.push(t)})),e},e.coordEach=r,e.coordReduce=function(t,e,n,i){var o=n;return r(t,(function(t,i,r,s,a){o=0===i&&void 0===n?t:e(o,t,i,r,s,a)}),i),o},e.featureEach=s,e.featureReduce=function(t,e,n){var i=n;return s(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.findPoint=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return i.point(u,l,e);case"MultiPoint":return o<0&&(o=u.length+o),i.point(u[o],l,e);case"LineString":return a<0&&(a=u.length+a),i.point(u[a],l,e);case"Polygon":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a),i.point(u[s][a],l,e);case"MultiLineString":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),i.point(u[o][a],l,e);case"MultiPolygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a<0&&(a=u[o][s].length-a),i.point(u[o][s][a],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),i.lineString([u[a],u[a+1]],l,e);case"Polygon":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a-1),i.lineString([u[s][a],u[s][a+1]],l,e);case"MultiLineString":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),i.lineString([u[o][a],u[o][a+1]],l,e);case"MultiPolygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a<0&&(a=u[o][s].length-a-1),i.lineString([u[o][s][a],u[o][s][a+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,n){var i=n;return l(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i},e.geomEach=a,e.geomReduce=function(t,e,n){var i=n;return a(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)})),i},e.lineEach=c,e.lineReduce=function(t,e,n){var i=n;return c(t,(function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)})),i},e.propEach=o,e.propReduce=function(t,e,n){var i=n;return o(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.segmentEach=u,e.segmentReduce=function(t,e,n){var i=n,r=!1;return u(t,(function(t,o,s,a,l){i=!1===r&&void 0===n?t:e(i,t,o,s,a,l),r=!0})),i}},99034:(t,e,n)=>{"use strict";var i=n(51208),r=n(93737),o=n(31013);function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=s(i),l=s(r),u=s(o);function c(t,e){var n=u.default(t,e),i=a.default(t,e);return l.default(t,n/2,i)}t.exports=c,t.exports.default=c},10920:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(35366)),o=n(31540);function s(t){for(var e=0,n=0,i=t;n<i.length;n++)e+=i[n];return e/t.length}e.default=function(t,e){var n=e.inputField,i=e.threshold||1e5,a=e.p||2,l=e.binary||!1,u=e.alpha||-1,c=e.standardization||!0,h=r.default(t,{alpha:u,binary:l,p:a,standardization:c,threshold:i}),p=[];o.featureEach(t,(function(t){var e=t.properties||{};p.push(e[n])}));for(var d=s(p),f=function(t){for(var e=s(t),n=0,i=0,r=t;i<r.length;i++){var o=r[i];n+=Math.pow(o-e,2)}return n/t.length}(p),g=0,y=0,_=0,m=0,v=h.length,b=0;b<v;b++){for(var x=0,w=0;w<v;w++)g+=h[b][w]*(p[b]-d)*(p[w]-d),y+=h[b][w],_+=Math.pow(h[b][w]+h[w][b],2),x+=h[b][w]+h[w][b];m+=Math.pow(x,2)}var E=g/y/f,P=-1/(v-1),C=(v*v*(_*=.5)-v*m+y*y*3)/((v-1)*(v+1)*(y*y))-P*P,O=Math.sqrt(C);return{expectedMoranIndex:P,moranIndex:E,stdNorm:O,zNorm:(E-P)/O}}},13807:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(51208)),o=i(n(31013)),s=i(n(93737)),a=i(n(73663)),l=n(31540),u=n(84102),c=n(10611);e.default=function(t,e,n){void 0===n&&(n={});var i=u.point([1/0,1/0],{dist:1/0}),h=0;return l.flattenEach(t,(function(t){for(var l=c.getCoords(t),p=0;p<l.length-1;p++){var d=u.point(l[p]);d.properties.dist=o.default(e,d,n);var f=u.point(l[p+1]);f.properties.dist=o.default(e,f,n);var g=o.default(d,f,n),y=Math.max(d.properties.dist,f.properties.dist),_=r.default(d,f),m=s.default(e,y,_+90,n),v=s.default(e,y,_-90,n),b=a.default(u.lineString([m.geometry.coordinates,v.geometry.coordinates]),u.lineString([d.geometry.coordinates,f.geometry.coordinates])),x=null;b.features.length>0&&((x=b.features[0]).properties.dist=o.default(e,x,n),x.properties.location=h+o.default(d,x,n)),d.properties.dist<i.properties.dist&&((i=d).properties.index=p,i.properties.location=h),f.properties.dist<i.properties.dist&&((i=f).properties.index=p+1,i.properties.location=h+g),x&&x.properties.dist<i.properties.dist&&((i=x).properties.index=p),h+=g}})),i}},82059:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(10611),o=n(31540),s=i(n(63892)),a=i(n(27418));e.default=function(t,e,n){void 0===n&&(n={});var i=n.units,l=n.properties||{},u=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return o.geomEach(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!u.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==r.getType(e))throw new Error("line must be a LineString");var c=1/0,h=null;return o.featureEach(u,(function(t){var n=s.default(t,e,{units:i});n<c&&(c=n,h=t)})),h&&(h.properties=a.default({dist:c},h.properties,l)),h}},66379:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(76565)),o=i(n(31013)),s=n(31540);e.default=function(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,i=1/0,a=0;return s.featureEach(e,(function(e,n){var r=o.default(t,e);r<i&&(a=n,i=r)})),(n=r.default(e.features[a])).properties.featureIndex=a,n.properties.distanceToPoint=i,n}},63377:(t,e,n)=>{"use strict";var i=n(10611);function r(t,e){var n=i.getCoord(t),r=i.getGeom(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var o=e.properties||{},s=o.a,a=o.b,l=o.c,u=n[0],c=n[1],h=r[0][0],p=r[0][1],d=void 0!==s?s:r[0][2],f=r[1][0],g=r[1][1],y=void 0!==a?a:r[1][2],_=r[2][0],m=r[2][1],v=void 0!==l?l:r[2][2];return(v*(u-h)*(c-g)+d*(u-f)*(c-m)+y*(u-_)*(c-p)-y*(u-h)*(c-m)-v*(u-f)*(c-p)-d*(u-_)*(c-g))/((u-h)*(c-g)+(u-f)*(c-m)+(u-_)*(c-p)-(u-h)*(c-m)-(u-f)*(c-p)-(u-_)*(c-g))}t.exports=r,t.exports.default=r},36813:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(45184)),o=i(n(31013)),s=n(84102);e.default=function(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var i=[],a=t[0],l=t[1],u=t[2],c=t[3],h=e/o.default([a,l],[u,l],n)*(u-a),p=e/o.default([a,l],[a,c],n)*(c-l),d=u-a,f=c-l,g=Math.floor(d/h),y=(f-Math.floor(f/p)*p)/2,_=a+(d-g*h)/2;_<=u;){for(var m=l+y;m<=c;){var v=s.point([_,m],n.properties);n.mask?r.default(v,n.mask)&&i.push(v):i.push(v),m+=p}_+=h}return s.featureCollection(i)}},55771:(t,e,n)=>{"use strict";var i=n(63922),r=n(78230),o=n(66379),s=n(88147),a=n(84102);function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(i),c=l(r),h=l(o),p=l(s);function d(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?a.featureCollection([a.feature(t)]):a.featureCollection([t]):t}(t),n=c.default(e),i=!1,r=0;!i&&r<e.features.length;){var o,s=e.features[r].geometry,l=!1;if("Point"===s.type)n.geometry.coordinates[0]===s.coordinates[0]&&n.geometry.coordinates[1]===s.coordinates[1]&&(i=!0);else if("MultiPoint"===s.type){var d=!1;for(o=0;!d&&o<s.coordinates.length;)n.geometry.coordinates[0]===s.coordinates[o][0]&&n.geometry.coordinates[1]===s.coordinates[o][1]&&(i=!0,d=!0),o++}else if("LineString"===s.type)for(o=0;!l&&o<s.coordinates.length-1;)f(n.geometry.coordinates[0],n.geometry.coordinates[1],s.coordinates[o][0],s.coordinates[o][1],s.coordinates[o+1][0],s.coordinates[o+1][1])&&(l=!0,i=!0),o++;else if("MultiLineString"===s.type)for(var g=0;g<s.coordinates.length;){l=!1,o=0;for(var y=s.coordinates[g];!l&&o<y.length-1;)f(n.geometry.coordinates[0],n.geometry.coordinates[1],y[o][0],y[o][1],y[o+1][0],y[o+1][1])&&(l=!0,i=!0),o++;g++}else"Polygon"!==s.type&&"MultiPolygon"!==s.type||p.default(n,s)&&(i=!0);r++}if(i)return n;var _=a.featureCollection([]);for(r=0;r<e.features.length;r++)_.features=_.features.concat(u.default(e.features[r]).features);return a.point(h.default(n,_).geometry.coordinates)}function f(t,e,n,i,r,o){return Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}t.exports=d,t.exports.default=d},63892:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(31013)),o=n(84102),s=n(10611),a=n(31540),l=i(n(6213));function u(t,e){return t[0]*e[0]+t[1]*e[1]}function c(t,e,n){return"planar"===n.method?l.default(t,e,n):r.default(t,e,n)}e.default=function(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=o.point(t):"Point"===t.type?t=o.feature(t):s.featureOf(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=o.lineString(e):"LineString"===e.type?e=o.feature(e):s.featureOf(e,"LineString","line");var i=1/0,r=t.geometry.coordinates;return a.segmentEach(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,n,i){var r=[n[0]-e[0],n[1]-e[1]],o=u([t[0]-e[0],t[1]-e[1]],r);if(o<=0)return c(t,e,{method:i.method,units:"degrees"});var s=u(r,r);if(s<=o)return c(t,n,{method:i.method,units:"degrees"});var a=o/s;return c(t,[e[0]+a*r[0],e[1]+a*r[1]],{method:i.method,units:"degrees"})}(r,e,o,n);s<i&&(i=s)})),o.convertLength(i,"degrees",n.units)}},187:(t,e,n)=>{"use strict";var i=n(88147),r=n(84102),o=n(31540);function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=s(i);function l(t,e){var n=[];return o.featureEach(t,(function(t){var i=!1;if("Point"===t.geometry.type)o.geomEach(e,(function(e){a.default(t,e)&&(i=!0)})),i&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var s=[];o.geomEach(e,(function(e){o.coordEach(t,(function(t){a.default(t,e)&&(i=!0,s.push(t))}))})),i&&n.push(r.multiPoint(s))}})),r.featureCollection(n)}t.exports=l,t.exports.default=l},84978:(t,e,n)=>{"use strict";var i=n(31540),r=n(84102);function o(t,e){var n=[],o=e.iterations||1;if(!t)throw new Error("inputPolys is required");return i.geomEach(t,(function(t,e,i){var l,u,c;switch(t.type){case"Polygon":l=[[]];for(var h=0;h<o;h++)c=[[]],u=t,h>0&&(u=r.polygon(l).geometry),s(u,c),l=c.slice(0);n.push(r.polygon(l,i));break;case"MultiPolygon":l=[[[]]];for(var p=0;p<o;p++)c=[[[]]],u=t,p>0&&(u=r.multiPolygon(l).geometry),a(u,c),l=c.slice(0);n.push(r.multiPolygon(l,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),r.featureCollection(n)}function s(t,e){var n=0,r=0;i.coordEach(t,(function(i,o,s,a,l){l>n&&(n=l,r=o,e.push([]));var u=o-r,c=t.coordinates[l][u+1],h=i[0],p=i[1],d=c[0],f=c[1];e[l].push([.75*h+.25*d,.75*p+.25*f]),e[l].push([.25*h+.75*d,.25*p+.75*f])}),!0),e.forEach((function(t){t.push(t[0])}))}function a(t,e){var n=0,r=0,o=0;i.coordEach(t,(function(i,s,a,l,u){l>o&&(o=l,r=s,e.push([[]])),u>n&&(n=u,r=s,e[l].push([]));var c=s-r,h=t.coordinates[l][u][c+1],p=i[0],d=i[1],f=h[0],g=h[1];e[l][u].push([.75*p+.25*f,.75*d+.25*g]),e[l][u].push([.25*p+.75*f,.25*d+.75*g])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}t.exports=o,t.exports.default=o},5215:(t,e,n)=>{"use strict";var i=n(10611),r=n(84102),o=n(9705),s=n(63922),a=n(66379);function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(o),c=l(s),h=l(a);function p(t,e){var n,o,s,a,l=i.getCoords(t),p=i.getCoords(e),g=u.default(e),y=0,_=null;switch(l[0]>g[0]&&l[0]<g[2]&&l[1]>g[1]&&l[1]<g[3]&&(y=(_=h.default(t,c.default(e))).properties.featureIndex),i.getType(e)){case"Polygon":n=p[0][y],o=p[0][0],null!==_&&_.geometry.coordinates[1]<l[1]&&(o=p[0][y]),a=f(p[0][0],p[0][p[0].length-1],l);var m=d(p[0],l,a,s,n,o);n=m[0],o=m[1];break;case"MultiPolygon":for(var v=0,b=0,x=0,w=0;w<p[0].length;w++){v=w;for(var E=!1,P=0;P<p[0][w].length;P++){if(b=P,x===y){E=!0;break}x++}if(E)break}n=p[0][v][b],o=p[0][v][b],a=f(p[0][0][0],p[0][0][p[0][0].length-1],l),p.forEach((function(t){var e=d(t[0],l,a,s,n,o);n=e[0],o=e[1]}))}return r.featureCollection([r.point(n),r.point(o)])}function d(t,e,n,i,r,o){for(var s=0;s<t.length;s++){var a=t[s],l=t[s+1];s===t.length-1&&(l=t[0]),i=f(a,l,e),n<=0&&i>0?f(e,a,r)<0||(r=a):n>0&&i<=0&&(f(e,a,o)>0||(o=a)),n=i}return[r,o]}function f(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}t.exports=p,t.exports.default=p},97383:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102),r=n(10611);function o(t,e){return void 0===e&&(e={}),a(r.getGeom(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function s(t,e){void 0===e&&(e={});var n=r.getGeom(t).coordinates,o=e.properties?e.properties:"Feature"===t.type?t.properties:{},s=[];return n.forEach((function(t){s.push(a(t,o))})),i.featureCollection(s)}function a(t,e){return t.length>1?i.multiLineString(t,e):i.lineString(t[0],e)}e.default=function(t,e){void 0===e&&(e={});var n=r.getGeom(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return o(n,e);case"MultiPolygon":return s(n,e);default:throw new Error("invalid poly")}},e.polygonToLine=o,e.multiPolygonToLine=s,e.coordsToLine=a},24312:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=i(n(77254)),s=i(n(36467));e.default=function(t){var e=o.default.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],i=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):i.push(t)})),n.forEach((function(t){s.default.findEdgeRingContaining(t,i)&&i.push(t)})),r.featureCollection(i.map((function(t){return t.toPolygon()})))}},95344:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102),r=n(34772),o=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return i.lineString([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return r.orientationIndex(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}();e.default=o},36467:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(34772),o=n(84102),s=i(n(19062)),a=i(n(88147)),l=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e}),0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,o=r.orientationIndex(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===o?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:o>0},t.prototype.toMultiPoint=function(){return o.multiPoint(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=o.polygon([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=s.default(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,i,s=t.getEnvelope();return e.forEach((function(e){var a=e.getEnvelope();if(i&&(n=i.getEnvelope()),!r.envelopeIsEqual(a,s)&&r.envelopeContains(a,s)){for(var l=t.map((function(t){return t.from.coordinates})),u=void 0,c=function(t){e.some((function(e){return r.coordinatesEqual(t,e.from.coordinates)}))||(u=t)},h=0,p=l;h<p.length;h++)c(p[h]);u&&e.inside(o.point(u))&&(i&&!r.envelopeContains(n,a)||(i=e))}})),i},t.prototype.inside=function(t){return a.default(t,this.toPolygon())},t}();e.default=l},77254:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(23424)),o=i(n(95344)),s=i(n(36467)),a=n(31540),l=n(10611),u=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return a.flattenEach(e,(function(t){l.featureOf(t,"LineString","Graph::fromGeoJson"),a.coordReduce(t,(function(t,e){if(t){var i=n.getNode(t),r=n.getNode(e);n.addEdge(i,r)}return e}))})),n},t.prototype.getNode=function(t){var e=r.default.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new r.default(t)),n},t.prototype.addEdge=function(t,e){var n=new o.default(t,e),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var s=r[o],a=s.symetric,l=void 0,u=void 0;s.label===e&&(l=s),a.label===e&&(u=a),l&&u&&(u&&(i=u),l&&(i&&(i.next=l,i=void 0),n||(n=l)))}i&&(i.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var i=n;do{i.label=e,i=i.next}while(!n.isEqual(i));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,i=function(){var i=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++i})),i>1&&e.push(n.from),n=n.next};do{i()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new s.default;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}();e.default=u},23424:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(34772),r=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,o=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&o.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&o.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&o.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||o.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-o.coordinates[1]:o.coordinates[1]-r.coordinates[1];var s=i.orientationIndex(t.coordinates,r.coordinates,o.coordinates);return s<0?1:s>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(o.coordinates[0]-t.coordinates[0],2)+Math.pow(o.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}();e.default=r},34772:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(88147)),o=n(84102);e.orientationIndex=function(t,e,n){var i,r=e[0]-t[0],o=e[1]-t[1],s=n[0]-e[0];return((i=r*(n[1]-e[1])-s*o)>0)-(i<0)||+i},e.envelopeIsEqual=function(t,e){var n=t.geometry.coordinates[0].map((function(t){return t[0]})),i=t.geometry.coordinates[0].map((function(t){return t[1]})),r=e.geometry.coordinates[0].map((function(t){return t[0]})),o=e.geometry.coordinates[0].map((function(t){return t[1]}));return Math.max.apply(null,n)===Math.max.apply(null,r)&&Math.max.apply(null,i)===Math.max.apply(null,o)&&Math.min.apply(null,n)===Math.min.apply(null,r)&&Math.min.apply(null,i)===Math.min.apply(null,o)},e.envelopeContains=function(t,e){return e.geometry.coordinates[0].every((function(e){return r.default(o.point(e),t)}))},e.coordinatesEqual=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},20981:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(31540),o=n(84102),s=i(n(76565));function a(t,e,n){void 0===n&&(n={});var i=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&o.isNumber(t[0])?t="mercator"===e?l(t):u(t):(!0!==i&&(t=s.default(t)),r.coordEach(t,(function(t){var n="mercator"===e?l(t):u(t);t[0]=n[0],t[1]=n[1]}))),t}function l(t){var e,n=Math.PI/180,i=6378137,r=20037508.342789244,o=[i*(Math.abs(t[0])<=180?t[0]:t[0]-360*((e=t[0])<0?-1:e>0?1:0))*n,i*Math.log(Math.tan(.25*Math.PI+.5*t[1]*n))];return o[0]>r&&(o[0]=r),o[0]<-r&&(o[0]=-r),o[1]>r&&(o[1]=r),o[1]<-r&&(o[1]=-r),o}function u(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}e.toMercator=function(t,e){return void 0===e&&(e={}),a(t,"mercator",e)},e.toWgs84=function(t,e){return void 0===e&&(e={}),a(t,"wgs84",e)}},16295:function(t,e,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102);function o(t){return Array.isArray(t)?a(t):t&&t.bbox?a(t.bbox):[360*s(),180*s()]}function s(){return Math.random()-.5}function a(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}e.randomPosition=o,e.randomPoint=function(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],i=0;i<t;i++)n.push(r.point(o(e.bbox)));return r.featureCollection(n)},e.randomPolygon=function(t,e){void 0===e&&(e={}),null==t&&(t=1),r.isNumber(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),r.isNumber(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],s=function(t){var s,a=[],l=i(Array(e.num_vertices+1)).map(Math.random);l.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),l.forEach((function(t){t=2*t*Math.PI/l[l.length-1];var n=Math.random();a.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])})),a[a.length-1]=a[0],a=a.map((s=o(e.bbox),function(t){return[t[0]+s[0],t[1]+s[1]]})),n.push(r.polygon([a]))},a=0;a<t;a++)s();return r.featureCollection(n)},e.randomLineString=function(t,e){if(void 0===e&&(e={}),e=e||{},!r.isObject(e))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,s=e.max_length,a=e.max_rotation;null==t&&(t=1),(!r.isNumber(i)||void 0===i||i<2)&&(i=10),r.isNumber(s)&&void 0!==s||(s=1e-4),r.isNumber(a)&&void 0!==a||(a=Math.PI/8);for(var l=[],u=0;u<t;u++){for(var c=[o(n)],h=0;h<i-1;h++){var p=(0===h?2*Math.random()*Math.PI:Math.tan((c[h][1]-c[h-1][1])/(c[h][0]-c[h-1][0])))+(Math.random()-.5)*a*2,d=Math.random()*s;c.push([c[h][0]+d*Math.cos(p),c[h][1]+d*Math.sin(p)])}l.push(r.lineString(c))}return r.featureCollection(l)}},54131:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(84255)),o=i(n(31013)),s=n(84102);e.default=function(t,e,n,i){void 0===i&&(i={});for(var a=[],l=t[0],u=t[1],c=t[2],h=t[3],p=e/o.default([l,u],[c,u],i)*(c-l),d=n/o.default([l,u],[l,h],i)*(h-u),f=c-l,g=h-u,y=Math.floor(f/p),_=Math.floor(g/d),m=(g-_*d)/2,v=l+(f-y*p)/2,b=0;b<y;b++){for(var x=u+m,w=0;w<_;w++){var E=s.polygon([[[v,x],[v,x+d],[v+p,x+d],[v+p,x],[v,x]]],i.properties);i.mask?r.default(i.mask,E)&&a.push(E):a.push(E),x+=d}v+=p}return s.featureCollection(a)}},51138:(t,e,n)=>{"use strict";var i=n(76565),r=n(3809),o=n(31540),s=n(10611),a=n(84102);function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(i),c=l(r);function h(t,e){if(e=e||{},!a.isObject(e))throw new Error("options is invalid");var n=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=u.default(t));var r=[];switch(t.type){case"GeometryCollection":return o.geomEach(t,(function(t){p(t,n)})),t;case"FeatureCollection":return o.featureEach(t,(function(t){o.featureEach(p(t,n),(function(t){r.push(t)}))})),a.featureCollection(r)}return p(t,n)}function p(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return o.geomEach(t,(function(t){p(t,e)})),t;case"LineString":return d(s.getCoords(t),e),t;case"Polygon":return f(s.getCoords(t),e),t;case"MultiLineString":return s.getCoords(t).forEach((function(t){d(t,e)})),t;case"MultiPolygon":return s.getCoords(t).forEach((function(t){f(t,e)})),t;case"Point":case"MultiPoint":return t}}function d(t,e){c.default(t)===e&&t.reverse()}function f(t,e){c.default(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)c.default(t[n])===e&&t[n].reverse()}t.exports=h,t.exports.default=h},16912:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102),r=n(10611);function o(t,e){var n=i.degreesToRadians(t[1]),r=i.degreesToRadians(e[1]),o=i.degreesToRadians(e[0]-t[0]);o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI);var s=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),a=Math.atan2(o,s);return(i.radiansToDegrees(a)+360)%360}e.default=function(t,e,n){var i;return void 0===n&&(n={}),(i=n.final?o(r.getCoord(e),r.getCoord(t)):o(r.getCoord(t),r.getCoord(e)))>180?-(360-i):i}},62054:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102),r=n(10611);e.default=function(t,e,n,o){void 0===o&&(o={});var s=e<0,a=i.convertLength(Math.abs(e),o.units,"meters");s&&(a=-Math.abs(a));var l=r.getCoord(t),u=function(t,e,n,r){var o=e/(r=void 0===r?i.earthRadius:Number(r)),s=t[0]*Math.PI/180,a=i.degreesToRadians(t[1]),l=i.degreesToRadians(n),u=o*Math.cos(l),c=a+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),p=Math.abs(h)>1e-11?u/h:Math.cos(a);return[(180*(s+o*Math.sin(l)/p)/Math.PI+540)%360-180,180*c/Math.PI]}(l,a,n);return u[0]+=u[0]-l[0]>180?-360:l[0]-u[0]>180?360:0,i.point(u,o.properties)}},6213:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102),r=n(10611);e.default=function(t,e,n){void 0===n&&(n={});var o=r.getCoord(t),s=r.getCoord(e);s[0]+=s[0]-o[0]>180?-360:o[0]-s[0]>180?360:0;var a=function(t,e,n){var r=n=void 0===n?i.earthRadius:Number(n),o=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-o,l=Math.abs(e[0]-t[0])*Math.PI/180;l>Math.PI&&(l-=2*Math.PI);var u=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(u)>1e-11?a/u:Math.cos(o);return Math.sqrt(a*a+c*c*l*l)*r}(o,s);return i.convertLength(a,"meters",n.units)}},3503:(t,e,n)=>{"use strict";var i=n(84102);function r(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return i.featureCollection(function(t,e){for(var n,i,r=t.slice(0),o=t.length,s=o-e;o-- >s;)n=r[i=Math.floor((o+1)*Math.random())],r[i]=r[o],r[o]=n;return r.slice(s)}(t.features,e))}t.exports=r,t.exports.default=r},81674:(t,e,n)=>{"use strict";var i=n(90265),r=n(67272),o=n(31540),s=n(84102),a=n(10611);function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(i),c=l(r);function h(t,e,n,i,r){if(r=r||{},!s.isObject(r))throw new Error("options is invalid");var l=r.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof r)throw new Error("options must be an object");if(p(n)===p(i))return u.default(t,e,r);var h=a.getCoords(t),d=c.default(t,e,n,i,r),f=[[h]];return o.coordEach(d,(function(t){f[0].push(t)})),f[0].push(h),s.polygon(f,l)}function p(t){var e=t%360;return e<0&&(e+=360),e}t.exports=h,t.exports.default=h},93550:(t,e,n)=>{"use strict";var i=n(9705),r=n(88147),o=n(31013),s=n(67517),a=n(71435),l=n(13652),u=n(10611),c=n(84102);function h(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var p=h(i),d=h(r),f=h(o),g=h(s),y=h(a),_=h(l);function m(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var v={search:function(t,e,n,i){t.cleanDirty();var r=(i=i||{}).heuristic||v.heuristics.manhattan,o=i.closest||!1,s=new w((function(t){return t.f})),a=e;for(e.h=r(e,n),s.push(e);s.size()>0;){var l=s.pop();if(l===n)return m(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var p=u[c];if(!p.closed&&!p.isWall()){var d=l.g+p.getCost(l),f=p.visited;(!f||d<p.g)&&(p.visited=!0,p.parent=l,p.h=p.h||r(p,n),p.g=d,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),f?s.rescoreElement(p):s.push(p))}}}return o?m(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function b(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new x(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function x(t,e,n){this.x=t,this.y=e,this.weight=n}function w(t){this.content=[],this.scoreFunction=t}function E(t,e,n){if(n=n||{},!c.isObject(n))throw new Error("options is invalid");var i=n.resolution,r=n.minDistance,o=n.obstacles||c.featureCollection([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(i&&!c.isNumber(i)||i<=0)throw new Error("options.resolution must be a number, greater than 0");if(r)throw new Error("options.minDistance is not yet implemented");var s=u.getCoord(t),a=u.getCoord(e);switch(t=c.point(s),e=c.point(a),u.getType(o)){case"FeatureCollection":if(0===o.features.length)return c.lineString([s,a]);break;case"Polygon":o=c.featureCollection([c.feature(u.getGeom(o))]);break;default:throw new Error("invalid obstacles")}var l=o;l.features.push(t),l.features.push(e);var h=p.default(g.default(_.default(p.default(l)),1.15));i||(i=f.default([h[0],h[1]],[h[2],h[1]],n)/100),l.features.pop(),l.features.pop();for(var d=h[0],m=h[1],x=h[2],w=h[3],E=i/f.default([d,m],[x,m],n)*(x-d),C=i/f.default([d,m],[d,w],n)*(w-m),O=x-d,S=w-m,I=Math.floor(O/E),L=Math.floor(S/C),M=(O-I*E)/2,T=[],R=[],N=[],A=[],D=1/0,j=1/0,F=w-(S-L*C)/2,k=0;F>=m;){for(var G=[],V=[],Z=d+M,z=0;Z<=x;){var B=c.point([Z,F]),U=P(B,o);G.push(U?0:1),V.push(Z+"|"+F);var W=f.default(B,t);!U&&W<D&&(D=W,N={x:z,y:k});var q=f.default(B,e);!U&&q<j&&(j=q,A={x:z,y:k}),Z+=E,z++}R.push(G),T.push(V),F-=C,k++}var X=new b(R,{diagonal:!0}),Y=X.grid[N.y][N.x],H=X.grid[A.y][A.x],J=v.search(X,Y,H),K=[s];return J.forEach((function(t){var e=T[t.x][t.y].split("|");K.push([+e[0],+e[1]])})),K.push(a),y.default(c.lineString(K))}function P(t,e){for(var n=0;n<e.features.length;n++)if(d.default(t,e.features[n]))return!0;return!1}b.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)v.cleanNode(this.nodes[t])},b.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)v.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},b.prototype.markDirty=function(t){this.dirtyNodes.push(t)},b.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},b.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,i=(e=o[s]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},x.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},x.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},x.prototype.isWall=function(){return 0===this.weight},w.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,s=o-1,a=null;if(s<e){var l=this.content[s];(r=this.scoreFunction(l))<i&&(a=s)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===a?i:r)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},t.exports=E,t.exports.default=E},57191:(t,e,n)=>{"use strict";var i=n(71435),r=n(76565),o=n(31540),s=n(84102);function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(i),u=a(r);function c(t,e,n){var i=e.x,r=e.y,o=n.x-i,s=n.y-r;if(0!==o||0!==s){var a=((t.x-i)*o+(t.y-r)*s)/(o*o+s*s);a>1?(i=n.x,r=n.y):a>0&&(i+=o*a,r+=s*a)}return(o=t.x-i)*o+(s=t.y-r)*s}function h(t,e,n,i,r){for(var o,s=i,a=e+1;a<n;a++){var l=c(t[a],t[e],t[n]);l>s&&(o=a,s=l)}s>i&&(o-e>1&&h(t,e,o,i,r),r.push(t[o]),n-o>1&&h(t,o,n,i,r))}function p(t,e){var n=t.length-1,i=[t[0]];return h(t,0,n,e,i),i.push(t[n]),i}function d(t,e,n){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return t=n?t:function(t,e){for(var n,i,r,o,s,a=t[0],l=[a],u=1,c=t.length;u<c;u++)r=a,void 0,void 0,(o=(i=n=t[u]).x-r.x)*o+(s=i.y-r.y)*s>e&&(l.push(n),a=n);return a!==n&&l.push(n),l}(t,i),p(t,i)}function f(t,e){if(e=e||{},!s.isObject(e))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,i=e.highQuality||!1,r=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==r&&(t=u.default(t)),o.geomEach(t,(function(t){!function(t,e,n){var i=t.type;if("Point"===i||"MultiPoint"===i)return t;l.default(t,!0);var r=t.coordinates;switch(i){case"LineString":t.coordinates=g(r,e,n);break;case"MultiLineString":t.coordinates=r.map((function(t){return g(t,e,n)}));break;case"Polygon":t.coordinates=y(r,e,n);break;case"MultiPolygon":t.coordinates=r.map((function(t){return y(t,e,n)}))}}(t,n,i)})),t}function g(t,e,n){return d(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function y(t,e,n){return t.map((function(t){var i=t.map((function(t){return{x:t[0],y:t[1]}}));if(i.length<4)throw new Error("invalid polygon");for(var r=d(i,e,n).map((function(t){return[t.x,t.y]}));!_(r);)r=d(i,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r}))}function _(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}t.exports=f,t.exports.default=f},45434:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(54131));e.default=function(t,e,n){return void 0===n&&(n={}),r.default(t,e,e,n)}},55077:(t,e,n)=>{"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=i(n(31013));function o(t){var e=t[0],n=t[1],i=t[2],o=t[3];if(r.default(t.slice(0,2),[i,n])>=r.default(t.slice(0,2),[e,o])){var s=(n+o)/2;return[e,s-(i-e)/2,i,s+(i-e)/2]}var a=(e+i)/2;return[a-(o-n)/2,n,a+(o-n)/2,o]}t.exports=o,t.exports.default=o},73955:(t,e,n)=>{"use strict";var i=n(31540),r=n(10611),o=n(84102),s=n(76320),a=n(187),l=n(61211);function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c=u(s),h=u(a),p=u(l);function d(t,e){if(e=e||{},!o.isObject(e))throw new Error("options is invalid");var n=e.steps||64,s=e.weight,a=e.properties||{};if(!o.isNumber(n))throw new Error("steps must be a number");if(!o.isObject(a))throw new Error("properties must be a number");var l=i.coordAll(t).length,u=c.default(t,{weight:s}),d=0,g=0,y=0;i.featureEach(t,(function(t){var e=t.properties[s]||1,n=f(r.getCoords(t),r.getCoords(u));d+=Math.pow(n.x,2)*e,g+=Math.pow(n.y,2)*e,y+=n.x*n.y*e}));var _=d-g,m=Math.sqrt(Math.pow(_,2)+4*Math.pow(y,2)),v=2*y,b=Math.atan((_+m)/v),x=180*b/Math.PI,w=0,E=0,P=0;i.featureEach(t,(function(t){var e=t.properties[s]||1,n=f(r.getCoords(t),r.getCoords(u));w+=Math.pow(n.x*Math.cos(b)-n.y*Math.sin(b),2)*e,E+=Math.pow(n.x*Math.sin(b)+n.y*Math.cos(b),2)*e,P+=e}));var C=Math.sqrt(2*w/P),O=Math.sqrt(2*E/P),S=p.default(u,C,O,{units:"degrees",angle:x,steps:n,properties:a}),I=h.default(t,o.featureCollection([S])),L={meanCenterCoordinates:r.getCoords(u),semiMajorAxis:C,semiMinorAxis:O,numberOfFeatures:l,angle:x,percentageWithinEllipse:100*i.coordAll(I).length/l};return S.properties.standardDeviationalEllipse=L,S}function f(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}t.exports=d,t.exports.default=d},32015:(t,e,n)=>{"use strict";var i=n(88147),r=n(76565),o=n(31540);function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=s(i),l=s(r);function u(t,e,n,i){return t=l.default(t),e=l.default(e),o.featureEach(t,(function(t){t.properties||(t.properties={}),o.featureEach(e,(function(e){void 0===t.properties[i]&&a.default(t,e)&&(t.properties[i]=e.properties[n])}))})),t}t.exports=u,t.exports.default=u},95845:(t,e,n)=>{"use strict";var i=n(9187),r=n(84102);function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=o(i);function a(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=l(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(l(t))})),e}function l(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}(t),n=s.default(e.vertices,e.holes,2),i=[],o=[];n.forEach((function(t,i){var r=n[i];o.push([e.vertices[2*r],e.vertices[2*r+1]])}));for(var a=0;a<o.length;a+=3){var l=o.slice(a,a+3);l.push(o[a]),i.push(r.polygon([l]))}return i}t.exports=a,t.exports.default=a},18829:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(84102);e.default=function(t,e){var n=!1;return i.featureCollection(function(t){if(t.length<3)return[];t.sort(o);for(var e,n,i,a,l,u,c=t.length-1,h=t[c].x,p=t[0].x,d=t[c].y,f=d;c--;)t[c].y<d&&(d=t[c].y),t[c].y>f&&(f=t[c].y);var g,y=p-h,_=f-d,m=y>_?y:_,v=.5*(p+h),b=.5*(f+d),x=[new r({__sentinel:!0,x:v-20*m,y:b-m},{__sentinel:!0,x:v,y:b+20*m},{__sentinel:!0,x:v+20*m,y:b-m})],w=[],E=[];for(c=t.length;c--;){for(E.length=0,g=x.length;g--;)(y=t[c].x-x[g].x)>0&&y*y>x[g].r?(w.push(x[g]),x.splice(g,1)):y*y+(_=t[c].y-x[g].y)*_>x[g].r||(E.push(x[g].a,x[g].b,x[g].b,x[g].c,x[g].c,x[g].a),x.splice(g,1));for(s(E),g=E.length;g;)n=E[--g],e=E[--g],i=t[c],a=n.x-e.x,l=n.y-e.y,u=2*(a*(i.y-n.y)-l*(i.x-n.x)),Math.abs(u)>1e-12&&x.push(new r(e,n,i))}for(Array.prototype.push.apply(w,x),c=w.length;c--;)(w[c].a.__sentinel||w[c].b.__sentinel||w[c].c.__sentinel)&&w.splice(c,1);return w}(t.features.map((function(t){var i={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?i.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,i.z=t.geometry.coordinates[2]),i}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],o=[t.c.x,t.c.y],s={};return n?(e.push(t.a.z),r.push(t.b.z),o.push(t.c.z)):s={a:t.a.z,b:t.b.z,c:t.c.z},i.polygon([[e,r,o,e]],s)})))};var r=function(t,e,n){this.a=t,this.b=e,this.c=n;var i,r,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,l=n.y-t.y,u=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+n.x)+l*(t.y+n.y),h=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(l*u-s*c)/h,this.y=(o*c-a*u)/h,i=this.x-t.x,r=this.y-t.y,this.r=i*i+r*r};function o(t,e){return e.x-t.x}function s(t){var e,n,i,r,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],i=s;i;)if(o=t[--i],e===(r=t[--i])&&n===o||e===o&&n===r){t.splice(s,2),t.splice(i,2),s-=2;continue t}}},90067:(t,e,n)=>{"use strict";var i=n(66338),r=n(16912),o=n(6213),s=n(62054),a=n(76565),l=n(31540),u=n(10611),c=n(84102);function h(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var p=h(i),d=h(r),f=h(o),g=h(s),y=h(a);function _(t,e,n){if(n=n||{},!c.isObject(n))throw new Error("options is invalid");var i=n.pivot,r=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(i||(i=p.default(t)),!1!==r&&void 0!==r||(t=y.default(t)),l.coordEach(t,(function(t){var n=d.default(i,t)+e,r=f.default(i,t),o=u.getCoords(g.default(i,r,n));t[0]=o[0],t[1]=o[1]}))),t}t.exports=_,t.exports.default=_},67517:(t,e,n)=>{"use strict";var i=n(76565),r=n(78230),o=n(66338),s=n(9705),a=n(16912),l=n(6213),u=n(62054),c=n(31540),h=n(84102),p=n(10611);function d(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f=d(i),g=d(r),y=d(o),_=d(s),m=d(a),v=d(l),b=d(u);function x(t,e,n){if(n=n||{},!h.isObject(n))throw new Error("options is invalid");var i=n.origin,r=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==r&&(t=f.default(t)),"FeatureCollection"!==t.type||o?w(t,e,i):(c.featureEach(t,(function(n,r){t.features[r]=w(n,e,i)})),t)}function w(t,e,n){var i="Point"===p.getType(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return p.getCoord(e);var n=t.bbox?t.bbox:_.default(t),i=n[0],r=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return h.point([i,r]);case"se":case"southeast":case"eastsouth":case"bottomright":return h.point([o,r]);case"nw":case"northwest":case"westnorth":case"topleft":return h.point([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return h.point([o,s]);case"center":return g.default(t);case void 0:case null:case"centroid":return y.default(t);default:throw new Error("invalid origin")}}(t,n),1===e||i||c.coordEach(t,(function(t){var i=v.default(n,t),r=m.default(n,t),o=i*e,s=p.getCoords(b.default(n,o,r));t[0]=s[0],t[1]=s[1],3===t.length&&(t[2]*=e)})),t}t.exports=x,t.exports.default=x},92418:(t,e,n)=>{"use strict";var i=n(31540),r=n(84102),o=n(10611),s=n(76565),a=n(62054);function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(s),c=l(a);function h(t,e,n,s){if(s=s||{},!r.isObject(s))throw new Error("options is invalid");var a=s.units,l=s.zTranslation,h=s.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(l&&"number"!=typeof l&&isNaN(l))throw new Error("zTranslation is not a number");if(l=void 0!==l?l:0,0===e&&0===l)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==h&&void 0!==h||(t=u.default(t)),i.coordEach(t,(function(t){var i=o.getCoords(c.default(t,e,n,{units:a}));t[0]=i[0],t[1]=i[1],l&&3===t.length&&(t[2]+=l)})),t}t.exports=h,t.exports.default=h},4686:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(31013)),o=i(n(74170)),s=n(84102);e.default=function(t,e,n){void 0===n&&(n={});for(var i=[],a=e/r.default([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),l=e/r.default([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),u=0,c=t[0];c<=t[2];){for(var h=0,p=t[1];p<=t[3];){var d=null,f=null;u%2==0&&h%2==0?(d=s.polygon([[[c,p],[c,p+l],[c+a,p],[c,p]]],n.properties),f=s.polygon([[[c,p+l],[c+a,p+l],[c+a,p],[c,p+l]]],n.properties)):u%2==0&&h%2==1?(d=s.polygon([[[c,p],[c+a,p+l],[c+a,p],[c,p]]],n.properties),f=s.polygon([[[c,p],[c,p+l],[c+a,p+l],[c,p]]],n.properties)):h%2==0&&u%2==1?(d=s.polygon([[[c,p],[c,p+l],[c+a,p+l],[c,p]]],n.properties),f=s.polygon([[[c,p],[c+a,p+l],[c+a,p],[c,p]]],n.properties)):h%2==1&&u%2==1&&(d=s.polygon([[[c,p],[c,p+l],[c+a,p],[c,p]]],n.properties),f=s.polygon([[[c,p+l],[c+a,p+l],[c+a,p],[c,p+l]]],n.properties)),n.mask?(o.default(n.mask,d)&&i.push(d),o.default(n.mask,f)&&i.push(f)):(i.push(d),i.push(f)),p+=l,h++}u++,c+=a}return s.featureCollection(i)}},15608:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(31540);e.default=function(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,o=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==o&&void 0!==o||(t=JSON.parse(JSON.stringify(t)));var s=Math.pow(10,n);return i.coordEach(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,s,r)})),t}},38347:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7928),r=n(77382),o=n(187),s=n(68538),a=n(70305),l=n(37970),u=n(57191),c=n(97478),h=n(32015),p=n(3503),d=n(19062),f=n(55077),g=n(90265),y=n(99034),_=n(78230),m=n(25084),v=n(66338),b=n(28141),x=n(31013),w=n(63922),E=n(9705),P=n(95845),C=n(13652),O=n(88147),S=n(66379),I=n(13807),L=n(82059),M=n(63377),T=n(18829),R=n(51208),N=n(93737),A=n(81641),D=n(55771),j=n(41070),F=n(25913),k=n(10091),G=n(74792),V=n(51378),Z=n(36813),z=n(15608),B=n(24288),U=n(73663),W=n(39632),q=n(94404),X=n(25422),Y=n(54590),H=n(7477),J=n(67272),K=n(97383),$=n(41933),Q=n(30173),tt=n(90273),et=n(81674),nt=n(16912),it=n(6213),rt=n(62054),ot=n(5215),st=n(51138),at=n(77406),lt=n(90067),ut=n(67517),ct=n(92418),ht=n(15668),pt=n(24312),dt=n(55883),ft=n(72584),gt=n(17656),yt=n(3809),_t=n(57612),mt=n(72793),vt=n(39482),bt=n(45184),xt=n(84255),wt=n(76565),Et=n(71435),Pt=n(61495),Ct=n(56398),Ot=n(63892),St=n(24840),It=n(93550),Lt=n(62276),Mt=n(61211),Tt=n(76320),Rt=n(12935),Nt=n(73955),At=n(8517),Dt=n(84978),jt=n(10920),Ft=n(35366),kt=n(20981),Gt=n(16295),Vt=n(53140),Zt=n(84102),zt=n(10611),Bt=n(31540),Ut=n(68727),Wt=n(35419),qt=n(71959),Xt=n(74170),Yt=n(52407),Ht=n(45621),Jt=n(60482),Kt=n(45434),$t=n(4686),Qt=n(25566);function te(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function ee(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var ne=te(i),ie=te(r),re=te(o),oe=te(s),se=te(a),ae=te(l),le=te(u),ue=te(c),ce=te(h),he=te(p),pe=te(d),de=te(f),fe=te(g),ge=te(y),ye=te(_),_e=te(m),me=te(v),ve=te(b),be=te(x),xe=te(w),we=te(E),Ee=te(P),Pe=te(C),Ce=te(O),Oe=te(S),Se=te(I),Ie=te(L),Le=te(M),Me=te(T),Te=te(R),Re=te(N),Ne=te(A),Ae=te(D),De=te(j),je=te(F),Fe=te(k),ke=te(G),Ge=te(V),Ve=te(Z),Ze=te(z),ze=te(B),Be=te(U),Ue=te(W),We=te(q),qe=te(X),Xe=te(Y),Ye=te(H),He=te(J),Je=te(K),Ke=te($),$e=te(Q),Qe=te(tt),tn=te(et),en=te(nt),nn=te(it),rn=te(rt),on=te(ot),sn=te(st),an=te(at),ln=te(lt),un=te(ut),cn=te(ct),hn=te(ht),pn=te(pt),dn=te(dt),fn=te(ft),gn=te(gt),yn=te(yt),_n=te(_t),mn=te(mt),vn=te(vt),bn=te(bt),xn=te(xt),wn=te(wt),En=te(Et),Pn=te(Pt),Cn=te(Ct),On=te(Ot),Sn=te(St),In=te(It),Ln=te(Lt),Mn=te(Mt),Tn=te(Tt),Rn=te(Rt),Nn=te(Nt),An=te(At),Dn=te(Dt),jn=te(jt),Fn=te(Ft),kn=ee(kt),Gn=ee(Gt),Vn=ee(Vt),Zn=ee(Zt),zn=ee(zt),Bn=ee(Bt),Un=te(Ut),Wn=te(Wt),qn=te(qt),Xn=te(Xt),Yn=te(Yt),Hn=te(Ht),Jn=te(Jt),Kn=te(Kt),$n=te($t),Qn=te(Qt);Object.keys(kt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return kt[t]}})})),Object.keys(Gt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return Gt[t]}})})),Object.keys(Vt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return Vt[t]}})})),Object.keys(Zt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return Zt[t]}})})),Object.keys(zt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return zt[t]}})})),Object.keys(Bt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return Bt[t]}})})),Object.defineProperty(e,"isolines",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(e,"convex",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(e,"pointsWithinPolygon",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(e,"within",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(e,"concave",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(e,"collect",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(e,"flip",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(e,"simplify",{enumerable:!0,get:function(){return le.default}}),Object.defineProperty(e,"bezier",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(e,"bezierSpline",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(e,"tag",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(e,"envelope",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(e,"square",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(e,"circle",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(e,"midpoint",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(e,"center",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(e,"centerOfMass",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(e,"centroid",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(e,"combine",{enumerable:!0,get:function(){return ve.default}}),Object.defineProperty(e,"distance",{enumerable:!0,get:function(){return be.default}}),Object.defineProperty(e,"explode",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(e,"bbox",{enumerable:!0,get:function(){return we.default}}),Object.defineProperty(e,"tesselate",{enumerable:!0,get:function(){return Ee.default}}),Object.defineProperty(e,"bboxPolygon",{enumerable:!0,get:function(){return Pe.default}}),Object.defineProperty(e,"booleanPointInPolygon",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(e,"inside",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(e,"nearest",{enumerable:!0,get:function(){return Oe.default}}),Object.defineProperty(e,"nearestPoint",{enumerable:!0,get:function(){return Oe.default}}),Object.defineProperty(e,"nearestPointOnLine",{enumerable:!0,get:function(){return Se.default}}),Object.defineProperty(e,"pointOnLine",{enumerable:!0,get:function(){return Se.default}}),Object.defineProperty(e,"nearestPointToLine",{enumerable:!0,get:function(){return Ie.default}}),Object.defineProperty(e,"planepoint",{enumerable:!0,get:function(){return Le.default}}),Object.defineProperty(e,"tin",{enumerable:!0,get:function(){return Me.default}}),Object.defineProperty(e,"bearing",{enumerable:!0,get:function(){return Te.default}}),Object.defineProperty(e,"destination",{enumerable:!0,get:function(){return Re.default}}),Object.defineProperty(e,"kinks",{enumerable:!0,get:function(){return Ne.default}}),Object.defineProperty(e,"pointOnFeature",{enumerable:!0,get:function(){return Ae.default}}),Object.defineProperty(e,"pointOnSurface",{enumerable:!0,get:function(){return Ae.default}}),Object.defineProperty(e,"area",{enumerable:!0,get:function(){return De.default}}),Object.defineProperty(e,"along",{enumerable:!0,get:function(){return je.default}}),Object.defineProperty(e,"length",{enumerable:!0,get:function(){return Fe.default}}),Object.defineProperty(e,"lineDistance",{enumerable:!0,get:function(){return Fe.default}}),Object.defineProperty(e,"lineSlice",{enumerable:!0,get:function(){return ke.default}}),Object.defineProperty(e,"lineSliceAlong",{enumerable:!0,get:function(){return Ge.default}}),Object.defineProperty(e,"pointGrid",{enumerable:!0,get:function(){return Ve.default}}),Object.defineProperty(e,"truncate",{enumerable:!0,get:function(){return Ze.default}}),Object.defineProperty(e,"flatten",{enumerable:!0,get:function(){return ze.default}}),Object.defineProperty(e,"lineIntersect",{enumerable:!0,get:function(){return Be.default}}),Object.defineProperty(e,"lineChunk",{enumerable:!0,get:function(){return Ue.default}}),Object.defineProperty(e,"unkinkPolygon",{enumerable:!0,get:function(){return We.default}}),Object.defineProperty(e,"greatCircle",{enumerable:!0,get:function(){return qe.default}}),Object.defineProperty(e,"lineSegment",{enumerable:!0,get:function(){return Xe.default}}),Object.defineProperty(e,"lineSplit",{enumerable:!0,get:function(){return Ye.default}}),Object.defineProperty(e,"lineArc",{enumerable:!0,get:function(){return He.default}}),Object.defineProperty(e,"polygonToLine",{enumerable:!0,get:function(){return Je.default}}),Object.defineProperty(e,"polygonToLineString",{enumerable:!0,get:function(){return Je.default}}),Object.defineProperty(e,"lineStringToPolygon",{enumerable:!0,get:function(){return Ke.default}}),Object.defineProperty(e,"lineToPolygon",{enumerable:!0,get:function(){return Ke.default}}),Object.defineProperty(e,"bboxClip",{enumerable:!0,get:function(){return $e.default}}),Object.defineProperty(e,"lineOverlap",{enumerable:!0,get:function(){return Qe.default}}),Object.defineProperty(e,"sector",{enumerable:!0,get:function(){return tn.default}}),Object.defineProperty(e,"rhumbBearing",{enumerable:!0,get:function(){return en.default}}),Object.defineProperty(e,"rhumbDistance",{enumerable:!0,get:function(){return nn.default}}),Object.defineProperty(e,"rhumbDestination",{enumerable:!0,get:function(){return rn.default}}),Object.defineProperty(e,"polygonTangents",{enumerable:!0,get:function(){return on.default}}),Object.defineProperty(e,"rewind",{enumerable:!0,get:function(){return sn.default}}),Object.defineProperty(e,"isobands",{enumerable:!0,get:function(){return an.default}}),Object.defineProperty(e,"transformRotate",{enumerable:!0,get:function(){return ln.default}}),Object.defineProperty(e,"transformScale",{enumerable:!0,get:function(){return un.default}}),Object.defineProperty(e,"transformTranslate",{enumerable:!0,get:function(){return cn.default}}),Object.defineProperty(e,"lineOffset",{enumerable:!0,get:function(){return hn.default}}),Object.defineProperty(e,"polygonize",{enumerable:!0,get:function(){return pn.default}}),Object.defineProperty(e,"booleanDisjoint",{enumerable:!0,get:function(){return dn.default}}),Object.defineProperty(e,"booleanContains",{enumerable:!0,get:function(){return fn.default}}),Object.defineProperty(e,"booleanCrosses",{enumerable:!0,get:function(){return gn.default}}),Object.defineProperty(e,"booleanClockwise",{enumerable:!0,get:function(){return yn.default}}),Object.defineProperty(e,"booleanOverlap",{enumerable:!0,get:function(){return _n.default}}),Object.defineProperty(e,"booleanPointOnLine",{enumerable:!0,get:function(){return mn.default}}),Object.defineProperty(e,"booleanEqual",{enumerable:!0,get:function(){return vn.default}}),Object.defineProperty(e,"booleanWithin",{enumerable:!0,get:function(){return bn.default}}),Object.defineProperty(e,"booleanIntersects",{enumerable:!0,get:function(){return xn.default}}),Object.defineProperty(e,"clone",{enumerable:!0,get:function(){return wn.default}}),Object.defineProperty(e,"cleanCoords",{enumerable:!0,get:function(){return En.default}}),Object.defineProperty(e,"clustersDbscan",{enumerable:!0,get:function(){return Pn.default}}),Object.defineProperty(e,"clustersKmeans",{enumerable:!0,get:function(){return Cn.default}}),Object.defineProperty(e,"pointToLineDistance",{enumerable:!0,get:function(){return On.default}}),Object.defineProperty(e,"booleanParallel",{enumerable:!0,get:function(){return Sn.default}}),Object.defineProperty(e,"shortestPath",{enumerable:!0,get:function(){return In.default}}),Object.defineProperty(e,"voronoi",{enumerable:!0,get:function(){return Ln.default}}),Object.defineProperty(e,"ellipse",{enumerable:!0,get:function(){return Mn.default}}),Object.defineProperty(e,"centerMean",{enumerable:!0,get:function(){return Tn.default}}),Object.defineProperty(e,"centerMedian",{enumerable:!0,get:function(){return Rn.default}}),Object.defineProperty(e,"standardDeviationalEllipse",{enumerable:!0,get:function(){return Nn.default}}),Object.defineProperty(e,"angle",{enumerable:!0,get:function(){return An.default}}),Object.defineProperty(e,"polygonSmooth",{enumerable:!0,get:function(){return Dn.default}}),Object.defineProperty(e,"moranIndex",{enumerable:!0,get:function(){return jn.default}}),Object.defineProperty(e,"distanceWeight",{enumerable:!0,get:function(){return Fn.default}}),e.projection=kn,e.random=Gn,e.clusters=Vn,Object.defineProperty(e,"bearingToAngle",{enumerable:!0,get:function(){return Zt.bearingToAzimuth}}),Object.defineProperty(e,"convertDistance",{enumerable:!0,get:function(){return Zt.convertLength}}),Object.defineProperty(e,"degrees2radians",{enumerable:!0,get:function(){return Zt.degreesToRadians}}),Object.defineProperty(e,"distanceToDegrees",{enumerable:!0,get:function(){return Zt.lengthToDegrees}}),Object.defineProperty(e,"distanceToRadians",{enumerable:!0,get:function(){return Zt.lengthToRadians}}),e.helpers=Zn,Object.defineProperty(e,"radians2degrees",{enumerable:!0,get:function(){return Zt.radiansToDegrees}}),Object.defineProperty(e,"radiansToDistance",{enumerable:!0,get:function(){return Zt.radiansToLength}}),e.invariant=zn,e.meta=Bn,Object.defineProperty(e,"difference",{enumerable:!0,get:function(){return Un.default}}),Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Wn.default}}),Object.defineProperty(e,"union",{enumerable:!0,get:function(){return qn.default}}),Object.defineProperty(e,"intersect",{enumerable:!0,get:function(){return Xn.default}}),Object.defineProperty(e,"dissolve",{enumerable:!0,get:function(){return Yn.default}}),Object.defineProperty(e,"hexGrid",{enumerable:!0,get:function(){return Hn.default}}),Object.defineProperty(e,"mask",{enumerable:!0,get:function(){return Jn.default}}),Object.defineProperty(e,"squareGrid",{enumerable:!0,get:function(){return Kn.default}}),Object.defineProperty(e,"triangleGrid",{enumerable:!0,get:function(){return $n.default}}),Object.defineProperty(e,"interpolate",{enumerable:!0,get:function(){return Qn.default}})},71959:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(24629)),o=n(10611),s=n(84102);e.default=function(t,e,n){void 0===n&&(n={});var i=o.getGeom(t),a=o.getGeom(e),l=r.default.union(i.coordinates,a.coordinates);return 0===l.length?null:1===l.length?s.polygon(l[0],n.properties):s.multiPolygon(l,n.properties)}},94404:(t,e,n)=>{"use strict";var i=n(31540),r=n(84102),o=n(64860),s=n(41070),a=n(88147);function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(o),c=l(s),h=l(a);function p(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!p(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function d(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],i=0;i<e;i++){var o=t.geometry.coordinates[i];m(o[0],o[o.length-1])||o.push(o[0]),n.push.apply(n,o.slice(0,o.length-1))}if(!function(t){for(var e={},n=1,i=0,r=t.length;i<r;++i){if(Object.prototype.hasOwnProperty.call(e,t[i])){n=0;break}e[t[i]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var s=n.length,a=function(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var i=t.geometry.coordinates,r=[],o={};if(n){for(var s=[],a=0;a<i.length;a++)for(var l=0;l<i[a].length-1;l++)s.push(_(a,l));var c=u.default();c.load(s)}for(var h=0;h<i.length;h++)for(var d=0;d<i[h].length-1;d++)if(n)c.search(_(h,d)).forEach((function(t){var e=t.ring,n=t.edge;y(h,d,e,n)}));else for(var f=0;f<i.length;f++)for(var g=0;g<i[f].length-1;g++)y(h,d,f,g);return e||(r={type:"Feature",geometry:{type:"MultiPoint",coordinates:r}}),r;function y(t,n,s,a){var l,u,c=i[t][n],h=i[t][n+1],d=i[s][a],f=i[s][a+1],g=function(t,e,n,i){if(p(t,n)||p(t,i)||p(e,n)||p(i,n))return null;var r=t[0],o=t[1],s=e[0],a=e[1],l=n[0],u=n[1],c=i[0],h=i[1],d=(r-s)*(u-h)-(o-a)*(l-c);return 0===d?null:[((r*a-o*s)*(l-c)-(r-s)*(l*h-u*c))/d,((r*a-o*s)*(u-h)-(o-a)*(l*h-u*c))/d]}(c,h,d,f);if(null!==g&&(l=h[0]!==c[0]?(g[0]-c[0])/(h[0]-c[0]):(g[1]-c[1])/(h[1]-c[1]),u=f[0]!==d[0]?(g[0]-d[0])/(f[0]-d[0]):(g[1]-d[1])/(f[1]-d[1]),!(l>=1||l<=0||u>=1||u<=0))){var y=g,_=!o[y];_&&(o[y]=!0),e?r.push(e(g,t,n,c,h,l,s,a,d,f,u,_)):r.push(g)}}function _(t,e){var n,r,o,s,a=i[t][e],l=i[t][e+1];return a[0]<l[0]?(n=a[0],r=l[0]):(n=l[0],r=a[0]),a[1]<l[1]?(o=a[1],s=l[1]):(o=l[1],s=a[1]),{minX:n,minY:o,maxX:r,maxY:s,ring:t,edge:e}}}(t,(function(t,e,n,i,r,o,s,a,l,u,c,h){return[t,e,n,i,r,o,s,a,l,u,c,h]})),l=a.length;if(0==l){var d=[];for(i=0;i<e;i++)d.push(r.polygon([t.geometry.coordinates[i]],{parent:-1,winding:_(t.geometry.coordinates[i])}));var b=r.featureCollection(d);return X(),Y(),b}var x=[],w=[];for(i=0;i<e;i++){x.push([]);for(var E=0;E<t.geometry.coordinates[i].length-1;E++)x[i].push([new f(t.geometry.coordinates[i][v(E+1,t.geometry.coordinates[i].length-1)],1,[i,E],[i,v(E+1,t.geometry.coordinates[i].length-1)],void 0)]),w.push(new g(t.geometry.coordinates[i][E],[i,v(E-1,t.geometry.coordinates[i].length-1)],[i,E],void 0,void 0,!1,!0))}for(i=0;i<l;i++)x[a[i][1]][a[i][2]].push(new f(a[i][0],a[i][5],[a[i][1],a[i][2]],[a[i][6],a[i][7]],void 0)),a[i][11]&&w.push(new g(a[i][0],[a[i][1],a[i][2]],[a[i][6],a[i][7]],void 0,void 0,!0,!0));var P=w.length;for(i=0;i<x.length;i++)for(E=0;E<x[i].length;E++)x[i][E].sort((function(t,e){return t.param<e.param?-1:1}));var C=[];for(i=0;i<P;i++)C.push({minX:w[i].coord[0],minY:w[i].coord[1],maxX:w[i].coord[0],maxY:w[i].coord[1],index:i});var O=u.default();for(O.load(C),i=0;i<x.length;i++)for(E=0;E<x[i].length;E++)for(var S=0;S<x[i][E].length;S++){L=S==x[i][E].length-1?x[i][v(E+1,t.geometry.coordinates[i].length-1)][0].coord:x[i][E][S+1].coord;var I=O.search({minX:L[0],minY:L[1],maxX:L[0],maxY:L[1]})[0];x[i][E][S].nxtIsectAlongEdgeIn=I.index}for(i=0;i<x.length;i++)for(E=0;E<x[i].length;E++)for(S=0;S<x[i][E].length;S++){var L=x[i][E][S].coord,M=(I=O.search({minX:L[0],minY:L[1],maxX:L[0],maxY:L[1]})[0]).index;M<s?w[M].nxtIsectAlongRingAndEdge2=x[i][E][S].nxtIsectAlongEdgeIn:m(w[M].ringAndEdge1,x[i][E][S].ringAndEdgeIn)?w[M].nxtIsectAlongRingAndEdge1=x[i][E][S].nxtIsectAlongEdgeIn:w[M].nxtIsectAlongRingAndEdge2=x[i][E][S].nxtIsectAlongEdgeIn}var T=[];for(i=0,E=0;E<e;E++){var R=i;for(S=0;S<t.geometry.coordinates[E].length-1;S++)w[i].coord[0]<w[R].coord[0]&&(R=i),i++;var N=w[R].nxtIsectAlongRingAndEdge2;for(S=0;S<w.length;S++)if(w[S].nxtIsectAlongRingAndEdge1==R||w[S].nxtIsectAlongRingAndEdge2==R){var A=S;break}var D=y([w[A].coord,w[R].coord,w[N].coord],!0)?1:-1;T.push({isect:R,parent:-1,winding:D})}for(T.sort((function(t,e){return w[t.isect].coord>w[e.isect].coord?-1:1})),d=[];T.length>0;){var j=T.pop(),F=j.isect,k=j.parent,G=j.winding,V=d.length,Z=[w[F].coord],z=F;if(w[F].ringAndEdge1Walkable)var B=w[F].ringAndEdge1,U=w[F].nxtIsectAlongRingAndEdge1;else B=w[F].ringAndEdge2,U=w[F].nxtIsectAlongRingAndEdge2;for(;!m(w[F].coord,w[U].coord);){Z.push(w[U].coord);var W=void 0;for(i=0;i<T.length;i++)if(T[i].isect==U){W=i;break}if(null!=W&&T.splice(W,1),m(B,w[U].ringAndEdge1)){if(B=w[U].ringAndEdge2,w[U].ringAndEdge2Walkable=!1,w[U].ringAndEdge1Walkable){var q={isect:U};y([w[z].coord,w[U].coord,w[w[U].nxtIsectAlongRingAndEdge2].coord],1==G)?(q.parent=k,q.winding=-G):(q.parent=V,q.winding=G),T.push(q)}z=U,U=w[U].nxtIsectAlongRingAndEdge2}else B=w[U].ringAndEdge1,w[U].ringAndEdge1Walkable=!1,w[U].ringAndEdge2Walkable&&(q={isect:U},y([w[z].coord,w[U].coord,w[w[U].nxtIsectAlongRingAndEdge1].coord],1==G)?(q.parent=k,q.winding=-G):(q.parent=V,q.winding=G),T.push(q)),z=U,U=w[U].nxtIsectAlongRingAndEdge1}Z.push(w[U].coord),d.push(r.polygon([Z],{index:V,parent:k,winding:G,netWinding:void 0}))}function X(){for(var t=[],e=0;e<b.features.length;e++)-1==b.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,i=0;i<b.features.length;i++)t[e]!=i&&h.default(b.features[t[e]].geometry.coordinates[0][0],b.features[i],{ignoreBoundary:!0})&&c.default(b.features[i])<1/0&&(n=i);b.features[t[e]].properties.parent=n}}function Y(){for(var t=0;t<b.features.length;t++)if(-1==b.features[t].properties.parent){var e=b.features[t].properties.winding;b.features[t].properties.netWinding=e,H(t,e)}}function H(t,e){for(var n=0;n<b.features.length;n++)if(b.features[n].properties.parent==t){var i=e+b.features[n].properties.winding;b.features[n].properties.netWinding=i,H(n,i)}}return b=r.featureCollection(d),X(),Y(),b}var f=function(t,e,n,i,r){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},g=function(t,e,n,i,r,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function y(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function _(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(y([t[v(e-1,t.length-1)],t[e],t[v(e+1,t.length-1)]],!0))var i=1;else i=-1;return i}function m(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!m(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function v(t,e){return(t%e+e)%e}function b(t){var e=[];return i.flattenEach(t,(function(t){"Polygon"===t.geometry.type&&i.featureEach(d(t),(function(n){e.push(r.polygon(n.geometry.coordinates,t.properties))}))})),r.featureCollection(e)}t.exports=b,t.exports.default=b},19538:function(t){t.exports=function(){"use strict";function t(n,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=i-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-l*c/a+h)),Math.min(o,Math.floor(i+(a-l)*c/a+h)),s)}var p=n[i],d=r,f=o;for(e(n,r,i),s(n[o],p)>0&&e(n,r,o);d<f;){for(e(n,d,f),d++,f--;s(n[d],p)<0;)d++;for(;s(n[f],p)>0;)f--}0===s(n[r],p)?e(n,r,f):e(n,++f,o),f<=i&&(r=f+1),i<=f&&(o=f-1)}}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}return function(e,i,r,o,s){t(e,i,r||0,o||e.length-1,s||n)}}()},64860:(t,e,n)=>{"use strict";t.exports=r,t.exports.default=r;var i=n(19538);function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],l(r,t.leaf?i(o):o);return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,r,o){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((n-e)/r/2)*r,i(t,s,e,n,o),a.push(e,s,s,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!f(t,e))return n;for(var r,o,s,a,l=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],f(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):d(t,a)?this._all(s,n):l.push(s));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!f(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],f(t,s=e.leaf?n(o):o)){if(e.leaf||d(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,s,a=this.data,l=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),i=u[u.length-1],n=c.pop(),s=!0),a.leaf&&-1!==(r=o(t,a.children,e)))return a.children.splice(r,1),u.push(a),this._condense(u),this;s||a.leaf||!d(a,l)?i?(n++,a=i.children[n],s=!1):a=null:(u.push(a),c.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return s(r=g(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=g([])).leaf=!1,r.height=i;var l,u,c,h,p=Math.ceil(o/a),d=p*Math.ceil(Math.sqrt(a));for(y(t,e,n,d,this.compareMinX),l=e;l<=n;l+=d)for(y(t,l,c=Math.min(l+d-1,n),p,this.compareMinY),u=l;u<=c;u+=p)h=Math.min(u+p-1,c),r.children.push(this._build(t,u,h,i-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,l,u,c,p,d,f;i.push(e),!e.leaf&&i.length-1!==n;){for(c=p=1/0,r=0,o=e.children.length;r<o;r++)l=h(s=e.children[r]),d=t,f=s,(u=(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-l)<p?(p=u,c=l<c?l:c,a=s):u===p&&l<c&&(c=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),l(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=g(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,l,u,c,p,d,f,g,y,_,m;for(u=c=1/0,i=e;i<=n-e;i++)d=r=a(t,0,i,this.toBBox),f=o=a(t,i,n,this.toBBox),void 0,void 0,void 0,void 0,g=Math.max(d.minX,f.minX),y=Math.max(d.minY,f.minY),_=Math.min(d.maxX,f.maxX),m=Math.min(d.maxY,f.maxY),s=Math.max(0,_-g)*Math.max(0,m-y),l=h(r)+h(o),s<u?(u=s,p=i,c=l<c?l:c):s===u&&l<c&&(c=l,p=i);return p},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,u=a(t,0,e,s),c=a(t,n-e,n,s),h=p(u)+p(c);for(r=e;r<n-e;r++)o=t.children[r],l(u,t.leaf?s(o):o),h+=p(u);for(r=n-e-1;r>=e;r--)o=t.children[r],l(c,t.leaf?s(o):o),h+=p(c);return h},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)l(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},62276:(t,e,n)=>{"use strict";var i=n(84102),r=n(10611),o=n(71704);function s(t){return(t=t.slice()).push(t[0]),i.polygon([t])}function a(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return r.collectionOf(t,"Point","points"),i.featureCollection(o.voronoi().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(s))}t.exports=a,t.exports.default=a},21924:(t,e,n)=>{"use strict";var i=n(40210),r=n(55559),o=r(i("String.prototype.indexOf"));t.exports=function(t,e){var n=i(t,!!e);return"function"==typeof n&&o(t,".prototype.")>-1?r(n):n}},55559:(t,e,n)=>{"use strict";var i=n(58612),r=n(40210),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||i.call(s,o),l=r("%Object.getOwnPropertyDescriptor%",!0),u=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(u)try{u({},"a",{value:1})}catch(t){u=null}t.exports=function(t){var e=a(i,s,arguments);if(l&&u){var n=l(e,"length");n.configurable&&u(e,"length",{value:1+c(0,t.length-(arguments.length-1))})}return e};var h=function(){return a(i,o,arguments)};u?u(t.exports,"apply",{value:h}):t.exports.apply=h},72273:(t,e,n)=>{"use strict";var i=n(59197),r=n(43842),o=n(26960),s=n(88639).orient2d;function a(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>i[0]&&(i=a),a[1]<n[1]&&(n=a),a[1]>r[1]&&(r=a)}var l=[e,n,i,r],u=l.slice();for(s=0;s<t.length;s++)o(t[s],l)||u.push(t[s]);return function(t){t.sort(v);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&d(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var i=[],r=t.length-1;r>=0;r--){for(;i.length>=2&&d(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop();i.push(t[r])}return i.pop(),e.pop(),e.concat(i)}(u)}(t),s=new i(16);s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t);for(var a,u=[],c=0;c<r.length;c++){var h=r[c];s.remove(h),a=g(h,a),u.push(a)}var p=new i(16);for(c=0;c<u.length;c++)p.insert(f(u[c]));for(var _=e*e,m=n*n;u.length;){var b=u.shift(),x=b.p,w=b.next.p,E=y(x,w);if(!(E<m)){var P=E/_;(h=l(s,b.prev.p,x,w,b.next.next.p,P,p))&&Math.min(y(h,x),y(h,w))<=P&&(u.push(b),u.push(g(h,b)),s.remove(h),p.remove(b),p.insert(f(b)),p.insert(f(b.next)))}}b=a;var C=[];do{C.push(b.p),b=b.next}while(b!==a);return C.push(b.p),C}function l(t,e,n,i,o,s,a){for(var l=new r([],u),h=t.data;h;){for(var d=0;d<h.children.length;d++){var f=h.children[d],g=h.leaf?_(f,n,i):c(n,i,f);g>s||l.push({node:f,dist:g})}for(;l.length&&!l.peek().node.children;){var y=l.pop(),m=y.node,v=_(m,e,n),b=_(m,i,o);if(y.dist<v&&y.dist<b&&p(n,m,a)&&p(i,m,a))return m}(h=l.pop())&&(h=h.node)}return null}function u(t,e){return t.dist-e.dist}function c(t,e,n){if(h(t,n)||h(e,n))return 0;var i=m(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=m(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=m(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=m(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(i,r,o,s)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function p(t,e,n){for(var i,r,o,s,a=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:a,minY:l,maxX:u,maxY:c}),p=0;p<h.length;p++)if(i=h[p].p,r=h[p].next.p,o=t,i!==(s=e)&&r!==o&&d(i,r,o)>0!=d(i,r,s)>0&&d(o,s,i)>0!=d(o,s,r)>0)return!1;return!0}function d(t,e,n){return s(t[0],t[1],e[0],e[1],n[0],n[1])}function f(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function g(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function y(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function _(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}function m(t,e,n,i,r,o,s,a){var l,u,c,h,p=n-t,d=i-e,f=s-r,g=a-o,y=t-r,_=e-o,m=p*p+d*d,v=p*f+d*g,b=f*f+g*g,x=p*y+d*_,w=f*y+g*_,E=m*b-v*v,P=E,C=E;0===E?(u=0,P=1,h=w,C=b):(h=m*w-v*x,(u=v*w-b*x)<0?(u=0,h=w,C=b):u>P&&(u=P,h=w+v,C=b)),h<0?(h=0,-x<0?u=0:-x>m?u=P:(u=-x,P=m)):h>C&&(h=C,-x+v<0?u=0:-x+v>m?u=P:(u=-x+v,P=m));var O=(1-(c=0===h?0:h/C))*r+c*s-((1-(l=0===u?0:u/P))*t+l*n),S=(1-c)*o+c*a-((1-l)*e+l*i);return O*O+S*S}function v(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}r.default&&(r=r.default),t.exports=a,t.exports.default=a},41688:(t,e,n)=>{"use strict";function i(){return new r}function r(){this.reset()}n.r(e),n.d(e,{geoAlbers:()=>xi,geoAlbersUsa:()=>wi,geoArea:()=>Y,geoAzimuthalEqualArea:()=>Oi,geoAzimuthalEqualAreaRaw:()=>Ci,geoAzimuthalEquidistant:()=>Ii,geoAzimuthalEquidistantRaw:()=>Si,geoBounds:()=>Vt,geoCentroid:()=>te,geoCircle:()=>he,geoClipExtent:()=>Pe,geoConicConformal:()=>Ai,geoConicConformalRaw:()=>Ni,geoConicEqualArea:()=>bi,geoConicEqualAreaRaw:()=>vi,geoConicEquidistant:()=>ki,geoConicEquidistantRaw:()=>Fi,geoContains:()=>Xe,geoDistance:()=>ke,geoEquirectangular:()=>ji,geoEquirectangularRaw:()=>Di,geoGnomonic:()=>Vi,geoGnomonicRaw:()=>Gi,geoGraticule:()=>Je,geoGraticule10:()=>Ke,geoIdentity:()=>zi,geoInterpolate:()=>$e,geoLength:()=>De,geoMercator:()=>Mi,geoMercatorRaw:()=>Li,geoNaturalEarth1:()=>Ui,geoNaturalEarth1Raw:()=>Bi,geoOrthographic:()=>qi,geoOrthographicRaw:()=>Wi,geoPath:()=>ni,geoProjection:()=>yi,geoProjectionMutator:()=>_i,geoRotation:()=>le,geoStereographic:()=>Yi,geoStereographicRaw:()=>Xi,geoStream:()=>D,geoTransform:()=>li,geoTransverseMercator:()=>Ji,geoTransverseMercatorRaw:()=>Hi}),r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){s(o,t,this.t),s(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new r;function s(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}var a=1e-6,l=Math.PI,u=l/2,c=l/4,h=2*l,p=180/l,d=l/180,f=Math.abs,g=Math.atan,y=Math.atan2,_=Math.cos,m=Math.ceil,v=Math.exp,b=(Math.floor,Math.log),x=Math.pow,w=Math.sin,E=Math.sign||function(t){return t>0?1:t<0?-1:0},P=Math.sqrt,C=Math.tan;function O(t){return t>1?0:t<-1?l:Math.acos(t)}function S(t){return t>1?u:t<-1?-u:Math.asin(t)}function I(t){return(t=w(t/2))*t}function L(){}function M(t,e){t&&R.hasOwnProperty(t.type)&&R[t.type](t,e)}var T={Feature:function(t,e){M(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)M(n[i].geometry,e)}},R={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){N(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)N(n[i],e,0)},Polygon:function(t,e){A(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)A(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)M(n[i],e)}};function N(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function A(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)N(t[n],e,1);e.polygonEnd()}function D(t,e){t&&T.hasOwnProperty(t.type)?T[t.type](t,e):M(t,e)}var j,F,k,G,V,Z=i(),z=i(),B={point:L,lineStart:L,lineEnd:L,polygonStart:function(){Z.reset(),B.lineStart=U,B.lineEnd=W},polygonEnd:function(){var t=+Z;z.add(t<0?h+t:t),this.lineStart=this.lineEnd=this.point=L},sphere:function(){z.add(h)}};function U(){B.point=q}function W(){X(j,F)}function q(t,e){B.point=X,j=t,F=e,k=t*=d,G=_(e=(e*=d)/2+c),V=w(e)}function X(t,e){var n=(t*=d)-k,i=n>=0?1:-1,r=i*n,o=_(e=(e*=d)/2+c),s=w(e),a=V*s,l=G*o+a*_(r),u=a*i*w(r);Z.add(y(u,l)),k=t,G=o,V=s}function Y(t){return z.reset(),D(t,B),2*z}function H(t){return[y(t[1],t[0]),S(t[2])]}function J(t){var e=t[0],n=t[1],i=_(n);return[i*_(e),i*w(e),w(n)]}function K(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function $(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Q(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function tt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function et(t){var e=P(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var nt,it,rt,ot,st,at,lt,ut,ct,ht,pt,dt,ft,gt,yt,_t,mt,vt,bt,xt,wt,Et,Pt,Ct,Ot,St,It=i(),Lt={point:Mt,lineStart:Rt,lineEnd:Nt,polygonStart:function(){Lt.point=At,Lt.lineStart=Dt,Lt.lineEnd=jt,It.reset(),B.polygonStart()},polygonEnd:function(){B.polygonEnd(),Lt.point=Mt,Lt.lineStart=Rt,Lt.lineEnd=Nt,Z<0?(nt=-(rt=180),it=-(ot=90)):It>a?ot=90:It<-a&&(it=-90),ht[0]=nt,ht[1]=rt}};function Mt(t,e){ct.push(ht=[nt=t,rt=t]),e<it&&(it=e),e>ot&&(ot=e)}function Tt(t,e){var n=J([t*d,e*d]);if(ut){var i=$(ut,n),r=$([i[1],-i[0],0],i);et(r),r=H(r);var o,s=t-st,a=s>0?1:-1,l=r[0]*p*a,u=f(s)>180;u^(a*st<l&&l<a*t)?(o=r[1]*p)>ot&&(ot=o):u^(a*st<(l=(l+360)%360-180)&&l<a*t)?(o=-r[1]*p)<it&&(it=o):(e<it&&(it=e),e>ot&&(ot=e)),u?t<st?Ft(nt,t)>Ft(nt,rt)&&(rt=t):Ft(t,rt)>Ft(nt,rt)&&(nt=t):rt>=nt?(t<nt&&(nt=t),t>rt&&(rt=t)):t>st?Ft(nt,t)>Ft(nt,rt)&&(rt=t):Ft(t,rt)>Ft(nt,rt)&&(nt=t)}else ct.push(ht=[nt=t,rt=t]);e<it&&(it=e),e>ot&&(ot=e),ut=n,st=t}function Rt(){Lt.point=Tt}function Nt(){ht[0]=nt,ht[1]=rt,Lt.point=Mt,ut=null}function At(t,e){if(ut){var n=t-st;It.add(f(n)>180?n+(n>0?360:-360):n)}else at=t,lt=e;B.point(t,e),Tt(t,e)}function Dt(){B.lineStart()}function jt(){At(at,lt),B.lineEnd(),f(It)>a&&(nt=-(rt=180)),ht[0]=nt,ht[1]=rt,ut=null}function Ft(t,e){return(e-=t)<0?e+360:e}function kt(t,e){return t[0]-e[0]}function Gt(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Vt(t){var e,n,i,r,o,s,a;if(ot=rt=-(nt=it=1/0),ct=[],D(t,Lt),n=ct.length){for(ct.sort(kt),e=1,o=[i=ct[0]];e<n;++e)Gt(i,(r=ct[e])[0])||Gt(i,r[1])?(Ft(i[0],r[1])>Ft(i[0],i[1])&&(i[1]=r[1]),Ft(r[0],i[1])>Ft(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,e=0,i=o[n=o.length-1];e<=n;i=r,++e)r=o[e],(a=Ft(i[1],r[0]))>s&&(s=a,nt=r[0],rt=i[1])}return ct=ht=null,nt===1/0||it===1/0?[[NaN,NaN],[NaN,NaN]]:[[nt,it],[rt,ot]]}var Zt,zt,Bt={sphere:L,point:Ut,lineStart:qt,lineEnd:Ht,polygonStart:function(){Bt.lineStart=Jt,Bt.lineEnd=Kt},polygonEnd:function(){Bt.lineStart=qt,Bt.lineEnd=Ht}};function Ut(t,e){t*=d;var n=_(e*=d);Wt(n*_(t),n*w(t),w(e))}function Wt(t,e,n){++pt,ft+=(t-ft)/pt,gt+=(e-gt)/pt,yt+=(n-yt)/pt}function qt(){Bt.point=Xt}function Xt(t,e){t*=d;var n=_(e*=d);Ct=n*_(t),Ot=n*w(t),St=w(e),Bt.point=Yt,Wt(Ct,Ot,St)}function Yt(t,e){t*=d;var n=_(e*=d),i=n*_(t),r=n*w(t),o=w(e),s=y(P((s=Ot*o-St*r)*s+(s=St*i-Ct*o)*s+(s=Ct*r-Ot*i)*s),Ct*i+Ot*r+St*o);dt+=s,_t+=s*(Ct+(Ct=i)),mt+=s*(Ot+(Ot=r)),vt+=s*(St+(St=o)),Wt(Ct,Ot,St)}function Ht(){Bt.point=Ut}function Jt(){Bt.point=$t}function Kt(){Qt(Et,Pt),Bt.point=Ut}function $t(t,e){Et=t,Pt=e,t*=d,e*=d,Bt.point=Qt;var n=_(e);Ct=n*_(t),Ot=n*w(t),St=w(e),Wt(Ct,Ot,St)}function Qt(t,e){t*=d;var n=_(e*=d),i=n*_(t),r=n*w(t),o=w(e),s=Ot*o-St*r,a=St*i-Ct*o,l=Ct*r-Ot*i,u=P(s*s+a*a+l*l),c=S(u),h=u&&-c/u;bt+=h*s,xt+=h*a,wt+=h*l,dt+=c,_t+=c*(Ct+(Ct=i)),mt+=c*(Ot+(Ot=r)),vt+=c*(St+(St=o)),Wt(Ct,Ot,St)}function te(t){pt=dt=ft=gt=yt=_t=mt=vt=bt=xt=wt=0,D(t,Bt);var e=bt,n=xt,i=wt,r=e*e+n*n+i*i;return r<1e-12&&(e=_t,n=mt,i=vt,dt<a&&(e=ft,n=gt,i=yt),(r=e*e+n*n+i*i)<1e-12)?[NaN,NaN]:[y(n,e)*p,S(i/P(r))*p]}function ee(t){return function(){return t}}function ne(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function ie(t,e){return[t>l?t-h:t<-l?t+h:t,e]}function re(t,e,n){return(t%=h)?e||n?ne(se(t),ae(e,n)):se(t):e||n?ae(e,n):ie}function oe(t){return function(e,n){return[(e+=t)>l?e-h:e<-l?e+h:e,n]}}function se(t){var e=oe(t);return e.invert=oe(-t),e}function ae(t,e){var n=_(t),i=w(t),r=_(e),o=w(e);function s(t,e){var s=_(e),a=_(t)*s,l=w(t)*s,u=w(e),c=u*n+a*i;return[y(l*r-c*o,a*n-u*i),S(c*r+l*o)]}return s.invert=function(t,e){var s=_(e),a=_(t)*s,l=w(t)*s,u=w(e),c=u*r-l*o;return[y(l*r+u*o,a*n+c*i),S(c*n-a*i)]},s}function le(t){function e(e){return(e=t(e[0]*d,e[1]*d))[0]*=p,e[1]*=p,e}return t=re(t[0]*d,t[1]*d,t.length>2?t[2]*d:0),e.invert=function(e){return(e=t.invert(e[0]*d,e[1]*d))[0]*=p,e[1]*=p,e},e}function ue(t,e,n,i,r,o){if(n){var s=_(e),a=w(e),l=i*n;null==r?(r=e+i*h,o=e-l/2):(r=ce(s,r),o=ce(s,o),(i>0?r<o:r>o)&&(r+=i*h));for(var u,c=r;i>0?c>o:c<o;c-=l)u=H([s,-a*_(c),-a*w(c)]),t.point(u[0],u[1])}}function ce(t,e){(e=J(e))[0]-=t,et(e);var n=O(-e[1]);return((-e[2]<0?-n:n)+h-a)%h}function he(){var t,e,n=ee([0,0]),i=ee(90),r=ee(6),o={point:function(n,i){t.push(n=e(n,i)),n[0]*=p,n[1]*=p}};function s(){var s=n.apply(this,arguments),a=i.apply(this,arguments)*d,l=r.apply(this,arguments)*d;return t=[],e=re(-s[0]*d,-s[1]*d,0).invert,ue(o,a,l,1),s={type:"Polygon",coordinates:[t]},t=e=null,s}return s.center=function(t){return arguments.length?(n="function"==typeof t?t:ee([+t[0],+t[1]]),s):n},s.radius=function(t){return arguments.length?(i="function"==typeof t?t:ee(+t),s):i},s.precision=function(t){return arguments.length?(r="function"==typeof t?t:ee(+t),s):r},s}function pe(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:L,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function de(t,e){return f(t[0]-e[0])<a&&f(t[1]-e[1])<a}function fe(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ge(t,e,n,i,r){var o,s,a=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(de(i,s)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else a.push(n=new fe(i,t,null,!0)),l.push(n.o=new fe(i,null,n,!1)),a.push(n=new fe(s,t,null,!1)),l.push(n.o=new fe(s,null,n,!0))}})),a.length){for(l.sort(e),ye(a),ye(l),o=0,s=l.length;o<s;++o)l[o].e=n=!n;for(var u,c,h=a[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;u=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(o=0,s=u.length;o<s;++o)r.point((c=u[o])[0],c[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(d)for(u=p.p.z,o=u.length-1;o>=0;--o)r.point((c=u[o])[0],c[1]);else i(p.x,p.p.x,-1,r);p=p.p}u=(p=p.o).z,d=!d}while(!p.v);r.lineEnd()}}}function ye(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function _e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}ie.invert=ie,1===(Zt=_e).length&&(zt=Zt,Zt=function(t,e){return _e(zt(t),e)});var me=Array.prototype;function ve(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--s]=i[e];return n}function be(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o}me.slice,me.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var xe=1e9,we=-xe;function Ee(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,l){var c=0,h=0;if(null==r||(c=s(r,a))!==(h=s(o,a))||u(r,o)<0^a>0)do{l.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+a+4)%4)!==h);else l.point(o[0],o[1])}function s(i,r){return f(i[0]-t)<a?r>0?0:3:f(i[0]-n)<a?r>0?2:1:f(i[1]-e)<a?r>0?1:0:r>0?3:2}function l(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var a,u,c,h,p,d,f,g,y,_,m,v=s,b=pe(),x={point:w,lineStart:function(){x.point=E,u&&u.push(c=[]),_=!0,y=!1,f=g=NaN},lineEnd:function(){a&&(E(h,p),d&&y&&b.rejoin(),a.push(b.result())),x.point=w,y&&v.lineEnd()},polygonStart:function(){v=b,a=[],u=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var o,s,a=u[n],l=1,c=a.length,h=a[0],p=h[0],d=h[1];l<c;++l)o=p,s=d,p=(h=a[l])[0],d=h[1],s<=i?d>i&&(p-o)*(i-s)>(d-s)*(t-o)&&++e:d<=i&&(p-o)*(i-s)<(d-s)*(t-o)&&--e;return e}(),n=m&&e,r=(a=ve(a)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&ge(a,l,e,o,s),s.polygonEnd()),v=s,a=u=c=null}};function w(t,e){r(t,e)&&v.point(t,e)}function E(o,s){var a=r(o,s);if(u&&c.push([o,s]),_)h=o,p=s,d=a,_=!1,a&&(v.lineStart(),v.point(o,s));else if(a&&y)v.point(o,s);else{var l=[f=Math.max(we,Math.min(xe,f)),g=Math.max(we,Math.min(xe,g))],b=[o=Math.max(we,Math.min(xe,o)),s=Math.max(we,Math.min(xe,s))];!function(t,e,n,i,r,o){var s,a=t[0],l=t[1],u=0,c=1,h=e[0]-a,p=e[1]-l;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<u)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>u&&(u=s)}if(s=r-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>u&&(u=s)}else if(h>0){if(s<u)return;s<c&&(c=s)}if(s=i-l,p||!(s>0)){if(s/=p,p<0){if(s<u)return;s<c&&(c=s)}else if(p>0){if(s>c)return;s>u&&(u=s)}if(s=o-l,p||!(s<0)){if(s/=p,p<0){if(s>c)return;s>u&&(u=s)}else if(p>0){if(s<u)return;s<c&&(c=s)}return u>0&&(t[0]=a+u*h,t[1]=l+u*p),c<1&&(e[0]=a+c*h,e[1]=l+c*p),!0}}}}}(l,b,t,e,n,i)?a&&(v.lineStart(),v.point(o,s),m=!1):(y||(v.lineStart(),v.point(l[0],l[1])),v.point(b[0],b[1]),a||v.lineEnd(),m=!1)}f=o,g=s,y=a}return x}}function Pe(){var t,e,n,i=0,r=0,o=960,s=500;return n={stream:function(n){return t&&e===n?t:t=Ee(i,r,o,s)(e=n)},extent:function(a){return arguments.length?(i=+a[0][0],r=+a[0][1],o=+a[1][0],s=+a[1][1],t=e=null,n):[[i,r],[o,s]]}}}var Ce=i();function Oe(t,e){var n=e[0],i=e[1],r=[w(n),-_(n),0],o=0,s=0;Ce.reset();for(var u=0,p=t.length;u<p;++u)if(f=(d=t[u]).length)for(var d,f,g=d[f-1],m=g[0],v=g[1]/2+c,b=w(v),x=_(v),E=0;E<f;++E,m=C,b=I,x=L,g=P){var P=d[E],C=P[0],O=P[1]/2+c,I=w(O),L=_(O),M=C-m,T=M>=0?1:-1,R=T*M,N=R>l,A=b*I;if(Ce.add(y(A*T*w(R),x*L+A*_(R))),o+=N?M+T*h:M,N^m>=n^C>=n){var D=$(J(g),J(P));et(D);var j=$(r,D);et(j);var F=(N^M>=0?-1:1)*S(j[2]);(i>F||i===F&&(D[0]||D[1]))&&(s+=N^M>=0?1:-1)}}return(o<-a||o<a&&Ce<-a)^1&s}var Se,Ie,Le,Me=i(),Te={sphere:L,point:L,lineStart:function(){Te.point=Ne,Te.lineEnd=Re},lineEnd:L,polygonStart:L,polygonEnd:L};function Re(){Te.point=Te.lineEnd=L}function Ne(t,e){Se=t*=d,Ie=w(e*=d),Le=_(e),Te.point=Ae}function Ae(t,e){t*=d;var n=w(e*=d),i=_(e),r=f(t-Se),o=_(r),s=i*w(r),a=Le*n-Ie*i*o,l=Ie*n+Le*i*o;Me.add(y(P(s*s+a*a),l)),Se=t,Ie=n,Le=i}function De(t){return Me.reset(),D(t,Te),+Me}var je=[null,null],Fe={type:"LineString",coordinates:je};function ke(t,e){return je[0]=t,je[1]=e,De(Fe)}var Ge={Feature:function(t,e){return Ze(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(Ze(n[i].geometry,e))return!0;return!1}},Ve={Sphere:function(){return!0},Point:function(t,e){return ze(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(ze(n[i],e))return!0;return!1},LineString:function(t,e){return Be(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Be(n[i],e))return!0;return!1},Polygon:function(t,e){return Ue(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Ue(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(Ze(n[i],e))return!0;return!1}};function Ze(t,e){return!(!t||!Ve.hasOwnProperty(t.type))&&Ve[t.type](t,e)}function ze(t,e){return 0===ke(t,e)}function Be(t,e){var n=ke(t[0],t[1]);return ke(t[0],e)+ke(e,t[1])<=n+a}function Ue(t,e){return!!Oe(t.map(We),qe(e))}function We(t){return(t=t.map(qe)).pop(),t}function qe(t){return[t[0]*d,t[1]*d]}function Xe(t,e){return(t&&Ge.hasOwnProperty(t.type)?Ge[t.type]:Ze)(t,e)}function Ye(t,e,n){var i=be(t,e-a,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function He(t,e,n){var i=be(t,e-a,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function Je(){var t,e,n,i,r,o,s,l,u,c,h,p,d=10,g=d,y=90,_=360,v=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return be(m(i/y)*y,n,y).map(h).concat(be(m(l/_)*_,s,_).map(p)).concat(be(m(e/d)*d,t,d).filter((function(t){return f(t%y)>a})).map(u)).concat(be(m(o/g)*g,r,g).filter((function(t){return f(t%_)>a})).map(c))}return b.lines=function(){return x().map((function(t){return{type:"LineString",coordinates:t}}))},b.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(p(s).slice(1),h(n).reverse().slice(1),p(l).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.extentMajor(t).extentMinor(t):b.extentMinor()},b.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],l=+t[0][1],s=+t[1][1],i>n&&(t=i,i=n,n=t),l>s&&(t=l,l=s,s=t),b.precision(v)):[[i,l],[n,s]]},b.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),o>r&&(n=o,o=r,r=n),b.precision(v)):[[e,o],[t,r]]},b.step=function(t){return arguments.length?b.stepMajor(t).stepMinor(t):b.stepMinor()},b.stepMajor=function(t){return arguments.length?(y=+t[0],_=+t[1],b):[y,_]},b.stepMinor=function(t){return arguments.length?(d=+t[0],g=+t[1],b):[d,g]},b.precision=function(a){return arguments.length?(v=+a,u=Ye(o,r,90),c=He(e,t,v),h=Ye(l,s,90),p=He(i,n,v),b):v},b.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Ke(){return Je()()}function $e(t,e){var n=t[0]*d,i=t[1]*d,r=e[0]*d,o=e[1]*d,s=_(i),a=w(i),l=_(o),u=w(o),c=s*_(n),h=s*w(n),f=l*_(r),g=l*w(r),m=2*S(P(I(o-i)+s*l*I(r-n))),v=w(m),b=m?function(t){var e=w(t*=m)/v,n=w(m-t)/v,i=n*c+e*f,r=n*h+e*g,o=n*a+e*u;return[y(r,i)*p,y(o,P(i*i+r*r))*p]}:function(){return[n*p,i*p]};return b.distance=m,b}function Qe(t){return t}var tn,en,nn,rn,on=i(),sn=i(),an={point:L,lineStart:L,lineEnd:L,polygonStart:function(){an.lineStart=ln,an.lineEnd=hn},polygonEnd:function(){an.lineStart=an.lineEnd=an.point=L,on.add(f(sn)),sn.reset()},result:function(){var t=on/2;return on.reset(),t}};function ln(){an.point=un}function un(t,e){an.point=cn,tn=nn=t,en=rn=e}function cn(t,e){sn.add(rn*t-nn*e),nn=t,rn=e}function hn(){cn(tn,en)}const pn=an;var dn=1/0,fn=dn,gn=-dn,yn=gn,_n={point:function(t,e){t<dn&&(dn=t),t>gn&&(gn=t),e<fn&&(fn=e),e>yn&&(yn=e)},lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L,result:function(){var t=[[dn,fn],[gn,yn]];return gn=yn=-(fn=dn=1/0),t}};const mn=_n;var vn,bn,xn,wn,En=0,Pn=0,Cn=0,On=0,Sn=0,In=0,Ln=0,Mn=0,Tn=0,Rn={point:Nn,lineStart:An,lineEnd:Fn,polygonStart:function(){Rn.lineStart=kn,Rn.lineEnd=Gn},polygonEnd:function(){Rn.point=Nn,Rn.lineStart=An,Rn.lineEnd=Fn},result:function(){var t=Tn?[Ln/Tn,Mn/Tn]:In?[On/In,Sn/In]:Cn?[En/Cn,Pn/Cn]:[NaN,NaN];return En=Pn=Cn=On=Sn=In=Ln=Mn=Tn=0,t}};function Nn(t,e){En+=t,Pn+=e,++Cn}function An(){Rn.point=Dn}function Dn(t,e){Rn.point=jn,Nn(xn=t,wn=e)}function jn(t,e){var n=t-xn,i=e-wn,r=P(n*n+i*i);On+=r*(xn+t)/2,Sn+=r*(wn+e)/2,In+=r,Nn(xn=t,wn=e)}function Fn(){Rn.point=Nn}function kn(){Rn.point=Vn}function Gn(){Zn(vn,bn)}function Vn(t,e){Rn.point=Zn,Nn(vn=xn=t,bn=wn=e)}function Zn(t,e){var n=t-xn,i=e-wn,r=P(n*n+i*i);On+=r*(xn+t)/2,Sn+=r*(wn+e)/2,In+=r,Ln+=(r=wn*t-xn*e)*(xn+t),Mn+=r*(wn+e),Tn+=3*r,Nn(xn=t,wn=e)}const zn=Rn;function Bn(t){this._context=t}Bn.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,h)}},result:L};var Un,Wn,qn,Xn,Yn,Hn=i(),Jn={point:L,lineStart:function(){Jn.point=Kn},lineEnd:function(){Un&&$n(Wn,qn),Jn.point=L},polygonStart:function(){Un=!0},polygonEnd:function(){Un=null},result:function(){var t=+Hn;return Hn.reset(),t}};function Kn(t,e){Jn.point=$n,Wn=Xn=t,qn=Yn=e}function $n(t,e){Xn-=t,Yn-=e,Hn.add(P(Xn*Xn+Yn*Yn)),Xn=t,Yn=e}const Qn=Jn;function ti(){this._string=[]}function ei(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ni(t,e){var n,i,r=4.5;function o(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),D(t,n(i))),i.result()}return o.area=function(t){return D(t,n(pn)),pn.result()},o.measure=function(t){return D(t,n(Qn)),Qn.result()},o.bounds=function(t){return D(t,n(mn)),mn.result()},o.centroid=function(t){return D(t,n(zn)),zn.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,Qe):(t=e).stream,o):t},o.context=function(t){return arguments.length?(i=null==t?(e=null,new ti):new Bn(e=t),"function"!=typeof r&&i.pointRadius(r),o):e},o.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),o):r},o.projection(t).context(e)}function ii(t,e,n,i){return function(r,o){var s,a,l,u=e(o),c=r.invert(i[0],i[1]),h=pe(),p=e(h),d=!1,f={point:g,lineStart:_,lineEnd:m,polygonStart:function(){f.point=v,f.lineStart=b,f.lineEnd=x,a=[],s=[]},polygonEnd:function(){f.point=g,f.lineStart=_,f.lineEnd=m,a=ve(a);var t=Oe(s,c);a.length?(d||(o.polygonStart(),d=!0),ge(a,oi,t,n,o)):t&&(d||(o.polygonStart(),d=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function y(t,e){var n=r(t,e);u.point(n[0],n[1])}function _(){f.point=y,u.lineStart()}function m(){f.point=g,u.lineEnd()}function v(t,e){l.push([t,e]);var n=r(t,e);p.point(n[0],n[1])}function b(){p.lineStart(),l=[]}function x(){v(l[0][0],l[0][1]),p.lineEnd();var t,e,n,i,r=p.clean(),u=h.result(),c=u.length;if(l.pop(),s.push(l),l=null,c)if(1&r){if((e=(n=u[0]).length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else c>1&&2&r&&u.push(u.pop().concat(u.shift())),a.push(u.filter(ri))}return f}}function ri(t){return t.length>1}function oi(t,e){return((t=t.x)[0]<0?t[1]-u-a:u-t[1])-((e=e.x)[0]<0?e[1]-u-a:u-e[1])}ti.prototype={_radius:4.5,_circle:ei(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=ei(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};const si=ii((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var c=o>0?l:-l,h=f(o-n);f(h-l)<a?(t.point(n,i=(i+s)/2>0?u:-u),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(c,i),t.point(o,i),e=0):r!==c&&h>=l&&(f(n-r)<a&&(n-=r*a),f(o-c)<a&&(o-=c*a),i=function(t,e,n,i){var r,o,s=w(t-n);return f(s)>a?g((w(e)*(o=_(i))*w(n)-w(i)*(r=_(e))*w(t))/(r*o*s)):(e+i)/2}(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(c,i),e=0),t.point(n=o,i=s),r=c},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*u,i.point(-l,r),i.point(0,r),i.point(l,r),i.point(l,0),i.point(l,-r),i.point(0,-r),i.point(-l,-r),i.point(-l,0),i.point(-l,r);else if(f(t[0]-e[0])>a){var o=t[0]<e[0]?l:-l;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-l,-u]);function ai(t,e){var n=_(t),i=n>0,r=f(n)>a;function o(t,e){return _(t)*_(e)>n}function s(t,e,i){var r=[1,0,0],o=$(J(t),J(e)),s=K(o,o),u=o[0],c=s-u*u;if(!c)return!i&&t;var h=n*s/c,p=-n*u/c,d=$(r,o),g=tt(r,h);Q(g,tt(o,p));var y=d,_=K(g,y),m=K(y,y),v=_*_-m*(K(g,g)-1);if(!(v<0)){var b=P(v),x=tt(y,(-_-b)/m);if(Q(x,g),x=H(x),!i)return x;var w,E=t[0],C=e[0],O=t[1],S=e[1];C<E&&(w=E,E=C,C=w);var I=C-E,L=f(I-l)<a;if(!L&&S<O&&(w=O,O=S,S=w),L||I<a?L?O+S>0^x[1]<(f(x[0]-E)<a?O:S):O<=x[1]&&x[1]<=S:I>l^(E<=x[0]&&x[0]<=C)){var M=tt(y,(-_+b)/m);return Q(M,g),[x,H(M)]}}}function u(e,n){var r=i?t:l-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return ii(o,(function(t){var e,n,c,h,p;return{lineStart:function(){h=c=!1,p=1},point:function(d,f){var g,y=[d,f],_=o(d,f),m=i?_?0:u(d,f):_?u(d+(d<0?l:-l),f):0;if(!e&&(h=c=_)&&t.lineStart(),_!==c&&(!(g=s(e,y))||de(e,g)||de(y,g))&&(y[0]+=a,y[1]+=a,_=o(y[0],y[1])),_!==c)p=0,_?(t.lineStart(),g=s(y,e),t.point(g[0],g[1])):(g=s(e,y),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(r&&e&&i^_){var v;m&n||!(v=s(y,e,!0))||(p=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!_||e&&de(e,y)||t.point(y[0],y[1]),e=y,c=_,n=m},lineEnd:function(){c&&t.lineEnd(),e=null},clean:function(){return p|(h&&c)<<1}}}),(function(n,i,r,o){ue(o,t,e,r,n,i)}),i?[0,-t]:[-l,t-l])}function li(t){return{stream:ui(t)}}function ui(t){return function(e){var n=new ci;for(var i in t)n[i]=t[i];return n.stream=e,n}}function ci(){}function hi(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),D(n,t.stream(mn));var s=mn.result(),a=Math.min(i/(s[1][0]-s[0][0]),r/(s[1][1]-s[0][1])),l=+e[0][0]+(i-a*(s[1][0]+s[0][0]))/2,u=+e[0][1]+(r-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([l,u])}function pi(t,e,n){return hi(t,[[0,0],e],n)}ci.prototype={constructor:ci,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var di=_(30*d);function fi(t,e){return+e?function(t,e){function n(i,r,o,s,l,u,c,h,p,d,g,_,m,v){var b=c-i,x=h-r,w=b*b+x*x;if(w>4*e&&m--){var E=s+d,C=l+g,O=u+_,I=P(E*E+C*C+O*O),L=S(O/=I),M=f(f(O)-1)<a||f(o-p)<a?(o+p)/2:y(C,E),T=t(M,L),R=T[0],N=T[1],A=R-i,D=N-r,j=x*A-b*D;(j*j/w>e||f((b*A+x*D)/w-.5)>.3||s*d+l*g+u*_<di)&&(n(i,r,o,s,l,u,R,N,M,E/=I,C/=I,O,m,v),v.point(R,N),n(R,N,M,E,C,O,c,h,p,d,g,_,m,v))}}return function(e){var i,r,o,s,a,l,u,c,h,p,d,f,g={point:y,lineStart:_,lineEnd:v,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=_}};function y(n,i){n=t(n,i),e.point(n[0],n[1])}function _(){c=NaN,g.point=m,e.lineStart()}function m(i,r){var o=J([i,r]),s=t(i,r);n(c,h,u,p,d,f,c=s[0],h=s[1],u=i,p=o[0],d=o[1],f=o[2],16,e),e.point(c,h)}function v(){g.point=y,e.lineEnd()}function b(){_(),g.point=x,g.lineEnd=w}function x(t,e){m(i=t,e),r=c,o=h,s=p,a=d,l=f,g.point=m}function w(){n(c,h,u,p,d,f,r,o,i,s,a,l,16,e),g.lineEnd=v,v()}return g}}(t,e):function(t){return ui({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var gi=ui({point:function(t,e){this.stream.point(t*d,e*d)}});function yi(t){return _i((function(){return t}))()}function _i(t){var e,n,i,r,o,s,a,l,u,c,h=150,f=480,g=250,y=0,_=0,m=0,v=0,b=0,x=null,w=si,E=null,C=Qe,O=.5,S=fi(M,O);function I(t){return[(t=o(t[0]*d,t[1]*d))[0]*h+n,i-t[1]*h]}function L(t){return(t=o.invert((t[0]-n)/h,(i-t[1])/h))&&[t[0]*p,t[1]*p]}function M(t,r){return[(t=e(t,r))[0]*h+n,i-t[1]*h]}function T(){o=ne(r=re(m,v,b),e);var t=e(y,_);return n=f-t[0]*h,i=g+t[1]*h,R()}function R(){return u=c=null,I}return I.stream=function(t){return u&&c===t?u:u=gi(w(r,S(C(c=t))))},I.clipAngle=function(t){return arguments.length?(w=+t?ai(x=t*d,6*d):(x=null,si),R()):x*p},I.clipExtent=function(t){return arguments.length?(C=null==t?(E=s=a=l=null,Qe):Ee(E=+t[0][0],s=+t[0][1],a=+t[1][0],l=+t[1][1]),R()):null==E?null:[[E,s],[a,l]]},I.scale=function(t){return arguments.length?(h=+t,T()):h},I.translate=function(t){return arguments.length?(f=+t[0],g=+t[1],T()):[f,g]},I.center=function(t){return arguments.length?(y=t[0]%360*d,_=t[1]%360*d,T()):[y*p,_*p]},I.rotate=function(t){return arguments.length?(m=t[0]%360*d,v=t[1]%360*d,b=t.length>2?t[2]%360*d:0,T()):[m*p,v*p,b*p]},I.precision=function(t){return arguments.length?(S=fi(M,O=t*t),R()):P(O)},I.fitExtent=function(t,e){return hi(I,t,e)},I.fitSize=function(t,e){return pi(I,t,e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&L,T()}}function mi(t){var e=0,n=l/3,i=_i(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*d,n=t[1]*d):[e*p,n*p]},r}function vi(t,e){var n=w(t),i=(n+w(e))/2;if(f(i)<a)return function(t){var e=_(t);function n(t,n){return[t*e,w(n)/e]}return n.invert=function(t,n){return[t/e,S(n*e)]},n}(t);var r=1+n*(2*i-n),o=P(r)/i;function s(t,e){var n=P(r-2*i*w(e))/i;return[n*w(t*=i),o-n*_(t)]}return s.invert=function(t,e){var n=o-e;return[y(t,f(n))/i*E(n),S((r-(t*t+n*n)*i*i)/(2*i))]},s}function bi(){return mi(vi).scale(155.424).center([0,33.6442])}function xi(){return bi().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function wi(){var t,e,n,i,r,o,s=xi(),l=bi().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=bi().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function h(t){var e=t[0],s=t[1];return o=null,n.point(e,s),o||(i.point(e,s),o)||(r.point(e,s),o)}function p(){return t=e=null,h}return h.invert=function(t){var e=s.scale(),n=s.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?l:r>=.166&&r<.234&&i>=-.214&&i<-.115?u:s).invert(t)},h.stream=function(n){return t&&e===n?t:(i=[s.stream(e=n),l.stream(n),u.stream(n)],r=i.length,t={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},h.precision=function(t){return arguments.length?(s.precision(t),l.precision(t),u.precision(t),p()):s.precision()},h.scale=function(t){return arguments.length?(s.scale(t),l.scale(.35*t),u.scale(t),h.translate(s.translate())):s.scale()},h.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),o=+t[0],h=+t[1];return n=s.translate(t).clipExtent([[o-.455*e,h-.238*e],[o+.455*e,h+.238*e]]).stream(c),i=l.translate([o-.307*e,h+.201*e]).clipExtent([[o-.425*e+a,h+.12*e+a],[o-.214*e-a,h+.234*e-a]]).stream(c),r=u.translate([o-.205*e,h+.212*e]).clipExtent([[o-.214*e+a,h+.166*e+a],[o-.115*e-a,h+.234*e-a]]).stream(c),p()},h.fitExtent=function(t,e){return hi(h,t,e)},h.fitSize=function(t,e){return pi(h,t,e)},h.scale(1070)}function Ei(t){return function(e,n){var i=_(e),r=_(n),o=t(i*r);return[o*r*w(e),o*w(n)]}}function Pi(t){return function(e,n){var i=P(e*e+n*n),r=t(i),o=w(r),s=_(r);return[y(e*o,i*s),S(i&&n*o/i)]}}var Ci=Ei((function(t){return P(2/(1+t))}));function Oi(){return yi(Ci).scale(124.75).clipAngle(179.999)}Ci.invert=Pi((function(t){return 2*S(t/2)}));var Si=Ei((function(t){return(t=O(t))&&t/w(t)}));function Ii(){return yi(Si).scale(79.4188).clipAngle(179.999)}function Li(t,e){return[t,b(C((u+e)/2))]}function Mi(){return Ti(Li).scale(961/h)}function Ti(t){var e,n,i,r=yi(t),o=r.center,s=r.scale,a=r.translate,u=r.clipExtent,c=null;function h(){var o=l*s(),a=r(le(r.rotate()).invert([0,0]));return u(null==c?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:t===Li?[[Math.max(a[0]-o,c),e],[Math.min(a[0]+o,n),i]]:[[c,Math.max(a[1]-o,e)],[n,Math.min(a[1]+o,i)]])}return r.scale=function(t){return arguments.length?(s(t),h()):s()},r.translate=function(t){return arguments.length?(a(t),h()):a()},r.center=function(t){return arguments.length?(o(t),h()):o()},r.clipExtent=function(t){return arguments.length?(null==t?c=e=n=i=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),h()):null==c?null:[[c,e],[n,i]]},h()}function Ri(t){return C((u+t)/2)}function Ni(t,e){var n=_(t),i=t===e?w(t):b(n/_(e))/b(Ri(e)/Ri(t)),r=n*x(Ri(t),i)/i;if(!i)return Li;function o(t,e){r>0?e<-u+a&&(e=-u+a):e>u-a&&(e=u-a);var n=r/x(Ri(e),i);return[n*w(i*t),r-n*_(i*t)]}return o.invert=function(t,e){var n=r-e,o=E(i)*P(t*t+n*n);return[y(t,f(n))/i*E(n),2*g(x(r/o,1/i))-u]},o}function Ai(){return mi(Ni).scale(109.5).parallels([30,30])}function Di(t,e){return[t,e]}function ji(){return yi(Di).scale(152.63)}function Fi(t,e){var n=_(t),i=t===e?w(t):(n-_(e))/(e-t),r=n/i+t;if(f(i)<a)return Di;function o(t,e){var n=r-e,o=i*t;return[n*w(o),r-n*_(o)]}return o.invert=function(t,e){var n=r-e;return[y(t,f(n))/i*E(n),r-E(i)*P(t*t+n*n)]},o}function ki(){return mi(Fi).scale(131.154).center([0,13.9389])}function Gi(t,e){var n=_(e),i=_(t)*n;return[n*w(t)/i,w(e)/i]}function Vi(){return yi(Gi).scale(144.049).clipAngle(60)}function Zi(t,e,n,i){return 1===t&&1===e&&0===n&&0===i?Qe:ui({point:function(r,o){this.stream.point(r*t+n,o*e+i)}})}function zi(){var t,e,n,i,r,o,s=1,a=0,l=0,u=1,c=1,h=Qe,p=null,d=Qe;function f(){return i=r=null,o}return o={stream:function(t){return i&&r===t?i:i=h(d(r=t))},clipExtent:function(i){return arguments.length?(d=null==i?(p=t=e=n=null,Qe):Ee(p=+i[0][0],t=+i[0][1],e=+i[1][0],n=+i[1][1]),f()):null==p?null:[[p,t],[e,n]]},scale:function(t){return arguments.length?(h=Zi((s=+t)*u,s*c,a,l),f()):s},translate:function(t){return arguments.length?(h=Zi(s*u,s*c,a=+t[0],l=+t[1]),f()):[a,l]},reflectX:function(t){return arguments.length?(h=Zi(s*(u=t?-1:1),s*c,a,l),f()):u<0},reflectY:function(t){return arguments.length?(h=Zi(s*u,s*(c=t?-1:1),a,l),f()):c<0},fitExtent:function(t,e){return hi(o,t,e)},fitSize:function(t,e){return pi(o,t,e)}}}function Bi(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function Ui(){return yi(Bi).scale(175.295)}function Wi(t,e){return[_(e)*w(t),w(e)]}function qi(){return yi(Wi).scale(249.5).clipAngle(90.000001)}function Xi(t,e){var n=_(e),i=1+_(t)*n;return[n*w(t)/i,w(e)/i]}function Yi(){return yi(Xi).scale(250).clipAngle(142)}function Hi(t,e){return[b(C((u+e)/2)),-t]}function Ji(){var t=Ti(Hi),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}Si.invert=Pi((function(t){return t})),Li.invert=function(t,e){return[t,2*g(v(e))-u]},Di.invert=Di,Gi.invert=Pi(g),Bi.invert=function(t,e){var n,i=e,r=25;do{var o=i*i,s=o*o;i-=n=(i*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(f(n)>a&&--r>0);return[t/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]},Wi.invert=Pi(S),Xi.invert=Pi((function(t){return 2*g(t)})),Hi.invert=function(t,e){return[-e,2*g(v(t))-u]}},71704:(t,e,n)=>{"use strict";function i(t){return function(){return t}}function r(t){return t[0]}function o(t){return t[1]}function s(){this._=null}function a(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function l(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function u(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function c(t){for(;t.L;)t=t.L;return t}n.r(e),n.d(e,{voronoi:()=>Z}),s.prototype={constructor:s,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=c(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(l(this,n),n=(t=n).U),n.C=!1,i.C=!0,u(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(u(this,n),n=(t=n).U),n.C=!1,i.C=!0,l(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?c(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,l(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,u(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,l(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,u(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,l(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,u(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};const h=s;function p(t,e,n,i){var r=[null,null],o=j.push(r)-1;return r.left=t,r.right=e,n&&f(r,t,e,n),i&&f(r,e,t,i),A[t.index].halfedges.push(o),A[e.index].halfedges.push(o),r}function d(t,e,n){var i=[e,n];return i.left=t,i}function f(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function g(t,e,n,i,r){var o,s=t[0],a=t[1],l=s[0],u=s[1],c=0,h=1,p=a[0]-l,d=a[1]-u;if(o=e-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*p,u+c*d]),h<1&&(t[1]=[l+h*p,u+h*d]),!0)}}}}}function y(t,e,n,i,r){var o=t[1];if(o)return!0;var s,a,l=t[0],u=t.left,c=t.right,h=u[0],p=u[1],d=c[0],f=c[1],g=(h+d)/2,y=(p+f)/2;if(f===p){if(g<e||g>=i)return;if(h>d){if(l){if(l[1]>=r)return}else l=[g,n];o=[g,r]}else{if(l){if(l[1]<n)return}else l=[g,r];o=[g,n]}}else if(a=y-(s=(h-d)/(f-p))*g,s<-1||s>1)if(h>d){if(l){if(l[1]>=r)return}else l=[(n-a)/s,n];o=[(r-a)/s,r]}else{if(l){if(l[1]<n)return}else l=[(r-a)/s,r];o=[(n-a)/s,n]}else if(p<f){if(l){if(l[0]>=i)return}else l=[e,s*e+a];o=[i,s*i+a]}else{if(l){if(l[0]<e)return}else l=[i,s*i+a];o=[e,s*e+a]}return t[0]=l,t[1]=o,!0}function _(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function m(t,e){return e[+(e.left!==t.site)]}function v(t,e){return e[+(e.left===t.site)]}var b,x=[];function w(){a(this),this.x=this.y=this.arc=this.site=this.cy=null}function E(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r[0],a=r[1],l=i[0]-s,u=i[1]-a,c=o[0]-s,h=o[1]-a,p=2*(l*h-u*c);if(!(p>=-k)){var d=l*l+u*u,f=c*c+h*h,g=(h*d-u*f)/p,y=(l*f-c*d)/p,_=x.pop()||new w;_.arc=t,_.site=r,_.x=g+s,_.y=(_.cy=y+a)+Math.sqrt(g*g+y*y),t.circle=_;for(var m=null,v=D._;v;)if(_.y<v.y||_.y===v.y&&_.x<=v.x){if(!v.L){m=v.P;break}v=v.L}else{if(!v.R){m=v;break}v=v.R}D.insert(m,_),m||(b=_)}}}}function P(t){var e=t.circle;e&&(e.P||(b=e.N),D.remove(e),x.push(e),a(e),t.circle=null)}var C=[];function O(){a(this),this.edge=this.site=this.circle=null}function S(t){var e=C.pop()||new O;return e.site=t,e}function I(t){P(t),N.remove(t),C.push(t),a(t)}function L(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,s=t.N,a=[t];I(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<F&&Math.abs(i-l.circle.cy)<F;)o=l.P,a.unshift(l),I(l),l=o;a.unshift(l),P(l);for(var u=s;u.circle&&Math.abs(n-u.circle.x)<F&&Math.abs(i-u.circle.cy)<F;)s=u.N,a.push(u),I(u),u=s;a.push(u),P(u);var c,h=a.length;for(c=1;c<h;++c)u=a[c],l=a[c-1],f(u.edge,l.site,u.site,r);l=a[0],(u=a[h-1]).edge=p(l.site,u.site,null,r),E(l),E(u)}function M(t){for(var e,n,i,r,o=t[0],s=t[1],a=N._;a;)if((i=T(a,s)-o)>F)a=a.L;else{if(!((r=o-R(a,s))>F)){i>-F?(e=a.P,n=a):r>-F?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){A[t.index]={site:t,halfedges:[]}}(t);var l=S(t);if(N.insert(e,l),e||n){if(e===n)return P(e),n=S(e.site),N.insert(l,n),l.edge=n.edge=p(e.site,l.site),E(e),void E(n);if(n){P(e),P(n);var u=e.site,c=u[0],h=u[1],d=t[0]-c,g=t[1]-h,y=n.site,_=y[0]-c,m=y[1]-h,v=2*(d*m-g*_),b=d*d+g*g,x=_*_+m*m,w=[(m*b-g*x)/v+c,(d*x-_*b)/v+h];f(n.edge,u,y,w),l.edge=p(u,t,null,w),n.edge=p(t,y,null,w),E(e),E(n)}else l.edge=p(e.site,l.site)}}function T(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],l=n[1],u=l-e;if(!u)return a;var c=a-i,h=1/o-1/u,p=c/u;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*u)-l+u/2+r-o/2)))/h+i:(i+a)/2}function R(t,e){var n=t.N;if(n)return T(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var N,A,D,j,F=1e-6,k=1e-12;function G(t,e){return e[1]-t[1]||e[0]-t[0]}function V(t,e){var n,i,r,o=t.sort(G).pop();for(j=[],A=new Array(t.length),N=new h,D=new h;;)if(r=b,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(M(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;L(r.arc)}if(function(){for(var t,e,n,i,r=0,o=A.length;r<o;++r)if((t=A[r])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i);for(n=0;n<i;++n)s[n]=n,a[n]=_(t,j[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<i;++n)a[n]=e[s[n]];for(n=0;n<i;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,i){for(var r,o=j.length;o--;)y(r=j[o],t,e,n,i)&&g(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>F||Math.abs(r[0][1]-r[1][1])>F)||delete j[o]}(s,a,l,u),function(t,e,n,i){var r,o,s,a,l,u,c,h,p,f,g,y,_=A.length,b=!0;for(r=0;r<_;++r)if(o=A[r]){for(s=o.site,a=(l=o.halfedges).length;a--;)j[l[a]]||l.splice(a,1);for(a=0,u=l.length;a<u;)g=(f=v(o,j[l[a]]))[0],y=f[1],h=(c=m(o,j[l[++a%u]]))[0],p=c[1],(Math.abs(g-h)>F||Math.abs(y-p)>F)&&(l.splice(a,0,j.push(d(s,f,Math.abs(g-t)<F&&i-y>F?[t,Math.abs(h-t)<F?p:i]:Math.abs(y-i)<F&&n-g>F?[Math.abs(p-i)<F?h:n,i]:Math.abs(g-n)<F&&y-e>F?[n,Math.abs(h-n)<F?p:e]:Math.abs(y-e)<F&&g-t>F?[Math.abs(p-e)<F?h:t,e]:null))-1),++u);u&&(b=!1)}if(b){var x,w,E,P=1/0;for(r=0,b=null;r<_;++r)(o=A[r])&&(E=(x=(s=o.site)[0]-t)*x+(w=s[1]-e)*w)<P&&(P=E,b=o);if(b){var C=[t,e],O=[t,i],S=[n,i],I=[n,e];b.halfedges.push(j.push(d(s=b.site,C,O))-1,j.push(d(s,O,S))-1,j.push(d(s,S,I))-1,j.push(d(s,I,C))-1)}}for(r=0;r<_;++r)(o=A[r])&&(o.halfedges.length||delete A[r])}(s,a,l,u)}this.edges=j,this.cells=A,N=D=j=A=null}function Z(){var t=r,e=o,n=null;function s(i){return new V(i.map((function(n,r){var o=[Math.round(t(n,r,i)/F)*F,Math.round(e(n,r,i)/F)*F];return o.index=r,o.data=n,o})),n)}return s.polygons=function(t){return s(t).polygons()},s.links=function(t){return s(t).links()},s.triangles=function(t){return s(t).triangles()},s.x=function(e){return arguments.length?(t="function"==typeof e?e:i(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),s):e},s.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],s):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},s.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],s):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},s}V.prototype={constructor:V,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return m(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(o=(r=n.halfedges).length)for(var r,o,s,a,l,u,c=n.site,h=-1,p=e[r[o-1]],d=p.left===c?p.right:p.left;++h<o;)s=d,d=(p=e[r[h]]).left===c?p.right:p.left,s&&d&&i<s.index&&i<d.index&&(l=s,u=d,((a=c)[0]-u[0])*(l[1]-a[1])-(a[0]-l[0])*(u[1]-a[1])<0)&&t.push([c.data,s.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null;var l=t-r.site[0],u=e-r.site[1],c=l*l+u*u;do{r=o.cells[i=s],s=null,r.halfedges.forEach((function(n){var i=o.edges[n],a=i.left;if(a!==r.site&&a||(a=i.right)){var l=t-a[0],u=e-a[1],h=l*l+u*u;h<c&&(c=h,s=a.index)}}))}while(null!==s);return o._found=i,null==n||c<=n*n?r.site:null}}},10251:(t,e,n)=>{var i=n(82215),r=n(82584),o=n(20609),s=n(98420),a=n(2847),l=n(18923),u=Date.prototype.getTime;function c(t){return null==t}function h(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}t.exports=function t(e,n,p){var d=p||{};return!!(d.strict?o(e,n):e===n)||(!e||!n||"object"!=typeof e&&"object"!=typeof n?d.strict?o(e,n):e==n:function(e,n,o){var p,d;if(typeof e!=typeof n)return!1;if(c(e)||c(n))return!1;if(e.prototype!==n.prototype)return!1;if(r(e)!==r(n))return!1;var f=s(e),g=s(n);if(f!==g)return!1;if(f||g)return e.source===n.source&&a(e)===a(n);if(l(e)&&l(n))return u.call(e)===u.call(n);var y=h(e),_=h(n);if(y!==_)return!1;if(y||_){if(e.length!==n.length)return!1;for(p=0;p<e.length;p++)if(e[p]!==n[p])return!1;return!0}if(typeof e!=typeof n)return!1;try{var m=i(e),v=i(n)}catch(t){return!1}if(m.length!==v.length)return!1;for(m.sort(),v.sort(),p=m.length-1;p>=0;p--)if(m[p]!=v[p])return!1;for(p=m.length-1;p>=0;p--)if(!t(e[d=m[p]],n[d],o))return!1;return!0}(e,n,d))}},4289:(t,e,n)=>{"use strict";var i=n(82215),r="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,l=n(31044)(),u=a&&l,c=function(t,e,n,i){var r;(!(e in t)||"function"==typeof(r=i)&&"[object Function]"===o.call(r)&&i())&&(u?a(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},h=function(t,e){var n=arguments.length>2?arguments[2]:{},o=i(e);r&&(o=s.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)c(t,o[a],e[o[a]],n[o[a]])};h.supportsDescriptors=!!u,t.exports=h},68317:t=>{function e(t,e,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,i)}e.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(r,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(1!==this._visited[i]){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[i]&&this._addToCluster(i,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i];t.indexOf(r)<0&&t.push(r)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)},63781:t=>{function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,l=0;l<c;l++)s[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)s[l]+=this.dataset[u][l];a++}}if(a>0){for(l=0;l<c;l++)s[l]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,i=0;i<n;i++)(t=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var i,r=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(i=n(t,e[a]))<r&&(r=i,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;){var r=t[i]-e[i];n+=r*r}return Math.sqrt(n)},t.exports&&(t.exports=e)},73763:(t,e,n)=>{if(t.exports)var i=n(57985);function r(t,e,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,i)}r.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var l=new i(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(a,l))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var i=this._orderedList[e],r=this._reachability[i];t.push([i,r])}return t},r.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},r.prototype._updateQueue=function(t,e,n){var i=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===i._processed[e]){var r=i.distance(i.dataset[t],i.dataset[e]),o=Math.max(i._coreDistance,r);void 0===i._reachability[e]?(i._reachability[e]=o,n.insert(e,o)):o<i._reachability[e]&&(i._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},r.prototype._expandCluster=function(t,e){for(var n=e.getElements(),i=0,r=n.length;i<r;i++){var o=n[i];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},r.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[t],this.dataset[i])<e&&n.push(i);return n},r.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=r)},57985:t=>{function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i];"desc"===this._sorting?e>r&&(n=i):e<r&&(n=i)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var i=0;i<t.length;i++)this.insert(t[i],e[i])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)},52606:(t,e,n)=>{t.exports&&(t.exports={DBSCAN:n(68317),KMEANS:n(63781),OPTICS:n(73763),PriorityQueue:n(57985)})},9187:t=>{"use strict";function e(t,e,i){i=i||2;var o,s,a,l,h,p,f,g=e&&e.length,y=g?e[0]*i:t.length,_=n(t,0,y,i,!0),m=[];if(!_||_.next===_.prev)return m;if(g&&(_=function(t,e,i,r){var o,s,a,l=[];for(o=0,s=e.length;o<s;o++)(a=n(t,e[o]*r,o<s-1?e[o+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),l.push(d(a));for(l.sort(u),o=0;o<l.length;o++)i=c(l[o],i);return i}(t,e,_,i)),t.length>80*i){o=a=t[0],s=l=t[1];for(var v=i;v<y;v+=i)(h=t[v])<o&&(o=h),(p=t[v+1])<s&&(s=p),h>a&&(a=h),p>l&&(l=p);f=0!==(f=Math.max(a-o,l-s))?32767/f:0}return r(_,m,i,o,s,f,0),m}function n(t,e,n,i,r){var o,s;if(r===O(t,e,n,i)>0)for(o=e;o<n;o+=i)s=E(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=E(o,t[o],t[o+1],s);return s&&_(s,s.next)&&(P(s),s=s.next),s}function i(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!_(i,i.next)&&0!==y(i.prev,i,i.next))i=i.next;else{if(P(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function r(t,e,n,u,c,h,d){if(t){!d&&h&&function(t,e,n,i){var r=t;do{0===r.z&&(r.z=p(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,l,u=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<u&&(a++,i=i.nextZ);e++);for(l=u;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(s>1)}(r)}(t,u,c,h);for(var f,g,y=t;t.prev!==t.next;)if(f=t.prev,g=t.next,h?s(t,u,c,h):o(t))e.push(f.i/n|0),e.push(t.i/n|0),e.push(g.i/n|0),P(t),t=g.next,y=g.next;else if((t=g)===y){d?1===d?r(t=a(i(t),e,n),e,n,u,c,h,2):2===d&&l(t,e,n,u,c,h):r(i(t),e,n,u,c,h,1);break}}}function o(t){var e=t.prev,n=t,i=t.next;if(y(e,n,i)>=0)return!1;for(var r=e.x,o=n.x,s=i.x,a=e.y,l=n.y,u=i.y,c=r<o?r<s?r:s:o<s?o:s,h=a<l?a<u?a:u:l<u?l:u,p=r>o?r>s?r:s:o>s?o:s,d=a>l?a>u?a:u:l>u?l:u,g=i.next;g!==e;){if(g.x>=c&&g.x<=p&&g.y>=h&&g.y<=d&&f(r,a,o,l,s,u,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function s(t,e,n,i){var r=t.prev,o=t,s=t.next;if(y(r,o,s)>=0)return!1;for(var a=r.x,l=o.x,u=s.x,c=r.y,h=o.y,d=s.y,g=a<l?a<u?a:u:l<u?l:u,_=c<h?c<d?c:d:h<d?h:d,m=a>l?a>u?a:u:l>u?l:u,v=c>h?c>d?c:d:h>d?h:d,b=p(g,_,e,n,i),x=p(m,v,e,n,i),w=t.prevZ,E=t.nextZ;w&&w.z>=b&&E&&E.z<=x;){if(w.x>=g&&w.x<=m&&w.y>=_&&w.y<=v&&w!==r&&w!==s&&f(a,c,l,h,u,d,w.x,w.y)&&y(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,E.x>=g&&E.x<=m&&E.y>=_&&E.y<=v&&E!==r&&E!==s&&f(a,c,l,h,u,d,E.x,E.y)&&y(E.prev,E,E.next)>=0)return!1;E=E.nextZ}for(;w&&w.z>=b;){if(w.x>=g&&w.x<=m&&w.y>=_&&w.y<=v&&w!==r&&w!==s&&f(a,c,l,h,u,d,w.x,w.y)&&y(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=x;){if(E.x>=g&&E.x<=m&&E.y>=_&&E.y<=v&&E!==r&&E!==s&&f(a,c,l,h,u,d,E.x,E.y)&&y(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function a(t,e,n){var r=t;do{var o=r.prev,s=r.next.next;!_(o,s)&&m(o,r,r.next,s)&&x(o,s)&&x(s,o)&&(e.push(o.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),P(r),P(r.next),r=t=s),r=r.next}while(r!==t);return i(r)}function l(t,e,n,o,s,a){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&g(l,u)){var c=w(l,u);return l=i(l,l.next),c=i(c,c.next),r(l,e,n,o,s,a,0),void r(c,e,n,o,s,a,0)}u=u.next}l=l.next}while(l!==t)}function u(t,e){return t.x-e.x}function c(t,e){var n=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s&&(s=a,n=i.x<i.next.x?i:i.next,a===r))return n}i=i.next}while(i!==e);if(!n)return null;var l,u=n,c=n.x,p=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&f(o<p?r:s,o,c,p,o<p?s:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),x(i,t)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&h(n,i)))&&(n=i,d=l)),i=i.next}while(i!==u);return n}(t,e);if(!n)return e;var r=w(n,t);return i(r,r.next),i(n,n.next)}function h(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function p(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function f(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&m(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||_(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function m(t,e,n,i){var r=b(y(t,e,n)),o=b(y(t,e,i)),s=b(y(n,i,t)),a=b(y(n,i,e));return r!==o&&s!==a||!(0!==r||!v(t,n,e))||!(0!==o||!v(t,i,e))||!(0!==s||!v(n,t,i))||!(0!==a||!v(n,e,i))}function v(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function b(t){return t>0?1:t<0?-1:0}function x(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function w(t,e){var n=new C(t.i,t.x,t.y),i=new C(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function E(t,e,n,i){var r=new C(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function P(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(O(t,0,o,n));if(r)for(var a=0,l=e.length;a<l;a++){var u=e[a]*n,c=a<l-1?e[a+1]*n:t.length;s-=Math.abs(O(t,u,c,n))}var h=0;for(a=0;a<i.length;a+=3){var p=i[a]*n,d=i[a+1]*n,f=i[a+2]*n;h+=Math.abs((t[p]-t[f])*(t[d+1]-t[p+1])-(t[p]-t[d])*(t[f+1]-t[p+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},17648:t=>{"use strict";var e="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,i=Object.prototype.toString,r="[object Function]";t.exports=function(t){var o=this;if("function"!=typeof o||i.call(o)!==r)throw new TypeError(e+o);for(var s,a=n.call(arguments,1),l=function(){if(this instanceof s){var e=o.apply(this,a.concat(n.call(arguments)));return Object(e)===e?e:this}return o.apply(t,a.concat(n.call(arguments)))},u=Math.max(0,o.length-a.length),c=[],h=0;h<u;h++)c.push("$"+h);if(s=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l),o.prototype){var p=function(){};p.prototype=o.prototype,s.prototype=new p,p.prototype=null}return s}},58612:(t,e,n)=>{"use strict";var i=n(17648);t.exports=Function.prototype.bind||i},25972:t=>{"use strict";var e=function(){return"string"==typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(t){n=null}e.functionsHaveConfigurableNames=function(){if(!e()||!n)return!1;var t=n((function(){}),"name");return!!t&&!!t.configurable};var i=Function.prototype.bind;e.boundFunctionsHaveNames=function(){return e()&&"function"==typeof i&&""!==function(){}.bind().name},t.exports=e},29657:(t,e,n)=>{var i=n(10251),r=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:a};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function s(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function a(t,e){return i(t,e,{strict:!0})}r.prototype.compare=function(t,e){if(t.type!==e.type||!s(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=o(t),r=o(e);return i.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),r)}}return!1},r.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},r.prototype.compareLine=function(t,e,n,i){if(!s(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var a=this.compareCoord(r[n],o[n]);return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},r.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},r.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},r.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every((function(t){return this.some((function(e){return r.compareLine(t,e,1,!0)}))}),i)}return!1},r.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},r.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},r.prototype.removePseudo=function(t){return t},t.exports=r},51787:(t,e,n)=>{var i=n(59197),r=n(84102),o=n(31540),s=n(9705).default,a=o.featureEach,l=(o.coordEach,r.polygon,r.featureCollection);function u(t){var e=new i(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),i.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})):a(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})),i.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),i.prototype.remove.call(this,t,e)},e.clear=function(){return i.prototype.clear.call(this)},e.search=function(t){var e=i.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return i.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=i.prototype.all.call(this);return l(t)},e.toJSON=function(){return i.prototype.toJSON.call(this)},e.fromJSON=function(t){return i.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=s(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=s(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=u,t.exports.default=u},40210:(t,e,n)=>{"use strict";var i,r=SyntaxError,o=Function,s=TypeError,a=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(t){l=null}var u=function(){throw new s},c=l?function(){try{return u}catch(t){try{return l(arguments,"callee").get}catch(t){return u}}}():u,h=n(41405)(),p=Object.getPrototypeOf||function(t){return t.__proto__},d={},f="undefined"==typeof Uint8Array?i:p(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":h?p([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?p(p([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?p((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?p((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?p(""[Symbol.iterator]()):i,"%Symbol%":h?Symbol:i,"%SyntaxError%":r,"%ThrowTypeError%":c,"%TypedArray%":f,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet},y=function t(e){var n;if("%AsyncFunction%"===e)n=a("async function () {}");else if("%GeneratorFunction%"===e)n=a("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=a("async function* () {}");else if("%AsyncGenerator%"===e){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&(n=p(r.prototype))}return g[e]=n,n},_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m=n(58612),v=n(17642),b=m.call(Function.call,Array.prototype.concat),x=m.call(Function.apply,Array.prototype.splice),w=m.call(Function.call,String.prototype.replace),E=m.call(Function.call,String.prototype.slice),P=m.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,S=function(t){var e=E(t,0,1),n=E(t,-1);if("%"===e&&"%"!==n)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new r("invalid intrinsic syntax, expected opening `%`");var i=[];return w(t,C,(function(t,e,n,r){i[i.length]=n?w(r,O,"$1"):e||t})),i},I=function(t,e){var n,i=t;if(v(_,i)&&(i="%"+(n=_[i])[0]+"%"),v(g,i)){var o=g[i];if(o===d&&(o=y(i)),void 0===o&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:o}}throw new r("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');if(null===P(/^%?[^%]*%?$/g,t))throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=S(t),i=n.length>0?n[0]:"",o=I("%"+i+"%",e),a=o.name,u=o.value,c=!1,h=o.alias;h&&(i=h[0],x(n,b([0,1],h)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],y=E(f,0,1),_=E(f,-1);if(('"'===y||"'"===y||"`"===y||'"'===_||"'"===_||"`"===_)&&y!==_)throw new r("property names with quotes must have matching quotes");if("constructor"!==f&&d||(c=!0),v(g,a="%"+(i+="."+f)+"%"))u=g[a];else if(null!=u){if(!(f in u)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&p+1>=n.length){var m=l(u,f);u=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:u[f]}else d=v(u,f),u=u[f];d&&!c&&(g[a]=u)}}return u}},31044:(t,e,n)=>{"use strict";var i=n(40210)("%Object.defineProperty%",!0),r=function(){if(i)try{return i({},"a",{value:1}),!0}catch(t){return!1}return!1};r.hasArrayLengthDefineBug=function(){if(!r())return null;try{return 1!==i([],"length",{value:1}).length}catch(t){return!0}},t.exports=r},41405:(t,e,n)=>{"use strict";var i="undefined"!=typeof Symbol&&Symbol,r=n(55419);t.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&r()}},55419:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},96410:(t,e,n)=>{"use strict";var i=n(55419);t.exports=function(){return i()&&!!Symbol.toStringTag}},17642:(t,e,n)=>{"use strict";var i=n(58612);t.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},82584:(t,e,n)=>{"use strict";var i=n(96410)(),r=n(21924)("Object.prototype.toString"),o=function(t){return!(i&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===r(t)},s=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==r(t)&&"[object Function]"===r(t.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,t.exports=a?o:s},18923:(t,e,n)=>{"use strict";var i=Date.prototype.getDay,r=Object.prototype.toString,o=n(96410)();t.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return i.call(t),!0}catch(t){return!1}}(t):"[object Date]"===r.call(t))}},98420:(t,e,n)=>{"use strict";var i,r,o,s,a=n(21924),l=n(96410)();if(l){i=a("Object.prototype.hasOwnProperty"),r=a("RegExp.prototype.exec"),o={};var u=function(){throw o};s={toString:u,valueOf:u},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=u)}var c=a("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;t.exports=l?function(t){if(!t||"object"!=typeof t)return!1;var e=h(t,"lastIndex");if(!e||!i(e,"value"))return!1;try{r(t,s)}catch(t){return t===o}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===c(t)}},27418:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function r(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var s,a,l=r(t),u=1;u<arguments.length;u++){for(var c in s=Object(arguments[u]))n.call(s,c)&&(l[c]=s[c]);if(e){a=e(s);for(var h=0;h<a.length;h++)i.call(s,a[h])&&(l[a[h]]=s[a[h]])}}return l}},24244:t=>{"use strict";var e=function(t){return t!=t};t.exports=function(t,n){return 0===t&&0===n?1/t==1/n:t===n||!(!e(t)||!e(n))}},20609:(t,e,n)=>{"use strict";var i=n(4289),r=n(55559),o=n(24244),s=n(75624),a=n(52281),l=r(s(),Object);i(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},75624:(t,e,n)=>{"use strict";var i=n(24244);t.exports=function(){return"function"==typeof Object.is?Object.is:i}},52281:(t,e,n)=>{"use strict";var i=n(75624),r=n(4289);t.exports=function(){var t=i();return r(Object,{is:t},{is:function(){return Object.is!==t}}),t}},18987:(t,e,n)=>{"use strict";var i;if(!Object.keys){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n(21414),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),u=a.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();i=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===o.call(t),i=s(t),a=e&&"[object String]"===o.call(t),p=[];if(!e&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var f=u&&n;if(a&&t.length>0&&!r.call(t,0))for(var g=0;g<t.length;++g)p.push(String(g));if(i&&t.length>0)for(var y=0;y<t.length;++y)p.push(String(y));else for(var _ in t)f&&"prototype"===_||!r.call(t,_)||p.push(String(_));if(l)for(var m=function(t){if("undefined"==typeof window||!d)return h(t);try{return h(t)}catch(t){return!1}}(t),v=0;v<c.length;++v)m&&"constructor"===c[v]||!r.call(t,c[v])||p.push(c[v]);return p}}t.exports=i},82215:(t,e,n)=>{"use strict";var i=Array.prototype.slice,r=n(21414),o=Object.keys,s=o?function(t){return o(t)}:n(18987),a=Object.keys;s.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return r(t)?a(i.call(t)):a(t)})}else Object.keys=s;return Object.keys||s},t.exports=s},21414:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),i="[object Arguments]"===n;return i||(i="[object Array]"!==n&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),i}},11895:t=>{t.exports=function(t,e,n,i){var r=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var a=(i-n)/2,l=0,u=a-1;l<a;u=l++){var c=e[n+2*l+0],h=e[n+2*l+1],p=e[n+2*u+0],d=e[n+2*u+1];h>o!=d>o&&r<(p-c)*(o-h)/(d-h)+c&&(s=!s)}return s}},26960:(t,e,n)=>{var i=n(11895),r=n(88139);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?r(t,e,n,o):i(t,e,n,o)},t.exports.nested=r,t.exports.flat=i},88139:t=>{t.exports=function(t,e,n,i){var r=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var a=i-n,l=0,u=a-1;l<a;u=l++){var c=e[l+n][0],h=e[l+n][1],p=e[u+n][0],d=e[u+n][1];h>o!=d>o&&r<(p-c)*(o-h)/(d-h)+c&&(s=!s)}return s}},24629:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>W});var i=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function r(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){for(var r=new i(null,null),o=r,s=r;;){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}s.left=e,s=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(l=e.right,e.right=l.left,l.left=e,null===(e=l).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,s.left=e.right,e.left=r.right,e.right=r.left,e}function s(t,e,n,r){var s=new i(t,e);if(null===n)return s.left=s.right=null,s;var a=r(t,(n=o(t,n,r)).key);return a<0?(s.left=n.left,s.right=n,n.left=null):a>=0&&(s.right=n.right,s.left=n,n.right=null),s}function a(t,e,n){var i=null,r=null;if(e){var s=n((e=o(t,e,n)).key,t);0===s?(i=e.left,r=e.right):s<0?(r=e.right,e.right=null,i=e):(i=e.left,e.left=null,r=e)}return{left:i,right:r}}function l(t,e,n,i,r){if(t){i(e+(n?" ":" ")+r(t)+"\n");var o=e+(n?"    ":"   ");t.left&&l(t.left,o,!1,i,r),t.right&&l(t.right,o,!0,i,r)}}var u=function(){function t(t){void 0===t&&(t=r),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=s(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new i(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,s=o(t,this._root,r),a=r(t,s.key);return 0===a?this._root=s:(a<0?(n.left=s.left,n.right=s,s.left=null):a>0&&(n.right=s.right,n.left=s,s.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var i;return null===e?null:0===n(t,(e=o(t,e,n)).key)?(null===e.left?i=e.right:(i=o(t,e.left,n)).right=e.right,this._size--,i):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return e;e=i<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,i=[],r=!1;!r;)null!==n?(i.push(n),n=n.left):0!==i.length?(n=i.pop(),t.call(e,n),n=n.right):r=!0;return this},t.prototype.range=function(t,e,n,i){for(var r=[],o=this._comparator,s=this._root;0!==r.length||s;)if(s)r.push(s),s=s.left;else{if(o((s=r.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(i,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,i=0,r=[];!n;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,o=new i(null,null),s=o;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=s=s.next=n.pop()).right:r=!0;return s.next=null,o.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,o=this._comparator;if(n&&p(t,e,0,r-1,o),null===this._root)this._root=c(t,e,0,r),this._size=r;else{var s=function(t,e,n){for(var r=new i(null,null),o=r,s=t,a=e;null!==s&&null!==a;)n(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),r.next}(this.toList(),function(t,e){for(var n=new i(null,null),r=n,o=0;o<t.length;o++)r=r.next=new i(t[o],e[o]);return r.next=null,n.next}(t,e),o);r=this._size+r,this._root=h({head:s},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return l(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var i=this._comparator,r=a(t,this._root,i),l=r.left,u=r.right;i(t,e)<0?u=s(e,n,u,i):l=s(e,n,l,i),this._root=function(t,e,n){return null===e?t:(null===t||((e=o(t.key,e,n)).left=t),e)}(l,u,i)},t.prototype.split=function(t){return a(t,this._root,this._comparator)},t.prototype[Symbol.iterator]=function(){var t;return function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:t=this.minNode(),e.label=1;case 1:return t?[4,t]:[3,3];case 2:return e.sent(),t=this.next(t),[3,1];case 3:return[2]}}))},t}();function c(t,e,n,r){var o=r-n;if(o>0){var s=n+Math.floor(o/2),a=t[s],l=e[s],u=new i(a,l);return u.left=c(t,e,n,s),u.right=c(t,e,s+1,r),u}return null}function h(t,e,n){var i=n-e;if(i>0){var r=e+Math.floor(i/2),o=h(t,e,r),s=t.head;return s.left=o,t.head=t.head.next,s.right=h(t,r+1,n),s}return null}function p(t,e,n,i,r){if(!(n>=i)){for(var o=t[n+i>>1],s=n-1,a=i+1;;){do{s++}while(r(t[s],o)<0);do{a--}while(r(t[a],o)>0);if(s>=a)break;var l=t[s];t[s]=t[a],t[a]=l,l=e[s],e[s]=e[a],e[a]=l}p(t,e,n,a,r),p(t,e,a+1,i,r)}}const d=u;function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}var _=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},m=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:i,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},v=Number.EPSILON;void 0===v&&(v=Math.pow(2,-52));var b=v*v,x=function(t,e){if(-v<t&&t<v&&-v<e&&e<v)return 0;var n=t-e;return n*n<b*t*e?0:t<e?-1:1},w=function(){function t(){f(this,t),this.reset()}return y(t,[{key:"reset",value:function(){this.xRounder=new E,this.yRounder=new E}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),E=function(){function t(){f(this,t),this.tree=new d,this.round(0)}return y(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===x(e.key,n.key))return this.tree.remove(t),n.key;var i=this.tree.next(e);return null!==i&&0===x(e.key,i.key)?(this.tree.remove(t),i.key):t}}]),t}(),P=new w,C=function(t,e){return t.x*e.y-t.y*e.x},O=function(t,e){return t.x*e.x+t.y*e.y},S=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y},o=C(i,r);return x(o,0)},I=function(t){return Math.sqrt(O(t,t))},L=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y};return O(r,i)/I(r)/I(i)},M=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},T=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},R=function(){function t(e,n){f(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return y(t,null,[{key:"compare",value:function(e,n){var i=t.comparePoints(e.point,n.point);return 0!==i?i:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:A.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),y(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,i=e.length;n<i;n++){var r=e[n];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var i=e+1;i<t;i++){var r=this.point.events[i];void 0===r.consumedBy&&n.otherSE.point.events===r.otherSE.point.events&&n.segment.consume(r.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var i=this.point.events[e];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,i=function(i){var r,o,s,a,l,u=i.otherSE;n.set(i,{sine:(r=e.point,o=t.point,s=u.point,a={x:o.x-r.x,y:o.y-r.y},l={x:s.x-r.x,y:s.y-r.y},C(l,a)/I(l)/I(a)),cosine:L(e.point,t.point,u.point)})};return function(t,e){n.has(t)||i(t),n.has(e)||i(e);var r=n.get(t),o=r.sine,s=r.cosine,a=n.get(e),l=a.sine,u=a.cosine;return o>=0&&l>=0?s<u?1:s>u?-1:0:o<0&&l<0?s<u?-1:s>u?1:0:l<o?-1:l>o?1:0}}}]),t}(),N=0,A=function(){function t(e,n,i,r){f(this,t),this.id=++N,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=i,this.windings=r}return y(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,i=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(r<i)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(n<i){if(a<s&&a<l)return 1;if(a>s&&a>l)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>i){if(s<a&&s<u)return-1;if(s>a&&s>u)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(r<o){var f=e.comparePoint(t.rightSE.point);if(0!==f)return f}if(r>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(r!==o){var y=l-s,_=r-n,m=u-a,v=o-i;if(y>_&&m<v)return 1;if(y<_&&m>v)return-1}return r>o?1:r<o||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}}]),y(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var r=(t.y-e.y)/i.y,o=e.x+r*i.x;if(t.x===o)return 0;var s=(t.x-e.x)/i.x,a=e.y+s*i.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),i=m(e,n);if(null===i)return null;var r=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,l=_(e,s)&&0===this.comparePoint(s),u=_(n,r)&&0===t.comparePoint(r),c=_(e,a)&&0===this.comparePoint(a),h=_(n,o)&&0===t.comparePoint(o);if(u&&l)return h&&!c?o:!h&&c?a:null;if(u)return c&&r.x===a.x&&r.y===a.y?null:r;if(l)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&c)return null;if(h)return o;if(c)return a;var p=function(t,e,n,i){if(0===e.x)return T(n,i,t.x);if(0===i.x)return T(t,e,n.x);if(0===e.y)return M(n,i,t.y);if(0===i.y)return M(t,e,n.y);var r=C(e,i);if(0==r)return null;var o={x:n.x-t.x,y:n.y-t.y},s=C(o,e)/r,a=C(o,i)/r;return{x:(t.x+a*e.x+(n.x+s*i.x))/2,y:(t.y+a*e.y+(n.y+s*i.y))/2}}(r,this.vector(),s,t.vector());return null===p?null:_(i,p)?P.round(p.x,p.y):null}},{key:"split",value:function(e){var n=[],i=void 0!==e.events,r=new R(e,!0),o=new R(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(r);var a=new t(r,s,this.rings.slice(),this.windings.slice());return R.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),R.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,i=e;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var r=t.compare(n,i);if(0!==r){if(r>0){var o=n;n=i,i=o}if(n.prev===i){var s=n;n=i,i=s}for(var a=0,l=i.rings.length;a<l;a++){var u=i.rings[a],c=i.windings[a],h=n.rings.indexOf(u);-1===h?(n.rings.push(u),n.windings.push(c)):n.windings[h]+=c}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var s=this.rings[r],a=this.windings[r],l=e.indexOf(s);-1===l?(e.push(s),n.push(a)):n[l]+=a}for(var u=[],c=[],h=0,p=e.length;h<p;h++)if(0!==n[h]){var d=e[h],f=d.poly;if(-1===c.indexOf(f))if(d.isExterior)u.push(f);else{-1===c.indexOf(f)&&c.push(f);var g=u.indexOf(d.poly);-1!==g&&u.splice(g,1)}}for(var y=0,_=u.length;y<_;y++){var m=u[y].multiPoly;-1===i.indexOf(m)&&i.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(U.type){case"union":var n=0===t.length,i=0===e.length;this._isInResult=n!==i;break;case"intersection":var r,o;t.length<e.length?(r=t.length,o=e.length):(r=e.length,o=t.length),this._isInResult=o===U.numMultiPolys&&r<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(U.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,i){var r,o,s,a=R.comparePoints(e,n);if(a<0)r=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));r=n,o=e,s=-1}return new t(new R(r,!0),new R(o,!1),[i],[s])}}]),t}(),D=function(){function t(e,n,i){if(f(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=i,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var r=P.round(e[0][0],e[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};for(var o=r,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=P.round(e[s][0],e[s][1]);l.x===o.x&&l.y===o.y||(this.segments.push(A.fromRing(o,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),o=l)}r.x===o.x&&r.y===o.y||this.segments.push(A.fromRing(o,r,this))}return y(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),t}(),j=function(){function t(e,n){if(f(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new D(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,r=e.length;i<r;i++){var o=new D(e[i],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return y(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var i=this.interiorRings[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),t}(),F=function(){function t(e,n){if(f(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,r=e.length;i<r;i++){var o=new j(e[i],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return y(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var i=this.polys[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),t}(),k=function(){function t(e){f(this,t),this.events=e;for(var n=0,i=e.length;n<i;n++)e[n].segment.ringOut=this;this.poly=null}return y(t,null,[{key:"factory",value:function(e){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,l=o.rightSE,u=[a],c=a.point,h=[];s=a,a=l,u.push(a),a.point!==c;)for(;;){var p=a.getAvailableLinkedEvents();if(0===p.length){var d=u[0].point,f=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(f.x,", ").concat(f.y,"]."))}if(1===p.length){l=p[0].otherSE;break}for(var g=null,y=0,_=h.length;y<_;y++)if(h[y].point===a.point){g=y;break}if(null===g){h.push({index:u.length,point:a.point});var m=a.getLeftmostComparator(s);l=p.sort(m)[0].otherSE;break}var v=h.splice(g)[0],b=u.splice(v.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(u))}}return n}}]),y(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,i=this.events.length-1;n<i;n++){var r=this.events[n].point,o=this.events[n+1].point;0!==S(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var s=e[0],a=e[1];0===S(s,t,a)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],p=u;p!=c;p+=l)h.push([e[p].x,e[p].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var i=this.events[e];R.compare(t,i)>0&&(t=i)}for(var r=t.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;if(o.ringOut!==r.ringOut)return o.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=o.prevInResult(),o=r?r.prevInResult():null}}}]),t}(),G=function(){function t(e){f(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return y(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var i=this.interiorRings[e].getGeom();null!==i&&t.push(i)}return t}}]),t}(),V=function(){function t(e){f(this,t),this.rings=e,this.polys=this._composePolys(e)}return y(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var i=this.polys[e].getGeom();null!==i&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];if(!r.poly)if(r.isExteriorRing())e.push(new G(r));else{var o=r.enclosingRing();o.poly||e.push(new G(o)),o.poly.addInterior(r)}}return e}}]),t}(),Z=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.compare;f(this,t),this.queue=e,this.tree=new d(n),this.segments=[]}return y(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var i=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!i)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var r=i,o=i,s=void 0,a=void 0;void 0===s;)null===(r=this.tree.prev(r))?s=null:void 0===r.key.consumedBy&&(s=r.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var l=null;if(s){var u=s.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(l=u),!s.isAnEndpoint(u)))for(var c=this._splitSafely(s,u),h=0,p=c.length;h<p;h++)n.push(c[h])}var d=null;if(a){var f=a.getIntersection(e);if(null!==f&&(e.isAnEndpoint(f)||(d=f),!a.isAnEndpoint(f)))for(var g=this._splitSafely(a,f),y=0,_=g.length;y<_;y++)n.push(g[y])}if(null!==l||null!==d){var m=null;m=null===l?d:null===d||R.comparePoints(l,d)<=0?l:d,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var v=e.split(m),b=0,x=v.length;b<x;b++)n.push(v[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var w=s.getIntersection(a);if(null!==w){if(!s.isAnEndpoint(w))for(var E=this._splitSafely(s,w),P=0,C=E.length;P<C;P++)n.push(E[P]);if(!a.isAnEndpoint(w))for(var O=this._splitSafely(a,w),S=0,I=O.length;S<I;S++)n.push(O[S])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var i=t.split(e);return i.push(n),void 0===t.consumedBy&&this.tree.insert(t),i}}]),t}(),z="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,B="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,U=new(function(){function t(){f(this,t)}return y(t,[{key:"run",value:function(t,e,n){U.type=t,P.reset();for(var i=[new F(e,!0)],r=0,o=n.length;r<o;r++)i.push(new F(n[r],!1));if(U.numMultiPolys=i.length,"difference"===U.type)for(var s=i[0],a=1;a<i.length;)null!==m(i[a].bbox,s.bbox)?a++:i.splice(a,1);if("intersection"===U.type)for(var l=0,u=i.length;l<u;l++)for(var c=i[l],h=l+1,p=i.length;h<p;h++)if(null===m(c.bbox,i[h].bbox))return[];for(var f=new d(R.compare),g=0,y=i.length;g<y;g++)for(var _=i[g].getSweepEvents(),v=0,b=_.length;v<b;v++)if(f.insert(_[v]),f.size>z)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var x=new Z(f),w=f.size,E=f.pop();E;){var C=E.key;if(f.size===w){var O=C.segment;throw new Error("Unable to pop() ".concat(C.isLeft?"left":"right"," SweepEvent ")+"[".concat(C.point.x,", ").concat(C.point.y,"] from segment #").concat(O.id," ")+"[".concat(O.leftSE.point.x,", ").concat(O.leftSE.point.y,"] -> ")+"[".concat(O.rightSE.point.x,", ").concat(O.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(f.size>z)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(x.segments.length>B)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var S=x.process(C),I=0,L=S.length;I<L;I++){var M=S[I];void 0===M.consumedBy&&f.insert(M)}w=f.size,E=f.pop()}P.reset();var T=k.factory(x.segments);return new V(T).getGeom()}}]),t}());const W={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return U.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return U.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return U.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return U.run("difference",t,n)}}},59197:(t,e,n)=>{"use strict";function i(t,e,n,i,o){r(t,e,n||0,i||t.length-1,o||s)}function r(t,e,n,i,s){for(;i>n;){if(i-n>600){var a=i-n+1,l=e-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1);r(t,e,Math.max(n,Math.floor(e-l*c/a+h)),Math.min(i,Math.floor(e+(a-l)*c/a+h)),s)}var p=t[e],d=n,f=i;for(o(t,n,e),s(t[i],p)>0&&o(t,n,i);d<f;){for(o(t,d,f),d++,f--;s(t[d],p)<0;)d++;for(;s(t[f],p)>0;)f--}0===s(t[n],p)?o(t,n,f):o(t,++f,i),f<=e&&(n=f+1),e<=f&&(i=f-1)}}function o(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function s(t,e){return t<e?-1:t>e?1:0}n.r(e),n.d(e,{default:()=>a});class a{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!m(t,e))return n;const i=this.toBBox,r=[];for(;e;){for(let o=0;o<e.children.length;o++){const s=e.children[o],a=e.leaf?i(s):s;m(t,a)&&(e.leaf?n.push(s):_(t,a)?this._all(s,n):r.push(s))}e=r.pop()}return n}collides(t){let e=this.data;if(!m(t,e))return!1;const n=[];for(;e;){for(let i=0;i<e.children.length;i++){const r=e.children[i],o=e.leaf?this.toBBox(r):r;if(m(t,o)){if(e.leaf||_(t,o))return!0;n.push(r)}}e=n.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=v([]),this}remove(t,e){if(!t)return this;let n=this.data;const i=this.toBBox(t),r=[],o=[];let s,a,u;for(;n||r.length;){if(n||(n=r.pop(),a=r[r.length-1],s=o.pop(),u=!0),n.leaf){const i=l(t,n.children,e);if(-1!==i)return n.children.splice(i,1),r.push(n),this._condense(r),this}u||n.leaf||!_(n,i)?a?(s++,n=a.children[s],u=!1):n=null:(r.push(n),o.push(s),s=0,a=n,n=n.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,i){const r=n-e+1;let o,s=this._maxEntries;if(r<=s)return o=v(t.slice(e,n+1)),u(o,this.toBBox),o;i||(i=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/Math.pow(s,i-1))),o=v([]),o.leaf=!1,o.height=i;const a=Math.ceil(r/s),l=a*Math.ceil(Math.sqrt(s));b(t,e,n,l,this.compareMinX);for(let r=e;r<=n;r+=l){const e=Math.min(r+l-1,n);b(t,r,e,a,this.compareMinY);for(let n=r;n<=e;n+=a){const r=Math.min(n+a-1,e);o.children.push(this._build(t,n,r,i-1))}}return u(o,this.toBBox),o}_chooseSubtree(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){let n,i=1/0,s=1/0;for(let a=0;a<e.children.length;a++){const l=e.children[a],u=f(l),c=(r=t,o=l,(Math.max(o.maxX,r.maxX)-Math.min(o.minX,r.minX))*(Math.max(o.maxY,r.maxY)-Math.min(o.minY,r.minY))-u);c<s?(s=c,i=u<i?u:i,n=l):c===s&&u<i&&(i=u,n=l)}e=n||e.children[0]}var r,o;return e}_insert(t,e,n){const i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),h(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)}_split(t,e){const n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);const o=this._chooseSplitIndex(n,r,i),s=v(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,u(n,this.toBBox),u(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}_splitRoot(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,u(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let i,r=1/0,o=1/0;for(let s=e;s<=n-e;s++){const e=c(t,0,s,this.toBBox),a=c(t,s,n,this.toBBox),l=y(e,a),u=f(e)+f(a);l<r?(r=l,i=s,o=u<o?u:o):l===r&&u<o&&(o=u,i=s)}return i||n-e}_chooseSplitAxis(t,e,n){const i=t.leaf?this.compareMinX:p,r=t.leaf?this.compareMinY:d;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)}_allDistMargin(t,e,n,i){t.children.sort(i);const r=this.toBBox,o=c(t,0,e,r),s=c(t,n-e,n,r);let a=g(o)+g(s);for(let i=e;i<n-e;i++){const e=t.children[i];h(o,t.leaf?r(e):e),a+=g(o)}for(let i=n-e-1;i>=e;i--){const e=t.children[i];h(s,t.leaf?r(e):e),a+=g(s)}return a}_adjustParentBBoxes(t,e,n){for(let i=n;i>=0;i--)h(e[i],t)}_condense(t){for(let e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():u(t[n],this.toBBox)}}function l(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function u(t,e){c(t,0,t.children.length,e,t)}function c(t,e,n,i,r){r||(r=v(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<n;o++){const e=t.children[o];h(r,t.leaf?i(e):e)}return r}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function p(t,e){return t.minX-e.minX}function d(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function g(t){return t.maxX-t.minX+(t.maxY-t.minY)}function y(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}function _(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function m(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(t,e,n,r,o){const s=[e,n];for(;s.length;){if((n=s.pop())-(e=s.pop())<=r)continue;const a=e+Math.ceil((n-e)/r/2)*r;i(t,a,e,n,o),s.push(e,a,a,n)}}},53697:(t,e,n)=>{"use strict";var i=n(25972).functionsHaveConfigurableNames(),r=Object,o=TypeError;t.exports=function(){if(null!=this&&this!==r(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},i&&Object.defineProperty&&Object.defineProperty(t.exports,"name",{value:"get flags"})},2847:(t,e,n)=>{"use strict";var i=n(4289),r=n(55559),o=n(53697),s=n(71721),a=n(32753),l=r(s());i(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},71721:(t,e,n)=>{"use strict";var i=n(53697),r=n(4289).supportsDescriptors,o=Object.getOwnPropertyDescriptor;t.exports=function(){if(r&&"gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(n,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return i}},32753:(t,e,n)=>{"use strict";var i=n(4289).supportsDescriptors,r=n(71721),o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,l=Object.getPrototypeOf,u=/a/;t.exports=function(){if(!i||!l)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=r(),e=l(u),n=o(e,"flags");return n&&n.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},88639:function(t,e){!function(t){"use strict";const e=134217729;function n(t,e,n,i,r){let o,s,a,l,u=e[0],c=i[0],h=0,p=0;c>u==c>-u?(o=u,u=e[++h]):(o=c,c=i[++p]);let d=0;if(h<t&&p<n)for(c>u==c>-u?(a=o-((s=u+o)-u),u=e[++h]):(a=o-((s=c+o)-c),c=i[++p]),o=s,0!==a&&(r[d++]=a);h<t&&p<n;)c>u==c>-u?(a=o-((s=o+u)-(l=s-o))+(u-l),u=e[++h]):(a=o-((s=o+c)-(l=s-o))+(c-l),c=i[++p]),o=s,0!==a&&(r[d++]=a);for(;h<t;)a=o-((s=o+u)-(l=s-o))+(u-l),u=e[++h],o=s,0!==a&&(r[d++]=a);for(;p<n;)a=o-((s=o+c)-(l=s-o))+(c-l),c=i[++p],o=s,0!==a&&(r[d++]=a);return 0===o&&0!==d||(r[d++]=o),d}function i(t){return new Float64Array(t)}const r=i(4),o=i(8),s=i(12),a=i(16),l=i(4);t.orient2d=function(t,i,u,c,h,p){const d=(i-p)*(u-h),f=(t-h)*(c-p),g=d-f;if(0===d||0===f||d>0!=f>0)return g;const y=Math.abs(d+f);return Math.abs(g)>=33306690738754716e-32*y?g:-function(t,i,u,c,h,p,d){let f,g,y,_,m,v,b,x,w,E,P,C,O,S,I,L,M,T;const R=t-h,N=u-h,A=i-p,D=c-p;m=(I=(x=R-(b=(v=e*R)-(v-R)))*(E=D-(w=(v=e*D)-(v-D)))-((S=R*D)-b*w-x*w-b*E))-(P=I-(M=(x=A-(b=(v=e*A)-(v-A)))*(E=N-(w=(v=e*N)-(v-N)))-((L=A*N)-b*w-x*w-b*E))),r[0]=I-(P+m)+(m-M),m=(O=S-((C=S+P)-(m=C-S))+(P-m))-(P=O-L),r[1]=O-(P+m)+(m-L),m=(T=C+P)-C,r[2]=C-(T-m)+(P-m),r[3]=T;let j=function(t,e){let n=e[0];for(let t=1;t<4;t++)n+=e[t];return n}(0,r),F=22204460492503146e-32*d;if(j>=F||-j>=F)return j;if(f=t-(R+(m=t-R))+(m-h),y=u-(N+(m=u-N))+(m-h),g=i-(A+(m=i-A))+(m-p),_=c-(D+(m=c-D))+(m-p),0===f&&0===g&&0===y&&0===_)return j;if(F=11093356479670487e-47*d+33306690738754706e-32*Math.abs(j),(j+=R*_+D*f-(A*y+N*g))>=F||-j>=F)return j;m=(I=(x=f-(b=(v=e*f)-(v-f)))*(E=D-(w=(v=e*D)-(v-D)))-((S=f*D)-b*w-x*w-b*E))-(P=I-(M=(x=g-(b=(v=e*g)-(v-g)))*(E=N-(w=(v=e*N)-(v-N)))-((L=g*N)-b*w-x*w-b*E))),l[0]=I-(P+m)+(m-M),m=(O=S-((C=S+P)-(m=C-S))+(P-m))-(P=O-L),l[1]=O-(P+m)+(m-L),m=(T=C+P)-C,l[2]=C-(T-m)+(P-m),l[3]=T;const k=n(4,r,4,l,o);m=(I=(x=R-(b=(v=e*R)-(v-R)))*(E=_-(w=(v=e*_)-(v-_)))-((S=R*_)-b*w-x*w-b*E))-(P=I-(M=(x=A-(b=(v=e*A)-(v-A)))*(E=y-(w=(v=e*y)-(v-y)))-((L=A*y)-b*w-x*w-b*E))),l[0]=I-(P+m)+(m-M),m=(O=S-((C=S+P)-(m=C-S))+(P-m))-(P=O-L),l[1]=O-(P+m)+(m-L),m=(T=C+P)-C,l[2]=C-(T-m)+(P-m),l[3]=T;const G=n(k,o,4,l,s);m=(I=(x=f-(b=(v=e*f)-(v-f)))*(E=_-(w=(v=e*_)-(v-_)))-((S=f*_)-b*w-x*w-b*E))-(P=I-(M=(x=g-(b=(v=e*g)-(v-g)))*(E=y-(w=(v=e*y)-(v-y)))-((L=g*y)-b*w-x*w-b*E))),l[0]=I-(P+m)+(m-M),m=(O=S-((C=S+P)-(m=C-S))+(P-m))-(P=O-L),l[1]=O-(P+m)+(m-L),m=(T=C+P)-C,l[2]=C-(T-m)+(P-m),l[3]=T;const V=n(G,s,4,l,a);return a[V-1]}(t,i,u,c,h,p,y)},t.orient2dfast=function(t,e,n,i,r,o){return(e-o)*(n-r)-(t-r)*(i-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},85697:t=>{"use strict";t.exports={eudist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var s=(t[o]||0)-(e[o]||0);r+=s*s}return n?Math.sqrt(r):r},mandist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++)r+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(r):r},dist:function(t,e,n){var i=Math.abs(t-e);return n?i:i*i}}},97035:(t,e,n)=>{"use strict";var i=n(85697),r=i.eudist,o=i.dist;t.exports={kmrand:function(t,e){for(var n={},i=[],r=e<<2,o=t.length,s=t[0].length>0;i.length<e&&r-- >0;){var a=t[Math.floor(Math.random()*o)],l=s?a.join("_"):""+a;n[l]||(n[l]=!0,i.push(a))}if(i.length<e)throw new Error("Error initializating clusters");return i},kmpp:function(t,e){var n=t[0].length?r:o,i=[],s=t.length,a=t[0].length>0,l=t[Math.floor(Math.random()*s)];for(a&&l.join("_"),i.push(l);i.length<e;){for(var u=[],c=i.length,h=0,p=[],d=0;d<s;d++){for(var f=1/0,g=0;g<c;g++){var y=n(t[d],i[g]);y<=f&&(f=y)}u[d]=f}for(var _=0;_<s;_++)h+=u[_];for(var m=0;m<s;m++)p[m]={i:m,v:t[m],pr:u[m]/h,cs:0};p.sort((function(t,e){return t.pr-e.pr})),p[0].cs=p[0].pr;for(var v=1;v<s;v++)p[v].cs=p[v-1].cs+p[v].pr;for(var b=Math.random(),x=0;x<s-1&&p[x++].cs<b;);i.push(p[x-1].v)}return i}}},21160:(t,e,n)=>{"use strict";var i=n(85697),r=n(97035),o=i.eudist,s=(i.mandist,i.dist,r.kmrand),a=r.kmpp;function l(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}t.exports=function(t,e,n,i){var r=[],u=[],c=[],h=[],p=!1,d=i||1e4,f=t.length,g=t[0].length,y=g>0,_=[];if(n)r="kmrand"==n?s(t,e):"kmpp"==n?a(t,e):n;else for(var m={};r.length<e;){var v=Math.floor(Math.random()*f);m[v]||(m[v]=!0,r.push(t[v]))}do{l(e,0,_);for(var b=0;b<f;b++){for(var x=1/0,w=0,E=0;E<e;E++)(h=y?o(t[b],r[E]):Math.abs(t[b]-r[E]))<=x&&(x=h,w=E);c[b]=w,_[w]++}for(var P=[],C=(u=[],0);C<e;C++)P[C]=y?l(g,0,P[C]):0,u[C]=r[C];if(y){for(var O=0;O<e;O++)r[O]=[];for(var S=0;S<f;S++)for(var I=P[c[S]],L=t[S],M=0;M<g;M++)I[M]+=L[M];p=!0;for(var T=0;T<e;T++){for(var R=r[T],N=P[T],A=u[T],D=_[T],j=0;j<g;j++)R[j]=N[j]/D||0;if(p)for(var F=0;F<g;F++)if(A[F]!=R[F]){p=!1;break}}}else{for(var k=0;k<f;k++)P[c[k]]+=t[k];for(var G=0;G<e;G++)r[G]=P[G]/_[G]||0;p=!0;for(var V=0;V<e;V++)if(u[V]!=r[V]){p=!1;break}}p=p||--d<=0}while(!p);return{it:1e4-d,k:e,idxs:c,centroids:r}}},43842:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});class i{constructor(t=[],e=r){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1),o=e[i];const s=i+1;if(s<this.length&&n(e[s],o)<0&&(i=s,o=e[s]),n(o,r)>=0)break;e[t]=o,t=i}e[t]=r}}function r(t,e){return t<e?-1:t>e?1:0}},18146:(t,e,n)=>{"use strict";function i(t){return t}function r(t){if(null==t)return i;var e,n,r=t.scale[0],o=t.scale[1],s=t.translate[0],a=t.translate[1];return function(t,i){i||(e=n=0);var l=2,u=t.length,c=new Array(u);for(c[0]=(e+=t[0])*r+s,c[1]=(n+=t[1])*o+a;l<u;)c[l]=t[l],++l;return c}}function o(t){var e,n=r(t.transform),i=1/0,o=i,s=-i,a=-i;function l(t){(t=n(t))[0]<i&&(i=t[0]),t[0]>s&&(s=t[0]),t[1]<o&&(o=t[1]),t[1]>a&&(a=t[1])}function u(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(u);break;case"Point":l(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(l)}}for(e in t.arcs.forEach((function(t){for(var e,r=-1,l=t.length;++r<l;)(e=n(t[r],r))[0]<i&&(i=e[0]),e[0]>s&&(s=e[0]),e[1]<o&&(o=e[1]),e[1]>a&&(a=e[1])})),t.objects)u(t.objects[e]);return[i,o,s,a]}function s(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return a(t,e)}))}:a(t,e)}function a(t,e){var n=e.id,i=e.bbox,r=null==e.properties?{}:e.properties,o=l(t,e);return null==n&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}function l(t,e){var n=r(t.transform),i=t.arcs;function o(t,e){e.length&&e.pop();for(var r=i[t<0?~t:t],o=0,s=r.length;o<s;++o)e.push(n(r[o],o));t<0&&function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}(e,s)}function s(t){return n(t)}function a(t){for(var e=[],n=0,i=t.length;n<i;++n)o(t[n],e);return e.length<2&&e.push(e[0]),e}function l(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(l)}return function t(e){var n,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":n=s(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(s);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:i,coordinates:n}}(e)}function u(t,e){var n={},i={},r={},o=[],s=-1;function a(t,e){for(var i in t){var r=t[i];delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){n[t<0?~t:t]=1})),o.push(r)}}return e.forEach((function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++s],e[s]=n,e[i]=r)})),e.forEach((function(e){var n,o,s=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=i[i.length-1],e<0?[n,r]:[r,n]}(e),a=s[0],l=s[1];if(n=r[a])if(delete r[n.end],n.push(e),n.end=l,o=i[l]){delete i[o.start];var u=o===n?n:n.concat(o);i[u.start=n.start]=r[u.end=o.end]=u}else i[n.start]=r[n.end]=n;else if(n=i[l])if(delete i[n.start],n.unshift(e),n.start=a,o=r[a]){delete r[o.end];var c=o===n?n:o.concat(n);i[c.start=o.start]=r[c.end=n.end]=c}else i[n.start]=r[n.end]=n;else i[(n=[e]).start=a]=r[n.end=l]=n})),a(r,i),a(i,r),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function c(t){return l(t,h.apply(this,arguments))}function h(t,e,n){var i,r,o;if(arguments.length>1)i=p(0,e,n);else for(r=0,i=new Array(o=t.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:u(t,i)}}function p(t,e,n){var i,r=[],o=[];function s(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:i})}function a(t){t.forEach(s)}function l(t){t.forEach(a)}return function t(e){switch(i=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":a(e.arcs);break;case"MultiLineString":case"Polygon":l(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(l)}(e.arcs)}}(e),o.forEach(null==n?function(t){r.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&r.push(t[0].i)}),r}function d(t){return l(t,f.apply(this,arguments))}function f(t,e){var n={},i=[],r=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),i.push(t)}function s(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return Math.abs(o)}(l(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),i.forEach((function(t){if(!t._){var e=[],i=[t];for(t._=1,r.push(e);t=i.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,i.push(t))}))}))}))}})),i.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:r.map((function(e){var i,r=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&r.push(t)}))}))})),(i=(r=u(t,r)).length)>1)for(var o,a,l=1,c=s(r[0]);l<i;++l)(o=s(r[l]))>c&&(a=r[0],r[0]=r[l],r[l]=a,c=o);return r})).filter((function(t){return t.length>0}))}}function g(t,e){for(var n=0,i=t.length;n<i;){var r=n+i>>>1;t[r]<e?n=r+1:i=r}return n}function y(t){var e={},n=t.map((function(){return[]}));function i(t,n){t.forEach((function(t){t<0&&(t=~t);var i=e[t];i?i.push(n):e[t]=[n]}))}function r(t,e){t.forEach((function(t){i(t,e)}))}var o={LineString:i,MultiLineString:r,Polygon:r,MultiPolygon:function(t,e){t.forEach((function(t){r(t,e)}))}};for(var s in t.forEach((function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,n)})):e.type in o&&o[e.type](e.arcs,n)})),e)for(var a=e[s],l=a.length,u=0;u<l;++u)for(var c=u+1;c<l;++c){var h,p=a[u],d=a[c];(h=n[p])[s=g(h,d)]!==d&&h.splice(s,0,d),(h=n[d])[s=g(h,p)]!==p&&h.splice(s,0,p)}return n}function _(t){if(null==t)return i;var e,n,r=t.scale[0],o=t.scale[1],s=t.translate[0],a=t.translate[1];return function(t,i){i||(e=n=0);var l=2,u=t.length,c=new Array(u),h=Math.round((t[0]-s)/r),p=Math.round((t[1]-a)/o);for(c[0]=h-e,e=h,c[1]=p-n,n=p;l<u;)c[l]=t[l],++l;return c}}function m(t,e){if(t.transform)throw new Error("already quantized");if(e&&e.scale)l=t.bbox;else{if(!((n=Math.floor(e))>=2))throw new Error("n must be 2");var n,i=(l=t.bbox||o(t))[0],r=l[1],s=l[2],a=l[3];e={scale:[s-i?(s-i)/(n-1):1,a-r?(a-r)/(n-1):1],translate:[i,r]}}var l,u,c=_(e),h=t.objects,p={};function d(t){return c(t)}function f(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(f)};break;case"Point":e={type:"Point",coordinates:d(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(d)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(u in h)p[u]=f(h[u]);return{type:"Topology",bbox:l,transform:e,objects:p,arcs:t.arcs.map((function(t){var e,n=0,i=1,r=t.length,o=new Array(r);for(o[0]=c(t[0],0);++n<r;)((e=c(t[n],n))[0]||e[1])&&(o[i++]=e);return 1===i&&(o[i++]=[0,0]),o.length=i,o}))}}n.r(e),n.d(e,{bbox:()=>o,feature:()=>s,merge:()=>d,mergeArcs:()=>f,mesh:()=>c,meshArcs:()=>h,neighbors:()=>y,quantize:()=>m,transform:()=>r,untransform:()=>_})},24255:(t,e,n)=>{"use strict";n.r(e),n.d(e,{topology:()=>f});var i=Object.prototype.hasOwnProperty;function r(t,e,n,i,r,o){3===arguments.length&&(i=o=Array,r=null);for(var s=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),l=t-1,u=0;u<t;++u)s[u]=r;function c(i,o){for(var u=e(i)&l,c=s[u],h=0;c!=r;){if(n(c,i))return a[u]=o;if(++h>=t)throw new Error("full hashmap");c=s[u=u+1&l]}return s[u]=i,a[u]=o,o}function h(i,o){for(var u=e(i)&l,c=s[u],h=0;c!=r;){if(n(c,i))return a[u];if(++h>=t)throw new Error("full hashmap");c=s[u=u+1&l]}return s[u]=i,a[u]=o,o}function p(i,o){for(var u=e(i)&l,c=s[u],h=0;c!=r;){if(n(c,i))return a[u];if(++h>=t)break;c=s[u=u+1&l]}return o}function d(){for(var t=[],e=0,n=s.length;e<n;++e){var i=s[e];i!=r&&t.push(i)}return t}return{set:c,maybeSet:h,get:p,keys:d}}function o(t,e){return t[0]===e[0]&&t[1]===e[1]}var s=new ArrayBuffer(16),a=new Float64Array(s),l=new Uint32Array(s);function u(t){a[0]=t[0],a[1]=t[1];var e=l[0]^l[1];return 2147483647&(e<<5^e>>7^l[2]^l[3])}function c(t,e,n){for(var i,r=e+(n---e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function h(t){var e={type:"GeometryCollection",geometries:t.features.map(p)};return null!=t.bbox&&(e.bbox=t.bbox),e}function p(t){var e,n=d(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function d(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(d)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function f(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,o=-1/0;function s(t){null!=t&&i.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(s)},Point:function(t){l(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(l)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(c)}};function l(t){var i=t[0],s=t[1];i<e&&(e=i),i>r&&(r=i),s<n&&(n=s),s>o&&(o=s)}function u(t){t.forEach(l)}function c(t){t.forEach(u)}for(var h in t)s(t[h]);return r>=e&&o>=n?[e,n,r,o]:void 0}(t=function(t){var e,n,i={};for(e in t)i[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?h:"Feature"===n.type?p:d)(n);return i}(t)),s=e>0&&n&&function(t,e,n){var r=e[0],o=e[1],s=e[2],a=e[3],l=s-r?(n-1)/(s-r):1,u=a-o?(n-1)/(a-o):1;function c(t){return[Math.round((t[0]-r)*l),Math.round((t[1]-o)*u)]}function h(t,e){for(var n,i,s,a,c,h=-1,p=0,d=t.length,f=new Array(d);++h<d;)n=t[h],a=Math.round((n[0]-r)*l),c=Math.round((n[1]-o)*u),a===i&&c===s||(f[p++]=[i=a,s=c]);for(f.length=p;p<e;)p=f.push([f[0][0],f[0][1]]);return f}function p(t){return h(t,2)}function d(t){return h(t,4)}function f(t){return t.map(d)}function g(t){null!=t&&i.call(y,t.type)&&y[t.type](t)}var y={GeometryCollection:function(t){t.geometries.forEach(g)},Point:function(t){t.coordinates=c(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(c)},LineString:function(t){t.arcs=p(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(p)},Polygon:function(t){t.arcs=f(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(f)}};for(var _ in t)g(t[_]);return{scale:[1/l,1/u],translate:[r,o]}}(t,n,e),a=function(t){var e,n,i,s,a=t.coordinates,l=t.lines,c=t.rings,h=l.length+c.length;for(delete t.lines,delete t.rings,i=0,s=l.length;i<s;++i)for(e=l[i];e=e.next;)++h;for(i=0,s=c.length;i<s;++i)for(n=c[i];n=n.next;)++h;var p=r(2*h*1.4,u,o),d=t.arcs=[];for(i=0,s=l.length;i<s;++i){e=l[i];do{f(e)}while(e=e.next)}for(i=0,s=c.length;i<s;++i)if((n=c[i]).next)do{f(n)}while(n=n.next);else g(n);function f(t){var e,n,i,r,o,s,l,u;if(i=p.get(e=a[t[0]]))for(l=0,u=i.length;l<u;++l)if(y(r=i[l],t))return t[0]=r[0],void(t[1]=r[1]);if(o=p.get(n=a[t[1]]))for(l=0,u=o.length;l<u;++l)if(_(s=o[l],t))return t[1]=s[0],void(t[0]=s[1]);i?i.push(t):p.set(e,[t]),o?o.push(t):p.set(n,[t]),d.push(t)}function g(t){var e,n,i,r,o;if(n=p.get(a[t[0]]))for(r=0,o=n.length;r<o;++r){if(m(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(v(i,t))return t[0]=i[1],void(t[1]=i[0])}if(n=p.get(e=a[t[0]+b(t)]))for(r=0,o=n.length;r<o;++r){if(m(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(v(i,t))return t[0]=i[1],void(t[1]=i[0])}n?n.push(t):p.set(e,[t]),d.push(t)}function y(t,e){var n=t[0],i=e[0],r=t[1];if(n-r!=i-e[1])return!1;for(;n<=r;++n,++i)if(!o(a[n],a[i]))return!1;return!0}function _(t,e){var n=t[0],i=e[0],r=t[1],s=e[1];if(n-r!=i-s)return!1;for(;n<=r;++n,--s)if(!o(a[n],a[s]))return!1;return!0}function m(t,e){var n=t[0],i=e[0],r=t[1]-n;if(r!==e[1]-i)return!1;for(var s=b(t),l=b(e),u=0;u<r;++u)if(!o(a[n+(u+s)%r],a[i+(u+l)%r]))return!1;return!0}function v(t,e){var n=t[0],i=e[0],r=t[1],s=e[1],l=r-n;if(l!==s-i)return!1;for(var u=b(t),c=l-b(e),h=0;h<l;++h)if(!o(a[n+(h+u)%l],a[s-(h+c)%l]))return!1;return!0}function b(t){for(var e=t[0],n=t[1],i=e,r=i,o=a[i];++i<n;){var s=a[i];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(r=i,o=s)}return r-e}return t}(function(t){var e,n,i,s,a,l,h,p=function(t){var e,n,i,s,a=t.coordinates,l=t.lines,c=t.rings,h=function(){for(var t=r(1.4*a.length,P,C,Int32Array,-1,Int32Array),e=new Int32Array(a.length),n=0,i=a.length;n<i;++n)e[n]=t.maybeSet(n,n);return e}(),p=new Int32Array(a.length),d=new Int32Array(a.length),f=new Int32Array(a.length),g=new Int8Array(a.length),y=0;for(e=0,n=a.length;e<n;++e)p[e]=d[e]=f[e]=-1;for(e=0,n=l.length;e<n;++e){var _=l[e],m=_[0],v=_[1];for(i=h[m],s=h[++m],++y,g[i]=1;++m<=v;)E(e,i,i=s,s=h[m]);++y,g[s]=1}for(e=0,n=a.length;e<n;++e)p[e]=-1;for(e=0,n=c.length;e<n;++e){var b=c[e],x=b[0]+1,w=b[1];for(E(e,h[w-1],i=h[x-1],s=h[x]);++x<=w;)E(e,i,i=s,s=h[x])}function E(t,e,n,i){if(p[n]!==t){p[n]=t;var r=d[n];if(r>=0){var o=f[n];r===e&&o===i||r===i&&o===e||(++y,g[n]=1)}else d[n]=e,f[n]=i}}function P(t){return u(a[t])}function C(t,e){return o(a[t],a[e])}p=d=f=null;var O,S=function(t,e,n,i,r){3===arguments.length&&(i=Array,r=null);for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=r;function l(i){for(var a=e(i)&s,l=o[a],u=0;l!=r;){if(n(l,i))return!0;if(++u>=t)throw new Error("full hashset");l=o[a=a+1&s]}return o[a]=i,!0}function u(i){for(var a=e(i)&s,l=o[a],u=0;l!=r;){if(n(l,i))return!0;if(++u>=t)break;l=o[a=a+1&s]}return!1}function c(){for(var t=[],e=0,n=o.length;e<n;++e){var i=o[e];i!=r&&t.push(i)}return t}return{add:l,has:u,values:c}}(1.4*y,u,o);for(e=0,n=a.length;e<n;++e)g[O=h[e]]&&S.add(a[O]);return S}(t),d=t.coordinates,f=t.lines,g=t.rings;for(n=0,i=f.length;n<i;++n)for(var y=f[n],_=y[0],m=y[1];++_<m;)p.has(d[_])&&(e={0:_,1:y[1]},y[1]=_,y=y.next=e);for(n=0,i=g.length;n<i;++n)for(var v=g[n],b=v[0],x=b,w=v[1],E=p.has(d[b]);++x<w;)p.has(d[x])&&(E?(e={0:x,1:v[1]},v[1]=x,v=v.next=e):(h=w-x,c(s=d,a=b,l=w),c(s,a,a+h),c(s,a+h,l),d[w]=d[b],E=!0,x=b));return t}(function(t){var e=-1,n=[],r=[],o=[];function s(t){t&&i.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function l(t){for(var i=0,r=t.length;i<r;++i)o[++e]=t[i];var s={0:e-r+1,1:e};return n.push(s),s}function u(t){for(var n=0,i=t.length;n<i;++n)o[++e]=t[n];var s={0:e-i+1,1:e};return r.push(s),s}function c(t){return t.map(u)}for(var h in t)s(t[h]);return{type:"Topology",coordinates:o,lines:n,rings:r,objects:t}}(t))),l=a.coordinates,f=r(1.4*a.arcs.length,g,y);function _(t){t&&i.call(m,t.type)&&m[t.type](t)}t=a.objects,a.bbox=n,a.arcs=a.arcs.map((function(t,e){return f.set(t,e),l.slice(t[0],t[1]+1)})),delete a.coordinates,l=null;var m={GeometryCollection:function(t){t.geometries.forEach(_)},LineString:function(t){t.arcs=v(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(v)},Polygon:function(t){t.arcs=t.arcs.map(v)},MultiPolygon:function(t){t.arcs=t.arcs.map(b)}};function v(t){var e=[];do{var n=f.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function b(t){return t.map(v)}for(var x in t)_(t[x]);return s&&(a.transform=s,a.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var i,r,o=t[e],s=0,a=1,l=o.length,u=o[0],c=u[0],h=u[1];++s<l;)i=(u=o[s])[0],r=u[1],i===c&&r===h||(o[a++]=[i-c,r-h],c=i,h=r);1===a&&(o[a++]=[0,0]),o.length=a}return t}(a.arcs)),a}function g(t){var e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),n+31*i}function y(t,e){var n,i=t[0],r=t[1],o=e[0],s=e[1];return r<i&&(n=i,i=r,r=n),s<o&&(n=o,o=s,s=n),i===o&&r===s}},99256:(t,e,n)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.copyright=void 0;var r=null!==(i="".concat("xbsj-xe2","/").concat(n.j))&&void 0!==i?i:"-",o=((Date.now()-1702091535e3)/36e5).toFixed(1),s="%c ".concat(r,"%c ").concat("0.1.0",".").concat("43e254ce2f0180fc62dca04488232442ee13fbed".slice(0,8),".").concat("2023-12-09T03:12:15.000Z"," (").concat(o,")\n%c").concat("xbsj-xe2\n","").concat(r,"").concat("","\n");e.copyright=Object.seal({get owner(){return""},get ownerlink(){return"https://work.weixin.qq.com/kfid/kfc0a426187a0ce9a9a"},get gituri(){return"https://codeup.aliyun.com/xbsj/2022/xe2-packages-202210/commit/${commitId}".replace("${commitId}","43e254ce2f0180fc62dca04488232442ee13fbed")},get info(){return s},get date(){return"2023-12-09T03:12:15.000Z"},get author(){return"vtxf, ysp"},get version(){return"0.1.0"},get name(){return"xbsj-xe2"},get commitId(){return"43e254ce2f0180fc62dca04488232442ee13fbed"},print:function(t){void 0===t&&(t=!1),!t&&window._xe2_no_copy_print||console.info(this.info,"\n            font-size: 18px;\n            font-weight: 1000;\n            line-height: 1;\n            color: rgb(0, 120, 215);\n            padding-top: 20px;\n            padding-bottom: 10px;\n            ","\n            font-size: 10px;\n            font-weight: 1000;\n            color: rgb(0, 120, 215);\n            ","\n            font-size: 10px;\n            line-height: 1.5;\n            color: rgb(0, 120, 215);\n            padding-bottom: 2px;\n            padding-left: 35px;\n            ")}}),window.g_xe2CopyRights=window.g_xe2CopyRights||{},window.g_xe2CopyRights[r]=e.copyright},50500:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlArrowsLineString=void 0;var l=n(8068),u=n(43938),c=n(19239),h=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new c.Event),n._flyToEvent=n.disposeVar(new c.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlArrowsLineString"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},e.prototype.getProperties=function(n){var i=this;return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new u.GroupProperty("","",[new u.FunctionProperty("","",["number"],(function(t){return i.flyTo(t)}),[1e3]),new u.BooleanProperty("",".",!0,!1,[this,"show"],!0),new u.Number2sProperty("","",!0,!1,[this,"positions"]),new u.BooleanProperty("","",!0,!1,[this,"editing"],!1),new u.BooleanProperty("","",!0,!1,[this,"pointEditing"],!1),new u.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new u.BooleanProperty("","",!0,!1,[this,"doubleArrow"],!1),new u.BooleanProperty("","",!0,!1,[this,"solidArrow"],!1),new u.NumberProperty("","(0~180)",!0,!1,[this,"arrowsAngle"],20),new u.NumberProperty("","",!0,!1,[this,"arrowsLength"],5e4),new u.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new u.GroupProperty("","",[new u.ColorProperty("",e.description.color,!0,!1,[this,"color"],[0,.6,1,1]),new u.EnumProperty("lineCap",e.description.lineCap,!0,!1,[this,"lineCap"],e.lineCapTypeEnums,"round"),new u.EnumProperty("lineJoin",e.description.lineJoin,!0,!1,[this,"lineJoin"],e.lineJoinTypeEnums,"round"),new u.NumbersProperty("lineDash",e.description.lineDash,!0,!1,[this,"lineDash"]),new u.NumberProperty("lineDashOffset",e.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],0),new u.NumberProperty("miterLimit",e.description.miterLimit,!0,!1,[this,"miterLimit"],10),new u.NumberProperty("width",e.description.width,!0,!1,[this,"width"],5)])])],!1)},n=e,e.type=n.register("OlArrowsLineString",n,{chsName:"",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlArrowsLineString"}),e.lineCapTypeEnums=[["butt","butt"],["round","round"],["square","square"]],e.lineJoinTypeEnums=[["bevel","bevel"],["round","round"],["miter","miter"]],e.description={color:"color",lineCap:"Line cap style: `butt`, `round`, or `square`",lineJoin:"Line join style: `bevel`, `round`, or `miter`",lineDash:"Line dash pattern. Default is `null` (no dash).",lineDashOffset:"Line dash offset.",miterLimit:"Miter limit.",width:"Width."},e}(u.ESSceneObject);e.OlArrowsLineString=h,function(t){t.createDefaultProps=function(){return o(o({},u.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,l.reactPosition2Ds)(void 0),editing:void 0,pointEditing:void 0,allowPicking:void 0,doubleArrow:void 0,solidArrow:void 0,color:(0,c.reactArrayWithUndefined)(void 0),lineCap:void 0,lineJoin:void 0,lineDash:(0,c.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0,width:void 0,zIndex:void 0,arrowsAngle:void 0,arrowsLength:void 0})}}(h=e.OlArrowsLineString||(e.OlArrowsLineString={})),e.OlArrowsLineString=h,(0,c.extendClassProps)(h.prototype,h.createDefaultProps)},15764:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlArrowsLineString=void 0;var o=n(57646),s=n(43938),a=n(19239),l=n(87442),u=n(33154),c=n(13947),h=n(57777),p=n(1448),d=n(54187),f=n(50500);var g=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=i.disposeVar(new u.OlLineString),l=i.disposeVar(new u.OlLineString),f=i.disposeVar(new u.OlLineString),g=i.disposeVar(new p.OlPolygon),y=i.disposeVar(new p.OlPolygon),_=function(t){var n;null!==(n=e.allowPicking)&&void 0!==n&&n&&e.pickedEvent.emit(new s.SceneObjectPickedInfo(e,t))};i.dispose(r.pickedEvent.disposableOn((function(t){return _(t)}))),i.dispose(l.pickedEvent.disposableOn((function(t){return _(t)}))),i.dispose(f.pickedEvent.disposableOn((function(t){return _(t)}))),i.dispose(g.pickedEvent.disposableOn((function(t){return _(t)}))),i.dispose(y.pickedEvent.disposableOn((function(t){return _(t)}))),n.add(r),i.dispose((function(){return n.delete(r)})),i.dispose((0,a.track)([r,"show"],[e,"show"])),i.dispose((0,a.track)([r,"zIndex"],[e,"zIndex"])),i.dispose((0,a.track)([r,"positions"],[e,"positions"])),i.dispose((0,a.track)([r,"allowPicking"],[e,"allowPicking"])),i.dispose((0,a.track)([r,"color"],[e,"color"])),i.dispose((0,a.track)([r,"lineCap"],[e,"lineCap"])),i.dispose((0,a.track)([r,"lineJoin"],[e,"lineJoin"])),i.dispose((0,a.track)([r,"lineDash"],[e,"lineDash"])),i.dispose((0,a.track)([r,"lineDashOffset"],[e,"lineDashOffset"])),i.dispose((0,a.track)([r,"miterLimit"],[e,"miterLimit"])),i.dispose((0,a.track)([r,"width"],[e,"width"])),l.maxPoints=3,l.minPoints=3,l.allowDeleting=!1,l.allowInserting=!1,n.add(l),i.dispose((function(){return n.delete(l)})),i.dispose((0,a.track)([l,"zIndex"],[e,"zIndex"])),i.dispose((0,a.track)([l,"color"],[e,"color"])),i.dispose((0,a.track)([l,"lineCap"],[e,"lineCap"])),i.dispose((0,a.track)([l,"lineJoin"],[e,"lineJoin"])),i.dispose((0,a.track)([l,"lineDash"],[e,"lineDash"])),i.dispose((0,a.track)([l,"lineDashOffset"],[e,"lineDashOffset"])),i.dispose((0,a.track)([l,"miterLimit"],[e,"miterLimit"])),i.dispose((0,a.track)([l,"width"],[e,"width"])),f.maxPoints=3,f.minPoints=3,f.allowDeleting=!1,f.allowInserting=!1,n.add(f),i.dispose((function(){return n.delete(f)})),i.dispose((0,a.track)([f,"zIndex"],[e,"zIndex"])),i.dispose((0,a.track)([f,"color"],[e,"color"])),i.dispose((0,a.track)([f,"lineCap"],[e,"lineCap"])),i.dispose((0,a.track)([f,"lineJoin"],[e,"lineJoin"])),i.dispose((0,a.track)([f,"lineDash"],[e,"lineDash"])),i.dispose((0,a.track)([f,"lineDashOffset"],[e,"lineDashOffset"])),i.dispose((0,a.track)([f,"miterLimit"],[e,"miterLimit"])),i.dispose((0,a.track)([f,"width"],[e,"width"])),n.add(g),i.dispose((function(){return n.delete(g)})),i.dispose((0,a.track)([g,"strokeColor"],[e,"color"])),i.dispose((0,a.track)([g,"strokeWidth"],[e,"width"])),i.dispose((0,a.track)([g,"zIndex"],[e,"zIndex"])),n.add(y),i.dispose((function(){return n.delete(y)})),i.dispose((0,a.track)([y,"strokeColor"],[e,"color"])),i.dispose((0,a.track)([y,"strokeWidth"],[e,"width"])),i.dispose((0,a.track)([y,"zIndex"],[e,"zIndex"])),(E=function(){var t,n=null!==(t=e.color)&&void 0!==t?t:[0,.6,1,1];y.fillColor=n,g.fillColor=n})(),i.dispose(e.colorChanged.disposableOn(E)),(E=function(){var t,n,i;if(e.positions&&!(e.positions.length<2)){var r=e.positions.map((function(t){return(0,o.fromLonLat)(t)})),s=(0,(i=r).forEach((function(t,e){var n,r,o,s;e<i.length-1&&(n=t,r=i[e+1],o=Math.abs(n[0]-r[0]),s=Math.abs(n[1]-r[1]),Math.sqrt(Math.pow(o,2)+Math.pow(s,2)))})),r.length),a=null!==(t=e.arrowsAngle)&&void 0!==t?t:20,u=r[s-1],c=r[s-2],h=null!==(n=e.arrowsLength)&&void 0!==n?n:5e4,p=180*Math.atan2(u[1]-c[1],u[0]-c[0])/Math.PI,d=(180-a+p)*Math.PI/180,_=(180+a+p)*Math.PI/180,m=[[u[0]+h*Math.cos(d),u[1]+h*Math.sin(d)],u,[u[0]+h*Math.cos(_),u[1]+h*Math.sin(_)]];l.positions=m.map((function(t){return(0,o.toLonLat)(t)})),y.positions=m.map((function(t){return(0,o.toLonLat)(t)}));var v=r[0],b=r[1],x=180*Math.atan2(v[1]-b[1],v[0]-b[0])/Math.PI,w=(180-a+x)*Math.PI/180,E=(180+a+x)*Math.PI/180,P=[[v[0]+h*Math.cos(w),v[1]+h*Math.sin(w)],v,[v[0]+h*Math.cos(E),v[1]+h*Math.sin(E)]];f.positions=P.map((function(t){return(0,o.toLonLat)(t)})),g.positions=P.map((function(t){return(0,o.toLonLat)(t)}))}})();var m=i.disposeVar((0,a.createNextAnimateFrameEvent)(e.positionsChanged,e.arrowsAngleChanged,e.arrowsLengthChanged));i.dispose(m.disposableOn(E)),(E=function(){var t,n,i,r=null!==(t=e.doubleArrow)&&void 0!==t&&t,o=null!==(n=e.solidArrow)&&void 0!==n&&n;null===(i=e.show)||void 0===i||i?o?(l.show=!1,f.show=!1,y.show=!0,g.show=!!r):(g.show=!1,y.show=!1,l.show=!0,f.show=!!r):(l.show=!1,f.show=!1,g.show=!1,y.show=!1)})();var v=i.disposeVar((0,a.createNextAnimateFrameEvent)(e.doubleArrowChanged,e.showChanged,e.solidArrowChanged));i.dispose(v.disposableOn(E));var b=i.disposeVar((0,a.createNextAnimateFrameEvent)(e.editingChanged));i.dispose((0,c.registerOlLineStringEditor)(b,e,n,{allowDeleting:!0,allowInserting:!0,maxPoints:void 0,minPoints:2}));var x=i.disposeVar(new h.OlPoint);n.add(x),i.dispose((function(){return n.delete(x)})),(E=function(){var t;x.show=null!==(t=e.pointEditing)&&void 0!==t&&t&&e.positions&&e.positions.length>0})();var w=i.disposeVar((0,a.createNextAnimateFrameEvent)(e.pointEditingChanged,e.positionsChanged));i.dispose(w.disposableOn(E));var E,P=!1;return(E=function(){e.positions&&(P=!0,x.position=(0,d.getCenterFromPositions)(e.positions),P=!1)})(),i.dispose(e.positionsChanged.disposableOn(E)),i.dispose((0,a.bind)([x,"editing"],[e,"pointEditing"])),i.dispose(e.editingChanged.disposableOn((function(t){t&&(e.pointEditing=!1)}))),i.dispose(e.pointEditingChanged.disposableOn((function(t){t&&(e.editing=!1)}))),i.dispose(x.positionChanged.disposableOn((function(t,n){P||n&&t&&e.positions&&(e.positions=(0,d.moveAllPositionsWithCenter)(e.positions,t,n))}))),i.dispose(e.flyToEvent.disposableOn((function(t){r.flyTo(t)}))),i}var n;return r(e,t),n=e,e.type=n.register(f.OlArrowsLineString.type,n),e}(l.OpenLayersObject);e.OlOlArrowsLineString=g},48489:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(50500),e),r(n(15764),e)},62483:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlBezierSpline=void 0;var l=n(8068),u=n(43938),c=n(19239),h=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new c.Event),n._flyToEvent=n.disposeVar(new c.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlBezierSpline"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},e.prototype.getProperties=function(n){var i=this;return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new u.GroupProperty("","",[new u.FunctionProperty("","",["number"],(function(t){return i.flyTo(t)}),[1e3]),new u.BooleanProperty("",".",!0,!1,[this,"show"],!0),new u.Number2sProperty("","",!0,!1,[this,"positions"]),new u.BooleanProperty("","",!0,!1,[this,"editing"],!1),new u.BooleanProperty("","",!0,!1,[this,"pointEditing"],!1),new u.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new u.GroupProperty("","",[new u.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new u.ColorProperty("",e.description.color,!0,!1,[this,"color"],[0,.6,1,1]),new u.EnumProperty("lineCap",e.description.lineCap,!0,!1,[this,"lineCap"],e.lineCapTypeEnums,"round"),new u.EnumProperty("lineJoin",e.description.lineJoin,!0,!1,[this,"lineJoin"],e.lineJoinTypeEnums,"round"),new u.NumbersProperty("lineDash",e.description.lineDash,!0,!1,[this,"lineDash"]),new u.NumberProperty("lineDashOffset",e.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],0),new u.NumberProperty("miterLimit",e.description.miterLimit,!0,!1,[this,"miterLimit"],10),new u.NumberProperty("width",e.description.width,!0,!1,[this,"width"],5)])])],!1)},n=e,e.type=n.register("OlBezierSpline",n,{chsName:"",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlBezierSpline"}),e.lineCapTypeEnums=[["butt","butt"],["round","round"],["square","square"]],e.lineJoinTypeEnums=[["bevel","bevel"],["round","round"],["miter","miter"]],e.description={color:"color",lineCap:"Line cap style: `butt`, `round`, or `square`",lineJoin:"Line join style: `bevel`, `round`, or `miter`",lineDash:"Line dash pattern. Default is `null` (no dash).",lineDashOffset:"Line dash offset.",miterLimit:"Miter limit.",width:"Width."},e}(u.ESSceneObject);e.OlBezierSpline=h,function(t){t.createDefaultProps=function(){return o(o({},u.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,l.reactPosition2Ds)(void 0),editing:void 0,pointEditing:void 0,allowPicking:void 0,zIndex:void 0,color:(0,c.reactArrayWithUndefined)(void 0),lineCap:void 0,lineJoin:void 0,lineDash:(0,c.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0,width:void 0})}}(h=e.OlBezierSpline||(e.OlBezierSpline={})),e.OlBezierSpline=h,(0,c.extendClassProps)(h.prototype,h.createDefaultProps)},87889:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlBezierSpline=void 0;var l=n(87442),u=n(43938),c=a(n(38347)),h=n(19239),p=n(13947),d=n(33154),f=n(62483),g=n(57646),y=n(57777),_=n(54187),m=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=i.disposeVar(new d.OlLineString);i.dispose(r.pickedEvent.disposableOn((function(t){var n;null!==(n=e.allowPicking)&&void 0!==n&&n&&e.pickedEvent.emit(new u.SceneObjectPickedInfo(e,t))}))),n.add(r),i.dispose((function(){return n.delete(r)})),i.dispose((0,h.track)([r,"show"],[e,"show"])),i.dispose((0,h.track)([r,"zIndex"],[e,"zIndex"])),i.dispose((0,h.track)([r,"allowPicking"],[e,"allowPicking"])),i.dispose((0,h.track)([r,"color"],[e,"color"])),i.dispose((0,h.track)([r,"lineCap"],[e,"lineCap"])),i.dispose((0,h.track)([r,"lineJoin"],[e,"lineJoin"])),i.dispose((0,h.track)([r,"lineDash"],[e,"lineDash"])),i.dispose((0,h.track)([r,"lineDashOffset"],[e,"lineDashOffset"])),i.dispose((0,h.track)([r,"miterLimit"],[e,"miterLimit"])),i.dispose((0,h.track)([r,"width"],[e,"width"])),(l=function(){if(e.positions&&!(e.positions.length<2)){var t=e.positions.map((function(t){return(0,g.fromLonLat)(t)})),n=c.lineString(t),i=c.bezierSpline(n).geometry.coordinates;r.positions=i.map((function(t){return(0,g.toLonLat)(t)}))}})(),i.dispose(e.positionsChanged.disposableOn(l));var o=i.disposeVar((0,h.createNextAnimateFrameEvent)(e.editingChanged));i.dispose((0,p.registerOlLineStringEditor)(o,e,n,{allowDeleting:!0,allowInserting:!0,maxPoints:100,minPoints:2})),i.dispose(e.flyToEvent.disposableOn((function(t){r.flyTo(t)})));var s=i.disposeVar(new y.OlPoint);n.add(s),i.dispose((function(){return n.delete(s)})),(l=function(){var t;s.show=null!==(t=e.pointEditing)&&void 0!==t&&t&&e.positions&&e.positions.length>0})();var a=i.disposeVar((0,h.createNextAnimateFrameEvent)(e.pointEditingChanged,e.positionsChanged));i.dispose(a.disposableOn(l));var l,f=!1;return(l=function(){e.positions&&(f=!0,s.position=(0,_.getCenterFromPositions)(e.positions),f=!1)})(),i.dispose(e.positionsChanged.disposableOn(l)),i.dispose((0,h.bind)([s,"editing"],[e,"pointEditing"])),i.dispose(e.editingChanged.disposableOn((function(t){t&&(e.pointEditing=!1)}))),i.dispose(e.pointEditingChanged.disposableOn((function(t){t&&(e.editing=!1)}))),i.dispose(s.positionChanged.disposableOn((function(t,n){f||n&&t&&e.positions&&(e.positions=(0,_.moveAllPositionsWithCenter)(e.positions,t,n))}))),i}var n;return r(e,t),n=e,e.type=n.register(f.OlBezierSpline.type,n),e}(l.OpenLayersObject);e.OlOlBezierSpline=m},31731:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(62483),e),r(n(87889),e)},49142:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlBrokenLine=void 0;var l=n(8068),u=n(43938),c=n(19239),h=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new c.Event),n._flyToEvent=n.disposeVar(new c.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlBrokenLine"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t,["points"])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},e.prototype.getProperties=function(n){var i=this;return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new u.GroupProperty("","",[new u.FunctionProperty("","",["number"],(function(t){return i.flyTo(t)}),[1e3]),new u.BooleanProperty("",".",!0,!1,[this,"show"],!0),new u.Number2sProperty("","",!0,!1,[this,"positions"]),new u.Number2sProperty("","",!0,!0,[this,"points"]),new u.BooleanProperty("","",!0,!1,[this,"editing"],!1),new u.BooleanProperty("","",!0,!1,[this,"pointEditing"],!1),new u.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new u.GroupProperty("","",[new u.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new u.ColorProperty("",e.description.color,!0,!1,[this,"color"],[0,.6,1,1]),new u.EnumProperty("lineCap",e.description.lineCap,!0,!1,[this,"lineCap"],e.lineCapTypeEnums,"round"),new u.EnumProperty("lineJoin",e.description.lineJoin,!0,!1,[this,"lineJoin"],e.lineJoinTypeEnums,"round"),new u.NumbersProperty("lineDash",e.description.lineDash,!0,!1,[this,"lineDash"]),new u.NumberProperty("lineDashOffset",e.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],0),new u.NumberProperty("miterLimit",e.description.miterLimit,!0,!1,[this,"miterLimit"],10),new u.NumberProperty("width",e.description.width,!0,!1,[this,"width"],5)])])],!1)},n=e,e.type=n.register("OlBrokenLine",n,{chsName:"",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlBrokenLine"}),e.lineCapTypeEnums=[["butt","butt"],["round","round"],["square","square"]],e.lineJoinTypeEnums=[["bevel","bevel"],["round","round"],["miter","miter"]],e.description={color:"color",lineCap:"Line cap style: `butt`, `round`, or `square`",lineJoin:"Line join style: `bevel`, `round`, or `miter`",lineDash:"Line dash pattern. Default is `null` (no dash).",lineDashOffset:"Line dash offset.",miterLimit:"Miter limit.",width:"Width."},e}(u.ESSceneObject);e.OlBrokenLine=h,function(t){t.createDefaultProps=function(){return o(o({},u.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,l.reactPosition2Ds)(void 0),points:(0,l.reactPosition2Ds)(void 0),editing:void 0,pointEditing:void 0,allowPicking:void 0,zIndex:void 0,color:(0,c.reactArrayWithUndefined)(void 0),lineCap:void 0,lineJoin:void 0,lineDash:(0,c.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0,width:void 0})}}(h=e.OlBrokenLine||(e.OlBrokenLine={})),e.OlBrokenLine=h,(0,c.extendClassProps)(h.prototype,h.createDefaultProps)},65827:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlBrokenLine=void 0;var a=n(43938),l=n(19239),u=n(87442),c=n(33154),h=n(13947),p=n(49142),d=n(54187),f=n(57777),g=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=i.disposeVar(new c.OlLineString);i.dispose(r.pickedEvent.disposableOn((function(t){var n;null!==(n=e.allowPicking)&&void 0!==n&&n&&e.pickedEvent.emit(new a.SceneObjectPickedInfo(e,t))}))),n.add(r),i.dispose((function(){return n.delete(r)})),i.dispose((0,l.track)([r,"show"],[e,"show"])),i.dispose((0,l.track)([r,"zIndex"],[e,"zIndex"])),i.dispose((0,l.track)([r,"allowPicking"],[e,"allowPicking"])),i.dispose((0,l.track)([r,"color"],[e,"color"])),i.dispose((0,l.track)([r,"lineCap"],[e,"lineCap"])),i.dispose((0,l.track)([r,"lineJoin"],[e,"lineJoin"])),i.dispose((0,l.track)([r,"lineDash"],[e,"lineDash"])),i.dispose((0,l.track)([r,"lineDashOffset"],[e,"lineDashOffset"])),i.dispose((0,l.track)([r,"miterLimit"],[e,"miterLimit"])),i.dispose((0,l.track)([r,"width"],[e,"width"])),(y=function(){if(r.positions=void 0,e.points=void 0,e.positions&&!(e.positions.length<2)){var t=s([],o(e.positions),!1),n=!0,i=[],a=t[0];t.forEach((function(t){a=n?[a[0],t[1]]:[t[0],a[1]],i.push(a),n=!n})),r.positions=i,e.points=s([],o(i),!1)}})(),i.dispose(e.positionsChanged.disposableOn(y));var u=i.disposeVar((0,l.createNextAnimateFrameEvent)(e.editingChanged));i.dispose((0,h.registerOlLineStringEditor)(u,e,n,{allowDeleting:!0,allowInserting:!0,maxPoints:100,minPoints:2})),i.dispose(e.flyToEvent.disposableOn((function(t){r.flyTo(t)})));var p=i.disposeVar(new f.OlPoint);n.add(p),i.dispose((function(){return n.delete(p)})),(y=function(){var t;p.show=null!==(t=e.pointEditing)&&void 0!==t&&t&&e.positions&&e.positions.length>0})();var g=i.disposeVar((0,l.createNextAnimateFrameEvent)(e.pointEditingChanged,e.positionsChanged));i.dispose(g.disposableOn(y));var y,_=!1;return(y=function(){e.positions&&(_=!0,p.position=(0,d.getCenterFromPositions)(e.positions),_=!1)})(),i.dispose(e.positionsChanged.disposableOn(y)),i.dispose((0,l.bind)([p,"editing"],[e,"pointEditing"])),i.dispose(e.editingChanged.disposableOn((function(t){t&&(e.pointEditing=!1)}))),i.dispose(e.pointEditingChanged.disposableOn((function(t){t&&(e.editing=!1)}))),i.dispose(p.positionChanged.disposableOn((function(t,n){_||n&&t&&e.positions&&(e.positions=(0,d.moveAllPositionsWithCenter)(e.positions,t,n))}))),i}var n;return r(e,t),n=e,e.type=n.register(p.OlBrokenLine.type,n),e}(u.OpenLayersObject);e.OlOlBrokenLine=g},90707:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(49142),e),r(n(65827),e)},89776:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlCircle=void 0;var l=n(8068),u=n(57646),c=n(43938),h=n(19239),p=n(57777),d=n(1448),f=n(54187),g=function(t){function e(e){var n=t.call(this,e)||this;n._pickedEvent=n.disposeVar(new h.Event),n._flyToEvent=n.disposeVar(new h.Event),n._polygon=n.disposeVar(new d.OlPolygon),n._centerPoint=n.disposeVar(new p.OlPoint);var i=n._polygon,r=n._centerPoint,o=n;n.dispose(n.components.disposableAdd(i)),n.dispose(n.components.disposableAdd(r)),n.dispose((0,h.track)([i,"show"],[o,"show"])),n.dispose((0,h.track)([i,"fillColor"],[o,"fillColor"])),n.dispose((0,h.track)([i,"strokeColor"],[o,"strokeColor"])),n.dispose((0,h.track)([i,"strokeWidth"],[o,"strokeWidth"])),n.dispose((0,h.track)([i,"zIndex"],[o,"zIndex"])),n.dispose((0,h.track)([i,"allowPicking"],[o,"allowPicking"])),n.dispose((0,h.track)([i,"lineCap"],[o,"lineCap"])),n.dispose((0,h.track)([i,"lineJoin"],[o,"lineJoin"])),n.dispose((0,h.track)([i,"lineDash"],[o,"lineDash"])),n.dispose((0,h.track)([i,"lineDashOffset"],[o,"lineDashOffset"])),n.dispose((0,h.track)([i,"miterLimit"],[o,"miterLimit"])),n.dispose(i.pickedEvent.disposableOn((function(t){var e;null!==(e=o.allowPicking)&&void 0!==e&&e&&o.pickedEvent.emit(new c.SceneObjectPickedInfo(o,t))}))),(a=function(){var t;if(i.positions=void 0,o.positions&&!(o.positions.length<2)){for(var e,n,r,s,a=o.positions.map((function(t){return(0,u.fromLonLat)(t)})),l=0,c=[],h=null!==(t=o.heading)&&void 0!==t?t:10,p=(e=a[0],n=a[1],r=Math.abs(e[0]-n[0]),s=Math.abs(e[1]-n[1]),Math.sqrt(Math.pow(r,2)+Math.pow(s,2)));l<360;){var d=l*Math.PI/180,f=a[0][0]+p*Math.cos(d),g=a[0][1]+p*Math.sin(d);c.push([f,g]),l+=h}i.positions=c.map((function(t){return(0,u.toLonLat)(t)}))}})(),n.dispose(o.positionsChanged.disposableOn(a)),n.dispose(o.flyToEvent.disposableOn((function(t){i.flyTo(t)}))),(a=function(){var t;r.show=null!==(t=o.pointEditing)&&void 0!==t&&t&&o.positions&&o.positions.length>0})();var s=n.disposeVar((0,h.createNextAnimateFrameEvent)(o.pointEditingChanged,o.positionsChanged));n.dispose(s.disposableOn(a));var a,l=!1;return(a=function(){i.positions&&(l=!0,r.position=(0,f.getCenterFromPositions)(i.positions),l=!1)})(),n.dispose(i.positionsChanged.disposableOn(a)),n.dispose((0,h.bind)([r,"editing"],[o,"pointEditing"])),n.dispose(o.editingChanged.disposableOn((function(t){t&&(o.pointEditing=!1)}))),n.dispose(o.pointEditingChanged.disposableOn((function(t){t&&(o.editing=!1)}))),n.dispose(r.positionChanged.disposableOn((function(t,e){l||e&&t&&o.positions&&(o.positions=(0,f.moveAllPositionsWithCenter)(o.positions,t,e))}))),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlCircle"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},Object.defineProperty(e.prototype,"polygon",{get:function(){return this._polygon},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){return this._centerPoint},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(e){var n=this;return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new c.GroupProperty("","",[new c.FunctionProperty("","",["number"],(function(t){return n.flyTo(t)}),[1e3]),new c.BooleanProperty("",".",!0,!1,[this,"show"],!0),new c.Number2sProperty("","",!0,!1,[this,"positions"]),new c.BooleanProperty("","",!0,!1,[this,"editing"],!1),new c.BooleanProperty("","",!0,!1,[this,"pointEditing"],!1),new c.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new c.NumberProperty("heading","heading",!0,!1,[this,"heading"],10),new c.GroupProperty("","",[new c.ColorProperty("","",!0,!1,[this,"fillColor"]),new c.ColorProperty("","",!0,!1,[this,"strokeColor"],[0,.6,1,1]),new c.NumberProperty("","",!0,!1,[this,"strokeWidth"],5),new c.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new c.EnumProperty("lineCap",d.OlPolygon.description.lineCap,!0,!1,[this,"lineCap"],d.OlPolygon.defaultValue.lineCapTypeEnums,d.OlPolygon.defaultValue.lineCap),new c.EnumProperty("lineJoin",d.OlPolygon.description.lineJoin,!0,!1,[this,"lineJoin"],d.OlPolygon.defaultValue.lineJoinTypeEnums,d.OlPolygon.defaultValue.lineCap),new c.NumbersProperty("lineDash",d.OlPolygon.description.lineDash,!0,!1,[this,"lineDash"],d.OlPolygon.defaultValue.lineDash),new c.NumberProperty("lineDashOffset",d.OlPolygon.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],d.OlPolygon.defaultValue.lineDashOffset),new c.NumberProperty("miterLimit",d.OlPolygon.description.miterLimit,!0,!1,[this,"miterLimit"],d.OlPolygon.defaultValue.miterLimit)])])],!1)},n=e,e.type=n.register("OlCircle",n,{chsName:"OlCircle",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlCircle"}),e}(c.ESSceneObject);e.OlCircle=g,function(t){t.createDefaultProps=function(){return o(o({},c.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,l.reactPosition2Ds)(void 0),editing:void 0,pointEditing:void 0,allowPicking:void 0,fillColor:(0,h.reactArrayWithUndefined)(void 0),strokeColor:(0,h.reactArrayWithUndefined)(void 0),strokeWidth:void 0,zIndex:void 0,heading:void 0,lineCap:void 0,lineJoin:void 0,lineDash:(0,h.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0})}}(g=e.OlCircle||(e.OlCircle={})),e.OlCircle=g,(0,h.extendClassProps)(g.prototype,g.createDefaultProps)},58550:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlCircle=void 0;var o=n(19239),s=n(87442),a=n(13947),l=n(89776),u=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=i.disposeVar((0,o.createNextAnimateFrameEvent)(e.editingChanged));return i.dispose((0,a.registerOlLineStringEditor)(r,e,n,{allowDeleting:!1,allowInserting:!1,maxPoints:2,minPoints:2})),i}var n;return r(e,t),n=e,e.type=n.register(l.OlCircle.type,n),e}(s.OpenLayersObject);e.OlOlCircle=u},7521:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(89776),e),r(n(58550),e)},87637:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlCompass=void 0;var l=n(43938),u=n(8068),c=n(43938),h=n(19239),p=n(3279),d=n(17133),f=function(t){function e(e){var n=t.call(this,e)||this;return n._customDiv=n.disposeVar(new l.CustomDiv),n._getPositionsEvent=n.disposeVar(new h.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlCompass"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this.getPositionsEvent.emit(),this._innerGetJson()},set:function(t){this._innerSetJson(t,["imgPositions","textPosition"])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customDiv",{get:function(){return this._customDiv},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getPositionsEvent",{get:function(){return this._getPositionsEvent},enumerable:!1,configurable:!0}),e.prototype.getPositions=function(){this.getPositionsEvent.emit()},e.prototype.getProperties=function(e){return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new c.GroupProperty("","",[new c.BooleanProperty("",".",!0,!1,[this,"show"],!0),new c.StringProperty("","",!0,!1,[this,"text"],""),new c.NumberProperty("","",!0,!1,[this,"rotation"],0),new c.GroupProperty("","",[new c.UriProperty("","",!0,!1,[this,"uri"],"${utility-xe2-plugin-script-dir}/xe2-assets/utility-xe2-plugin/images/compass.png"),new c.Number4Property("borderRadius","borderRadius",!0,!1,[this,"borderRadius"],[0,0,0,0]),new c.NumberProperty("imgWidth","imgWidth",!0,!1,[this,"imgWidth"],40),new c.NumberProperty("imgHeight","imgHeight",!0,!1,[this,"imgHeight"],50),new c.NumberProperty("imgTop","imgTop",!0,!1,[this,"imgTop"],30),new c.NumberProperty("imgRight","imgRight",!0,!1,[this,"imgRight"],10),new c.NumberProperty("borderWidth","borderWidth",!0,!1,[this,"borderWidth"],0),new c.EnumProperty("borderStyle",d.OlLabelWithLine.description.borderStyle,!0,!1,[this,"borderStyle"],d.OlLabelWithLine.borderStyleTypeEnums,"none"),new c.ColorProperty("borderColor","borderColor",!0,!1,[this,"borderColor"],[1,1,1,1]),new c.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"],0)]),new c.GroupProperty("","",[new c.NumberProperty("textWidth","textWidth",!0,!1,[this,"textWidth"],40),new c.NumberProperty("textHeight","textHeight",!0,!1,[this,"textHeight"],30),new c.NumberProperty("textTop","textTop",!0,!1,[this,"textTop"],10),new c.NumberProperty("textRight","textRight",!0,!1,[this,"textRight"],10),new c.NumberProperty("lineHeight","lineHeight",!0,!1,[this,"lineHeight"],30),new c.StringProperty("fontFamily","fontFamily",!0,!1,[this,"fontFamily"],"Microsoft YaHei"),new c.EnumProperty("textAlign",p.OlDivText.description.textAlignType,!0,!1,[this,"textAlign"],p.OlDivText.textAlignTypeEnums,"center"),new c.EnumProperty("fontStyle",p.OlDivText.description.fontStyleType,!0,!1,[this,"fontStyle"],p.OlDivText.fontStyleTypeEnums,"normal"),new c.EnumProperty("",p.OlDivText.description.textDecorationType,!0,!1,[this,"textDecoration"],p.OlDivText.textDecorationTypeEnums,"none"),new c.ColorProperty("","",!0,!1,[this,"textColor"],[1,1,0,1]),new c.ColorProperty("","",!0,!1,[this,"textStrokeColor"],[1,1,1,1]),new c.NumberProperty("","",!0,!1,[this,"textStrokeWidth"],0),new c.NumberProperty("fontSize","fontSize",!0,!1,[this,"fontSize"],16),new c.StringProperty("fontWeight","fontWeight",!0,!1,[this,"fontWeight"],"normal"),new c.NumberProperty("letterSpacing","letterSpacing",!0,!1,[this,"letterSpacing"],0)])])],!1)},n=e,e.type=n.register("OlCompass",n,{chsName:"OlCompass",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlCompass"}),e.defaults=o(o({},c.ESSceneObject.defaults),{textRight:10,textTop:10,textWidth:40,textHeight:30,rotation:0,imgRight:10,imgTop:30,imgWidth:40,imgHeight:50}),e}(c.ESSceneObject);e.OlCompass=f,function(t){t.createDefaultProps=function(){return o(o({},c.ESSceneObject.createDefaultProps()),{show:void 0,rotation:void 0,text:void 0,zIndex:void 0,imgPositions:(0,u.reactPosition2Ds)(void 0),textPosition:(0,h.reactArrayWithUndefined)(void 0),textTop:void 0,textRight:void 0,textWidth:void 0,textHeight:void 0,textAlign:void 0,fontStyle:void 0,fontSize:void 0,fontWeight:void 0,fontFamily:void 0,textDecoration:void 0,textColor:(0,h.reactArrayWithUndefined)(void 0),letterSpacing:void 0,textStrokeColor:(0,h.reactArrayWithUndefined)(void 0),textStrokeWidth:void 0,lineHeight:void 0,uri:void 0,imgWidth:void 0,imgHeight:void 0,imgTop:void 0,imgRight:void 0,borderRadius:(0,h.reactArrayWithUndefined)(void 0),borderWidth:void 0,borderColor:(0,h.reactArrayWithUndefined)(void 0),borderStyle:void 0})}}(f=e.OlCompass||(e.OlCompass={})),e.OlCompass=f,(0,h.extendClassProps)(f.prototype,f.createDefaultProps)},59233:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlCompass=void 0;var o=n(43938),s=n(57646),a=n(43938),l=n(19239),u=n(87442),c=n(87637),h=n(36281),p=function(t){return t?"rgba(".concat(255*t[0],",").concat(255*t[1],",").concat(255*t[2],",").concat(t[3],")"):"rgba(255, 255, 255 , 1)"},d=function(t){function e(e,n){var i=t.call(this,e,n)||this,u=n.map;if(!u)return console.warn("map is undefined!"),i;var c=i.disposeVar((0,l.react)(10)),d=i.disposeVar((0,l.react)(10)),f=function(){var t=e.imgRight,n=e.imgTop,i=e.imgWidth,r=e.imgHeight,o=e.rotation,a=(0,h.getCompassCenter)(null!=t?t:10,null!=n?n:30,null!=i?i:40,null!=r?r:50),l=(0,h.getCompassCorners)(null!=t?t:10,null!=n?n:30,null!=i?i:40,null!=r?r:50),c=(0,h.getRotatedCompassCorners)(a,l,null!=o?o:0);try{var p=u.getSize();if(!p)return void console.warn("map size is undefined!");e.imgPositions=c.map((function(t){var e=[p[0]-t[0],t[1]],n=u.getCoordinateFromPixel(e),i=(0,s.toLonLat)(n);return[i[0],i[1]]}))}catch(t){console.error(" error: ",t)}};f();var g=i.disposeVar((0,l.createNextAnimateFrameEvent)(e.imgWidthChanged,e.imgHeightChanged,e.imgTopChanged,e.imgRightChanged,e.rotationChanged));i.dispose(g.disposableOn(f));var y=function(){var t=e.textRight,n=e.textTop,i=e.textWidth,r=e.textHeight,o=e.rotation,a=e.imgRight,l=e.imgTop,p=e.imgWidth,f=e.imgHeight,g=(0,h.getCompassCenter)(null!=a?a:10,null!=l?l:30,null!=p?p:40,null!=f?f:50),y=(0,h.getNorthCenter)(null!=t?t:10,null!=n?n:10,null!=i?i:40,null!=r?r:30),_=(0,h.getRotatedNorthCenter)(g,y,null!=o?o:0),m=(0,h.getRotatedNorthRightTop)(_,null!=i?i:40,null!=r?r:30);d.value=m[0],c.value=m[1];try{var v=u.getSize();if(!v)return void console.warn("map size is undefined!");var b=[v[0]-_[0],_[1]],x=u.getCoordinateFromPixel(b),w=(0,s.toLonLat)(x);e.textPosition=[w[0],w[1]]}catch(t){console.error(" error: ",t)}};y();var _=i.disposeVar((0,l.createNextAnimateFrameEvent)(e.textTopChanged,e.textRightChanged,e.textWidthChanged,e.textHeightChanged,e.imgWidthChanged,e.imgHeightChanged,e.imgTopChanged,e.imgRightChanged,e.rotationChanged));i.dispose(_.disposableOn(y)),i.dispose(e.getPositionsEvent.disposableOn((function(){f(),y()})));var m=i.disposeVar(new o.CustomDiv);return i.dispose(e.components.disposableAdd(m)),m.instanceClass=function(t){function n(n){var i=t.call(this)||this;i._container=n;var r=document.createElement("div");i._container.appendChild(r),i.dispose((function(){i._container.removeChild(r)}));var o=i.disposeVar(a.ESSceneObject.context.createEvnStrReact([e,"uri"],"${utility-xe2-plugin-script-dir}/xe2-assets/utility-xe2-plugin/images/compass.png"));i.dispose(e.showChanged.disposableOn((function(t){r.style.display=t?"block":"none"})));var s=function(){var t,n,i,s,a=e.imgRight,l=e.imgTop,u=e.imgWidth,c=e.imgHeight,h=e.rotation,d='<img src="'.concat(o.value,'" style="width: 100%;height: 100%;">');r.style.zIndex="".concat((null!==(t=e.zIndex)&&void 0!==t?t:0).toString()),r.style.position="absolute",r.style.width="".concat(null!=u?u:40,"px"),r.style.height="".concat(null!=c?c:50,"px"),r.style.top="".concat(null!=l?l:30,"px"),r.style.right="".concat(null!=a?a:10,"px"),r.style.pointerEvents="none",r.style.userSelect="none",r.style.overflow="hidden",r.style.transform="rotate(".concat(null!=h?h:0,"deg)"),r.style.transformOrigin="center center",r.style.borderStyle=null!==(n=e.borderStyle)&&void 0!==n?n:"solid",r.style.borderRadius=(s=e.borderRadius)?"".concat(s[0],"px ").concat(s[1],"px ").concat(s[2],"px ").concat(s[3],"px"):"0px",r.style.borderWidth="".concat(null!==(i=e.borderWidth)&&void 0!==i?i:0,"px"),r.style.borderColor=p(e.borderColor),r.innerHTML=d,f()};s();var u=i.disposeVar((0,l.createNextAnimateFrameEvent)(o.changed,e.zIndexChanged,e.imgWidthChanged,e.imgHeightChanged,e.borderRadiusChanged,e.borderWidthChanged,e.borderColorChanged,e.borderStyleChanged,e.imgTopChanged,e.imgRightChanged,e.rotationChanged));i.dispose(u.disposableOn(s));var h=document.createElement("div");i._container.appendChild(h),i.dispose((function(){i._container.removeChild(h)})),i.dispose(e.showChanged.disposableOn((function(t){h.style.display=t?"block":"none"})));var g=function(){var t,n,i,r,o,s,a,l,u,f,g,y,_,m,v=e.textWidth,b=e.textHeight,x="\n                            width: ".concat(null!=v?v:40,"px;\n                            height: ").concat(null!=b?b:30,"px;\n                            line-height: ").concat(null!==(t=e.lineHeight)&&void 0!==t?t:30,"px;\n                            text-align: ").concat(null!==(n=e.textAlign)&&void 0!==n?n:"center",";\n                            font-style: ").concat(null!==(i=e.fontStyle)&&void 0!==i?i:"normal",";\n                            font-size: ").concat(null!==(r=e.fontSize)&&void 0!==r?r:16,"px;\n                            font-weight: ").concat(null!==(o=e.fontWeight)&&void 0!==o?o:"normal",";\n                            font-family: ").concat(null!==(s=e.fontFamily)&&void 0!==s?s:"sans-serif",";\n                            text-decoration: ").concat(null!==(a=e.textDecoration)&&void 0!==a?a:"none",";\n                            color: ").concat(p(null!==(l=e.textColor)&&void 0!==l?l:[1,1,0,1]),";\n                            letter-spacing: ").concat(null!==(u=e.letterSpacing)&&void 0!==u?u:0,"px;\n                            text-shadow: 0 0 ").concat(null!==(f=e.textStrokeWidth)&&void 0!==f?f:0,"px ").concat(p(e.textStrokeColor),";\n                        "),w='<div style="'.concat(x,'">').concat(null!==(g=e.text)&&void 0!==g?g:"","</div>");h.style.zIndex="".concat((null!==(y=e.zIndex)&&void 0!==y?y:0).toString()),h.style.position="absolute",h.style.top="".concat(null!==(_=c.value)&&void 0!==_?_:10,"px"),h.style.right="".concat(null!==(m=d.value)&&void 0!==m?m:10,"px"),h.style.pointerEvents="none",h.style.userSelect="none",h.innerHTML=w};return g(),u=i.disposeVar((0,l.createNextAnimateFrameEvent)(d.changed,c.changed,e.textChanged,e.textWidthChanged,e.textHeightChanged,e.lineHeightChanged,e.fontStyleChanged,e.fontSizeChanged,e.fontWeightChanged,e.fontFamilyChanged,e.textDecorationChanged,e.textColorChanged,e.letterSpacingChanged,e.textStrokeColorChanged,e.textStrokeWidthChanged,e.zIndexChanged)),i.dispose(u.disposableOn(g)),i}return r(n,t),n}(l.Destroyable),i}var n;return r(e,t),n=e,e.type=n.register(c.OlCompass.type,n),e}(u.OpenLayersObject);e.OlOlCompass=d},36281:function(t,e){"use strict";var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s};function i(t,e,n,i){return[t+.5*n,e+.5*i]}function r(t,e,n,i,r){var o=n-t,s=i-e,a=-r*Math.PI/180;return[o*Math.cos(a)-s*Math.sin(a)+t,o*Math.sin(a)+s*Math.cos(a)+e]}Object.defineProperty(e,"__esModule",{value:!0}),e.getRotatedCompassCorners=e.getRotatedNorthRightTop=e.getRotatedNorthCenter=e.getCompassCorners=e.getRotatedPos=e.getNorthCenter=e.getCompassCenter=e.getCenter=void 0,e.getCenter=i,e.getCompassCenter=function(t,e,n,r){return i(t,e,n,r)},e.getNorthCenter=function(t,e,n,r){return i(t,e,n,r)},e.getRotatedPos=r,e.getCompassCorners=function(t,e,n,i){return[[t+n,e],[t,e],[t,e+i],[t+n,e+i]]},e.getRotatedNorthCenter=function(t,e,i){var o=n(t,2),s=o[0],a=o[1],l=n(e,2);return r(s,a,l[0],l[1],i)},e.getRotatedNorthRightTop=function(t,e,i){var r=n(t,2);return[r[0]-.5*e,r[1]-.5*i]},e.getRotatedCompassCorners=function(t,e,i){var o=n(t,2),s=o[0],a=o[1];return e.map((function(t){var e=n(t,2),o=e[0],l=e[1];return r(s,a,o,l,i)}))}},79652:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(87637),e),r(n(59233),e)},52043:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlDivImage=void 0;var l=n(43938),u=n(19239),c=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n._flyToEvent=n.disposeVar(new u.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlDivImage"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},e.prototype.getProperties=function(e){var n=this;return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new l.GroupProperty("","",[new l.FunctionProperty("","",["number"],(function(t){return n.flyTo(t)}),[1e3]),new l.BooleanProperty("",".",!0,!1,[this,"show"],!0),new l.Number2Property("","",!0,!1,[this,"position"]),new l.BooleanProperty("","",!0,!1,[this,"editing"],!1),new l.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new l.GroupProperty("","",[new l.UriProperty("","",!0,!1,[this,"uri"],"${scene-manager-script-dir}/xe2-assets/scene-manager/images/location.png"),new l.Number4Property("borderRadius","borderRadius",!0,!1,[this,"borderRadius"],[0,0,0,0]),new l.StringProperty("border","border",!0,!1,[this,"border"],"0px solid #0099ff"),new l.NumberProperty("imgWidth","imgWidth",!0,!1,[this,"imgWidth"],150),new l.NumberProperty("imgHeight","imgHeight",!0,!1,[this,"imgHeight"],150)]),new l.GroupProperty("GeoCustomDivPoi","GeoCustomDivPoi",[new l.Number4Property("",".",!0,!1,[this,"originRatioAndOffset"],[.5,1,0,0]),new l.NumberProperty("","",!0,!1,[this,"opacity"],1),new l.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"],0)])])],!1)},n=e,e.type=n.register("OlDivImage",n,{chsName:"OlDivImage",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlDivImage"}),e}(l.ESSceneObject);e.OlDivImage=c,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,position:(0,u.reactArrayWithUndefined)(void 0),editing:void 0,allowPicking:void 0,zIndex:void 0,uri:void 0,imgWidth:void 0,imgHeight:void 0,border:void 0,borderRadius:(0,u.reactArrayWithUndefined)(void 0),opacity:void 0,originRatioAndOffset:(0,u.reactArrayWithUndefined)(void 0)})}}(c=e.OlDivImage||(e.OlDivImage={})),e.OlDivImage=c,(0,u.extendClassProps)(c.prototype,c.createDefaultProps)},64372:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlDivImage=void 0;var a=n(43938),l=n(43938),u=n(19239),c=n(87442),h=n(40580),p=n(52043),d=n(56528),f=n(57646),g=function(t){function e(e,n){var i=t.call(this,e,n)||this,c=n.map;if(!c)return console.warn("map is undefined!"),i;var p=function(t){function n(n,i,r){var o=t.call(this)||this;o._container=n;var s=document.createElement("div");o._container.appendChild(s),o.dispose((function(){o._container.removeChild(s)}));var a=o.disposeVar(l.ESSceneObject.context.createEvnStrReact([e,"uri"],"${scene-manager-script-dir}/xe2-assets/scene-manager/images/location.png")),c=function(){var t,n,i,r,o,l="\n                        width: ".concat(null!==(t=e.imgWidth)&&void 0!==t?t:150,"px;\n                        height: ").concat(null!==(n=e.imgHeight)&&void 0!==n?n:150,"px;\n                        border-radius: ").concat((o=e.borderRadius,o?"".concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px"):"0px"),";\n                        border: ").concat(null!==(i=e.border)&&void 0!==i?i:"0px solid #0099ff",";\n                    "),u='<img src="'.concat(a.value,'" style="').concat(l,'">');s.style.zIndex="".concat(null!==(r=e.zIndex)&&void 0!==r?r:0),s.innerHTML=u};c();var h=o.disposeVar((0,u.createNextAnimateFrameEvent)(e.imgWidthChanged,e.imgHeightChanged,e.borderChanged,e.borderRadiusChanged,e.zIndexChanged,a.changed));return o.dispose(h.disposableOn(c)),o}return r(n,t),n}(u.Destroyable),g=i.disposeVar(new a.GeoCustomDivPoi);n.add(g),i.dispose((function(){return n.delete(g)})),i.dispose((0,u.track)([g,"show"],[e,"show"])),i.dispose((0,u.track)([g,"allowPicking"],[e,"allowPicking"])),i.dispose((0,u.track)([g,"opacity"],[e,"opacity"])),i.dispose((0,u.track)([g,"originRatioAndOffset"],[e,"originRatioAndOffset"])),g.instanceClass=p;var y=function(){if(e.position&&!(e.position.length<1)){var t=s([],o(e.position),!1);g.position=[t[0],t[1],0]}};y(),i.dispose(e.positionChanged.disposableOn(y));var _=i.disposeVar((0,u.createNextAnimateFrameEvent)(e.editingChanged));return i.dispose((0,h.registerOlPointEditor)(_,e,n)),i.dispose(e.flyToEvent.disposableOn((function(t){if(e.position){var n=(0,f.fromLonLat)(e.position),i=new d.Point(n),r=c.getView();r.fit(i,{duration:null!=t?t:1e3,padding:[100,100,100,100],minResolution:r.getResolution()})}}))),i}var n;return r(e,t),n=e,e.type=n.register(p.OlDivImage.type,n),e}(c.OpenLayersObject);e.OlOlDivImage=g},42767:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(52043),e),r(n(64372),e)},5902:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlDivText=void 0;var l=n(43938),u=n(43938),c=n(19239),h=function(t){function e(e,n,i){var r=t.call(this)||this;return r._container=e,r}return r(e,t),e.prototype.getHeight=function(){return 30},e}(c.Destroyable),p=function(t,e){return t?"rgba(".concat(255*t[0],",").concat(255*t[1],",").concat(255*t[2],",").concat(t[3],")"):e?"rgba(".concat(255*e[0],",").concat(255*e[1],",").concat(255*e[2],",").concat(e[3],")"):"rgba(255, 255, 255 , 1)"},d=function(t){function e(n){var i=t.call(this,n)||this;i._pickedEvent=i.disposeVar(new c.Event),i._flyToEvent=i.disposeVar(new c.Event),i._customDivPoi=i.disposeVar(new l.GeoCustomDivPoi);var o=i,d=i._customDivPoi;i.dispose(i.components.disposableAdd(d)),i.dispose((0,c.track)([d,"show"],[o,"show"])),i.dispose((0,c.track)([d,"opacity"],[o,"opacity"])),i.dispose((0,c.track)([d,"originRatioAndOffset"],[o,"originRatioAndOffset"])),i.dispose((0,c.track)([d,"allowPicking"],[o,"allowPicking"])),i.dispose(d.pickedEvent.disposableOn((function(t){var e;null!==(e=o.allowPicking)&&void 0!==e&&e&&o.pickedEvent.emit(new u.SceneObjectPickedInfo(o,t))})));var f=function(){if(o.position&&!(o.position.length<1)){var t=a([],s(o.position),!1);d.position=[t[0],t[1],0]}};f(),i.dispose(o.positionChanged.disposableOn(f));var g=function(t){function n(n,i,r){var s=t.call(this,n,i,r)||this,a=document.createElement("div");s._container.appendChild(a),s.dispose((function(){s._container.removeChild(a)})),a.style.pointerEvents="all";var l=function(){var t,n,i,r,s,l,u,c,h,d,f,g;a.style.width="".concat(o.divWidth?o.divWidth+"px":"auto"),a.style.textAlign="".concat(null!==(t=o.textAlign)&&void 0!==t?t:"center"),a.innerText="".concat(null!==(n=o.text)&&void 0!==n?n:""),a.style.webkitTextStrokeWidth="".concat(null!==(i=o.textStrokeWidth)&&void 0!==i?i:0,"px"),a.style.webkitTextStrokeColor="".concat(p(o.textStrokeColor,e.defaultValue.strokeColor)),a.style.fontStyle="".concat(null!==(r=o.fontStyle)&&void 0!==r?r:"normal"),a.style.fontSize="".concat(null!==(s=o.fontSize)&&void 0!==s?s:14,"px"),a.style.fontFamily="".concat(null!==(l=o.fontFamily)&&void 0!==l?l:"Microsoft YaHei"),a.style.textDecoration="".concat(null!==(u=o.textDecoration)&&void 0!==u?u:"none"),a.style.color="".concat(p(o.fontColor,[0,0,0,1])),a.style.letterSpacing="".concat(null!==(c=o.letterSpacing)&&void 0!==c?c:0,"px"),a.style.lineHeight="".concat(null!==(h=o.lineHeight)&&void 0!==h?h:20,"px"),a.style.padding="".concat((g=o.padding)?"".concat(g[0],"px ").concat(g[1],"px ").concat(g[2],"px ").concat(g[3],"px"):"5px"),a.style.fontWeight="".concat(null!==(d=o.fontWeight)&&void 0!==d?d:200);var y,_="".concat(p(o.textShadowColor))+" "+"".concat((y=null!==(f=o.textShadowOffset)&&void 0!==f?f:e.defaultValue.textShadowOffset,"".concat(y[0],"px ").concat(y[1],"px")));a.style.textShadow=_,a.style.whiteSpace="nowrap",a.style.resize="none"};l();var h=s.disposeVar((0,c.createNextAnimateFrameEvent)(o.textAlignChanged,o.fontStyleChanged,o.fontSizeChanged,o.fontWeightChanged,o.fontFamilyChanged,o.textDecorationChanged,o.fontColorChanged,o.letterSpacingChanged,o.lineHeightChanged,o.paddingChanged,o.textChanged,o.divWidthChanged,o.textStrokeColorChanged,o.textStrokeWidthChanged,o.textShadowColorChanged,o.textShadowOffsetChanged));s.dispose(h.disposableOn(l));var d,f=null,g=!1;return a.onclick=function(t){g||(f&&clearTimeout(f),f=setTimeout((function(){t.altKey?i.pickFromDiv(a,new u.AttachedPickedInfo({type:"pointerClick.clickEvent.altClick",e:t})):i.pickFromDiv(a,new u.AttachedPickedInfo({type:"viewerPicking",e:t}))}),300))},a.ondblclick=function(t){var e,n,r,s,c,h,y,_,m;f&&clearTimeout(f),g=!0,i.pickFromDiv(a,new u.AttachedPickedInfo({type:"viewerPicking",e:t}));var v="\n                                width : ".concat(o.divWidth?o.divWidth+"px":"auto",";\n                                height:").concat(o.text&&d?d:"20px",";\n                                text-align:").concat(null!==(e=o.textAlign)&&void 0!==e?e:"center",";\n                                line-height:").concat(null!==(n=o.lineHeight)&&void 0!==n?n:20,"px;\n                                color:").concat(p(o.fontColor,[0,0,0,1]),";\n                                font-size:").concat(null!==(r=o.fontSize)&&void 0!==r?r:14,"px;\n                                font-style:").concat(null!==(s=o.fontStyle)&&void 0!==s?s:"normal",";\n                                font-weight:").concat(null!==(c=o.fontWeight)&&void 0!==c?c:200,";\n                                font-family:").concat(null!==(h=o.fontFamily)&&void 0!==h?h:"Microsoft YaHei",";\n                                text-decoration:").concat(null!==(y=o.textDecoration)&&void 0!==y?y:"none",";\n                                letter-spacing:").concat(null!==(_=o.letterSpacing)&&void 0!==_?_:0,"px;\n                                white-space : nowrap;\n                                resize:none;\n                                "),b='<textarea style="'.concat(v,'">').concat(null!==(m=o.text)&&void 0!==m?m:"","</textarea>");a.innerHTML=b;var x=a.querySelector("textarea");x&&(x.addEventListener("input",(function(){x.style.height="20px",x.style.height=x.scrollHeight+"px",d=x.scrollHeight+"px"})),x.select(),x.onblur=function(){var t;g=!1,o.text===x.value?l():o.text=null!==(t=x.value)&&void 0!==t?t:"",o.editing&&(o.editing=!1)})},s}return r(n,t),n}(h);return d.instanceClass=g,i}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlDivText"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},Object.defineProperty(e.prototype,"customDivPoi",{get:function(){return this._customDivPoi},enumerable:!1,configurable:!0}),e.prototype.getHeight=function(){var t=30;return this.customDivPoi.update((function(e,n,i){t=e.getHeight()})),t},e.prototype.getProperties=function(n){var i=this;return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new u.GroupProperty("","",[new u.FunctionProperty("","",["number"],(function(t){return i.flyTo(t)}),[1e3]),new u.FunctionProperty("","",[],(function(){console.log(i.getHeight())}),[]),new u.BooleanProperty("",".",!0,!1,[this,"show"],!0),new u.Number2Property("","",!0,!1,[this,"position"]),new u.BooleanProperty("","",!0,!1,[this,"editing"],!1),new u.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new u.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new u.GroupProperty("","",[new u.NumberProperty("divWidth","divWidth",!0,!1,[this,"divWidth"],200),new u.LongStringProperty("text","text",!0,!1,[this,"text"],""),new u.ColorProperty("","",!0,!1,[this,"textShadowColor"],[1,0,0,1]),new u.Number2Property("",",[X,Y]",!0,!1,[this,"textShadowOffset"],[0,0]),new u.EnumProperty("textAlign",e.description.textAlignType,!0,!1,[this,"textAlign"],e.textAlignTypeEnums,"center"),new u.EnumProperty("fontStyle",e.description.fontStyleType,!0,!1,[this,"fontStyle"],e.fontStyleTypeEnums,"normal"),new u.EnumProperty("",e.description.textDecorationType,!0,!1,[this,"textDecoration"],e.textDecorationTypeEnums,"none"),new u.NumberProperty("fontWeight","fontWeight",!0,!1,[this,"fontWeight"],200),new u.StringProperty("fontFamily","fontFamily",!0,!1,[this,"fontFamily"],"Microsoft YaHei"),new u.ColorProperty("","",!0,!1,[this,"fontColor"],[0,0,0,1]),new u.ColorProperty("","",!0,!1,[this,"textStrokeColor"],[1,0,0,1]),new u.NumberProperty("","",!0,!1,[this,"textStrokeWidth"],0),new u.Number4Property("padding","padding",!0,!1,[this,"padding"],[5,5,5,5]),new u.NumberProperty("fontSize","fontSize",!0,!1,[this,"fontSize"],14),new u.NumberProperty("letterSpacing","letterSpacing",!0,!1,[this,"letterSpacing"],0),new u.NumberProperty("lineHeight","lineHeight",!0,!1,[this,"lineHeight"],20)]),new u.GroupProperty("GeoCustomDivPoi","GeoCustomDivPoi",[new u.Number4Property("",".",!0,!1,[this,"originRatioAndOffset"],[.5,1,0,0]),new u.NumberProperty("","",!0,!1,[this,"opacity"],1)])])],!1)},n=e,e.type=n.register("OlDivText",n,{chsName:"OlDivText",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlDivText"}),e.fontStyleTypeEnums=[["normal","normal"],["italic","italic"],["oblique","oblique"],["inherit","inherit"]],e.textAlignTypeEnums=[["left","left"],["right","right"],["center","center"],["justify","justify"],["inherit","inherit"]],e.textDecorationTypeEnums=[["none","none"],["underline","underline"],["overline","overline"],["line-through","line-through"],["blink","blink"],["inherit","inherit"]],e.description={fontStyleType:"normal|italic|oblique|inherit,",textAlignType:"left|right|center|justify|inherit,, text-align ",textDecorationType:"none|underline|overline|line-through|blink|inherit,, ,  text - decoration "},e.defaultValue={textShadowColor:[0,0,0,1],textShadowOffset:[0,0],strokeColor:[0,0,0,1]},e}(u.ESSceneObject);e.OlDivText=d,function(t){t.createDefaultProps=function(){return o(o({},u.ESSceneObject.createDefaultProps()),{show:void 0,position:(0,c.reactArrayWithUndefined)(void 0),editing:void 0,allowPicking:void 0,zIndex:void 0,divWidth:void 0,textAlign:void 0,fontStyle:void 0,fontSize:void 0,fontWeight:void 0,fontFamily:void 0,textDecoration:void 0,fontColor:(0,c.reactArrayWithUndefined)(void 0),letterSpacing:void 0,lineHeight:void 0,padding:(0,c.reactArrayWithUndefined)(void 0),text:void 0,textStrokeColor:(0,c.reactArrayWithUndefined)(void 0),textStrokeWidth:void 0,textShadowOffset:(0,c.reactArrayWithUndefined)(void 0),textShadowColor:(0,c.reactArrayWithUndefined)(void 0),opacity:void 0,originRatioAndOffset:(0,c.reactArrayWithUndefined)(void 0)})}}(d=e.OlDivText||(e.OlDivText={})),e.OlDivText=d,(0,c.extendClassProps)(d.prototype,d.createDefaultProps)},77347:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlDivText=void 0;var o=n(56528),s=n(57646),a=n(19239),l=n(87442),u=n(40580),c=n(5902),h=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=n.map;if(!r)return console.warn("map is undefined!"),i;var l=i.disposeVar((0,a.createNextAnimateFrameEvent)(e.editingChanged));return i.dispose((0,u.registerOlPointEditor)(l,e,n,{editingPropertyName:"editing",positionPropertyName:"position"})),i.dispose(e.flyToEvent.disposableOn((function(t){if(e.position){var n=(0,s.fromLonLat)(e.position),i=new o.Point(n),a=r.getView();a.fit(i,{duration:null!=t?t:1e3,padding:[100,100,100,100],minResolution:a.getResolution()})}}))),i}var n;return r(e,t),n=e,e.type=n.register(c.OlDivText.type,n),e}(l.OpenLayersObject);e.OlOlDivText=h},3279:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(5902),e),r(n(77347),e)},92763:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.OlGeoCanvasPoi=void 0;var s=n(43938),a=n(87442),l=n(78353),u=n(19239),c=n(10070),h=n(40580),p=function(t){function e(e,n,i,r,s){var a=t.call(this)||this,u=a.disposeVar(new l.OlCanvasPoi(n,i));a.disposeVar(s(u.canvasPoi));var h=a.disposeVar((0,c.createNextAnimateFrameEvent)(e.showChanged,e.positionChanged)),p=function(){var t;if(u.show=(null===(t=e.show)||void 0===t||t)&&!!e.position,e.position){var n=o(e.position,3),i=n[0],r=n[1];n[2],u.position=[i,r]}};return p(),a.dispose(h.disposableOn(p)),a.dispose(e.flyToEvent.disposableOn((function(){e.position?alert(""):console.warn("GeoPoint")}))),a}return r(e,t),e}(u.Destroyable),d=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=n.map;if(!r)return console.warn("map is undefined!"),i;var s=n.poiContext;if(!s)return i;i.disposeVar(new c.ObjResettingWithEvent(e.canvasPoiClassAndCreateFuncChanged,(function(){if(e.canvasPoiClassAndCreateFunc){var t=o(e.canvasPoiClassAndCreateFunc,2),n=t[0],i=t[1];return new p(e,n,s,r,i)}})));var a=i.disposeVar((0,c.createNextAnimateFrameEvent)(e.positionEditingChanged));return i.dispose((0,h.registerOlPointEditor)(a,e,n,{editingPropertyName:"positionEditing",positionPropertyName:"position",positionComponentsNum:3})),i}var n;return r(e,t),n=e,e.type=n.register(s.GeoCanvasPoi.type,n),e}(a.OpenLayersObject);e.OlGeoCanvasPoi=d},49353:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlGeoCoordinatesEditor=void 0;var o=n(43938),s=n(87442),a=n(40580),l=function(t){function e(e,n){var i=t.call(this,e,n)||this;return n.map?n.interaction?(i.dispose((0,a.registerOlPointEditor)(e.enabledChanged,e,n,{editingPropertyName:"enabled",positionPropertyName:"position",positionComponentsNum:3})),i):(console.warn("OlGeoCoordinatesPicker error!"),i):(console.warn("OlGeoCoordinatesPicker error! viewer is undefined!"),i)}var n;return r(e,t),n=e,e.type=n.register(o.GeoCoordinatesEditor.type,n),e}(s.OpenLayersObject);e.OlGeoCoordinatesEditor=l},71208:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},35667:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.OlGeoCoordinatesPicker=void 0;var l=n(43938),u=n(87442),c=n(57646),h=n(10070);function p(t,e){var n=t.getEventPixel(e),i=t.getCoordinateFromPixel(n);return(0,c.toLonLat)(i)}var d=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=n.map;if(!r)return console.warn("OlGeoCoordinatesPicker error! viewer is undefined!"),i;var l,u=n.interaction;if(!u)return console.warn("OlGeoCoordinatesPicker error!"),i;i._createMainCoordinates(n,e);var c=i.disposeVar((0,h.createNextAnimateFrameWithStartValues)((function(){})));i.dispose(u.pointerMoveEvent.disposableOn((function(t){l=t,c.restartIfNotRunning()})));var d=i.disposeVar((0,h.createProcessingFromAsyncFunc)((function(t){return o(i,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return t.disposer.dispose(c.completeEvent.disposableOn((function(){if(l){var t=a(p(r,l),2),n=t[0],i=t[1];e.position=[n,i,0]}}))),[4,(0,h.step)(t,(function(t){return new Promise((function(n,i){t.disposer.dispose(i),t.disposer.dispose(h.DomElementEvent.on(u.pointerClick.clickEvent,(function(t){if(0===t.button){c.isRunning&&c.cancel();var i=a(p(r,t),2),o=i[0],s=i[1];e.position=[o,s,0],e.overEvent.emit(),e.enabled=!1,n()}})))}))}))];case 1:return n.sent(),[2]}}))}))}))),f=function(){e.enabled?d.restart():d.isRunning&&d.cancel()};return f(),i.dispose(e.enabledChanged.disposableOn(f)),i}var n;return r(e,t),e.prototype._createMainCoordinates=function(t,e){var n,i=this.disposeVar(new l.GeoCanvasPointPoi);return t.add(i),this.dispose((function(){return t.delete(i)})),(n=function(){i.show=e.enabled&&!!e.position})(),this.dispose(e.enabledChanged.disposableOn(n)),this.dispose(e.positionChanged.disposableOn(n)),(n=function(){e.position&&(i.position=e.position)})(),this.dispose(e.positionChanged.disposableOn(n)),i},n=e,e.type=n.register(l.GeoCoordinatesPicker.type,n),e}(u.OpenLayersObject);e.OlGeoCoordinatesPicker=d},35421:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlGeoCustomDivPoi=void 0;var a=n(65818),l=s(n(32126)),u=n(57646),c=n(43938),h=n(19239),p=n(10070),d=n(87442),f=n(40580),g=function(t){function e(e,n){var i,r=this;r=t.call(this,e,n)||this;var s=n.map;if(!s)return console.warn("map is undefined!"),r;var c=r.disposeVar(new p.PosFloatDiv);n.overlayerContainer||console.warn("olViewer.overlayerContainer"),null===(i=n.overlayerContainer)||void 0===i||i.appendChild(c.element),r.dispose((function(){var t;return null===(t=n.overlayerContainer)||void 0===t?void 0:t.removeChild(c.element)}));var d=r.disposeVar(new p.ObjResettingWithEvent(e.instanceClassChanged,(function(){var t=e.instanceClass;if(t)return new t(c.contentDiv,e,n)}))),g=e._updateEvent;r.dispose(g.disposableOn((function(t){if(d.obj)try{t(d.obj,e,n)}catch(t){console.error("CustomDiv update error! ".concat(t))}})));var y=function(){var t;c.opacity=null!==(t=e.opacity)&&void 0!==t?t:1};y(),r.dispose(e.opacityChanged.disposableOn(y));var _=function(){var t,n=o(null!==(t=e.originRatioAndOffset)&&void 0!==t?t:[.5,1,0,0],4),i=n[0],r=n[1],s=n[2],a=n[3];c.originRatioX=i,c.originRatioY=r,c.originOffsetX=s,c.originOffsetY=a};_(),r.dispose(e.originRatioAndOffsetChanged.disposableOn(_));var m=function(){var t;c.show=(null===(t=e.show)||void 0===t||t)&&!!e.position};m(),r.dispose(e.positionChanged.disposableOn(m)),r.dispose(e.showChanged.disposableOn(m));var v=(0,a.listen)(s,l.default.POSTRENDER,(function(){if(e.position){var t=o(e.position,2),n=t[0],i=t[1],r=(0,u.fromLonLat)([n,i]),a=s.getPixelFromCoordinate(r),l=o(a,2),h=l[0],p=l[1];c.winPos=[h,p]}}));r.dispose((function(){return(0,a.unlistenByKey)(v)})),r.dispose(e.flyToEvent.disposableOn((function(t){e.position||console.warn("GeoPoint")})));var b=r.disposeVar((0,h.createNextAnimateFrameEvent)(e.editingChanged));return r.dispose((0,f.registerOlPointEditor)(b,e,n,{positionComponentsNum:3})),r}var n;return r(e,t),n=e,e.type=n.register(c.GeoCustomDivPoi.type,n),e}(d.OpenLayersObject);e.OlGeoCustomDivPoi=g},22846:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlGeoImageModel=void 0;var o=n(43938),s=n(87442),a=n(43938),l=n(19239);var u=function(t){function e(e,n){var i=t.call(this,e,n)||this;if(!n.map)return console.warn("map is undefined!"),i;if(!n.poiContext)return i;var s=i.disposeVar(new o.GeoCustomDivPoi);return n.add(s),i.dispose((function(){return n.delete(s)})),i.dispose((0,l.track)([s,"show"],[e,"show"])),i.dispose((0,l.track)([s,"allowPicking"],[e,"allowPicking"])),i.dispose((0,l.bind)([s,"position"],[e,"position"])),i.dispose((0,l.bind)([s,"editing"],[e,"positionEditing"])),i.dispose((0,l.bind)([s,"originRatioAndOffset"],[e,"originRatioAndOffset"])),i.dispose(s.pickedEvent.disposableOn((function(t){e.pickedEvent.emit(new a.SceneObjectPickedInfo(e,t))}))),s.instanceClass=function(t){return function(e){function n(n,i,r){var s,a,u=e.call(this)||this,c=document.createElement("div");n.appendChild(c),u.dispose((function(){return n.removeChild(c)})),c.style.zIndex="100",(a=function(){var t;c.style.display=null===(t=i.show)||void 0===t||t?"block":"none"})(),u.dispose(i.showChanged.disposableOn(a)),s=document.createElement("img"),c.appendChild(s),s.src="".concat(o.SceneObject.context.getStrFromEnv("${scene-manager-script-dir}/xe2-assets/scene-manager/images/location.png")),u.dispose((function(){return n.removeChild(s)})),(a=function(){var e,n,i,r;s.style.width=null!==(e="".concat(t.pixelSize,"px"))&&void 0!==e?e:"50px";var o=null!==(n=t.rotation)&&void 0!==n?n:[0,0,0];s.style.transform="scale(".concat(null!==(i=t.scale)&&void 0!==i?i:1,") rotateZ(").concat(o[0],"deg) rotateX(").concat(o[1],"deg) rotateY(").concat(o[2],"deg)");var a=null!==(r=t.color)&&void 0!==r?r:[1,1,1,1];s.style.filter="drop-shadow(0 0 rgba(".concat(255*a[0],",").concat(255*a[1],",").concat(255*a[2],",").concat(a[3],"))")})();var h=u.disposeVar((0,l.createNextAnimateFrameEvent)(t.pixelSizeChanged,t.scaleChanged,t.rotationChanged,t.colorChanged));return u.dispose(h.disposableOn(a)),u}return r(n,e),n}(l.Destroyable)}(e),i}var n;return r(e,t),n=e,e.type=n.register(o.GeoImageModel.type,n),e}(s.OpenLayersObject);e.OlGeoImageModel=u},30308:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlGeoPoint=void 0;var o=n(43938),s=n(87442),a=n(57777),l=n(19239),u=function(t){function e(e,n){var i=t.call(this,e,n)||this;if(!n.map)return console.warn("OlGeoCoordinatesPicker error! viewer is undefined!"),i;if(!n.interaction)return console.warn("OlGeoCoordinatesPicker error!"),i;var r=i.disposeVar(new a.OlPoint);n.add(r),i.dispose((function(){return n.delete(r)})),i.dispose((0,l.bind)([r,"show"],[e,"show"])),i.dispose((0,l.bind)([r,"editing"],[e,"editing"])),i.dispose((0,l.bind)([r,"radius"],[e,"pixelSize"],(function(t){return t}))),i.dispose((0,l.bind)([r,"fillColor"],[e,"color"],(function(t){return t}))),i.dispose((0,l.bind)([r,"strokeColor"],[e,"outlineColor"],(function(t){return t}))),i.dispose((0,l.bind)([r,"strokeWidth"],[e,"outlineWidth"],(function(t){return t}))),(o=function(){e.position&&(r.position=[e.position[0],e.position[1]])})();var o,s=i.disposeVar((0,l.createNextAnimateFrameEvent)(e.positionChanged));return i.dispose(s.disposableOn(o)),(o=function(){r.position&&(e.position=[r.position[0],r.position[1],0])})(),i.dispose(r.positionChanged.disposableOn(o)),i}var n;return r(e,t),n=e,e.type=n.register(o.GeoPoint.type,n),e}(s.OpenLayersObject);e.OlGeoPoint=u},64187:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlGeoPolygon=void 0;var o=n(43938),s=n(87442),a=n(23644),l=n(43938),u=n(19239),c=n(1448),h=function(t){function e(e,n){var i=t.call(this,e,n)||this;if(!n.map)return console.warn("map is undefined!"),i;if(!n.poiContext)return i;var r=i.disposeVar(new c.OlPolygon);n.add(r),i.dispose((function(){return n.delete(r)})),i.dispose((0,u.track)([r,"allowPicking"],[e,"allowPicking"])),i.dispose(r.pickedEvent.disposableOn((function(t){e.pickedEvent.emit(new l.SceneObjectPickedInfo(e,t))}))),(o=function(){e.positions?r.positions=e.positions.map((function(t){return[t[0],t[1]]})):r.positions=void 0})(),i.dispose(e.positionsChanged.disposableOn(o)),i.dispose((0,u.track)([r,"show"],[e,"show"]));var o,s=i.disposeVar((0,a.createPositionsEditingRefForOlViewer)([e,"positions"],!0,n));return i.dispose((0,u.bind)([e,"editing"],s)),i.dispose(e.flyToEvent.disposableOn((function(t){r.flyTo(t)}))),(o=function(){r.strokeColor=e.outlineColor})(),i.dispose(e.outlineColorChanged.disposableOn(o)),(o=function(){var t;r.strokeWidth=null!==(t=e.outlineWidth)&&void 0!==t?t:1})(),i.dispose(e.outlineWidthChanged.disposableOn(o)),(o=function(){r.fillColor=e.color})(),i.dispose(e.colorChanged.disposableOn(o)),(o=function(){r.zIndex=e.zIndex})(),i.dispose(e.zIndexChanged.disposableOn(o)),i}var n;return r(e,t),n=e,e.type=n.register(o.GeoPolygon.type,n),e}(s.OpenLayersObject);e.OlGeoPolygon=h},60363:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlGeoPolyline=void 0;var o=n(43938),s=n(87442),a=n(23644),l=n(43938),u=n(19239),c=n(19239),h=n(33154),p=function(t){function e(e,n){var i=t.call(this,e,n)||this;if(!n.map)return console.warn("map is undefined!"),i;if(!n.poiContext)return i;var r=i.disposeVar(new h.OlLineString);n.add(r),i.dispose((function(){return n.delete(r)})),i.dispose((0,c.track)([r,"allowPicking"],[e,"allowPicking"])),i.dispose(r.pickedEvent.disposableOn((function(t){e.pickedEvent.emit(new l.SceneObjectPickedInfo(e,t))}))),(s=function(){e.positions?r.positions=e.positions.map((function(t){return[t[0],t[1]]})):r.positions=void 0})(),i.dispose(e.positionsChanged.disposableOn(s)),i.dispose((0,c.track)([r,"show"],[e,"show"]));var o=i.disposeVar((0,a.createPositionsEditingRefForOlViewer)([e,"positions"],[e,"loop"],n));i.dispose((0,c.bind)([e,"editing"],o)),i.dispose(e.flyToEvent.disposableOn((function(t){r.flyTo(t)}))),(s=function(){r.color=e.color})(),i.dispose(e.colorChanged.disposableOn(s)),(s=function(){r.width=e.width})(),i.dispose(e.widthChanged.disposableOn(s)),(s=function(){e.hasDash?r.lineDash=e.dashLength?[e.dashLength]:[16]:r.lineDash=void 0})();var s,p=i.disposeVar((0,u.createNextAnimateFrameEvent)(e.dashLengthChanged,e.hasDashChanged));return i.dispose(p.disposableOn(s)),(s=function(){r.zIndex=e.zIndex})(),i.dispose(e.zIndexChanged.disposableOn(s)),i}var n;return r(e,t),n=e,e.type=n.register(o.GeoPolyline.type,n),e}(s.OpenLayersObject);e.OlGeoPolyline=p},48534:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlGeoPolylines=void 0;var o=n(43938),s=n(87442),a=n(43938),l=n(19239),u=n(30502),c=function(t){function e(e,n){var i=t.call(this,e,n)||this;if(!n.map)return console.warn("map is undefined!"),i;if(!n.poiContext)return i;var r,s=i.disposeVar(new u.OlMultiLineString);return n.add(s),i.dispose((function(){return n.delete(s)})),i.dispose((0,l.track)([s,"allowPicking"],[e,"allowPicking"])),i.dispose(s.pickedEvent.disposableOn((function(t){e.pickedEvent.emit(new a.SceneObjectPickedInfo(e,t))}))),(r=function(){e.positions?s.positionsSet=e.positions.map((function(t){return t.map((function(t){return[t[0],t[1]]}))})):s.positionsSet=void 0})(),i.dispose(e.positionsChanged.disposableOn(r)),i.dispose((0,l.track)([s,"show"],[e,"show"])),i.dispose(e.flyToEvent.disposableOn((function(t){s.flyTo(t)}))),(r=function(){var t;s.color=null!==(t=e.color)&&void 0!==t?t:o.GeoPolylines.defaultColor})(),i.dispose(e.colorChanged.disposableOn(r)),(r=function(){var t;s.width=null!==(t=e.width)&&void 0!==t?t:o.GeoPolylines.defaultWidth})(),i.dispose(e.widthChanged.disposableOn(r)),i}var n;return r(e,t),n=e,e.type=n.register(o.GeoPolylines.type,n),e}(s.OpenLayersObject);e.OlGeoPolylines=c},69875:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlGraticule=void 0;var l=n(43938),u=n(19239),c=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n._getGraticuleEvent=n.disposeVar(new u.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlGraticule"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this.getGraticuleEvent.emit(),this._innerGetJson()},set:function(t){this._innerSetJson(t,["meridiansPositions","parallelsPositions"])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getGraticuleEvent",{get:function(){return this._getGraticuleEvent},enumerable:!1,configurable:!0}),e.prototype.getGraticulePositions=function(){this.getGraticuleEvent.emit()},e.prototype.getProperties=function(n){var i=this;return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new l.GroupProperty("","",[new l.FunctionProperty("","",[],(function(){i.getGraticulePositions()}),[]),new l.BooleanProperty("",".",!0,!1,[this,"show"],!0),new l.BooleanProperty("showLabels","showLabels.",!0,!1,[this,"showLabels"],!0),new l.BooleanProperty("wrapX","Whether to repeat the graticule horizontally.",!0,!1,[this,"wrapX"],!0),new l.GroupProperty("","",[new l.ColorProperty("",e.description.color,!0,!1,[this,"color"],[1,1,1,1]),new l.EnumProperty("lineCap",e.description.lineCap,!0,!1,[this,"lineCap"],e.lineCapTypeEnums,"round"),new l.EnumProperty("lineJoin",e.description.lineJoin,!0,!1,[this,"lineJoin"],e.lineJoinTypeEnums,"round"),new l.NumbersProperty("lineDash",e.description.lineDash,!0,!1,[this,"lineDash"]),new l.NumberProperty("lineDashOffset",e.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],0),new l.NumberProperty("miterLimit",e.description.miterLimit,!0,!1,[this,"miterLimit"],10),new l.NumberProperty("width",e.description.width,!0,!1,[this,"width"],1)]),new l.NumbersProperty("intervals",e.description.intervals,!0,!1,[this,"intervals"],e.defaultValue.intervals),new l.NumberProperty("latLabelPosition",e.description.latLabelPosition,!0,!1,[this,"latLabelPosition"],1),new l.NumberProperty("lonLabelPosition",e.description.lonLabelPosition,!0,!1,[this,"lonLabelPosition"],0),new l.NumberProperty("targetSize",e.description.targetSize,!0,!1,[this,"targetSize"],100),new l.StringProperty("className",e.description.className,!0,!1,[this,"className"],"ol-layer"),new l.NumberProperty("opacity","opacity",!0,!1,[this,"opacity"],1),new l.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"],0),new l.NumberProperty("minResolution",e.description.minResolution,!0,!1,[this,"minResolution"]),new l.NumberProperty("maxResolution",e.description.maxResolution,!0,!1,[this,"maxResolution"]),new l.NumberProperty("minZoom",e.description.minZoom,!0,!1,[this,"minZoom"]),new l.NumberProperty("maxZoom",e.description.maxZoom,!0,!1,[this,"maxZoom"]),new l.NumberProperty("maxLines",e.description.maxLines,!0,!1,[this,"maxLines"],100)])],!1)},n=e,e.type=n.register("OlGraticule",n,{chsName:"",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlGraticule"}),e.lineCapTypeEnums=[["butt","butt"],["round","round"],["square","square"]],e.lineJoinTypeEnums=[["bevel","bevel"],["round","round"],["miter","miter"]],e.description={color:"color",lineCap:"Line cap style: `butt`, `round`, or `square`",lineJoin:"Line join style: `bevel`, `round`, or `miter`",lineDash:"Line dash pattern. Default is `null` (no dash).",lineDashOffset:"Line dash offset.",miterLimit:"Miter limit.",width:"Width.",intervals:"Intervals(in degrees) for the graticule",latLabelPosition:"Latitude label position in fractions (0..1) of view extent. 0 means at the left of the viewport, 1 means at the right.",lonLabelPosition:"Longitude label position in fractions (0..1) of view extent. 0 means at the bottom of the viewport, 1 means at the top.",targetSize:"The target size of the graticule cells, in pixels.",className:"A CSS class name to set to the layer element.",minResolution:"The minimum resolution (inclusive) at which this layer will be visible.",maxResolution:"The maximum resolution (exclusive) below which this layer will be visible.",minZoom:"The minimum view zoom level (inclusive) at which this layer will be visible.",maxZoom:"The maximum view zoom level (inclusive) at which this layer will be visible.",maxLines:"The maximum number of meridians and parallels from the center of the map. The default value of 100 means that at most 200 meridians and 200 parallels will be displayed. The default value is appropriate for conformal projections like Spherical Mercator. If you increase the value, more lines will be drawn and the drawing performance will decrease."},e.defaultValue={intervals:[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600]},e}(l.ESSceneObject);e.OlGraticule=c,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,color:(0,u.reactArrayWithUndefined)(void 0),lineCap:void 0,lineJoin:void 0,lineDash:(0,u.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0,width:void 0,className:void 0,opacity:void 0,zIndex:void 0,minResolution:void 0,maxResolution:void 0,minZoom:void 0,maxZoom:void 0,maxLines:void 0,targetSize:void 0,lonLabelPosition:void 0,latLabelPosition:void 0,intervals:(0,u.reactArrayWithUndefined)(void 0),wrapX:void 0,showLabels:void 0,meridiansPositions:(0,u.reactArrayWithUndefined)(void 0),parallelsPositions:(0,u.reactArrayWithUndefined)(void 0)})}}(c=e.OlGraticule||(e.OlGraticule={})),e.OlGraticule=c,(0,u.extendClassProps)(c.prototype,c.createDefaultProps)},95965:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlGraticule=e.GraticuleLayer=void 0;var l=a(n(48599)),u=n(57646),c=n(89931),h=n(19239),p=n(87442),d=n(69875),f=function(t){function e(e,n){var i,r=this;r=t.call(this)||this;var a=n.map;if(!a)throw console.error("map is undefined!"),new Error("map is undefined!");var h,p=new l.default({strokeStyle:new c.Stroke({color:(h=e.color,h?"rgba(".concat(255*h[0],",").concat(255*h[1],",").concat(255*h[2],",").concat(h[3],")"):"rgba(255, 255, 255 , 1)"),lineCap:e.lineCap,lineJoin:e.lineJoin,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,miterLimit:e.miterLimit,width:e.width}),showLabels:null===(i=e.showLabels)||void 0===i||i,wrapX:e.wrapX,className:e.className,opacity:e.opacity,zIndex:e.zIndex,minResolution:e.minResolution,maxResolution:e.maxResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,maxLines:e.maxLines,targetSize:e.targetSize,lonLabelPosition:e.lonLabelPosition,latLabelPosition:e.latLabelPosition,intervals:e.intervals});return r._layer=p,r.dispose(e.getGraticuleEvent.disposableOn((function(){try{var t=p.meridians_.map((function(t){return t.flatCoordinates})).map((function(t){return[(0,u.toLonLat)([t[0],t[1]]),(0,u.toLonLat)([t[2],t[3]])]}));e.meridiansPositions=s([],o(t),!1);var n=p.parallels_.map((function(t){return t.flatCoordinates})).map((function(t){return[(0,u.toLonLat)([t[0],t[1]]),(0,u.toLonLat)([t[2],t[3]])]}));e.parallelsPositions=s([],o(n),!1)}catch(t){console.error(t)}}))),r.dispose((function(){return p.dispose()})),a.addLayer(p),r.dispose((function(){return a.removeLayer(p)})),r.dispose(e.showChanged.disposableOn((function(t){p.setVisible(null==t||t)}))),r.dispose(e.zIndexChanged.disposableOn((function(t){p.setZIndex(null!=t?t:0)}))),r.dispose(e.opacityChanged.disposableOn((function(t){p.setOpacity(null!=t?t:1)}))),r.dispose(e.maxResolutionChanged.disposableOn((function(t){t&&p.setMaxResolution(t)}))),r.dispose(e.maxZoomChanged.disposableOn((function(t){t&&p.setMaxZoom(t)}))),r.dispose(e.minResolutionChanged.disposableOn((function(t){t&&p.setMinResolution(null!=t?t:1)}))),r.dispose(e.minZoomChanged.disposableOn((function(t){t&&p.setMinZoom(null!=t?t:1)}))),r}return r(e,t),Object.defineProperty(e.prototype,"layer",{get:function(){return this._layer},enumerable:!1,configurable:!0}),e}(h.Destroyable);e.GraticuleLayer=f;var g=function(t){function e(e,n){var i,r=t.call(this,e,n)||this;r.dispose((function(){return i&&i.destroy()}));var o=function(){i&&i.destroy(),i=new f(e,n)};o();var s=r.disposeVar((0,h.createNextAnimateFrameEvent)(e.showLabelsChanged,e.wrapXChanged,e.classNameChanged,e.maxLinesChanged,e.targetSizeChanged,e.lonLabelPositionChanged,e.latLabelPositionChanged,e.intervalsChanged,e.colorChanged,e.lineCapChanged,e.lineJoinChanged,e.lineDashChanged,e.lineDashOffsetChanged,e.miterLimitChanged,e.widthChanged));return r.dispose(s.disposableOn(o)),r}var n;return r(e,t),n=e,e.type=n.register(d.OlGraticule.type,n),e}(p.OpenLayersObject);e.OlOlGraticule=g},66488:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(69875),e),r(n(95965),e)},60873:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlIcon=void 0;var l=n(43938),u=n(19239),c=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(n){return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new l.GroupProperty("","",[new l.BooleanProperty("",".",!0,!1,[this,"show"],!0),new l.Number2Property("","",!0,!1,[this,"position"]),new l.BooleanProperty("","",!0,!1,[this,"editing"],!1),new l.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new l.GroupProperty("","",[new l.Number2Property("anchor","anchor",!0,!1,[this,"anchor"],e.defaultValue.anchor),new l.EnumProperty("anchorOrigin","anchorOrigin",!0,!1,[this,"anchorOrigin"],e.olIconAnchorOriginTypeEnums,e.defaultValue.anchorOrigin),new l.EnumProperty("anchorXUnits","anchorXUnits",!0,!1,[this,"anchorXUnits"],e.olIconAnchorUnitsTypeEnums,e.defaultValue.anchorXUnits),new l.EnumProperty("anchorYUnits","anchorYUnits",!0,!1,[this,"anchorYUnits"],e.olIconAnchorUnitsTypeEnums,e.defaultValue.anchorYUnits),new l.ColorProperty("color","color",!0,!1,[this,"color"]),new l.EnumProperty("crossOrigin","crossOrigin",!0,!1,[this,"crossOrigin"],e.olIconCrossOriginTypeEnums,e.defaultValue.crossOrigin),new l.Number2Property("displacement","displacement",!0,!1,[this,"displacement"],e.defaultValue.displacement),new l.NumberProperty("opacity","opacity",!0,!1,[this,"opacity"],e.defaultValue.opacity),new l.NumberProperty("scale","scale",!0,!1,[this,"scale"],e.defaultValue.scale),new l.BooleanProperty("rotateWithView","rotateWithView",!0,!1,[this,"rotateWithView"],e.defaultValue.rotateWithView),new l.NumberProperty("rotation","rotation",!0,!1,[this,"rotation"],e.defaultValue.rotation),new l.Number2Property("offset","offset",!0,!1,[this,"offset"],e.defaultValue.offset),new l.EnumProperty("offsetOrigin","offsetOrigin",!0,!1,[this,"offsetOrigin"],e.olIconAnchorOriginTypeEnums,e.defaultValue.offsetOrigin),new l.Number2Property("size","size",!0,!1,[this,"size"]),new l.EnumProperty("declutterMode","declutterMode",!0,!1,[this,"declutterMode"],e.olIconDeclutterModeTypeEnums,e.defaultValue.declutterMode),new l.StringProperty("src","src",!0,!1,[this,"src"],e.defaultValue.src)]),new l.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"])])],!1)},n=e,e.type=n.register("OlIcon",n,{chsName:"OlIcon",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlIcon"}),e.defaultValue={anchor:[.5,.5],anchorOrigin:"top-left",anchorXUnits:"fraction",anchorYUnits:"fraction",crossOrigin:"anonymous",displacement:[0,0],opacity:1,scale:1,rotateWithView:!1,rotation:0,offset:[0,0],offsetOrigin:"top-left",src:"${scene-manager-script-dir}/xe2-assets/scene-manager/images/jerry.png",declutterMode:"declutter"},e.olIconAnchorOriginTypeEnums=[["bottom-left","bottom-left"],["bottom-right","bottom-right"],["top-left","top-left"],["top-right","top-right"]],e.olIconAnchorUnitsTypeEnums=[["fraction","fraction"],["pixels","pixels"]],e.olIconCrossOriginTypeEnums=[["anonymous","anonymous"],["use-credentials","use-credentials"]],e.olIconDeclutterModeTypeEnums=[["declutter","declutter"],["obstacle","obstacle"],["none","none"]],e}(l.ESSceneObject);e.OlIcon=c,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,position:(0,u.reactArrayWithUndefined)(void 0),editing:void 0,allowPicking:void 0,anchor:(0,u.reactArrayWithUndefined)(void 0),anchorOrigin:void 0,anchorXUnits:void 0,anchorYUnits:void 0,color:(0,u.reactArrayWithUndefined)(void 0),crossOrigin:void 0,displacement:(0,u.reactArrayWithUndefined)(void 0),opacity:void 0,scale:void 0,rotateWithView:void 0,rotation:void 0,offset:(0,u.reactArrayWithUndefined)(void 0),offsetOrigin:void 0,size:(0,u.reactArrayWithUndefined)(void 0),src:void 0,declutterMode:void 0,zIndex:void 0})}}(c=e.OlIcon||(e.OlIcon={})),e.OlIcon=c,(0,u.extendClassProps)(c.prototype,c.createDefaultProps)},56457:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlIcon=void 0;var a=n(87442),l=s(n(81090)),u=n(56528),c=s(n(16899)),h=n(57646),p=s(n(71800)),d=s(n(2370)),f=s(n(47539)),g=n(43938),y=n(19239),_=n(40580),m=n(60873);function v(t){var e=o(t,4);return[255*e[0]|0,255*e[1]|0,255*e[2]|0,e[3]]}var b=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.dispose(n.olPickedEvent.disposableOn((function(t){var n;t&&t.layer===a&&null!==(n=e.allowPicking)&&void 0!==n&&n&&e.pickedEvent.emit(new g.SceneObjectPickedInfo(e,t))})));var r=n.map;if(!r)return console.warn("map is undefined!"),i;var o=new f.default,s=new p.default;i.dispose((function(){return s.dispose()}));var a=new c.default({source:s,style:o});i.dispose((function(){return a.dispose()})),r.addLayer(a),i.dispose((function(){return r.removeLayer(a)}));var b=i.disposeVar(new y.Event);(x=function(){var t,n,i,r,s,a,l,u,c,h,p,f,y,_=new d.default({anchor:null!==(t=e.anchor)&&void 0!==t?t:m.OlIcon.defaultValue.anchor,anchorOrigin:null!==(n=e.anchorOrigin)&&void 0!==n?n:m.OlIcon.defaultValue.anchorOrigin,anchorXUnits:null!==(i=e.anchorXUnits)&&void 0!==i?i:m.OlIcon.defaultValue.anchorXUnits,anchorYUnits:null!==(r=e.anchorYUnits)&&void 0!==r?r:m.OlIcon.defaultValue.anchorYUnits,color:e.color&&v(e.color),crossOrigin:null!==(s=e.crossOrigin)&&void 0!==s?s:m.OlIcon.defaultValue.crossOrigin,displacement:null!==(a=e.displacement)&&void 0!==a?a:m.OlIcon.defaultValue.displacement,opacity:null!==(l=e.opacity)&&void 0!==l?l:m.OlIcon.defaultValue.opacity,scale:null!==(u=e.scale)&&void 0!==u?u:m.OlIcon.defaultValue.scale,rotateWithView:null!==(c=e.rotateWithView)&&void 0!==c?c:m.OlIcon.defaultValue.rotateWithView,rotation:(null!==(h=e.rotation)&&void 0!==h?h:m.OlIcon.defaultValue.rotation)*Math.PI/180,offset:null!==(p=e.offset)&&void 0!==p?p:m.OlIcon.defaultValue.offset,offsetOrigin:null!==(f=e.offsetOrigin)&&void 0!==f?f:m.OlIcon.defaultValue.offsetOrigin,size:e.size,src:g.SceneObject.context.getStrFromEnv(null!==(y=e.src)&&void 0!==y?y:m.OlIcon.defaultValue.src),declutterMode:e.declutterMode});o.setImage(_),o.setZIndex(e.zIndex),b.emit()})();var x,w=i.disposeVar((0,y.createNextAnimateFrameEvent)(e.anchorChanged,e.anchorOriginChanged,e.anchorXUnitsChanged,e.anchorYUnitsChanged,e.colorChanged,e.crossOriginChanged,e.displacementChanged,e.opacityChanged,e.scaleChanged,e.rotateWithViewChanged,e.rotationChanged,e.offsetChanged,e.offsetOriginChanged,e.sizeChanged,e.srcChanged,e.declutterModeChanged,e.zIndexChanged));i.dispose(w.disposableOn(x)),(x=function(){if(s.clear(),e.position){var t=(0,h.fromLonLat)(e.position),n=new u.Point(t),i=new l.default(n);s.addFeature(i)}})(),i.dispose(e.positionChanged.disposableOn(x)),(x=function(){var t;a.setVisible(null===(t=e.show)||void 0===t||t)})(),i.dispose(e.showChanged.disposableOn(x)),(x=function(){a.setStyle(o)})(),i.dispose(b.disposableOn(x));var E=i.disposeVar((0,y.createNextAnimateFrameEvent)(e.editingChanged));return i.dispose((0,_.registerOlPointEditor)(E,e,n)),i}var n;return r(e,t),n=e,e.type=n.register(m.OlIcon.type,n),e}(a.OpenLayersObject);e.OlOlIcon=b},49498:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(60873),e),r(n(56457),e)},78520:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlImageStatic=void 0;var l=n(43938),u=n(8068),c=n(43938),h=n(19239),p=n(1448),d=function(t){function e(e){var n=t.call(this,e)||this;n._pickedEvent=n.disposeVar(new h.Event),n._flyToEvent=n.disposeVar(new h.Event),n._position=(0,h.reactArrayWithUndefined)(void 0),n._initialAngle=(0,h.react)(void 0),n._length=(0,h.react)(void 0);var i=n,r=n.disposeVar(new p.OlPolygon);return r.strokeColor=[0,0,0,0],r.fillColor=[0,0,0,0],n.dispose((0,h.track)([r,"allowPicking"],[i,"allowPicking"])),n.dispose(i.components.disposableAdd(r)),n.dispose(r.pickedEvent.disposableOn((function(t){var e;null!==(e=i.allowPicking)&&void 0!==e&&e&&i.pickedEvent.emit(new c.SceneObjectPickedInfo(i,t))}))),i.positionsChanged.disposableOn((function(){if(r.positions=void 0,i.positions&&!(i.positions.length<2)){var t=Math.min(i.positions[0][0],i.positions[1][0]),e=Math.max(i.positions[0][0],i.positions[1][0]),n=Math.min(i.positions[0][1],i.positions[1][1]),o=Math.max(i.positions[0][1],i.positions[1][1]);r.positions=[[t,n],[e,n],[e,o],[t,o],[t,n]]}})),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlImageStatic"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t,["points"])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},Object.defineProperty(e.prototype,"position",{get:function(){return this._position.value},set:function(t){this._position.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"positionChanged",{get:function(){return this._position.changed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialAngle",{get:function(){return this._initialAngle.value},set:function(t){this._initialAngle.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length.value},set:function(t){this._length.value=t},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(e){var n=this;return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new l.GroupProperty("","",[new l.FunctionProperty("","",["number"],(function(t){return n.flyTo(t)}),[1e3]),new l.UriProperty("","",!0,!1,[this,"uri"],"${scene-manager-script-dir}/xe2-assets/scene-manager/images/smoke.png"),new l.BooleanProperty("",".",!0,!1,[this,"show"],!0),new l.Number2sProperty("","",!0,!1,[this,"positions"]),new l.BooleanProperty("","",!0,!1,[this,"pointEditing"],!1),new l.BooleanProperty("","",!0,!1,[this,"editing"],!1),new l.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new l.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new c.StringsProperty("attributions","attributions",!0,!1,[this,"attributions"]),new c.StringProperty("crossOrigin","crossOrigin",!0,!1,[this,"crossOrigin"]),new c.EvalStringProperty("imageLoadFunction","imageLoadFunction",!0,!1,[this,"imageLoadFunction"]),new l.BooleanProperty("interpolate","interpolate",!0,!1,[this,"interpolate"],!0),new c.JsonProperty("projection","projection",!0,!1,[this,"projection"]),new c.Number2Property("imageSize","imageSize.",!0,!1,[this,"imageSize"])])],!1)},n=e,e.type=n.register("OlImageStatic",n,{chsName:"",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlImageStatic"}),e}(c.ESSceneObject);e.OlImageStatic=d,function(t){t.createDefaultProps=function(){return o(o({},c.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,u.reactPosition2Ds)(void 0),points:(0,u.reactPosition2Ds)(void 0),editing:void 0,pointEditing:void 0,allowPicking:void 0,zIndex:void 0,uri:void 0,attributions:void 0,crossOrigin:void 0,imageLoadFunction:void 0,interpolate:void 0,projection:void 0,imageSize:(0,h.reactArrayWithUndefined)(void 0)})}}(d=e.OlImageStatic||(e.OlImageStatic={})),e.OlImageStatic=d,(0,h.extendClassProps)(d.prototype,d.createDefaultProps)},6315:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlImageStatic=void 0;var l=n(56528),u=a(n(20228)),c=n(57646),h=a(n(39293)),p=n(43938),d=n(19239),f=n(87442),g=n(13947),y=n(40580),_=n(78520),m=function(t,e,n){var i=Math.abs(e[0]-t[0]),r=Math.abs(e[1]-t[1]),o=Math.sqrt(Math.pow(i,2)+Math.pow(r,2));return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))/o};function v(t,e){var n=Math.abs(t[0]-e[0]),i=Math.abs(t[1]-e[1]);return Math.sqrt(Math.pow(n,2)+Math.pow(i,2))}function b(t,e){var n=t[0],i=t[1],r=e[0],o=e[1],s=Math.abs(n-r),a=Math.abs(i-o),l=a/Math.sqrt(Math.pow(s,2)+Math.pow(a,2)),u=Math.acos(l),c=180/(Math.PI/u);return r==n&&o>i&&(c=0),r==n&&o<i&&(c=180),r<n&&o==i&&(c=270),r>n&&o==i&&(c=90),r>n&&o<i&&(c=180-c),r<n&&o<i&&(c=180+c),r<n&&o>i&&(c=360-c),c}var x=function(t){function e(e,n){var i,r=this;r=t.call(this)||this;var a=n.map;if(!a)return console.warn("map is undefined!"),r;var f=new h.default({url:p.ESSceneObject.context.getStrFromEnv(null!==(i=e.uri)&&void 0!==i?i:"${scene-manager-script-dir}/xe2-assets/scene-manager/images/location.png"),imageExtent:function(){if(e.positions&&!(e.positions.length<2)){var t,n=e.positions.map((function(t){return(0,c.fromLonLat)(t)}));return t=n[0][1]<n[1][1]?n[0][0]<n[1][0]?s(s([],o(n[0]),!1),o(n[1]),!1):[n[1][0],n[0][1],n[0][0],n[1][1]]:n[0][0]<n[1][0]?[n[0][0],n[1][1],n[1][0],n[0][1]]:s(s([],o(n[1]),!1),o(n[0]),!1),s([],o(t),!1)}}(),attributions:e.attributions,projection:e.projection,crossOrigin:e.crossOrigin,imageLoadFunction:e.imageLoadFunction&&Function('"use strict";return ('+e.imageLoadFunction+")")(),interpolate:e.interpolate,imageSize:e.imageSize});r.dispose((function(){return f.dispose()}));var g=new u.default({source:f});r.dispose((function(){return g.dispose()})),a.addLayer(g),r.dispose((function(){return a.removeLayer(g)})),r.dispose(e.showChanged.disposableOn((function(t){g.setVisible(null==t||t)}))),r.dispose(e.zIndexChanged.disposableOn((function(t){g.setZIndex(null!=t?t:0)})));var y=r.disposeVar((0,d.createNextAnimateFrameEvent)(e.attributionsChanged,e.projectionChanged));if(r.dispose(y.disposableOn((function(){f.setAttributions(e.attributions),e.projection&&f.setProperties(e.projection)}))),r.dispose(e.flyToEvent.disposableOn((function(t){if(e.positions&&!(e.positions.length<2)){var n=[(e.positions[0][0]+e.positions[1][0])/2,(e.positions[0][1]+e.positions[1][1])/2],i=(0,c.fromLonLat)(n),r=new l.Point(i),o=a.getView();o.fit(r,{duration:null!=t?t:1e3,padding:[100,100,100,100],minResolution:o.getResolution()})}}))),!e.positions||e.positions.length<2)return r;if(!e.editing)return r;var _=a.getSize();if(!_)return r;var x=e.positions.map((function(t){return(0,c.fromLonLat)(t)})),w=v(x[0],x[1]),E=a.getView().calculateExtent(_),P=[E[0],E[1]],C=[E[2],E[3]],O=m(P,C,_);e.length=w*O,e.initialAngle=b(x[0],x[1]);var S=[(x[0][0]+x[1][0])/2,(x[0][1]+x[1][1])/2];return e.position=(0,c.toLonLat)(S),r}return r(e,t),e}(d.Destroyable),w=function(t){function e(e,n){var i,r=t.call(this,e,n)||this,a=n.map;if(!a)return console.warn("map is undefined!"),r;r.dispose((function(){return i&&i.destroy()}));var l=function(){!function(){if(e.points=void 0,e.positions&&!(e.positions.length<2)){var t=e.positions[0],n=e.positions[1],i=[t,[t[0],n[1]],n,[n[0],t[1]]];e.points=s([],o(i),!1)}}(),i&&(i.destroy(),i=void 0),!e.positions||e.positions.length<2||(i=new x(e,n))};l();var u=r.disposeVar((0,d.createNextAnimateFrameEvent)(e.uriChanged,e.positionsChanged,e.crossOriginChanged,e.imageLoadFunctionChanged,e.interpolateChanged,e.imageSizeChanged));r.dispose(u.disposableOn(l)),r.dispose(e.positionChanged.disposableOn((function(){var t,n,i,r;if(e.position&&e.pointEditing){var o=a.getSize();if(o){var s=(0,c.fromLonLat)(e.position),l=null!==(t=e.length)&&void 0!==t?t:400,u=null!==(n=e.initialAngle)&&void 0!==n?n:45,h=a.getView().calculateExtent(o),p=[h[0],h[1]],d=[h[2],h[3]],f=m(p,d,o),g=(r=(u-90+360)%360,function(t,e){return[e[0]+t[0],e[1]+t[1]]}(s,[(i=[l/f/2,0])[0]*Math.cos(r*Math.PI/180)+i[1]*Math.sin(r*Math.PI/180),-i[0]*Math.sin(r*Math.PI/180)+i[1]*Math.cos(r*Math.PI/180)])),y=[2*s[0]-g[0],2*s[1]-g[1]];e.positions=[y,g].map((function(t){return(0,c.toLonLat)(t)}))}}}))),r.dispose(e.positionsChanged.disposableOn((function(){if(void 0!==e.positions){if(!(e.positions.length<2)&&e.editing){var t=a.getSize();if(t){var n=e.positions.map((function(t){return(0,c.fromLonLat)(t)})),i=v(n[0],n[1]),r=a.getView().calculateExtent(t),o=[r[0],r[1]],s=[r[2],r[3]],l=m(o,s,t);e.length=i*l,e.initialAngle=b(n[0],n[1]);var u=[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2];e.position=(0,c.toLonLat)(u)}}}else e.position=void 0})));var h=r.disposeVar((0,d.createNextAnimateFrameEvent)(e.editingChanged));r.dispose((0,g.registerOlLineStringEditor)(h,e,n,{allowDeleting:!1,allowInserting:!1,maxPoints:2,minPoints:2,editingPropertyName:"editing",positionsPropertyName:"positions"}));var p=r.disposeVar((0,d.createNextAnimateFrameEvent)(e.pointEditingChanged));return r.dispose((0,y.registerOlPointEditor)(p,e,n,{editingPropertyName:"pointEditing",positionPropertyName:"position"})),r.dispose(e.editingChanged.disposableOn((function(t){t&&(e.pointEditing=!1)}))),r.dispose(e.pointEditingChanged.disposableOn((function(t){t&&(e.editing=!1)}))),function(){if(e.positions&&!(e.positions.length<2)){var t=a.getSize();if(t){var n=e.positions.map((function(t){return(0,c.fromLonLat)(t)})),i=v(n[0],n[1]),r=a.getView().calculateExtent(t),o=[r[0],r[1]],s=[r[2],r[3]],l=m(o,s,t);e.length=i*l,e.initialAngle=b(n[0],n[1]);var u=[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2];e.position=(0,c.toLonLat)(u)}}}(),r}var n;return r(e,t),n=e,e.type=n.register(_.OlImageStatic.type,n),e}(f.OpenLayersObject);e.OlOlImageStatic=w},43483:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(78520),e),r(n(6315),e)},58095:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlLabelWithLine=void 0;var l=n(43938),u=n(8068),c=n(43938),h=n(19239),p=function(t){return t?"rgba(".concat(255*t[0],",").concat(255*t[1],",").concat(255*t[2],",").concat(t[3],")"):"rgba(255, 255, 255 , 1)"},d=function(t){return t?"".concat(t[0],"px ").concat(t[1],"px ").concat(t[2],"px ").concat(t[3],"px"):"5px"},f=function(t){function e(e,n,i){var r=t.call(this)||this;return r._container=e,r}return r(e,t),e.prototype.getHeight=function(){return 30},e}(h.Destroyable),g=function(t){function e(n){var i=t.call(this,n)||this;i._pickedEvent=i.disposeVar(new h.Event),i._flyToEvent=i.disposeVar(new h.Event),i._position=(0,h.reactArrayWithUndefined)(void 0),i._customDivPoi=i.disposeVar(new l.GeoCustomDivPoi);var o=i,u=i._customDivPoi;i.dispose(i.components.disposableAdd(u)),i.dispose((0,h.track)([u,"show"],[o,"show"])),i.dispose((0,h.track)([u,"opacity"],[o,"opacity"])),i.dispose((0,h.track)([u,"originRatioAndOffset"],[o,"originRatioAndOffset"])),i.dispose((0,h.track)([u,"allowPicking"],[o,"allowPicking"])),i.dispose(o.positionsChanged.disposableOn((function(){if(o.positions&&!(o.positions.length<2)){var t=a([],s(o.positions[1]),!1);u.position=[t[0],t[1],0]}}))),i.dispose(u.pickedEvent.disposableOn((function(t){var e;null!==(e=o.allowPicking)&&void 0!==e&&e&&o.pickedEvent.emit(new c.SceneObjectPickedInfo(o,t))})));var g=function(t){function n(n,i,r){var s=t.call(this,n,i,r)||this,a=document.createElement("div");s._container.appendChild(a),s.dispose((function(){s._container.removeChild(a)}));var l=function(){var t,n,i,r,s,l,u,c,h,f,g,y,_,m,v;a.style.width="".concat(null!==(t=o.divWidth)&&void 0!==t?t:300,"px"),a.innerText="".concat(null!==(n=o.text)&&void 0!==n?n:""),a.style.background="".concat(p(o.background)),a.style.borderRadius="".concat(d(o.borderRadius)),a.style.textAlign="".concat(null!==(i=o.textAlign)&&void 0!==i?i:"center"),a.style.fontStyle="".concat(null!==(r=o.fontStyle)&&void 0!==r?r:"normal"),a.style.fontSize="".concat(null!==(s=o.fontSize)&&void 0!==s?s:14,"px"),a.style.fontFamily="".concat(null!==(l=o.fontFamily)&&void 0!==l?l:"Microsoft YaHei"),a.style.textDecoration="".concat(null!==(u=o.textDecoration)&&void 0!==u?u:"none"),a.style.color="".concat(p(null!==(c=o.fontColor)&&void 0!==c?c:[0,0,0,1])),a.style.letterSpacing="".concat(null!==(h=o.letterSpacing)&&void 0!==h?h:0,"px"),a.style.lineHeight="".concat(null!==(f=o.lineHeight)&&void 0!==f?f:20,"px"),a.style.padding=d(o.padding),a.style.fontWeight="".concat(null!==(g=o.fontWeight)&&void 0!==g?g:200),a.style.borderWidth="".concat(o.borderWidth,"px"),a.style.borderColor=p(o.borderColor),a.style.borderStyle=null!==(y=o.borderStyle)&&void 0!==y?y:"none",a.style.webkitTextStrokeWidth="".concat(null!==(_=o.textStrokeWidth)&&void 0!==_?_:0,"px"),a.style.webkitTextStrokeColor="".concat(p(null!==(m=o.textStrokeColor)&&void 0!==m?m:e.defaultValue.strokeColor));var b,x="".concat(p(o.textShadowColor))+" "+"".concat((b=null!==(v=o.textShadowOffset)&&void 0!==v?v:e.defaultValue.textShadowOffset,"".concat(b[0],"px ").concat(b[1],"px")));a.style.textShadow=x};l();var u=s.disposeVar((0,h.createNextAnimateFrameEvent)(o.textAlignChanged,o.fontStyleChanged,o.fontSizeChanged,o.fontWeightChanged,o.fontFamilyChanged,o.textDecorationChanged,o.fontColorChanged,o.letterSpacingChanged,o.lineHeightChanged,o.paddingChanged,o.textChanged,o.divWidthChanged,o.backgroundChanged,o.borderRadiusChanged,o.borderWidthChanged,o.borderColorChanged,o.borderStyleChanged,o.textStrokeColorChanged,o.textStrokeWidthChanged,o.textShadowColorChanged,o.textShadowOffsetChanged));s.dispose(u.disposableOn(l));var f=function(){var t;a.style.pointerEvents=null!==(t=o.editing)&&void 0!==t&&t?"none":"all"};f(),s.dispose(o.editingChanged.disposableOn(f));var g,y=null,_=!1;return a.onclick=function(t){_||(y&&clearTimeout(y),y=setTimeout((function(){t.altKey?i.pickFromDiv(a,new c.AttachedPickedInfo({type:"pointerClick.clickEvent.altClick",e:t})):i.pickFromDiv(a,new c.AttachedPickedInfo({type:"viewerPicking",e:t}))}),300))},a.ondblclick=function(t){var e,n,r,s,u,h,d,f,m,v,b;y&&clearTimeout(y),_=!0,i.pickFromDiv(a,new c.AttachedPickedInfo({type:"viewerPicking",e:t}));var x="\n                                width : ".concat(null!==(e=o.divWidth)&&void 0!==e?e:300,"px;\n                                height:").concat(o.text&&g?g:"20px",";\n                                text-align:").concat(null!==(n=o.textAlign)&&void 0!==n?n:"center",";\n                                line-height:").concat(null!==(r=o.lineHeight)&&void 0!==r?r:20,"px;\n                                color:").concat(p(null!==(s=o.fontColor)&&void 0!==s?s:[0,0,0,1]),";\n                                font-size:").concat(null!==(u=o.fontSize)&&void 0!==u?u:14,"px;\n                                font-style:").concat(null!==(h=o.fontStyle)&&void 0!==h?h:"normal",";\n                                font-weight:").concat(null!==(d=o.fontWeight)&&void 0!==d?d:200,";\n                                font-family:").concat(null!==(f=o.fontFamily)&&void 0!==f?f:"Microsoft YaHei",";\n                                text-decoration:").concat(null!==(m=o.textDecoration)&&void 0!==m?m:"none",";\n                                letter-spacing:").concat(null!==(v=o.letterSpacing)&&void 0!==v?v:0,"px;\n                                resize:none;\n                                "),w='<textarea style="'.concat(x,'">').concat(null!==(b=o.text)&&void 0!==b?b:"","</textarea>");a.innerHTML=w;var E=a.querySelector("textarea");E&&(E.addEventListener("input",(function(){E.style.height="20px",E.style.height=E.scrollHeight+"px",g=E.scrollHeight+"px"})),E.select(),E.onblur=function(){var t;_=!1,o.text===E.value?l():o.text=null!==(t=E.value)&&void 0!==t?t:"",o.editing&&(o.editing=!1)})},s}return r(n,t),n.prototype.getHeight=function(){var t,e=null===(t=this._container.firstElementChild)||void 0===t?void 0:t.clientHeight;return null!=e?e:30},n}(f);return u.instanceClass=g,i}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlLabelWithLine"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},Object.defineProperty(e.prototype,"position",{get:function(){return this._position.value},set:function(t){this._position.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"positionChanged",{get:function(){return this._position.changed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customDivPoi",{get:function(){return this._customDivPoi},enumerable:!1,configurable:!0}),e.prototype.getHeight=function(){var t=30;return this.customDivPoi.update((function(e,n,i){t=e.getHeight()})),t},e.prototype.getProperties=function(n){var i=this;return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new c.GroupProperty("","",[new c.FunctionProperty("","",["number"],(function(t){return i.flyTo(t)}),[1e3]),new c.FunctionProperty("","",[],(function(){console.log(i.getHeight())}),[]),new c.BooleanProperty("",".",!0,!1,[this,"show"],!0),new c.Number2sProperty("","",!0,!1,[this,"positions"]),new c.BooleanProperty("","",!0,!1,[this,"editing"],!1),new c.BooleanProperty("","",!0,!1,[this,"pointEditing"],!1),new c.NumberProperty("","length",!0,!1,[this,"length"],200),new c.NumberProperty("","initial angle",!0,!1,[this,"initialAngle"],45),new c.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new c.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new c.GroupProperty("","",[new c.LongStringProperty("text","text",!0,!1,[this,"text"],""),new c.StringProperty("fontFamily","fontFamily",!0,!1,[this,"fontFamily"],"Microsoft YaHei"),new c.EnumProperty("textAlign",e.description.textAlignType,!0,!1,[this,"textAlign"],e.textAlignTypeEnums,"center"),new c.EnumProperty("fontStyle",e.description.fontStyleType,!0,!1,[this,"fontStyle"],e.fontStyleTypeEnums,"normal"),new c.EnumProperty("",e.description.textDecorationType,!0,!1,[this,"textDecoration"],e.textDecorationTypeEnums,"none"),new c.Number4Property("borderRadius","borderRadius",!0,!1,[this,"borderRadius"],[5,5,5,5]),new c.ColorProperty("","",!0,!1,[this,"background"],[1,1,1,1]),new c.ColorProperty("","",!0,!1,[this,"fontColor"],[0,0,0,1]),new c.ColorProperty("","",!0,!1,[this,"textStrokeColor"],[1,0,0,1]),new c.NumberProperty("","",!0,!1,[this,"textStrokeWidth"],0),new c.Number4Property("padding","padding",!0,!1,[this,"padding"],[5,5,5,5]),new c.NumberProperty("divWidth","divWidth",!0,!1,[this,"divWidth"],300),new c.ColorProperty("","",!0,!1,[this,"textShadowColor"],[1,0,0,1]),new l.Number2Property("",",[X,Y]",!0,!1,[this,"textShadowOffset"],[0,0]),new c.NumberProperty("fontSize","fontSize",!0,!1,[this,"fontSize"],14),new c.NumberProperty("fontWeight","fontWeight",!0,!1,[this,"fontWeight"],200),new c.NumberProperty("letterSpacing","letterSpacing",!0,!1,[this,"letterSpacing"]),new c.NumberProperty("lineHeight","lineHeight",!0,!1,[this,"lineHeight"],20),new c.NumberProperty("borderWidth","borderWidth",!0,!1,[this,"borderWidth"],0),new c.EnumProperty("borderStyle",e.description.borderStyle,!0,!1,[this,"borderStyle"],e.borderStyleTypeEnums,"none"),new c.ColorProperty("borderColor","borderColor",!0,!1,[this,"borderColor"],[1,1,1,1])]),new c.GroupProperty("","",[new c.ColorProperty("",e.description.color,!0,!1,[this,"color"],[0,.6,1,1]),new c.EnumProperty("lineCap",e.description.lineCap,!0,!1,[this,"lineCap"],e.lineCapTypeEnums,"round"),new c.EnumProperty("lineJoin",e.description.lineJoin,!0,!1,[this,"lineJoin"],e.lineJoinTypeEnums,"round"),new c.NumbersProperty("lineDash",e.description.lineDash,!0,!1,[this,"lineDash"]),new c.NumberProperty("lineDashOffset",e.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],0),new c.NumberProperty("miterLimit",e.description.miterLimit,!0,!1,[this,"miterLimit"],10),new c.NumberProperty("width",e.description.width,!0,!1,[this,"width"],2)]),new c.GroupProperty("GeoCustomDivPoi","GeoCustomDivPoi",[new c.Number4Property("",".",!0,!1,[this,"originRatioAndOffset"],[.5,1,0,0]),new c.NumberProperty("","",!0,!1,[this,"opacity"],1)])])],!1)},n=e,e.type=n.register("OlLabelWithLine",n,{chsName:"",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlLabelWithLine"}),e.fontStyleTypeEnums=[["normal","normal"],["italic","italic"],["oblique","oblique"],["inherit","inherit"]],e.textAlignTypeEnums=[["left","left"],["right","right"],["center","center"],["justify","justify"],["inherit","inherit"]],e.textDecorationTypeEnums=[["none","none"],["underline","underline"],["overline","overline"],["line-through","line-through"],["blink","blink"],["inherit","inherit"]],e.lineCapTypeEnums=[["butt","butt"],["round","round"],["square","square"]],e.lineJoinTypeEnums=[["bevel","bevel"],["round","round"],["miter","miter"]],e.borderStyleTypeEnums=[["none","none"],["hidden","hidden"],["dotted","dotted"],["dashed","dashed"],["solid","solid"],["double","double"],["groove","groove"],["ridge","ridge"],["inset","inset"],["outset","outset"]],e.description={fontStyleType:"normal|italic|oblique|inherit,",textAlignType:"left|right|center|justify|inherit,, text-align ",textDecorationType:"none|underline|overline|line-through|blink|inherit,, ,  text - decoration ",color:"color",lineCap:"Line cap style: `butt`, `round`, or `square`",lineJoin:"Line join style: `bevel`, `round`, or `miter`",lineDash:"Line dash pattern. Default is `null` (no dash).",lineDashOffset:"Line dash offset.",miterLimit:"Miter limit.",width:"Width.",borderStyle:"html css"},e.defaultValue={textShadowColor:[0,0,0,1],textShadowOffset:[0,0],strokeColor:[0,0,0,1]},e}(c.ESSceneObject);e.OlLabelWithLine=g,function(t){t.createDefaultProps=function(){return o(o({},c.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,u.reactPosition2Ds)(void 0),editing:void 0,pointEditing:void 0,length:void 0,initialAngle:void 0,allowPicking:void 0,zIndex:void 0,color:(0,h.reactArrayWithUndefined)(void 0),lineCap:void 0,lineJoin:void 0,lineDash:(0,h.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0,width:void 0,divWidth:void 0,borderWidth:void 0,borderColor:(0,h.reactArrayWithUndefined)(void 0),borderStyle:void 0,background:(0,h.reactArrayWithUndefined)(void 0),borderRadius:(0,h.reactArrayWithUndefined)(void 0),textAlign:void 0,fontStyle:void 0,fontSize:void 0,fontWeight:void 0,fontFamily:void 0,textDecoration:void 0,fontColor:(0,h.reactArrayWithUndefined)(void 0),letterSpacing:void 0,lineHeight:void 0,padding:(0,h.reactArrayWithUndefined)(void 0),textStrokeColor:(0,h.reactArrayWithUndefined)(void 0),textStrokeWidth:void 0,textShadowOffset:(0,h.reactArrayWithUndefined)(void 0),textShadowColor:(0,h.reactArrayWithUndefined)(void 0),text:void 0,opacity:void 0,originRatioAndOffset:(0,h.reactArrayWithUndefined)(void 0)})}}(g=e.OlLabelWithLine||(e.OlLabelWithLine={})),e.OlLabelWithLine=g,(0,h.extendClassProps)(g.prototype,g.createDefaultProps)},90469:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlLabelWithLine=void 0;var a=n(57646),l=n(43938),u=n(19239),c=n(87442),h=n(33154),p=n(13947),d=n(40580),f=n(58095),g=function(t,e,n){var i=Math.abs(e[0]-t[0]),r=Math.abs(e[1]-t[1]),o=Math.sqrt(Math.pow(i,2)+Math.pow(r,2));return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))/o},y=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=n.map;if(!r)return console.warn("map is undefined!"),i;var c=i.disposeVar(new h.OlLineString);i.dispose(c.pickedEvent.disposableOn((function(t){var n;null!==(n=e.allowPicking)&&void 0!==n&&n&&e.pickedEvent.emit(new l.SceneObjectPickedInfo(e,t))}))),n.add(c),i.dispose((function(){return n.delete(c)})),i.dispose((0,u.track)([c,"show"],[e,"show"])),i.dispose((0,u.track)([c,"zIndex"],[e,"zIndex"])),i.dispose((0,u.track)([c,"allowPicking"],[e,"allowPicking"])),i.dispose((0,u.track)([c,"color"],[e,"color"])),i.dispose((0,u.track)([c,"lineCap"],[e,"lineCap"])),i.dispose((0,u.track)([c,"lineJoin"],[e,"lineJoin"])),i.dispose((0,u.track)([c,"lineDash"],[e,"lineDash"])),i.dispose((0,u.track)([c,"lineDashOffset"],[e,"lineDashOffset"])),i.dispose((0,u.track)([c,"miterLimit"],[e,"miterLimit"])),i.dispose((0,u.track)([c,"width"],[e,"width"])),i.dispose((0,u.track)([c,"positions"],[e,"positions"])),(f=function(){if(e.positions&&!(e.positions.length<2)&&e.editing){var t=r.getSize();if(t){var n,i,o,s,l=e.positions.map((function(t){return(0,a.fromLonLat)(t)})),u=(n=l[0],i=l[1],o=Math.abs(n[0]-i[0]),s=Math.abs(n[1]-i[1]),Math.sqrt(Math.pow(o,2)+Math.pow(s,2))),c=r.getView().calculateExtent(t),h=[c[0],c[1]],p=[c[2],c[3]],d=g(h,p,t);e.length=u*d,e.initialAngle=function(t,e){var n=t[0],i=t[1],r=e[0],o=e[1],s=Math.abs(n-r),a=Math.abs(i-o),l=a/Math.sqrt(Math.pow(s,2)+Math.pow(a,2)),u=Math.acos(l),c=180/(Math.PI/u);return r==n&&o>i&&(c=0),r==n&&o<i&&(c=180),r<n&&o==i&&(c=270),r>n&&o==i&&(c=90),r>n&&o<i&&(c=180-c),r<n&&o<i&&(c=180+c),r<n&&o>i&&(c=360-c),c}(l[0],l[1]),e.position=(0,a.toLonLat)(l[0])}}})(),i.dispose(e.positionsChanged.disposableOn(f)),!e.positions||e.positions.length<2||(e.position=s([],o(e.positions[0]),!1));var f,y=i.disposeVar((0,u.createNextAnimateFrameEvent)(e.pointEditingChanged));i.dispose((0,d.registerOlPointEditor)(y,e,n,{editingPropertyName:"pointEditing",positionPropertyName:"position"})),(f=function(){var t,n,i,o;if(e.pointEditing&&e.position){var s=r.getSize();if(s){var l=(0,a.fromLonLat)(e.position),u=null!==(t=e.length)&&void 0!==t?t:200,c=null!==(n=e.initialAngle)&&void 0!==n?n:45,h=r.getView().calculateExtent(s),p=[h[0],h[1]],d=[h[2],h[3]],f=g(p,d,s),y=(o=(c-90+360)%360,function(t,e){return[e[0]+t[0],e[1]+t[1]]}(l,[(i=[u/f,0])[0]*Math.cos(o*Math.PI/180)+i[1]*Math.sin(o*Math.PI/180),-i[0]*Math.sin(o*Math.PI/180)+i[1]*Math.cos(o*Math.PI/180)]));e.positions=[l,y].map((function(t){return(0,a.toLonLat)(t)}))}}})();var _=i.disposeVar((0,u.createNextAnimateFrameEvent)(e.positionChanged));i.dispose(_.disposableOn(f));var m=i.disposeVar((0,u.createNextAnimateFrameEvent)(e.editingChanged));i.dispose((0,p.registerOlLineStringEditor)(m,e,n,{allowDeleting:!1,allowInserting:!1,maxPoints:2,minPoints:2}));var v=function(t){if(t.shiftKey&&e.positions&&!(e.positions.length<2)){var n,i,r=e.positions.map((function(t){return(0,a.fromLonLat)(t)})),o=(n=[r[1][0]-r[0][0],r[1][1]-r[0][1]],i=-45*Math.PI/180,[n[0]*Math.cos(i)-n[1]*Math.sin(i),n[1]*Math.cos(i)+n[0]*Math.sin(i)]),s=[o[0]+r[0][0],o[1]+r[0][1]];e.positions=[r[0],s].map((function(t){return(0,a.toLonLat)(t)}))}};return i.dispose(e.editingChanged.disposableOn((function(t){t?document.addEventListener("keydown",v):document.removeEventListener("keydown",v)}))),i.dispose(e.flyToEvent.disposableOn((function(t){c.flyTo(t)}))),i.dispose(e.pointEditingChanged.disposableOn((function(t){t&&(e.editing=!1)}))),i.dispose(e.editingChanged.disposableOn((function(t){t&&(e.pointEditing=!1)}))),i}var n;return r(e,t),n=e,e.type=n.register(f.OlLabelWithLine.type,n),e}(c.OpenLayersObject);e.OlOlLabelWithLine=y},17133:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(58095),e),r(n(90469),e)},38393:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlLineStringEditor=void 0;var l=n(8068),u=n(43938),c=n(19239),h=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new c.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlLineStringEditor"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(e){return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new u.GroupProperty("","",[new u.BooleanProperty("","",!0,!1,[this,"enabled"],!1),new u.Number2sProperty("","",!0,!1,[this,"positions"]),new u.GroupProperty("","",[new u.ColorProperty("","",!0,!1,[this,"strokeColor"],[0,.6,1,.1])]),new u.GroupProperty("","",[new u.NumberProperty("","",!0,!1,[this,"maxPoints"],10),new u.NumberProperty("",", 2",!0,!1,[this,"minPoints"],2),new u.BooleanProperty("","",!0,!1,[this,"allowDeleting"]),new u.BooleanProperty("","",!0,!1,[this,"allowInserting"])])])],!1)},n=e,e.type=n.register("OlLineStringEditor",n,{chsName:"OlLineStringEditor",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlLineStringEditor"}),e}(u.ESSceneObject);e.OlLineStringEditor=h,function(t){t.createDefaultProps=function(){return o(o({},u.ESSceneObject.createDefaultProps()),{positions:(0,l.reactPosition2Ds)(void 0),enabled:void 0,strokeColor:(0,c.reactArrayWithUndefined)(void 0),maxPoints:void 0,minPoints:void 0,allowDeleting:void 0,allowInserting:void 0})}}(h=e.OlLineStringEditor||(e.OlLineStringEditor={})),e.OlLineStringEditor=h,(0,c.extendClassProps)(h.prototype,h.createDefaultProps)},13392:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlLineStringEditor=void 0;var l=n(87442),u=a(n(81090)),c=n(56528),h=n(47145),p=a(n(16899)),d=n(57646),f=a(n(71800)),g=a(n(58958)),y=a(n(47539)),_=n(47539),m=n(43938),v=n(19239),b=n(10070),x=n(70359),w=n(38393);function E(t){var e=null!=t?t:[0,.6,1,0],n=[255*e[0]|0,255*e[1]|0,255*e[2]|0,e[3]];return[new y.default({stroke:new g.default({color:n,width:1})}),new y.default({stroke:new g.default({color:n,width:1})})]}var P=function(t){function e(e,n){var i=t.call(this,e,n)||this,a=n.map;if(!a)return console.warn("map is undefined!"),i;var l=function(t){function i(i){var r,o,s=this;s=t.call(this)||this;var a=new f.default;if(s.dispose((function(){return a.dispose()})),i.length<2)throw new Error("positions.length < 2");var l=i.map((function(t){return(0,d.fromLonLat)(t)})),g=new c.LineString(l),y=new u.default(g);a.addFeature(y);var _=new h.Modify({source:a,deleteCondition:null===(r=e.allowDeleting)||void 0===r||r?void 0:function(){return!1},insertVertexCondition:null===(o=e.allowInserting)||void 0===o||o?void 0:function(){return!1}});s.dispose((function(){return _.dispose()})),s._modify=_;var m=_.setGeometryCoordinates_.bind(_);_.setGeometryCoordinates_=function(t,n){var i=n.map((function(t){return(0,d.toLonLat)(t)}));return e.positions=i,m(t,n)};var v=function(t){if(t.features){var n=t.features.getArray()[0].getGeometry();if(n){var i=n.getCoordinates().map((function(t){return(0,d.toLonLat)(t)}));e.positions=i}}};_.addEventListener("modifyend",v),s.dispose((function(){return _.removeEventListener("modifyend",v)}));var b=n.map;if(!b)return console.warn("map is undefined!"),s;var x=new p.default({source:a,style:E(e.strokeColor)});return x.setZIndex(1e4),s.dispose((function(){return x.dispose()})),b.addLayer(x),s.dispose((function(){return b.removeLayer(x)})),s}return r(i,t),Object.defineProperty(i.prototype,"modify",{get:function(){return this._modify},enumerable:!1,configurable:!0}),i}(v.Destroyable),g=function(t){function n(){var n=t.call(this)||this,i=new f.default;n.dispose((function(){return i.dispose()})),n._source=i;var r,o,s=new h.Draw({source:i,type:"LineString",maxPoints:e.maxPoints,minPoints:e.minPoints,style:(r=e.strokeColor,o=(0,_.createEditingStyle)(),function(t,e){var n=t.getGeometry().getType();return"LineString"===n?E(r):o[n]})}),a=s.geometryFunction_.bind(s);return s.geometryFunction_=function(t,n){var i=t.map((function(t){return(0,d.toLonLat)(t)}));return e.positions=i,a(t,n)},n._draw=s,n}return r(n,t),Object.defineProperty(n.prototype,"draw",{get:function(){return this._draw},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),n}(v.Destroyable),y=i.disposeVar(b.SceneObject.createFromClass(m.CursorInfo));y.show=!1,n.add(y),i.dispose((function(){return n.delete(y)}));var w=i.disposeVar((0,b.createProcessingFromAsyncFunc)((function(t){return o(i,void 0,void 0,(function(){var i;return s(this,(function(r){switch(r.label){case 0:return(i=n.getInteractionFromMap())?(y.show=!0,y.text="",t.disposer.dispose((function(){y.show=!1})),e.positions?[3,2]:(y.text="Alt+",[4,t.promise((0,b.step)(t,(function(t){return new Promise((function(n,r){t.disposer.dispose(r),t.disposer.dispose(i.keyUpEvent.disposableOn((function(t){"Escape"===t.key&&s.finishDrawing()}))),t.disposer.dispose(i.pointerClick.dbclickEvent.disposableOn((function(){s.finishDrawing()})));var o=new g,s=o.draw;a.addInteraction(s),t.disposer.dispose((function(){a.removeInteraction(s),o.destroy()}));var l=function(t){if(t.feature){var i=t.feature.getGeometry();if(i){var r=i.getCoordinates().map((function(t){return(0,d.toLonLat)(t)}));s.finishDrawing(),e.positions=r,n()}}};s.on("drawend",l);var u=function(){console.log("drawAbort"),n()};s.on("drawabort",u),t.disposer.dispose((function(){s.un("drawend",l),s.un("drawabort",u)})),t.disposer.dispose((function(){s.finishDrawing()}))}))})))])):(console.error("olViewer.getInteractionFromMap()"),[2]);case 1:r.sent(),r.label=2;case 2:return e.positions&&e.positions.length>=2?(y.text="Alt+",[4,t.promise((0,b.step)(t,(function(t){return new Promise((function(n,r){t.disposer.dispose(r),t.disposer.dispose(i.keyUpEvent.disposableOn((function(t){"Escape"===t.key&&n()}))),t.disposer.dispose(i.pointerClick.dbclickEvent.disposableOn((function(){n()})));var o=e.positions;if(!o||o.length<2)throw new Error("!sceneObject.positions || sceneObject.positions.length < 2");var s=new l(o);a.addInteraction(s.modify),t.disposer.dispose((function(){a.removeInteraction(s.modify),s.destroy()}))}))})))]):[3,4];case 3:r.sent(),r.label=4;case 4:return e.enabled=!1,[2]}}))}))}))),P=function(){var t;w.cancel(),null!==(t=e.enabled)&&void 0!==t&&t&&w.restart(void 0)};P();var C=i.disposeVar((0,v.createNextAnimateFrameEvent)(e.enabledChanged,e.allowDeletingChanged,e.allowInsertingChanged,e.minPointsChanged,e.maxPointsChanged));i.dispose(C.disposableOn(P));var O=i.disposeVar(new x.OlMultiPoint);return n.add(O),i.dispose((function(){return n.delete(O)})),i.dispose((0,v.track)([O,"show"],[e,"enabled"])),i.dispose((0,v.track)([O,"positions"],[e,"positions"])),i}var n;return r(e,t),n=e,e.type=n.register(w.OlLineStringEditor.type,n),e}(l.OpenLayersObject);e.OlOlLineStringEditor=P},13947:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(38393),e),r(n(13392),e),r(n(42592),e)},42592:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.registerOlLineStringEditor=void 0;var o=n(19239),s=n(10070),a=n(38393),l=function(t){function e(e,n,i){var r=t.call(this)||this,s=null!=i?i:{},l=s.editingPropertyName,u=void 0===l?"editing":l,c=s.positionsPropertyName,h=void 0===c?"positions":c,p=s.allowDeleting,d=s.allowInserting,f=s.maxPoints,g=s.minPoints,y=s.strokeColor,_=r.disposeVar(new a.OlLineStringEditor);return n.add(_),r.dispose((function(){return n.delete(_)})),r._editor=_,_.allowDeleting=p,_.allowInserting=d,_.maxPoints=f,_.minPoints=g,_.strokeColor=y,r.dispose((0,o.bind)([_,"positions"],[e,h])),r.dispose(_.enabledChanged.disposableOn((function(){_.enabled||(e[u]=!1)}))),_.enabled=!0,r.dispose((function(){return _.enabled=!1})),r}return r(e,t),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},enumerable:!1,configurable:!0}),e}(o.Destroyable);e.registerOlLineStringEditor=function(t,e,n,i){var r=new s.ObjResettingWithEvent(t,(function(){var t=(null!=i?i:{}).editingPropertyName;if(e[void 0===t?"editing":t])return new l(e,n,i)}));return function(){return r.destroy()}}},77768:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlLineString=void 0;var l=n(8068),u=n(43938),c=n(19239),h=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new c.Event),n._flyToEvent=n.disposeVar(new c.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlLineString"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},e.prototype.getProperties=function(n){var i=this;return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new u.GroupProperty("","",[new u.BooleanProperty("",".",!0,!1,[this,"show"],!0),new u.FunctionProperty("","",["number"],(function(t){return i.flyTo(t)}),[1e3]),new u.Number2sProperty("","",!0,!1,[this,"positions"]),new u.BooleanProperty("","",!0,!1,[this,"editing"],!1),new u.BooleanProperty("","",!0,!1,[this,"pointEditing"],!1),new u.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new u.GroupProperty("","",[new u.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new u.ColorProperty("",e.description.color,!0,!1,[this,"color"],e.defaultColor),new u.EnumProperty("lineCap",e.description.lineCap,!0,!1,[this,"lineCap"],e.lineCapTypeEnums,e.defaultLineCap),new u.EnumProperty("lineJoin",e.description.lineJoin,!0,!1,[this,"lineJoin"],e.lineJoinTypeEnums,e.defaultLineCap),new u.NumbersProperty("lineDash",e.description.lineDash,!0,!1,[this,"lineDash"],e.defaultLineDash),new u.NumberProperty("lineDashOffset",e.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],e.defaultLineDashOffset),new u.NumberProperty("miterLimit",e.description.miterLimit,!0,!1,[this,"miterLimit"],e.defaultMiterLimit),new u.NumberProperty("width",e.description.width,!0,!1,[this,"width"],e.defaultWidth)]),new u.GroupProperty("","",[new u.NumberProperty("","",!0,!1,[this,"maxPoints"]),new u.NumberProperty("",", 2",!0,!1,[this,"minPoints"]),new u.BooleanProperty("","",!0,!1,[this,"allowDeleting"]),new u.BooleanProperty("","",!0,!1,[this,"allowInserting"])])])],!1)},n=e,e.type=n.register("OlLineString",n,{chsName:"OlLineString",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlLineString"}),e.lineCapTypeEnums=[["butt","butt"],["round","round"],["square","square"]],e.lineJoinTypeEnums=[["bevel","bevel"],["round","round"],["miter","miter"]],e.description={color:"color",lineCap:"Line cap style: `butt`, `round`, or `square`",lineJoin:"Line join style: `bevel`, `round`, or `miter`",lineDash:"Line dash pattern. Default is `null` (no dash).",lineDashOffset:"Line dash offset.",miterLimit:"Miter limit.",width:"Width."},e.defaultColor=[0,.6,1,1],e.defaultLineCap="round",e.defaultlineJoin="round",e.defaultLineDash=[10],e.defaultLineDashOffset=0,e.defaultMiterLimit=10,e.defaultWidth=5,e}(u.ESSceneObject);e.OlLineString=h,function(t){t.createDefaultProps=function(){return o(o({},u.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,l.reactPosition2Ds)(void 0),editing:void 0,pointEditing:void 0,allowPicking:void 0,color:(0,c.reactArrayWithUndefined)(void 0),lineCap:void 0,lineJoin:void 0,lineDash:(0,c.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0,width:void 0,zIndex:void 0,maxPoints:void 0,minPoints:void 0,allowDeleting:void 0,allowInserting:void 0})}}(h=e.OlLineString||(e.OlLineString={})),e.OlLineString=h,(0,c.extendClassProps)(h.prototype,h.createDefaultProps)},62078:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlLineString=void 0;var s=n(87442),a=o(n(81090)),l=n(56528),u=o(n(16899)),c=n(57646),h=o(n(71800)),p=o(n(58958)),d=o(n(47539)),f=n(43938),g=n(19239),y=n(13947),_=n(77768),m=n(57777),v=n(54187),b=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.dispose(n.olPickedEvent.disposableOn((function(t){var n;t&&t.layer===_&&null!==(n=e.allowPicking)&&void 0!==n&&n&&e.pickedEvent.emit(new f.SceneObjectPickedInfo(e,t))})));var r=n.map;if(!r)return console.warn("map is undefined!"),i;var o=new d.default,s=new h.default;i.dispose((function(){return s.dispose()}));var _=new u.default({source:s,style:o});i.dispose((function(){return _.dispose()})),r.addLayer(_),i.dispose((function(){return r.removeLayer(_)}));var b=i.disposeVar(new g.Event);(L=function(){var t,n,i,r,s,a,l;o.setStroke(new p.default({color:(l=null!==(t=e.color)&&void 0!==t?t:[0,.6,1,1],l?"rgba(".concat(255*l[0],",").concat(255*l[1],",").concat(255*l[2],",").concat(l[3],")"):"rgba(255, 255, 255, 1)"),lineCap:null!==(n=e.lineCap)&&void 0!==n?n:"round",lineJoin:null!==(i=e.lineJoin)&&void 0!==i?i:"round",lineDash:e.lineDash,lineDashOffset:null!==(r=e.lineDashOffset)&&void 0!==r?r:0,miterLimit:null!==(s=e.miterLimit)&&void 0!==s?s:10,width:null!==(a=e.width)&&void 0!==a?a:5})),b.emit()})();var x=i.disposeVar((0,g.createNextAnimateFrameEvent)(e.colorChanged,e.lineCapChanged,e.lineJoinChanged,e.lineDashChanged,e.lineDashOffsetChanged,e.miterLimitChanged,e.widthChanged));i.dispose(x.disposableOn(L)),(L=function(){var t;_.setZIndex(null!==(t=e.zIndex)&&void 0!==t?t:0)})(),i.dispose(e.zIndexChanged.disposableOn(L)),(L=function(){if(s.clear(),e.positions&&!(e.positions.length<2)){var t=e.positions.map((function(t){return(0,c.fromLonLat)(t)})),n=new l.LineString(t),i=new a.default(n);s.addFeature(i)}})(),i.dispose(e.positionsChanged.disposableOn(L)),(L=function(){var t;_.setVisible(null===(t=e.show)||void 0===t||t)})(),i.dispose(e.showChanged.disposableOn(L)),(L=function(){_.setStyle(o)})(),i.dispose(b.disposableOn(L));var w=i.disposeVar((0,g.createNextAnimateFrameEvent)(e.editingChanged,e.allowDeletingChanged,e.allowInsertingChanged,e.maxPointsChanged,e.minPointsChanged)),E=e.allowDeleting,P=e.allowInserting,C=e.maxPoints,O=e.minPoints;i.dispose((0,y.registerOlLineStringEditor)(w,e,n,{allowDeleting:E,allowInserting:P,maxPoints:C,minPoints:O}));var S=i.disposeVar(new m.OlPoint);n.add(S),i.dispose((function(){return n.delete(S)})),(L=function(){var t;S.show=null!==(t=e.pointEditing)&&void 0!==t&&t&&e.positions&&e.positions.length>0})();var I=i.disposeVar((0,g.createNextAnimateFrameEvent)(e.pointEditingChanged,e.positionsChanged));i.dispose(I.disposableOn(L));var L,M=!1;return(L=function(){e.positions&&(M=!0,S.position=(0,v.getCenterFromPositions)(e.positions),M=!1)})(),i.dispose(e.positionsChanged.disposableOn(L)),i.dispose((0,g.bind)([S,"editing"],[e,"pointEditing"])),i.dispose(e.editingChanged.disposableOn((function(t){t&&(e.pointEditing=!1)}))),i.dispose(e.pointEditingChanged.disposableOn((function(t){t&&(e.editing=!1)}))),i.dispose(S.positionChanged.disposableOn((function(t,n){M||n&&t&&e.positions&&(e.positions=(0,v.moveAllPositionsWithCenter)(e.positions,t,n))}))),i.dispose(e.flyToEvent.disposableOn((function(t){if(e.positions){var n=e.positions.map((function(t){return(0,c.fromLonLat)(t)})),i=new l.LineString(n);r.getView().fit(i,{duration:null!=t?t:1e3,padding:[100,100,100,100]})}}))),i}var n;return r(e,t),n=e,e.type=n.register(_.OlLineString.type,n),e}(s.OpenLayersObject);e.OlOlLineString=b},33154:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(77768),e),r(n(62078),e)},32967:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlMultiLineString=void 0;var l=n(43938),u=n(19239),c=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n._flyToEvent=n.disposeVar(new u.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlMultiLineString"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},e.prototype.getProperties=function(n){var i=this;return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new l.GroupProperty("","",[new l.BooleanProperty("",".",!0,!1,[this,"show"],!0),new l.FunctionProperty("","",["number"],(function(t){return i.flyTo(t)}),[1e3]),new l.BooleanProperty("","",!0,!1,[this,"editing"],!1),new l.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new l.GroupProperty("","",[new l.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new l.ColorProperty("",e.description.color,!0,!1,[this,"color"],[0,.6,1,1]),new l.EnumProperty("lineCap",e.description.lineCap,!0,!1,[this,"lineCap"],e.lineCapTypeEnums,"round"),new l.EnumProperty("lineJoin",e.description.lineJoin,!0,!1,[this,"lineJoin"],e.lineJoinTypeEnums,"round"),new l.NumbersProperty("lineDash",e.description.lineDash,!0,!1,[this,"lineDash"]),new l.NumberProperty("lineDashOffset",e.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],0),new l.NumberProperty("miterLimit",e.description.miterLimit,!0,!1,[this,"miterLimit"],10),new l.NumberProperty("width",e.description.width,!0,!1,[this,"width"],5)]),new l.GroupProperty("","",[new l.NumberProperty("","",!0,!1,[this,"maxPoints"],10),new l.NumberProperty("",", 2",!0,!1,[this,"minPoints"],2),new l.BooleanProperty("","",!0,!1,[this,"allowDeleting"]),new l.BooleanProperty("","",!0,!1,[this,"allowInserting"])])])],!1)},n=e,e.type=n.register("OlMultiLineString",n,{chsName:"OlMultiLineString",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlMultiLineString"}),e.lineCapTypeEnums=[["butt","butt"],["round","round"],["square","square"]],e.lineJoinTypeEnums=[["bevel","bevel"],["round","round"],["miter","miter"]],e.description={color:"color",lineCap:"Line cap style: `butt`, `round`, or `square`",lineJoin:"Line join style: `bevel`, `round`, or `miter`",lineDash:"Line dash pattern. Default is `null` (no dash).",lineDashOffset:"Line dash offset.",miterLimit:"Miter limit.",width:"Width."},e}(l.ESSceneObject);e.OlMultiLineString=c,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,positionsSet:(0,u.reactPosition2DsSet)(void 0),editing:void 0,allowPicking:void 0,color:(0,u.reactArrayWithUndefined)(void 0),lineCap:void 0,lineJoin:void 0,lineDash:(0,u.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0,width:void 0,zIndex:void 0,maxPoints:void 0,minPoints:void 0,allowDeleting:void 0,allowInserting:void 0})}}(c=e.OlMultiLineString||(e.OlMultiLineString={})),e.OlMultiLineString=c,(0,u.extendClassProps)(c.prototype,c.createDefaultProps)},42820:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlMultiLineString=void 0;var s=o(n(81090)),a=n(56528),l=o(n(16899)),u=n(57646),c=o(n(71800)),h=o(n(58958)),p=o(n(47539)),d=n(43938),f=n(19239),g=n(87442),y=n(32967),_=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.dispose(n.olPickedEvent.disposableOn((function(t){var n;t&&t.layer===y&&null!==(n=e.allowPicking)&&void 0!==n&&n&&e.pickedEvent.emit(new d.SceneObjectPickedInfo(e,t))})));var r=n.map;if(!r)return console.warn("map is undefined!"),i;var o=new p.default,g=new c.default;i.dispose((function(){return g.dispose()}));var y=new l.default({source:g,style:o});i.dispose((function(){return y.dispose()})),r.addLayer(y),i.dispose((function(){return r.removeLayer(y)}));var _=i.disposeVar(new f.Event);(m=function(){var t,n,i,r,s,a,l;o.setStroke(new h.default({color:(l=null!==(t=e.color)&&void 0!==t?t:[0,.6,1,1],l?"rgba(".concat(255*l[0],",").concat(255*l[1],",").concat(255*l[2],",").concat(l[3],")"):"rgba(255, 255, 255, 1)"),lineCap:null!==(n=e.lineCap)&&void 0!==n?n:"round",lineJoin:null!==(i=e.lineJoin)&&void 0!==i?i:"round",lineDash:e.lineDash,lineDashOffset:null!==(r=e.lineDashOffset)&&void 0!==r?r:0,miterLimit:null!==(s=e.miterLimit)&&void 0!==s?s:10,width:null!==(a=e.width)&&void 0!==a?a:5})),_.emit()})();var m,v=i.disposeVar((0,f.createNextAnimateFrameEvent)(e.colorChanged,e.lineCapChanged,e.lineJoinChanged,e.lineDashChanged,e.lineDashOffsetChanged,e.miterLimitChanged,e.widthChanged));return i.dispose(v.disposableOn(m)),(m=function(){var t;y.setZIndex(null!==(t=e.zIndex)&&void 0!==t?t:0)})(),i.dispose(e.zIndexChanged.disposableOn(m)),(m=function(){if(g.clear(),e.positionsSet&&!(e.positionsSet.length<2)){var t=e.positionsSet.map((function(t){return t.map((function(t){return(0,u.fromLonLat)(t)}))})),n=new a.MultiLineString(t),i=new s.default(n);g.addFeature(i)}})(),i.dispose(e.positionsSetChanged.disposableOn(m)),(m=function(){var t;y.setVisible(null===(t=e.show)||void 0===t||t)})(),i.dispose(e.showChanged.disposableOn(m)),(m=function(){y.setStyle(o)})(),i.dispose(_.disposableOn(m)),i.dispose(e.flyToEvent.disposableOn((function(t){if(e.positionsSet){var n=e.positionsSet.map((function(t){return t.map((function(t){return(0,u.fromLonLat)(t)}))})),i=new a.MultiLineString(n);r.getView().fit(i,{duration:null!=t?t:1e3,padding:[100,100,100,100]})}}))),i}var n;return r(e,t),n=e,e.type=n.register(y.OlMultiLineString.type,n),e}(g.OpenLayersObject);e.OlOlMultiLineString=_},30502:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(32967),e),r(n(42820),e)},51401:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlMultiPoint=void 0;var l=n(8068),u=n(43938),c=n(19239),h=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new c.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlMultiPoint"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(e){return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new u.GroupProperty("","",[new u.BooleanProperty("",".",!0,!1,[this,"show"],!0),new u.Number2sProperty("","",!0,!1,[this,"positions"]),new u.BooleanProperty("","",!0,!1,[this,"editing"],!1),new u.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new u.GroupProperty("","",[new u.ColorProperty("","",!0,!1,[this,"fillColor"]),new u.ColorProperty("","",!0,!1,[this,"strokeColor"],[0,.5,1,1]),new u.NumberProperty("","",!0,!1,[this,"strokeWidth"],2),new u.NumberProperty("","",!0,!1,[this,"radius"],5),new u.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"])]),new u.GroupProperty("","",[new u.NumberProperty("","",!0,!1,[this,"maxPoints"],10),new u.NumberProperty("",", 2",!0,!1,[this,"minPoints"],2),new u.BooleanProperty("","",!0,!1,[this,"allowDeleting"]),new u.BooleanProperty("","",!0,!1,[this,"allowInserting"])])])],!1)},n=e,e.type=n.register("OlMultiPoint",n,{chsName:"OlMultiPoint",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlMultiPoint"}),e}(u.ESSceneObject);e.OlMultiPoint=h,function(t){t.createDefaultProps=function(){return o(o({},u.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,l.reactPosition2Ds)(void 0),editing:void 0,allowPicking:void 0,fillColor:(0,c.reactArrayWithUndefined)(void 0),strokeColor:(0,c.reactArrayWithUndefined)(void 0),strokeWidth:void 0,radius:void 0,zIndex:void 0,maxPoints:void 0,minPoints:void 0,allowDeleting:void 0,allowInserting:void 0})}}(h=e.OlMultiPoint||(e.OlMultiPoint={})),e.OlMultiPoint=h,(0,c.extendClassProps)(h.prototype,h.createDefaultProps)},1608:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlMultiPoint=void 0;var s=n(87442),a=o(n(81090)),l=n(56528),u=o(n(16899)),c=n(57646),h=o(n(71800)),p=n(89931),d=o(n(58958)),f=o(n(47539)),g=n(43938),y=n(19239),_=n(13947),m=n(51401),v=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.dispose(n.olPickedEvent.disposableOn((function(t){var n;t&&t.layer===v&&null!==(n=e.allowPicking)&&void 0!==n&&n&&e.pickedEvent.emit(new g.SceneObjectPickedInfo(e,t))})));var r=n.map;if(!r)return console.warn("map is undefined!"),i;var o=function(t){return t?"rgba(".concat(255*t[0],",").concat(255*t[1],",").concat(255*t[2],",").concat(t[3],")"):"rgba(255, 255, 255 , 1)"},s=new f.default,m=new h.default;i.dispose((function(){return m.dispose()}));var v=new u.default({source:m,style:s});i.dispose((function(){return v.dispose()})),r.addLayer(v),i.dispose((function(){return r.removeLayer(v)}));var b=i.disposeVar(new y.Event);(x=function(){var t,n,i,r=null!==(t=e.strokeWidth)&&void 0!==t?t:2,a=new p.Circle({fill:new p.Fill({color:o(e.fillColor)}),stroke:r>0?new d.default({color:o(null!==(n=e.strokeColor)&&void 0!==n?n:[0,.5,1,1]),width:r}):void 0,radius:null!==(i=e.radius)&&void 0!==i?i:5});s.setImage(a),s.setZIndex(e.zIndex),b.emit()})();var x,w=i.disposeVar((0,y.createNextAnimateFrameEvent)(e.fillColorChanged,e.strokeColorChanged,e.strokeWidthChanged,e.radiusChanged,e.zIndexChanged));i.dispose(w.disposableOn(x)),(x=function(){if(m.clear(),e.positions){var t=e.positions.map((function(t){return(0,c.fromLonLat)(t)})),n=new l.MultiPoint(t),i=new a.default(n);m.addFeature(i)}})(),i.dispose(e.positionsChanged.disposableOn(x)),(x=function(){var t;v.setVisible(null===(t=e.show)||void 0===t||t)})(),i.dispose(e.showChanged.disposableOn(x)),(x=function(){v.setStyle(s)})(),i.dispose(b.disposableOn(x));var E=i.disposeVar((0,y.createNextAnimateFrameEvent)(e.editingChanged,e.allowDeletingChanged,e.allowInsertingChanged,e.maxPointsChanged,e.minPointsChanged)),P=e.allowDeleting,C=e.allowInserting,O=e.maxPoints,S=e.minPoints;return i.dispose((0,_.registerOlLineStringEditor)(E,e,n,{allowDeleting:P,allowInserting:C,maxPoints:O,minPoints:S})),i}var n;return r(e,t),n=e,e.type=n.register(m.OlMultiPoint.type,n),e}(s.OpenLayersObject);e.OlOlMultiPoint=v},70359:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(51401),e),r(n(1608),e)},46930:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlObliqueRectangle=void 0;var l=n(8068),u=n(43938),c=n(19239),h=n(1448),p=n(57777),d=n(57646),f=n(54187),g=n(43938);function y(t,e){var n=Math.abs(t[0]-e[0]),i=Math.abs(t[1]-e[1]);return Math.sqrt(Math.pow(n,2)+Math.pow(i,2))}var _=function(t){function e(e){var n=t.call(this,e)||this;n._pickedEvent=n.disposeVar(new c.Event),n._flyToEvent=n.disposeVar(new c.Event),n._polygon=n.disposeVar(new h.OlPolygon),n._centerPoint=n.disposeVar(new p.OlPoint);var i=n._polygon,r=n._centerPoint,o=n;n.dispose(n.components.disposableAdd(i)),n.dispose(n.components.disposableAdd(r)),n.dispose(i.pickedEvent.disposableOn((function(t){var e;null!==(e=o.allowPicking)&&void 0!==e&&e&&o.pickedEvent.emit(new g.SceneObjectPickedInfo(o,t))}))),n.dispose((0,c.track)([i,"show"],[o,"show"])),n.dispose((0,c.track)([i,"fillColor"],[o,"fillColor"])),n.dispose((0,c.track)([i,"strokeColor"],[o,"strokeColor"])),n.dispose((0,c.track)([i,"strokeWidth"],[o,"strokeWidth"])),n.dispose((0,c.track)([i,"zIndex"],[o,"zIndex"])),n.dispose((0,c.track)([i,"allowPicking"],[o,"allowPicking"])),n.dispose((0,c.track)([i,"lineCap"],[o,"lineCap"])),n.dispose((0,c.track)([i,"lineJoin"],[o,"lineJoin"])),n.dispose((0,c.track)([i,"lineDash"],[o,"lineDash"])),n.dispose((0,c.track)([i,"lineDashOffset"],[o,"lineDashOffset"])),n.dispose((0,c.track)([i,"miterLimit"],[o,"miterLimit"]));var l=function(){if(i.positions=void 0,o.points=void 0,o.positions&&!(o.positions.length<3)){var t,e,n,r,l,u,c,h=o.positions.map((function(t){return(0,d.fromLonLat)(t)})),p=y((t=h[0],e=h[1],n=h[2],r=e[1]-t[1],l=t[0]-e[0],u=t[1]*(e[0]-t[0])-t[0]*(e[1]-t[1]),[c=-(l*(r*n[1]-l*n[0])+r*u)/(l*l+r*r),0==l?n[1]:-(r*c+u)/l]),h[2]),f=y(h[0],h[1]),g=[h[1][0]-h[0][0],h[1][1]-h[0][1]],_=function(t,e){var n=s(t,2),i=s(n[0],2),r=i[0],o=i[1],a=s(n[1],2),l=a[0],u=a[1],c=s(e,2),h=c[0],p=c[1];return r===l?h-r:o===u?p-o:(p-o)*(l-r)-(h-r)*(u-o)>0}([h[0],h[1]],h[2]),m=void 0,v=[(h[1][0]-h[0][0])/f,(h[1][1]-h[0][1])/f],b=[(C=v,O=_?90:-90,S=O*Math.PI/180,m=[C[0]*Math.cos(S)-C[1]*Math.sin(S),C[1]*Math.cos(S)+C[0]*Math.sin(S)])[0]*p,m[1]*p],x=[g[0]+b[0],g[1]+b[1]],w=[h[0][0]+b[0],h[0][1]+b[1]],E=[h[0][0]+x[0],h[0][1]+x[1]],P=[h[0],h[1],E,w].map((function(t){return(0,d.toLonLat)(t)}));i.positions=a([],s(P),!1),o.points=a([],s(P),!1)}var C,O,S};l();var u=n.disposeVar((0,c.createNextAnimateFrameEvent)(o.positionsChanged));n.dispose(u.disposableOn(l)),n.dispose(o.flyToEvent.disposableOn((function(t){i.flyTo(t)}))),(l=function(){var t;r.show=null!==(t=o.pointEditing)&&void 0!==t&&t&&o.positions&&o.positions.length>0})();var _=n.disposeVar((0,c.createNextAnimateFrameEvent)(o.pointEditingChanged,o.positionsChanged));n.dispose(_.disposableOn(l));var m=!1;return(l=function(){i.positions&&(m=!0,r.position=(0,f.getCenterFromPositions)(i.positions),m=!1)})(),n.dispose(i.positionsChanged.disposableOn(l)),n.dispose((0,c.bind)([r,"editing"],[o,"pointEditing"])),n.dispose(o.editingChanged.disposableOn((function(t){t&&(o.pointEditing=!1)}))),n.dispose(o.pointEditingChanged.disposableOn((function(t){t&&(o.editing=!1)}))),n.dispose(r.positionChanged.disposableOn((function(t,e){m||e&&t&&o.positions&&(o.positions=(0,f.moveAllPositionsWithCenter)(o.positions,t,e))}))),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlObliqueRectangle"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t,["points"])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},Object.defineProperty(e.prototype,"polygon",{get:function(){return this._polygon},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){return this._centerPoint},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(e){var n=this;return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new u.GroupProperty("","",[new u.FunctionProperty("","",["number"],(function(t){return n.flyTo(t)}),[1e3]),new u.BooleanProperty("",".",!0,!1,[this,"show"],!0),new u.Number2sProperty("","",!0,!0,[this,"points"]),new u.Number2sProperty("","",!0,!1,[this,"positions"]),new u.BooleanProperty("","",!0,!1,[this,"editing"],!1),new u.BooleanProperty("","",!0,!1,[this,"pointEditing"],!1),new u.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new u.GroupProperty("","",[new u.ColorProperty("","",!0,!1,[this,"fillColor"]),new u.ColorProperty("","",!0,!1,[this,"strokeColor"],[0,.6,1,1]),new u.NumberProperty("","",!0,!1,[this,"strokeWidth"],5),new u.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new u.EnumProperty("lineCap",h.OlPolygon.description.lineCap,!0,!1,[this,"lineCap"],h.OlPolygon.defaultValue.lineCapTypeEnums,h.OlPolygon.defaultValue.lineCap),new u.EnumProperty("lineJoin",h.OlPolygon.description.lineJoin,!0,!1,[this,"lineJoin"],h.OlPolygon.defaultValue.lineJoinTypeEnums,h.OlPolygon.defaultValue.lineCap),new u.NumbersProperty("lineDash",h.OlPolygon.description.lineDash,!0,!1,[this,"lineDash"],h.OlPolygon.defaultValue.lineDash),new u.NumberProperty("lineDashOffset",h.OlPolygon.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],h.OlPolygon.defaultValue.lineDashOffset),new u.NumberProperty("miterLimit",h.OlPolygon.description.miterLimit,!0,!1,[this,"miterLimit"],h.OlPolygon.defaultValue.miterLimit)])])],!1)},n=e,e.type=n.register("OlObliqueRectangle",n,{chsName:"",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlObliqueRectangle"}),e}(u.ESSceneObject);e.OlObliqueRectangle=_,function(t){t.createDefaultProps=function(){return o(o({},u.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,l.reactPosition2Ds)(void 0),points:(0,l.reactPosition2Ds)(void 0),editing:void 0,pointEditing:void 0,allowPicking:void 0,fillColor:(0,c.reactArrayWithUndefined)(void 0),strokeColor:(0,c.reactArrayWithUndefined)(void 0),strokeWidth:void 0,zIndex:void 0,lineCap:void 0,lineJoin:void 0,lineDash:(0,c.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0})}}(_=e.OlObliqueRectangle||(e.OlObliqueRectangle={})),e.OlObliqueRectangle=_,(0,c.extendClassProps)(_.prototype,_.createDefaultProps)},54602:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlObliqueRectangle=void 0;var o=n(19239),s=n(87442),a=n(13947),l=n(46930),u=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=i.disposeVar((0,o.createNextAnimateFrameEvent)(e.editingChanged));return i.dispose((0,a.registerOlLineStringEditor)(r,e,n,{allowDeleting:!1,allowInserting:!1,maxPoints:3,minPoints:3})),i}var n;return r(e,t),n=e,e.type=n.register(l.OlObliqueRectangle.type,n),e}(s.OpenLayersObject);e.OlOlObliqueRectangle=u},68206:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(46930),e),r(n(54602),e)},20130:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlPointEditor=void 0;var l=n(87442),u=a(n(81090)),c=n(56528),h=n(47145),p=a(n(16899)),d=n(57646),f=a(n(71800)),g=n(43938),y=n(19239),_=n(10070),m=n(88197),v=a(n(47539)),b=a(n(30283)),x=a(n(51345)),w=a(n(58958)),E=new v.default({image:new b.default({radius:5,fill:new x.default({color:[0,153,255,.1]}),stroke:new w.default({color:[255,255,255,.3],width:1})}),zIndex:1/0}),P=new v.default({image:new b.default({radius:5,fill:new x.default({color:[0,153,255,.3]}),stroke:new w.default({color:[255,255,255,1],width:1})}),zIndex:1/0}),C=function(t){function e(e,n){var i=t.call(this,e,n)||this,a=n.map;if(!a)return console.warn("map is undefined!"),i;var l=new f.default;i.dispose((function(){return l.dispose()}));var m=function(t){function i(){var i=t.call(this)||this,r=new h.Modify({source:l,style:P,pixelTolerance:30});i.dispose((function(){return r.dispose()})),i._modify=r;var o=function(t){if(t.features){var n=t.features.getArray()[0].getGeometry();if(n){var i=n.getCoordinates();e.position=(0,d.toLonLat)(i)}}};r.addEventListener("modifyend",o),i.dispose((function(){return r.removeEventListener("modifyend",o)}));var s=n.map;if(!s)return console.warn("map is undefined!"),i;var a=new p.default({source:l});return a.setZIndex(1e4),i.dispose((function(){return a.dispose()})),s.addLayer(a),i.dispose((function(){return s.removeLayer(a)})),i}return r(i,t),Object.defineProperty(i.prototype,"modify",{get:function(){return this._modify},enumerable:!1,configurable:!0}),i}(y.Destroyable);(b=function(){if(l.clear(),e.position){var t=(0,d.fromLonLat)(e.position),n=new c.Point(t),i=new u.default(n);i.setStyle(E),l.addFeature(i)}})(),i.dispose(e.positionChanged.disposableOn(b));var v=i.disposeVar(_.SceneObject.createFromClass(g.CursorInfo));v.show=!1,n.add(v),i.dispose((function(){return n.delete(v)}));var b,x=i.disposeVar((0,_.createProcessingFromAsyncFunc)((function(t){return o(i,void 0,void 0,(function(){var i;return s(this,(function(r){switch(r.label){case 0:return(i=n.getInteractionFromMap())?(v.show=!0,v.text="",t.disposer.dispose((function(){v.show=!1})),e.position?[3,2]:(v.text="Alt+",[4,t.promise((0,_.step)(t,(function(t){return new Promise((function(n,r){t.disposer.dispose(r),t.disposer.dispose(i.keyUpEvent.disposableOn((function(t){"Escape"===t.key&&o.finishDrawing()}))),t.disposer.dispose(i.pointerClick.dbclickEvent.disposableOn((function(){o.finishDrawing()}))),l.clear();var o=new h.Draw({source:l,type:"Point"});a.addInteraction(o),t.disposer.dispose((function(){a.removeInteraction(o),o.dispose()}));var s=function(t){if(t.feature){var i=t.feature.getGeometry();if(i){var r=i.getCoordinates();e.position=(0,d.toLonLat)(r),o.finishDrawing(),l.clear(),n()}}};o.on("drawend",s);var u=function(){console.log("drawAbort"),n()};o.on("drawabort",u),t.disposer.dispose((function(){o.un("drawend",s),o.un("drawabort",u)})),t.disposer.dispose((function(){o.finishDrawing()}))}))})))])):(console.error("olViewer.getInteractionFromMap()"),[2]);case 1:r.sent(),r.label=2;case 2:return e.position?(v.text="Alt+",[4,t.promise((0,_.step)(t,(function(t){return new Promise((function(e,n){t.disposer.dispose(n),t.disposer.dispose(i.keyUpEvent.disposableOn((function(t){"Escape"===t.key&&e()}))),t.disposer.dispose(i.pointerClick.dbclickEvent.disposableOn((function(){e()})));var r=new m;a.addInteraction(r.modify),t.disposer.dispose((function(){a.removeInteraction(r.modify),r.destroy()}))}))})))]):[3,4];case 3:r.sent(),r.label=4;case 4:return e.enabled=!1,[2]}}))}))})));(b=function(){var t;x.cancel(),null!==(t=e.enabled)&&void 0!==t&&t&&x.restart(void 0)})();var w=i.disposeVar((0,y.createNextAnimateFrameEvent)(e.enabledChanged));return i.dispose(w.disposableOn(b)),i}var n;return r(e,t),n=e,e.type=n.register(m.OlPointEditor.type,n),e}(l.OpenLayersObject);e.OlOlPointEditor=C},88197:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlPointEditor=void 0;var l=n(43938),u=n(19239),c=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlPointEditor"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(e){return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new l.GroupProperty("","",[new l.Number2Property("","",!0,!1,[this,"position"]),new l.BooleanProperty("","",!0,!1,[this,"enabled"],!1)])],!1)},n=e,e.type=n.register("OlPointEditor",n,{chsName:"OlPointEditor",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlPointEditor"}),e}(l.ESSceneObject);e.OlPointEditor=c,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{position:(0,u.reactArrayWithUndefined)(void 0),enabled:void 0})}}(c=e.OlPointEditor||(e.OlPointEditor={})),e.OlPointEditor=c,(0,u.extendClassProps)(c.prototype,c.createDefaultProps)},45824:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(88197),e),r(n(20130),e)},40580:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.registerOlPointEditor=void 0;var s=n(19239),a=n(10070),l=n(88197),u=function(t){function e(e,n,i){var r=t.call(this)||this,a=null!=i?i:{},u=a.editingPropertyName,c=void 0===u?"editing":u,h=a.positionPropertyName,p=void 0===h?"position":h,d=a.positionComponentsNum,f=void 0===d?2:d,g=r.disposeVar(new l.OlPointEditor);if(n.add(g),r.dispose((function(){return n.delete(g)})),r._editor=g,2===f)r.dispose((0,s.bind)([g,"position"],[e,p]));else if(3===f){r.dispose(g.positionChanged.disposableOn((function(){var t=g.position;if(void 0!==t){var n=e[p];if(void 0===n){var i=o(t,2),r=i[0],s=i[1];e[p]=[r,s,0]}else{var a=o(n,3),l=(a[0],a[1],a[2]),u=o(t,2);r=u[0],s=u[1],e[p]=[r,s,l]}}else e[p]=void 0})));var y=o((0,s.getReactFuncs)([e,p]),3),_=y[0],m=(y[1],y[2],_());if(void 0===m)g.position=void 0;else{var v=o(m,3),b=v[0],x=v[1];v[2],g.position=[b,x]}}else console.error("positionComponentsNum23".concat(f));return r.dispose(g.enabledChanged.disposableOn((function(){g.enabled||(e[c]=!1)}))),g.enabled=!0,r.dispose((function(){return g.enabled=!1})),r}return r(e,t),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},enumerable:!1,configurable:!0}),e}(s.Destroyable);e.registerOlPointEditor=function(t,e,n,i){var r=new a.ObjResettingWithEvent(t,(function(){var t=(null!=i?i:{}).editingPropertyName;if(e[void 0===t?"editing":t])return new u(e,n,i)}));return function(){return r.destroy()}}},71857:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlPoint=void 0;var s=n(87442),a=o(n(81090)),l=n(56528),u=o(n(16899)),c=n(57646),h=o(n(71800)),p=n(89931),d=o(n(58958)),f=o(n(47539)),g=n(43938),y=n(19239),_=n(40580),m=n(44809),v=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.dispose(n.olPickedEvent.disposableOn((function(t){var n;t&&t.layer===v&&null!==(n=e.allowPicking)&&void 0!==n&&n&&e.pickedEvent.emit(new g.SceneObjectPickedInfo(e,t))})));var r=n.map;if(!r)return console.warn("map is undefined!"),i;var o=function(t){return t?"rgba(".concat(255*t[0],",").concat(255*t[1],",").concat(255*t[2],",").concat(t[3],")"):"rgba(255, 255, 255 , 1)"},s=new f.default,m=new h.default;i.dispose((function(){return m.dispose()}));var v=new u.default({source:m,style:s});i.dispose((function(){return v.dispose()})),r.addLayer(v),i.dispose((function(){return r.removeLayer(v)}));var b=i.disposeVar(new y.Event);(x=function(){var t,n,i,r=null!==(t=e.strokeWidth)&&void 0!==t?t:2,a=new p.Circle({fill:new p.Fill({color:o(e.fillColor)}),stroke:r>0?new d.default({color:o(null!==(n=e.strokeColor)&&void 0!==n?n:[0,.6,1,1]),width:r}):void 0,radius:null!==(i=e.radius)&&void 0!==i?i:5});s.setImage(a),b.emit()})();var x,w=i.disposeVar((0,y.createNextAnimateFrameEvent)(e.fillColorChanged,e.strokeColorChanged,e.strokeWidthChanged,e.radiusChanged));i.dispose(w.disposableOn(x)),(x=function(){var t;v.setZIndex(null!==(t=e.zIndex)&&void 0!==t?t:0)})(),i.dispose(e.zIndexChanged.disposableOn(x)),(x=function(){if(m.clear(),e.position){var t=(0,c.fromLonLat)(e.position),n=new l.Point(t),i=new a.default(n);m.addFeature(i)}})(),i.dispose(e.positionChanged.disposableOn(x)),(x=function(){var t;v.setVisible(null===(t=e.show)||void 0===t||t)})(),i.dispose(e.showChanged.disposableOn(x)),(x=function(){v.setStyle(s)})(),i.dispose(b.disposableOn(x));var E=i.disposeVar((0,y.createNextAnimateFrameEvent)(e.editingChanged));i.dispose((0,_.registerOlPointEditor)(E,e,n)),i.dispose(e.flyToEvent.disposableOn((function(t){if(e.position){var n=(0,c.fromLonLat)(e.position),i=new l.Point(n),o=r.getView();o.fit(i,{duration:null!=t?t:1e3,padding:[100,100,100,100],minResolution:o.getResolution()})}})));do{if(!(P=n.interaction))break;i.dispose(P.pointerClick.clickEvent.disposableOn((function(t){var n=r.getEventPixel(t);try{r.forEachFeatureAtPixel(n,(function(t,n,i){n===v&&e.clickEvent.emit()}),{})}catch(t){console.warn("openlayer map.forEachFeatureAtPixel error 2 ".concat(t))}})))}while(0);do{var P;if(!(P=n.interaction))break;i.dispose(P.pointerHover.hoverEvent.disposableOn((function(t){var n=r.getEventPixel(t);try{r.forEachFeatureAtPixel(n,(function(t,n,i){n===v&&(e.hovered=!0)}),{})}catch(t){console.error("openlayer map.forEachFeatureAtPixel error 2 ".concat(t))}}))),i.dispose(P.pointerHover.hoverOutEvent.disposableOn((function(){e.hovered=!1})))}while(0);return i}var n;return r(e,t),n=e,e.type=n.register(m.OlPoint.type,n),e}(s.OpenLayersObject);e.OlOlPoint=v},44809:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlPoint=void 0;var l=n(43938),u=n(19239),c=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n._flyToEvent=n.disposeVar(new u.Event),n._clickEvent=n.disposeVar(new u.Event),n._hovered=n.disposeVar((0,u.react)(!1)),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlPoint"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},Object.defineProperty(e.prototype,"clickEvent",{get:function(){return this._clickEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hovered",{get:function(){return this._hovered.value},set:function(t){this._hovered.value=t},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(n){var i=this;return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new l.GroupProperty("","",[new l.BooleanProperty("",".",!0,!1,[this,"show"],e.defaults.show),new l.FunctionProperty("","",["number"],(function(t){return i.flyTo(t)}),[e.defaults.duration]),new l.Number2Property("","",!0,!1,[this,"position"]),new l.BooleanProperty("","",!0,!1,[this,"editing"],e.defaults.editing),new l.BooleanProperty("","",!0,!1,[this,"allowPicking"],e.defaults.allowPicking),new l.GroupProperty("","",[new l.ColorProperty("","",!0,!1,[this,"fillColor"],e.defaults.fillColor),new l.ColorProperty("","",!0,!1,[this,"strokeColor"],e.defaults.strokeColor),new l.NumberProperty("","",!0,!1,[this,"strokeWidth"],e.defaults.strokeWidth),new l.NumberProperty("","",!0,!1,[this,"radius"],e.defaults.radius),new l.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"])])])],!1)},n=e,e.type=n.register("OlPoint",n,{chsName:"OlPoint",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlPoint"}),e.defaults=o(o({},l.ESSceneObject.defaults),{show:!0,duration:1e3,editing:!0,allowPicking:!1,strokeColor:[0,.6,1,1],fillColor:[1,1,1,1],strokeWidth:2,radius:5}),e}(l.ESSceneObject);e.OlPoint=c,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,position:(0,u.reactArrayWithUndefined)(void 0),editing:void 0,allowPicking:void 0,fillColor:(0,u.reactArrayWithUndefined)(void 0),strokeColor:(0,u.reactArrayWithUndefined)(void 0),strokeWidth:void 0,radius:void 0,zIndex:void 0})}}(c=e.OlPoint||(e.OlPoint={})),e.OlPoint=c,(0,u.extendClassProps)(c.prototype,c.createDefaultProps)},57777:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(44809),e),r(n(71857),e)},33078:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlPolygon=void 0;var s=o(n(81090)),a=n(56528),l=o(n(16899)),u=n(57646),c=o(n(71800)),h=o(n(51345)),p=o(n(58958)),d=o(n(47539)),f=n(43938),g=n(19239),y=n(87442),_=n(13947),m=n(57777),v=n(72624),b=n(54187),x=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.dispose(n.olPickedEvent.disposableOn((function(t){var n;t&&t.layer===x&&null!==(n=e.allowPicking)&&void 0!==n&&n&&e.pickedEvent.emit(new f.SceneObjectPickedInfo(e,t))})));var r=n.map;if(!r)return console.warn("map is undefined!"),i;var o=function(t){return t?"rgba(".concat(255*t[0],",").concat(255*t[1],",").concat(255*t[2],",").concat(t[3],")"):"rgba(255, 255, 255 , 1)"},y=new d.default,v=new c.default;i.dispose((function(){return v.dispose()}));var x=new l.default({source:v,style:y});i.dispose((function(){return x.dispose()})),r.addLayer(x),i.dispose((function(){return r.removeLayer(x)}));var w=i.disposeVar(new g.Event);(T=function(){var t,n,i,r,s,a;y.setFill(new h.default({color:o(e.fillColor)})),y.setStroke(new p.default({color:o(null!==(t=e.strokeColor)&&void 0!==t?t:[0,.6,1,1]),width:null!==(n=e.strokeWidth)&&void 0!==n?n:5,lineCap:null!==(i=e.lineCap)&&void 0!==i?i:"round",lineJoin:null!==(r=e.lineJoin)&&void 0!==r?r:"round",lineDash:e.lineDash,lineDashOffset:null!==(s=e.lineDashOffset)&&void 0!==s?s:0,miterLimit:null!==(a=e.miterLimit)&&void 0!==a?a:10})),w.emit()})();var E=i.disposeVar((0,g.createNextAnimateFrameEvent)(e.fillColorChanged,e.strokeColorChanged,e.strokeWidthChanged,e.lineCapChanged,e.lineJoinChanged,e.lineDashChanged,e.lineDashOffsetChanged,e.miterLimitChanged));i.dispose(E.disposableOn(T)),(T=function(){var t;x.setZIndex(null!==(t=e.zIndex)&&void 0!==t?t:0)})(),i.dispose(e.zIndexChanged.disposableOn(T)),(T=function(){if(v.clear(),e.positions&&!(e.positions.length<3)){var t=e.positions.map((function(t){return(0,u.fromLonLat)(t)}));t.push(t[0]);var n=new a.Polygon([t]),i=new s.default(n);v.addFeature(i)}})(),i.dispose(e.positionsChanged.disposableOn(T)),(T=function(){var t;x.setVisible(null===(t=e.show)||void 0===t||t)})(),i.dispose(e.showChanged.disposableOn(T)),(T=function(){x.setStyle(y)})(),i.dispose(w.disposableOn(T));var P=i.disposeVar((0,g.createNextAnimateFrameEvent)(e.editingChanged,e.allowDeletingChanged,e.allowInsertingChanged,e.maxPointsChanged,e.minPointsChanged)),C=e.allowDeleting,O=e.allowInserting,S=e.maxPoints,I=e.minPoints;i.dispose((0,_.registerOlLineStringEditor)(P,e,n,{allowDeleting:C,allowInserting:O,maxPoints:S,minPoints:I}));var L=i.disposeVar(new m.OlPoint);n.add(L),i.dispose((function(){return n.delete(L)})),(T=function(){var t;L.show=null!==(t=e.pointEditing)&&void 0!==t&&t&&e.positions&&e.positions.length>0})();var M=i.disposeVar((0,g.createNextAnimateFrameEvent)(e.pointEditingChanged,e.positionsChanged));i.dispose(M.disposableOn(T));var T,R=!1;return(T=function(){e.positions&&(R=!0,L.position=(0,b.getCenterFromPositions)(e.positions),R=!1)})(),i.dispose(e.positionsChanged.disposableOn(T)),i.dispose((0,g.bind)([L,"editing"],[e,"pointEditing"])),i.dispose(e.editingChanged.disposableOn((function(t){t&&(e.pointEditing=!1)}))),i.dispose(e.pointEditingChanged.disposableOn((function(t){t&&(e.editing=!1)}))),i.dispose(L.positionChanged.disposableOn((function(t,n){R||n&&t&&e.positions&&(e.positions=(0,b.moveAllPositionsWithCenter)(e.positions,t,n))}))),i.dispose(e.flyToEvent.disposableOn((function(t){if(e.positions){var n=e.positions.map((function(t){return(0,u.fromLonLat)(t)})),i=new a.LineString(n);r.getView().fit(i,{duration:null!=t?t:1e3,padding:[100,100,100,100]})}}))),i}var n;return r(e,t),n=e,e.type=n.register(v.OlPolygon.type,n),e}(y.OpenLayersObject);e.OlOlPolygon=x},72624:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlPolygon=void 0;var l=n(8068),u=n(43938),c=n(19239),h=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new c.Event),n._flyToEvent=n.disposeVar(new c.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlPolygon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},e.prototype.getProperties=function(n){var i=this;return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new u.GroupProperty("","",[new u.BooleanProperty("",".",!0,!1,[this,"show"],!0),new u.FunctionProperty("","",["number"],(function(t){return i.flyTo(t)}),[1e3]),new u.Number2sProperty("","",!0,!1,[this,"positions"]),new u.BooleanProperty("","",!0,!1,[this,"editing"],!1),new u.BooleanProperty("","",!0,!1,[this,"pointEditing"],!1),new u.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new u.GroupProperty("","",[new u.ColorProperty("","",!0,!1,[this,"fillColor"]),new u.ColorProperty("","",!0,!1,[this,"strokeColor"],[0,.6,1,1]),new u.NumberProperty("","",!0,!1,[this,"strokeWidth"],5),new u.EnumProperty("lineCap",e.description.lineCap,!0,!1,[this,"lineCap"],e.defaultValue.lineCapTypeEnums,e.defaultValue.lineCap),new u.EnumProperty("lineJoin",e.description.lineJoin,!0,!1,[this,"lineJoin"],e.defaultValue.lineJoinTypeEnums,e.defaultValue.lineCap),new u.NumbersProperty("lineDash",e.description.lineDash,!0,!1,[this,"lineDash"],e.defaultValue.lineDash),new u.NumberProperty("lineDashOffset",e.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],e.defaultValue.lineDashOffset),new u.NumberProperty("miterLimit",e.description.miterLimit,!0,!1,[this,"miterLimit"],e.defaultValue.miterLimit),new u.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"])]),new u.GroupProperty("","",[new u.NumberProperty("","",!0,!1,[this,"maxPoints"]),new u.NumberProperty("",", 2",!0,!1,[this,"minPoints"]),new u.BooleanProperty("","",!0,!1,[this,"allowDeleting"]),new u.BooleanProperty("","",!0,!1,[this,"allowInserting"])])])],!1)},n=e,e.type=n.register("OlPolygon",n,{chsName:"OlPolygon",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlPolygon"}),e.description={lineCap:"Line cap style: `butt`, `round`, or `square`",lineJoin:"Line join style: `bevel`, `round`, or `miter`",lineDash:"Line dash pattern. Default is `null` (no dash).",lineDashOffset:"Line dash offset.",miterLimit:"Miter limit."},e.defaultValue={lineCap:"round",lineJoin:"round",lineDash:void 0,lineDashOffset:0,miterLimit:10,lineCapTypeEnums:[["butt","butt"],["round","round"],["square","square"]],lineJoinTypeEnums:[["bevel","bevel"],["round","round"],["miter","miter"]]},e}(u.ESSceneObject);e.OlPolygon=h,function(t){t.createDefaultProps=function(){return o(o({},u.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,l.reactPosition2Ds)(void 0),editing:void 0,pointEditing:void 0,allowPicking:void 0,fillColor:(0,c.reactArrayWithUndefined)(void 0),strokeColor:(0,c.reactArrayWithUndefined)(void 0),strokeWidth:void 0,lineCap:void 0,lineJoin:void 0,lineDash:(0,c.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0,zIndex:void 0,maxPoints:void 0,minPoints:void 0,allowDeleting:void 0,allowInserting:void 0})}}(h=e.OlPolygon||(e.OlPolygon={})),e.OlPolygon=h,(0,c.extendClassProps)(h.prototype,h.createDefaultProps)},1448:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(72624),e),r(n(33078),e)},26970:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlRectangle=void 0;var o=n(19239),s=n(87442),a=n(13947),l=n(67449),u=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=i.disposeVar((0,o.createNextAnimateFrameEvent)(e.editingChanged));return i.dispose((0,a.registerOlLineStringEditor)(r,e,n,{allowDeleting:!1,allowInserting:!1,maxPoints:2,minPoints:2})),i}var n;return r(e,t),n=e,e.type=n.register(l.OlRectangle.type,n),e}(s.OpenLayersObject);e.OlOlRectangle=u},67449:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlRectangle=void 0;var l=n(8068),u=n(43938),c=n(19239),h=n(57777),p=n(1448),d=n(54187),f=function(t){function e(e){var n=t.call(this,e)||this;n._pickedEvent=n.disposeVar(new c.Event),n._flyToEvent=n.disposeVar(new c.Event),n._polygon=n.disposeVar(new p.OlPolygon),n._centerPoint=n.disposeVar(new h.OlPoint);var i=n._polygon,r=n._centerPoint,o=n;n.dispose(n.components.disposableAdd(i)),n.dispose(n.components.disposableAdd(r)),n.dispose(i.pickedEvent.disposableOn((function(t){var e;null!==(e=o.allowPicking)&&void 0!==e&&e&&o.pickedEvent.emit(new u.SceneObjectPickedInfo(o,t))}))),n.dispose((0,c.track)([i,"show"],[o,"show"])),n.dispose((0,c.track)([i,"fillColor"],[o,"fillColor"])),n.dispose((0,c.track)([i,"strokeColor"],[o,"strokeColor"])),n.dispose((0,c.track)([i,"strokeWidth"],[o,"strokeWidth"])),n.dispose((0,c.track)([i,"zIndex"],[o,"zIndex"])),n.dispose((0,c.track)([i,"allowPicking"],[o,"allowPicking"])),n.dispose((0,c.track)([i,"lineCap"],[o,"lineCap"])),n.dispose((0,c.track)([i,"lineJoin"],[o,"lineJoin"])),n.dispose((0,c.track)([i,"lineDash"],[o,"lineDash"])),n.dispose((0,c.track)([i,"lineDashOffset"],[o,"lineDashOffset"])),n.dispose((0,c.track)([i,"miterLimit"],[o,"miterLimit"])),(a=function(){if(i.positions=void 0,o.positions&&!(o.positions.length<2)){var t=Math.min(o.positions[0][0],o.positions[1][0]),e=Math.max(o.positions[0][0],o.positions[1][0]),n=Math.min(o.positions[0][1],o.positions[1][1]),r=Math.max(o.positions[0][1],o.positions[1][1]);i.positions=[[t,n],[e,n],[e,r],[t,r],[t,n]]}})(),n.dispose(o.positionsChanged.disposableOn(a)),n.dispose(o.flyToEvent.disposableOn((function(t){i.flyTo(t)}))),(a=function(){var t;r.show=null!==(t=o.pointEditing)&&void 0!==t&&t&&o.positions&&o.positions.length>0})();var s=n.disposeVar((0,c.createNextAnimateFrameEvent)(o.pointEditingChanged,o.positionsChanged));n.dispose(s.disposableOn(a));var a,l=!1;return(a=function(){o.positions&&(l=!0,r.position=(0,d.getCenterFromPositions)(o.positions),l=!1)})(),n.dispose(o.positionsChanged.disposableOn(a)),n.dispose((0,c.bind)([r,"editing"],[o,"pointEditing"])),n.dispose(o.editingChanged.disposableOn((function(t){t&&(o.pointEditing=!1)}))),n.dispose(o.pointEditingChanged.disposableOn((function(t){t&&(o.editing=!1)}))),n.dispose(r.positionChanged.disposableOn((function(t,e){l||e&&t&&o.positions&&(o.positions=(0,d.moveAllPositionsWithCenter)(o.positions,t,e))}))),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlRectangle"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},Object.defineProperty(e.prototype,"polygon",{get:function(){return this._polygon},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){return this._centerPoint},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(e){var n=this;return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new u.GroupProperty("","",[new u.FunctionProperty("","",["number"],(function(t){return n.flyTo(t)}),[1e3]),new u.BooleanProperty("",".",!0,!1,[this,"show"],!0),new u.Number2sProperty("","",!0,!1,[this,"positions"]),new u.BooleanProperty("","",!0,!1,[this,"editing"],!1),new u.BooleanProperty("","",!0,!1,[this,"pointEditing"],!1),new u.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new u.GroupProperty("","",[new u.ColorProperty("","",!0,!1,[this,"fillColor"]),new u.ColorProperty("","",!0,!1,[this,"strokeColor"],[0,.6,1,1]),new u.NumberProperty("","",!0,!1,[this,"strokeWidth"],5),new u.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new u.EnumProperty("lineCap",p.OlPolygon.description.lineCap,!0,!1,[this,"lineCap"],p.OlPolygon.defaultValue.lineCapTypeEnums,p.OlPolygon.defaultValue.lineCap),new u.EnumProperty("lineJoin",p.OlPolygon.description.lineJoin,!0,!1,[this,"lineJoin"],p.OlPolygon.defaultValue.lineJoinTypeEnums,p.OlPolygon.defaultValue.lineCap),new u.NumbersProperty("lineDash",p.OlPolygon.description.lineDash,!0,!1,[this,"lineDash"],p.OlPolygon.defaultValue.lineDash),new u.NumberProperty("lineDashOffset",p.OlPolygon.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],p.OlPolygon.defaultValue.lineDashOffset),new u.NumberProperty("miterLimit",p.OlPolygon.description.miterLimit,!0,!1,[this,"miterLimit"],p.OlPolygon.defaultValue.miterLimit)])])],!1)},n=e,e.type=n.register("OlRectangle",n,{chsName:"OlRectangle",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlRectangle"}),e.description={lineCap:"Line cap style: `butt`, `round`, or `square`",lineJoin:"Line join style: `bevel`, `round`, or `miter`",lineDash:"Line dash pattern. Default is `null` (no dash).",lineDashOffset:"Line dash offset.",miterLimit:"Miter limit."},e.defaultValue={lineCap:"round",lineJoin:"round",lineDash:void 0,lineDashOffset:0,miterLimit:10,lineCapTypeEnums:[["butt","butt"],["round","round"],["square","square"]],lineJoinTypeEnums:[["bevel","bevel"],["round","round"],["miter","miter"]]},e}(u.ESSceneObject);e.OlRectangle=f,function(t){t.createDefaultProps=function(){return o(o({},u.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,l.reactPosition2Ds)(void 0),editing:void 0,pointEditing:void 0,allowPicking:void 0,fillColor:(0,c.reactArrayWithUndefined)(void 0),strokeColor:(0,c.reactArrayWithUndefined)(void 0),strokeWidth:void 0,zIndex:void 0,lineCap:void 0,lineJoin:void 0,lineDash:(0,c.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0})}}(f=e.OlRectangle||(e.OlRectangle={})),e.OlRectangle=f,(0,c.extendClassProps)(f.prototype,f.createDefaultProps)},86939:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(67449),e),r(n(26970),e)},6038:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlRegularHexagon=void 0;var o=n(19239),s=n(87442),a=n(13947),l=n(81264),u=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=i.disposeVar((0,o.createNextAnimateFrameEvent)(e.editingChanged));return i.dispose((0,a.registerOlLineStringEditor)(r,e,n,{allowDeleting:!1,allowInserting:!1,maxPoints:2,minPoints:2})),i}var n;return r(e,t),n=e,e.type=n.register(l.OlRegularHexagon.type,n),e}(s.OpenLayersObject);e.OlOlRegularHexagon=u},81264:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlRegularHexagon=void 0;var l=n(8068),u=n(43938),c=n(19239),h=n(7521),p=n(57777),d=n(1448),f=n(54187),g=function(t){function e(e){var n=t.call(this,e)||this;n._pickedEvent=n.disposeVar(new c.Event),n._flyToEvent=n.disposeVar(new c.Event),n._circle=n.disposeVar(new h.OlCircle),n._centerPoint=n.disposeVar(new p.OlPoint);var i=n._circle;i.heading=60;var r=n._centerPoint,o=n;n.dispose(n.components.disposableAdd(i)),n.dispose(n.components.disposableAdd(r)),n.dispose(i.pickedEvent.disposableOn((function(t){var e;null!==(e=o.allowPicking)&&void 0!==e&&e&&o.pickedEvent.emit(new u.SceneObjectPickedInfo(o,t))}))),n.dispose((0,c.track)([i,"show"],[o,"show"])),n.dispose((0,c.track)([i,"positions"],[o,"positions"])),n.dispose((0,c.track)([i,"fillColor"],[o,"fillColor"])),n.dispose((0,c.track)([i,"strokeColor"],[o,"strokeColor"])),n.dispose((0,c.track)([i,"strokeWidth"],[o,"strokeWidth"])),n.dispose((0,c.track)([i,"zIndex"],[o,"zIndex"])),n.dispose((0,c.track)([i,"allowPicking"],[o,"allowPicking"])),n.dispose((0,c.track)([i,"lineCap"],[o,"lineCap"])),n.dispose((0,c.track)([i,"lineJoin"],[o,"lineJoin"])),n.dispose((0,c.track)([i,"lineDash"],[o,"lineDash"])),n.dispose((0,c.track)([i,"lineDashOffset"],[o,"lineDashOffset"])),n.dispose((0,c.track)([i,"miterLimit"],[o,"miterLimit"])),n.dispose(o.flyToEvent.disposableOn((function(t){i.flyTo(t)}))),(a=function(){var t;r.show=null!==(t=o.pointEditing)&&void 0!==t&&t&&o.positions&&o.positions.length>0})();var s=n.disposeVar((0,c.createNextAnimateFrameEvent)(o.pointEditingChanged,o.positionsChanged));n.dispose(s.disposableOn(a));var a,l=!1;return(a=function(){i.polygon.positions&&(l=!0,r.position=(0,f.getCenterFromPositions)(i.polygon.positions),l=!1)})(),n.dispose(i.polygon.positionsChanged.disposableOn(a)),n.dispose((0,c.bind)([r,"editing"],[o,"pointEditing"])),n.dispose(o.editingChanged.disposableOn((function(t){t&&(o.pointEditing=!1)}))),n.dispose(o.pointEditingChanged.disposableOn((function(t){t&&(o.editing=!1)}))),n.dispose(r.positionChanged.disposableOn((function(t,e){l||e&&t&&o.positions&&(o.positions=(0,f.moveAllPositionsWithCenter)(o.positions,t,e))}))),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlRegularHexagon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},Object.defineProperty(e.prototype,"circle",{get:function(){return this._circle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){return this._centerPoint},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(e){var n=this;return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new u.GroupProperty("","",[new u.FunctionProperty("","",["number"],(function(t){return n.flyTo(t)}),[1e3]),new u.BooleanProperty("",".",!0,!1,[this,"show"],!0),new u.Number2sProperty("","",!0,!1,[this,"positions"]),new u.BooleanProperty("","",!0,!1,[this,"editing"],!1),new u.BooleanProperty("","",!0,!1,[this,"pointEditing"],!1),new u.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new u.GroupProperty("","",[new u.ColorProperty("","",!0,!1,[this,"fillColor"]),new u.ColorProperty("","",!0,!1,[this,"strokeColor"],[0,.6,1,1]),new u.NumberProperty("","",!0,!1,[this,"strokeWidth"],5),new u.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"]),new u.EnumProperty("lineCap",d.OlPolygon.description.lineCap,!0,!1,[this,"lineCap"],d.OlPolygon.defaultValue.lineCapTypeEnums,d.OlPolygon.defaultValue.lineCap),new u.EnumProperty("lineJoin",d.OlPolygon.description.lineJoin,!0,!1,[this,"lineJoin"],d.OlPolygon.defaultValue.lineJoinTypeEnums,d.OlPolygon.defaultValue.lineCap),new u.NumbersProperty("lineDash",d.OlPolygon.description.lineDash,!0,!1,[this,"lineDash"],d.OlPolygon.defaultValue.lineDash),new u.NumberProperty("lineDashOffset",d.OlPolygon.description.lineDashOffset,!0,!1,[this,"lineDashOffset"],d.OlPolygon.defaultValue.lineDashOffset),new u.NumberProperty("miterLimit",d.OlPolygon.description.miterLimit,!0,!1,[this,"miterLimit"],d.OlPolygon.defaultValue.miterLimit)])])],!1)},n=e,e.type=n.register("OlRegularHexagon",n,{chsName:"",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlRegularHexagon"}),e}(u.ESSceneObject);e.OlRegularHexagon=g,function(t){t.createDefaultProps=function(){return o(o({},u.ESSceneObject.createDefaultProps()),{show:void 0,positions:(0,l.reactPosition2Ds)(void 0),editing:void 0,pointEditing:void 0,allowPicking:void 0,fillColor:(0,c.reactArrayWithUndefined)(void 0),strokeColor:(0,c.reactArrayWithUndefined)(void 0),strokeWidth:void 0,zIndex:void 0,lineCap:void 0,lineJoin:void 0,lineDash:(0,c.reactArrayWithUndefined)(void 0),lineDashOffset:void 0,miterLimit:void 0})}}(g=e.OlRegularHexagon||(e.OlRegularHexagon={})),e.OlRegularHexagon=g,(0,c.extendClassProps)(g.prototype,g.createDefaultProps)},92849:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(81264),e),r(n(6038),e)},14058:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlScreenCapture=void 0;var o=n(43938),s=n(57646),a=n(19239),l=n(87442),u=n(91439),c=function(t){function e(e,n){var i=t.call(this,e,n)||this,l=n.map;if(!l)return console.warn("map is undefined!"),i;var u=i.disposeVar((0,a.react)("")),c=i.disposeVar((0,a.react)(0)),h=i.disposeVar((0,a.react)(0)),p=e.rectangle,d=function(t){function n(n,i,r){var o=t.call(this)||this;o._container=n;var s=document.createElement("div");o._container.appendChild(s),o.dispose((function(){o._container.removeChild(s)})),s.style.pointerEvents="none",s.style.display="flex",s.style.flexDirection="column",s.style.justifyContent="flex-start";var l=o.disposeVar((0,a.createNextAnimateFrameEvent)(e.widthChanged,e.heightChanged,e.uriChanged));return o.dispose(l.disposableOn((function(){if(e.uri){var t="\n                        width:".concat(e.width,"px;\n                        height:").concat(e.height,"px;\n                        margin-left:50px;\n                        border:3px solid red;\n                    "),n='\n                        <img src="'.concat(e.uri,'" style="').concat(t,'">\n                        <div style="').concat("\n                        height:50px;\n                        width:51px;\n                        display:flex;\n                        justify-content:center;\n                        align-items:center;\n                        position:relative;\n                    ",'">\n                        <hr style="').concat("\n                        border:1px solid red;\n                        position:absolute;\n                        width:70px;\n                        transform:rotate(-45deg);\n                    ",'"></hr>\n                        </div>\n                    ');s.innerHTML=n}}))),o}return r(n,t),n}(a.Destroyable),f=i.disposeVar(new o.GeoCustomDivPoi);f.originRatioAndOffset=[0,1,0,0],n.add(f),i.dispose((function(){return n.delete(f)})),i.dispose((0,a.track)([f,"show"],[e,"show"])),i.dispose(p.editingChanged.disposableOn((function(t){if(!t&&p.positions){var e=p.positions,n=Math.max(e[0][0],e[1][0]),i=Math.max(e[0][1],e[1][1]);g([n,i]);var r=l.getViewport().querySelector("canvas");if(null===r)return void console.warn("canvas is null");var o=e.map((function(t){return(0,s.fromLonLat)(t)})),a=l.getPixelFromCoordinate(o[0]),d=l.getPixelFromCoordinate(o[1]),_=a[0],m=a[1],v=d[0],b=d[1],x=[_,m],w=[v,b];_<v&&m>b?(x=[_,m],w=[v,b]):_<v&&m<b?(x=[_,b],w=[v,m]):_>v&&m>b?(x=[v,m],w=[_,b]):_>v&&m<b&&(x=[v,b],w=[_,m]),p.show=!1,setTimeout((function(){var t=function(t,e,n){var i=window.devicePixelRatio,r=t.getContext("2d");if(null!==r){var o=Math.min(e[0],n[0])*i,s=Math.min(e[1],n[1])*i,a=Math.abs(n[0]-e[0])*i,l=Math.abs(e[1]-n[1])*i,u=r.getImageData(o,s,a,l),c=document.createElement("canvas");c.width=a,c.height=l;var h=c.getContext("2d");if(null!==h)return h.putImageData(u,0,0),c.toDataURL("image/png");console.warn("resultCtx is null")}else console.warn("ctx2 is null")}(r,x,w),e=Math.abs(w[0]-x[0]),n=Math.abs(x[1]-w[1]);t?(u.value=t,c.value=e,h.value=n,y(),p.show=!0):console.warn("base64Str is null")}),200)}else f.position=void 0,f.show=!1})));var g=function(t){f.position=[t[0],t[1],0],f.show=!0},y=function(){var t;if(u.value||c.value||h.value){var n=null!==(t=e.scale)&&void 0!==t?t:2;e.width=c.value*n,e.height=h.value*n,e.uri=u.value}};return i.dispose(e.scaleChanged.disposableOn(y)),f.instanceClass=d,i}var n;return r(e,t),n=e,e.type=n.register(u.OlScreenCapture.type,n),e}(l.OpenLayersObject);e.OlOlScreenCapture=c},91439:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlScreenCapture=void 0;var l=n(43938),u=n(19239),c=n(86939),h=function(t){function e(e){var n=t.call(this,e)||this;n._flyToEvent=n.disposeVar(new u.Event),n._rectangle=n.disposeVar(new c.OlRectangle);var i=n._rectangle,r=n;return n.dispose(n.components.disposableAdd(i)),n.dispose((0,u.bind)([i,"show"],[r,"show"])),n.dispose((0,u.bind)([i,"editing"],[r,"editing"])),i.lineDash=[10],i.strokeColor=[1,0,0,1],i.fillColor=[0,0,0,0],i.strokeWidth=1,n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlScreenCapture"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t,["uri","width","height"])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},Object.defineProperty(e.prototype,"rectangle",{get:function(){return this._rectangle},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this._rectangle.positions=void 0,this.editing=!0},e.prototype.getProperties=function(e){var n=this;return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new l.GroupProperty("","",[new l.FunctionProperty("","reset,",[],(function(){return n.reset()}),[]),new l.BooleanProperty("",".",!0,!1,[this,"show"],!0),new l.BooleanProperty("","",!0,!1,[this,"editing"],!1),new l.NumberProperty("",".",!0,!1,[this,"scale"],2)])],!1)},n=e,e.type=n.register("OlScreenCapture",n,{chsName:"OlScreenCapture",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlScreenCapture"}),e}(l.ESSceneObject);e.OlScreenCapture=h,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,editing:void 0,zIndex:void 0,uri:void 0,width:void 0,height:void 0,scale:void 0})}}(h=e.OlScreenCapture||(e.OlScreenCapture={})),e.OlScreenCapture=h,(0,u.extendClassProps)(h.prototype,h.createDefaultProps)},59116:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(91439),e),r(n(14058),e)},40667:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlSimpleWMTSLayer=void 0;var s=n(19239),a=n(28641),l=o(n(61140)),u=n(57646),c=o(n(57433)),h=o(n(59600)),p=n(87442),d=n(35876),f=function(t){function e(e,n){var i,r,o,p,d,f,g=this;g=t.call(this)||this;var y=n.map;if(!y)return console.warn("map is undefined!"),g;var _=(0,u.get)("EPSG:4326");if(!_)return g;for(var m=_.getExtent(),v=(0,a.getWidth)(m)/256,b=new Array(19),x=new Array(19),w=0;w<19;++w)b[w]=v/Math.pow(2,w),x[w]=w;var E=new c.default({layer:e.layer,matrixSet:e.matrixSet,style:null!==(i=e.style)&&void 0!==i?i:"default",format:e.format,tileGrid:new h.default(null!==(r=e.tileGrid)&&void 0!==r?r:{origin:(0,a.getTopLeft)(m),resolutions:b,matrixIds:x}),url:e.url,urls:e.urls,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:null!==(o=e.crossOrigin)&&void 0!==o?o:"anonymous",interpolate:e.interpolate,projection:null!==(p=e.projection)&&void 0!==p?p:_,reprojectionErrorThreshold:e.reprojectionErrorThreshold,requestEncoding:e.requestEncoding,tileClass:e.tileClass&&JSON.parse(e.tileClass),tilePixelRatio:e.tilePixelRatio,version:e.version,dimensions:e.dimensions,tileLoadFunction:e.tileLoadFunction&&Function('"use strict";return ('+e.tileLoadFunction+")")(),wrapX:e.wrapX,transition:e.transition,zDirection:e.zDirection});g.dispose((function(){return E.dispose()}));var P=new l.default({source:E});P.setVisible(null===(d=e.show)||void 0===d||d),P.setZIndex(null!==(f=e.zIndex)&&void 0!==f?f:0),g.dispose((function(){return P.dispose()})),g.dispose(e.showChanged.disposableOn((function(t){P.setVisible(null==t||t)}))),g.dispose(e.zIndexChanged.disposableOn((function(t){P.setZIndex(null!=t?t:0)}))),y.addLayer(P),g.dispose((function(){return y.removeLayer(P)}));var C=g.disposeVar((0,s.createNextAnimateFrameEvent)(e.attributionsChanged,e.tileGridChanged,e.tileLoadFunctionChanged));return g.dispose(C.disposableOn((function(){var t;E.tileGrid=new h.default(null!==(t=e.tileGrid)&&void 0!==t?t:{origin:(0,a.getTopLeft)(m),resolutions:b,matrixIds:x}),e.attributions&&E.setAttributions(e.attributions),e.tileLoadFunction&&E.setTileLoadFunction(Function('"use strict";return ('+e.tileLoadFunction+")")())}))),e.urlChanged.disposableOn((function(t){E.setUrl(null!=t?t:"")})),e.urlsChanged.disposableOn((function(t){E.setUrls(null!=t?t:[])})),g}return r(e,t),e}(s.Destroyable),g=function(t){function e(e,n){var i,r=t.call(this,e,n)||this;r.dispose((function(){return i&&i.destroy()}));var o=function(){i&&i.destroy(),e.layer&&e.matrixSet&&(i=new f(e,n))};o();var a=r.disposeVar((0,s.createNextAnimateFrameEvent)(e.attributionsCollapsibleChanged,e.cacheSizeChanged,e.crossOriginChanged,e.interpolateChanged,e.projectionChanged,e.reprojectionErrorThresholdChanged,e.layerChanged,e.matrixSetChanged,e.styleChanged,e.requestEncodingChanged,e.tileClassChanged,e.tilePixelRatioChanged,e.formatChanged,e.versionChanged,e.dimensionsChanged,e.wrapXChanged,e.transitionChanged,e.zDirectionChanged));return r.dispose(a.disposableOn(o)),r}var n;return r(e,t),n=e,e.type=n.register(d.OlSimpleWMTSLayer.type,n),e}(p.OpenLayersObject);e.OlOlSimpleWMTSLayer=g},35876:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlSimpleWMTSLayer=void 0;var l=n(43938),u=n(19239),c=n(51497),h=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlSimpleWMTSLayer"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(n){return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new l.GroupProperty("WMTS","WMTS",[new l.StringProperty("url",e.description.url,!0,!1,[this,"url"]),new l.StringsProperty("urls",e.description.urls,!0,!1,[this,"urls"]),new l.StringsProperty("attributions",e.description.attributions,!0,!1,[this,"attributions"]),new l.BooleanProperty("attributionsCollapsible",e.description.attributionsCollapsible,!0,!1,[this,"attributionsCollapsible"],e.default.attributionsCollapsible),new l.NumberProperty("cacheSize",e.description.cacheSize,!0,!1,[this,"cacheSize"]),new l.StringProperty("crossOrigin",e.description.crossOrigin,!0,!1,[this,"crossOrigin"],"anonymous"),new l.BooleanProperty("interpolate",e.description.interpolate,!0,!1,[this,"interpolate"],e.default.interpolate),new l.JsonProperty("tileGrid",e.description.tileGrid,!0,!1,[this,"tileGrid"]),new l.JsonProperty("projection",e.description.projection,!0,!1,[this,"projection"]),new l.NumberProperty("reprojectionErrorThreshold",e.description.reprojectionErrorThreshold,!0,!1,[this,"reprojectionErrorThreshold"],e.default.reprojectionErrorThreshold),new l.EnumProperty("requestEncoding",e.description.requestEncoding,!0,!1,[this,"requestEncoding"],[["KVP","KVP"],["REST","REST"]],e.default.requestEncoding),new l.StringProperty("layer",e.description.layer,!0,!1,[this,"layer"]),new l.StringProperty("style",e.description.style,!0,!1,[this,"style"],e.default.style),new l.EvalStringProperty("tileClass",e.description.tileClass,!0,!1,[this,"tileClass"]),new l.NumberProperty("tilePixelRatio",e.description.tilePixelRatio,!0,!1,[this,"tilePixelRatio"],e.default.tilePixelRatio),new l.StringProperty("format",e.description.format,!0,!1,[this,"format"],e.default.format),new l.StringProperty("version",e.description.version,!0,!1,[this,"version"],e.default.version),new l.StringProperty("matrixSet",e.description.matrixSet,!0,!1,[this,"matrixSet"]),new l.JsonProperty("dimensions",e.description.dimensions,!0,!1,[this,"dimensions"]),new l.EvalStringProperty("tileLoadFunction",e.description.tileLoadFunction,!0,!1,[this,"tileLoadFunction"],e.default.tileLoadFunction),new l.BooleanProperty("wrapX",e.description.wrapX,!0,!1,[this,"wrapX"],e.default.wrapX),new l.NumberProperty("transition",e.description.transition,!0,!1,[this,"transition"],e.default.transition),new l.NumberProperty("zDirection",e.description.zDirection,!0,!1,[this,"zDirection"],e.default.zDirection),new l.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"])])],!1)},n=e,e.type=n.register("OlSimpleWMTSLayer",n,{chsName:"OlSimpleWMTSLayer",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlSimpleWMTSLayer"}),e.description=o({url:"A URL for the service. For the RESTful request encoding, this is a URL template. For KVP encoding, it is normal URL. A {?-?} template pattern, for example subdomain{a-f}.domain.com, may be used instead of defining each one separately in the urls option.",urls:"An array of URLs. Requests will be distributed among the URLs in this array.",attributions:"Attributions",attributionsCollapsible:"true,Attributions are collapsible.",cacheSize:"Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.",crossOrigin:"The crossOrigin attribute for loaded images. Note that you must provide a crossOrigin value if you want to access pixel data with the Canvas renderer. See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.",interpolate:"true,Use interpolated values when resampling. By default, linear interpolation is used when resampling. Set to false to use the nearest neighbor instead.",tileGrid:"Tile grid.",projection:"Projection. Default is the view projection.",reprojectionErrorThreshold:"0.5,Maximum allowed reprojection error (in pixels). Higher values can increase reprojection performance, but decrease precision.",requestEncoding:"'KVP',Request encoding. One of 'KVP', 'REST'.",layer:"Layer name as advertised in the WMTS capabilities.",style:"Style name as advertised in the WMTS capabilities.",tileClass:"Class used to instantiate image tiles. Default is ImageTile.",tilePixelRatio:"1,The pixel ratio used by the tile service. For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px by 512px images (for retina/hidpi devices) then tilePixelRatio should be set to 2.",format:"'image/jpeg',Image format.Only used when requestEncoding is 'KVP'.",version:"'1.0.0',WMTS version.",matrixSet:"Matrix set.",dimensions:'Additional "dimensions" for tile requests. This is an object with properties named like the advertised WMTS dimensions.',tileLoadFunction:"Optional function to load a tile given a URL. The default is function(imageTile, src) {imageTile.getImage().src = src;};",wrapX:"false,Whether to wrap the world horizontally.",transition:"Duration of the opacity transition for rendering. To disable the opacity transition, pass transition: 0.",zDirection:"0\tChoose whether to use tiles with a higher or lower zoom level when between integer zoom levels. See getZForResolution"},c.sampleColorValue),e.default=o({interpolate:!0,attributionsCollapsible:!0,reprojectionErrorThreshold:.5,requestEncoding:"KVP",style:"default",tilePixelRatio:1,format:"image/jpeg",version:"1.0.0",tileLoadFunction:"function(imageTile, src) {imageTile.getImage().src = src;}",wrapX:!1,transition:250,zDirection:0},c.defaultColorValue),e}(l.ESSceneObject);e.OlSimpleWMTSLayer=h,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,zIndex:void 0,url:void 0,urls:(0,u.reactArrayWithUndefined)(void 0),attributions:(0,u.reactArrayWithUndefined)(void 0),attributionsCollapsible:void 0,cacheSize:void 0,crossOrigin:void 0,interpolate:void 0,tileGrid:(0,u.reactJsonWithUndefined)(void 0),projection:(0,u.reactJsonWithUndefined)(void 0),reprojectionErrorThreshold:void 0,requestEncoding:void 0,layer:void 0,style:void 0,tileClass:void 0,tilePixelRatio:void 0,format:void 0,version:void 0,matrixSet:void 0,dimensions:(0,u.reactJsonWithUndefined)(void 0),tileLoadFunction:void 0,wrapX:void 0,transition:void 0,zDirection:void 0})}}(h=e.OlSimpleWMTSLayer||(e.OlSimpleWMTSLayer={})),e.OlSimpleWMTSLayer=h,(0,u.extendClassProps)(h.prototype,h.createDefaultProps)},45540:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(35876),e),r(n(40667),e)},38200:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlSimpleXYZLayer=void 0;var s=n(28641),a=n(57646),l=o(n(54680)),u=o(n(8738)),c=n(19239),h=n(87442),p=n(16872),d=o(n(61140));n(45623);var f=function(t){function e(e,n){var i,r,o,h,p,f=this;f=t.call(this)||this;var g=n.map;if(!g)return console.warn("map is undefined!"),f;var y=(0,a.get)("EPSG:3857");if(!y)return f;for(var _=y.getExtent(),m=(0,s.getWidth)(_)/256,v=new Array(19),b=new Array(19),x=0;x<19;++x)v[x]=m/Math.pow(2,x),b[x]=x;var w=new l.default({tileGrid:new u.default(null!==(i=e.tileGrid)&&void 0!==i?i:{origin:(0,s.getTopLeft)(_),resolutions:v,matrixIds:b}),url:e.url,urls:e.urls,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:null!==(r=e.crossOrigin)&&void 0!==r?r:"anonymous",interpolate:e.interpolate,projection:null!==(o=e.projection)&&void 0!==o?o:y,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tilePixelRatio:e.tilePixelRatio,tileLoadFunction:e.tileLoadFunction&&Function('"use strict";return ('+e.tileLoadFunction+")")(),wrapX:e.wrapX,transition:e.transition,zDirection:e.zDirection,maxZoom:e.maxZoom,minZoom:e.minZoom,opaque:e.opaque,maxResolution:e.maxResolution,tileSize:e.tileSize,gutter:e.gutter,tileUrlFunction:e.tileUrlFunction&&Function('"use strict";return ('+e.tileUrlFunction+")")()});f.dispose((function(){return w.dispose()}));var E=new d.default({source:w});E.setVisible(null===(h=e.show)||void 0===h||h),E.setZIndex(null!==(p=e.zIndex)&&void 0!==p?p:0),f.dispose((function(){return E.dispose()})),f.dispose(e.showChanged.disposableOn((function(t){E.setVisible(null==t||t)}))),f.dispose(e.zIndexChanged.disposableOn((function(t){E.setZIndex(null!=t?t:0)}))),g.addLayer(E),f.dispose((function(){return g.removeLayer(E)}));var P=f.disposeVar((0,c.createNextAnimateFrameEvent)(e.attributionsChanged,e.tileGridChanged,e.tileLoadFunctionChanged,e.tileUrlFunctionChanged));return f.dispose(P.disposableOn((function(){var t;w.tileGrid=new u.default(null!==(t=e.tileGrid)&&void 0!==t?t:{origin:(0,s.getTopLeft)(_),resolutions:v,matrixIds:b}),e.attributions&&w.setAttributions(e.attributions),e.tileLoadFunction&&w.setTileLoadFunction(Function('"use strict";return ('+e.tileLoadFunction+")")()),e.tileUrlFunction&&w.setTileUrlFunction(Function('"use strict";return ('+e.tileUrlFunction+")")())}))),e.urlChanged.disposableOn((function(t){w.setUrl(null!=t?t:"")})),e.urlsChanged.disposableOn((function(t){w.setUrls(null!=t?t:[])})),f}return r(e,t),e}(c.Destroyable),g=function(t){function e(e,n){var i,r=t.call(this,e,n)||this;r.dispose((function(){return i&&i.destroy()}));var o=function(){i&&i.destroy(),i=new f(e,n)};o();var s=r.disposeVar((0,c.createNextAnimateFrameEvent)(e.attributionsCollapsibleChanged,e.cacheSizeChanged,e.crossOriginChanged,e.interpolateChanged,e.projectionChanged,e.reprojectionErrorThresholdChanged,e.tilePixelRatioChanged,e.wrapXChanged,e.transitionChanged,e.zDirectionChanged,e.maxZoomChanged,e.minZoomChanged,e.opaqueChanged,e.maxResolutionChanged,e.tileSizeChanged,e.gutterChanged));return r.dispose(s.disposableOn(o)),r}var n;return r(e,t),n=e,e.type=n.register(p.OlSimpleXYZLayer.type,n),e}(h.OpenLayersObject);e.OlOlSimpleXYZLayer=g},16872:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlSimpleXYZLayer=void 0;var l=n(43938),u=n(19239),c=n(51497),h=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlSimpleXYZLayer"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(n){return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new l.GroupProperty("","",[new l.BooleanProperty("",".",!0,!1,[this,"show"],!0),new l.GroupProperty("XYZ","XYZ",[new l.StringProperty("url",e.description.url,!0,!1,[this,"url"]),new l.StringsProperty("urls",e.description.urls,!0,!1,[this,"urls"]),new l.StringsProperty("attributions",e.description.attributions,!0,!1,[this,"attributions"]),new l.BooleanProperty("attributionsCollapsible",e.description.attributionsCollapsible,!0,!1,[this,"attributionsCollapsible"],e.default.attributionsCollapsible),new l.NumberProperty("cacheSize",e.description.cacheSize,!0,!1,[this,"cacheSize"]),new l.NumberProperty("zIndex","z-index",!0,!1,[this,"zIndex"],0),new l.StringProperty("crossOrigin",e.description.crossOrigin,!0,!1,[this,"crossOrigin"],"anonymous"),new l.BooleanProperty("interpolate",e.description.interpolate,!0,!1,[this,"interpolate"],e.default.interpolate),new l.JsonProperty("tileGrid",e.description.tileGrid,!0,!1,[this,"tileGrid"]),new l.JsonProperty("projection",e.description.projection,!0,!1,[this,"projection"]),new l.NumberProperty("reprojectionErrorThreshold",e.description.reprojectionErrorThreshold,!0,!1,[this,"reprojectionErrorThreshold"],e.default.reprojectionErrorThreshold),new l.NumberProperty("tilePixelRatio",e.description.tilePixelRatio,!0,!1,[this,"tilePixelRatio"],e.default.tilePixelRatio),new l.EvalStringProperty("tileLoadFunction",e.description.tileLoadFunction,!0,!1,[this,"tileLoadFunction"],e.default.tileLoadFunction),new l.BooleanProperty("wrapX",e.description.wrapX,!0,!1,[this,"wrapX"],e.default.wrapX),new l.NumberProperty("transition",e.description.transition,!0,!1,[this,"transition"],e.default.transition),new l.NumberProperty("zDirection",e.description.zDirection,!0,!1,[this,"zDirection"],e.default.zDirection),new l.NumberProperty("maxZoom",e.description.maxZoom,!0,!1,[this,"maxZoom"],e.default.maxZoom),new l.NumberProperty("minZoom",e.description.minZoom,!0,!1,[this,"minZoom"],e.default.minZoom),new l.NumberProperty("tileSize",e.description.tileSize,!0,!1,[this,"tileSize"],e.default.tileSize),new l.NumberProperty("gutter",e.description.gutter,!0,!1,[this,"gutter"],e.default.gutter),new l.NumberProperty("maxResolution",e.description.maxResolution,!0,!1,[this,"maxResolution"]),new l.EvalStringProperty("tileUrlFunction",e.description.tileUrlFunction,!0,!1,[this,"tileUrlFunction"]),new l.BooleanProperty("opaque",e.description.opaque,!0,!1,[this,"opaque"],e.default.opaque)])])],!1)},n=e,e.type=n.register("OlSimpleXYZLayer",n,{chsName:"OlSimpleXYZLayer",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlSimpleXYZLayer"}),e.description=o({url:"URL template.Must include { x }, { y } or { -y }, and { z } placeholders.A {?-?} template pattern, for example subdomain{ a- f}.domain.com, may be used instead of defining each one separately in the urls option.",urls:"An array of URLs. Requests will be distributed among the URLs in this array.",attributions:"Attributions",attributionsCollapsible:"true,Attributions are collapsible.",cacheSize:"Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.",crossOrigin:"The crossOrigin attribute for loaded images. Note that you must provide a crossOrigin value if you want to access pixel data with the Canvas renderer. See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.",interpolate:"true,Use interpolated values when resampling. By default, linear interpolation is used when resampling. Set to false to use the nearest neighbor instead.",opaque:"boolean(defaults to false) Whether the layer is opaque.",tileGrid:"Tile grid.",projection:"Projection. defaults to 'EPSG:3857'",reprojectionErrorThreshold:"0.5,Maximum allowed reprojection error (in pixels). Higher values can increase reprojection performance, but decrease precision.",maxZoom:"number(defaults to 42) Optional max zoom level.Not used if tileGrid is provided.",minZoom:"number(defaults to 0)\tOptional min zoom level.Not used if tileGrid is provided.",maxResolution:"number | undefined,Optional tile grid resolution at level zero.Not used if tileGrid is provided.",tilePixelRatio:"1,The pixel ratio used by the tile service. For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px by 512px images (for retina/hidpi devices) then tilePixelRatio should be set to 2.",tileLoadFunction:"Optional function to load a tile given a URL. The default is function(imageTile, src) {imageTile.getImage().src = src;};",wrapX:"false,Whether to wrap the world horizontally.",tileSize:"(defaults to[256, 256])The tile size used by the tile service.Not used if tileGrid is provided.",gutter:"number(defaults to 0)The size in pixels of the gutter around image tiles to ignore.This allows artifacts of rendering at tile edges to be ignored.Supported images should be wider and taller than the tile size by a value of 2 x gutter.",tileUrlFunction:"Optional function to get tile URL given a tile coordinate and the projection.Required if url or urls are not provided.",transition:"Duration of the opacity transition for rendering. To disable the opacity transition, pass transition: 0.",zDirection:"0\tChoose whether to use tiles with a higher or lower zoom level when between integer zoom levels. See getZForResolution"},c.sampleColorValue),e.default=o({maxZoom:42,minZoom:0,opaque:!1,tileSize:256,gutter:0,interpolate:!0,attributionsCollapsible:!0,reprojectionErrorThreshold:.5,tilePixelRatio:1,tileLoadFunction:"function(imageTile, src) {imageTile.getImage().src = src;}",wrapX:!0,transition:250,zDirection:0},c.defaultColorValue),e}(l.ESSceneObject);e.OlSimpleXYZLayer=h,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,attributions:(0,u.reactArrayWithUndefined)(void 0),attributionsCollapsible:void 0,cacheSize:void 0,crossOrigin:void 0,interpolate:void 0,projection:(0,u.reactJsonWithUndefined)(void 0),reprojectionErrorThreshold:void 0,maxZoom:void 0,minZoom:void 0,opaque:void 0,maxResolution:void 0,tileSize:void 0,gutter:void 0,tileUrlFunction:void 0,tileGrid:(0,u.reactJsonWithUndefined)(void 0),tileLoadFunction:void 0,tilePixelRatio:void 0,url:void 0,urls:(0,u.reactArrayWithUndefined)(void 0),wrapX:void 0,transition:void 0,zDirection:void 0,zIndex:void 0})}}(h=e.OlSimpleXYZLayer||(e.OlSimpleXYZLayer={})),e.OlSimpleXYZLayer=h,(0,u.extendClassProps)(h.prototype,h.createDefaultProps)},22442:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(16872),e),r(n(38200),e)},13506:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlText=void 0;var u=n(87442),c=l(n(81090)),h=n(56528),p=l(n(16899)),d=n(57646),f=l(n(71800)),g=n(89931),y=l(n(47539)),_=n(43938),m=n(19239),v=n(40580),b=n(5613);function x(t){var e=s(t,4);return[255*e[0]|0,255*e[1]|0,255*e[2]|0,e[3]]}function w(t){return o(o({},t),{color:t.color&&x(t.color)})}var E=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.dispose(n.olPickedEvent.disposableOn((function(t){var n;t&&t.layer===u&&null!==(n=e.allowPicking)&&void 0!==n&&n&&e.pickedEvent.emit(new _.SceneObjectPickedInfo(e,t))})));var r=n.map;if(!r)return console.warn("map is undefined!"),i;var o=new y.default,l=new f.default;i.dispose((function(){return l.dispose()}));var u=new p.default({source:l,style:o});i.dispose((function(){return u.dispose()})),r.addLayer(u),i.dispose((function(){return r.removeLayer(u)}));var E=i.disposeVar(new m.Event);(P=function(){var t,n,i,r,l,u,c,h,p,d,f,y,_,m,v,P,C,O,S=new g.Text({font:null!==(t=e.font)&&void 0!==t?t:b.OlText.defaultValue.font,maxAngle:(null!==(n=e.maxAngle)&&void 0!==n?n:b.OlText.defaultValue.maxAngle)*Math.PI/180,offsetX:null!==(i=e.offsetX)&&void 0!==i?i:b.OlText.defaultValue.offsetX,offsetY:null!==(r=e.offsetY)&&void 0!==r?r:b.OlText.defaultValue.offsetY,overflow:null!==(l=e.overflow)&&void 0!==l?l:b.OlText.defaultValue.overflow,placement:null!==(u=e.placement)&&void 0!==u?u:b.OlText.defaultValue.placement,scale:null!==(c=e.scale)&&void 0!==c?c:b.OlText.defaultValue.scale,rotateWithView:null!==(h=e.rotateWithView)&&void 0!==h?h:b.OlText.defaultValue.rotateWithView,rotation:(null!==(p=e.rotation)&&void 0!==p?p:b.OlText.defaultValue.rotation)*Math.PI/180,text:null!==(d=e.text)&&void 0!==d?d:b.OlText.defaultValue.text,textAlign:null!==(f=e.textAlign)&&void 0!==f?f:b.OlText.defaultValue.textAlign,justify:null!==(y=e.justify)&&void 0!==y?y:b.OlText.defaultValue.justify,textBaseline:null!==(_=e.textBaseline)&&void 0!==_?_:b.OlText.defaultValue.textBaseline,fill:new g.Fill({color:x(null!==(m=e.fill)&&void 0!==m?m:b.OlText.defaultValue.fill)}),stroke:new g.Stroke(w(null!==(v=e.stroke)&&void 0!==v?v:b.OlText.defaultValue.stroke)),backgroundFill:new g.Fill({color:x(null!==(P=e.backgroundFill)&&void 0!==P?P:b.OlText.defaultValue.backgroundFill)}),backgroundStroke:new g.Stroke(w(null!==(C=e.backgroundStroke)&&void 0!==C?C:b.OlText.defaultValue.backgroundStroke)),padding:a([],s(null!==(O=e.padding)&&void 0!==O?O:b.OlText.defaultValue.padding),!1)});o.setText(S),o.setZIndex(e.zIndex),E.emit()})();var P,C=i.disposeVar((0,m.createNextAnimateFrameEvent)(e.fontChanged,e.maxAngleChanged,e.offsetXChanged,e.offsetYChanged,e.overflowChanged,e.placementChanged,e.scaleChanged,e.rotateWithViewChanged,e.rotationChanged,e.textChanged,e.textAlignChanged,e.justifyChanged,e.textBaselineChanged,e.fillChanged,e.strokeChanged,e.backgroundFillChanged,e.backgroundStrokeChanged,e.paddingChanged,e.zIndexChanged));i.dispose(C.disposableOn(P)),(P=function(){if(l.clear(),e.position){var t=(0,d.fromLonLat)(e.position),n=new h.Point(t),i=new c.default(n);l.addFeature(i)}})(),i.dispose(e.positionChanged.disposableOn(P)),(P=function(){var t;u.setVisible(null===(t=e.show)||void 0===t||t)})(),i.dispose(e.showChanged.disposableOn(P)),(P=function(){u.setStyle(o)})(),i.dispose(E.disposableOn(P));var O=i.disposeVar((0,m.createNextAnimateFrameEvent)(e.editingChanged));return i.dispose((0,v.registerOlPointEditor)(O,e,n)),i}var n;return r(e,t),n=e,e.type=n.register(b.OlText.type,n),e}(u.OpenLayersObject);e.OlOlText=E},5613:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlText=void 0;var l=n(43938),u=n(19239),c=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlText"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(n){return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new l.GroupProperty("","",[new l.BooleanProperty("",".",!0,!1,[this,"show"],!0),new l.Number2Property("","",!0,!1,[this,"position"]),new l.BooleanProperty("","",!0,!1,[this,"editing"],!1),new l.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new l.GroupProperty("","",[new l.StringProperty("font",e.description.font,!0,!1,[this,"font"],e.defaultValue.font),new l.NumberProperty("maxAngle",e.description.maxAngle,!0,!1,[this,"maxAngle"],e.defaultValue.maxAngle),new l.NumberProperty("offsetX",e.description.offsetX,!0,!1,[this,"offsetX"],e.defaultValue.offsetX),new l.NumberProperty("offsetY",e.description.offsetY,!0,!1,[this,"offsetY"],e.defaultValue.offsetY),new l.BooleanProperty("overflow",e.description.overflow,!0,!1,[this,"overflow"],e.defaultValue.overflow),new l.EnumProperty("placement",e.description.placement,!0,!1,[this,"placement"],e.olTextPlacementTypeEnums,e.defaultValue.placement),new l.NumberProperty("scale",e.description.scale,!0,!1,[this,"scale"],e.defaultValue.scale),new l.BooleanProperty("rotateWithView",e.description.rotateWithView,!0,!1,[this,"rotateWithView"],e.defaultValue.rotateWithView),new l.NumberProperty("rotation",e.description.rotation,!0,!1,[this,"rotation"],e.defaultValue.rotation),new l.LongStringProperty("text",e.description.text,!0,!1,[this,"text"],e.defaultValue.text),new l.EnumProperty("textAlign",e.description.textAlign,!0,!1,[this,"textAlign"],e.olTextAlignTypeEnums,e.defaultValue.textAlign),new l.EnumProperty("justify",e.description.justify,!0,!1,[this,"justify"],e.olTextJustifyTypeEnums,e.defaultValue.justify),new l.EnumProperty("textBaseline",e.description.textBaseline,!0,!1,[this,"textBaseline"],e.olTextBaselineTypeEnums,e.defaultValue.textBaseline),new l.ColorProperty("fill",e.description.fill,!0,!1,[this,"fill"],e.defaultValue.fill),new l.JsonProperty("stroke",e.description.stroke,!0,!1,[this,"stroke"],e.defaultValue.stroke),new l.ColorProperty("backgroundFill",e.description.backgroundFill,!0,!1,[this,"backgroundFill"],e.defaultValue.backgroundFill),new l.JsonProperty("backgroundStroke",e.description.backgroundStroke,!0,!1,[this,"backgroundStroke"],e.defaultValue.backgroundStroke),new l.Number4Property("padding",e.description.padding,!0,!1,[this,"padding"],e.defaultValue.padding)]),new l.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"])])],!1)},n=e,e.type=n.register("OlText",n,{chsName:"OlText",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlText"}),e.defaultValue={font:"10px sans-serif",maxAngle:45,offsetX:0,offsetY:0,overflow:!1,placement:"point",scale:1,rotateWithView:!1,rotation:0,text:"",textAlign:"center",justify:"left",textBaseline:"middle",fill:[3/16,3/16,3/16,1],stroke:{color:[0,0,0,1],lineCap:"round",lineJoin:"round",lineDashOffset:0,miterLimit:10,width:0},backgroundFill:[0,0,0,0],backgroundStroke:{color:[1,1,1,1],lineCap:"round",lineJoin:"round",lineDashOffset:0,miterLimit:10,width:0},padding:[0,0,0,0]},e.description={font:"Font style as CSS font value, see: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font. Default is '10px sans-serif'",maxAngle:"When placement is set to 'line', allow a maximum angle between adjacent characters. The expected value is in radians, and the default is 45 (Math.PI / 4).",offsetX:"Horizontal text offset in pixels. A positive will shift the text right.",offsetY:"Vertical text offset in pixels. A positive will shift the text down.",overflow:"For polygon labels or when placement is set to 'line', allow text to exceed the width of the polygon at the label position or the length of the path that it follows.",placement:"Text placement.",scale:"Scale.",rotateWithView:"Whether to rotate the text with the view.",rotation:"Rotation in radians (positive rotation clockwise).",text:"Text content or rich text content. For plain text provide a string, which can contain line breaks (\n). For rich text provide an array of text/font tuples. A tuple consists of the text to render and the font to use (or '' to use the text style's font). A line break has to be a separate tuple (i.e. '\n', ''). Example: ['foo', 'bold 10px sans-serif', ' bar', 'italic 10px sans-serif', ' baz', ''] will yield \"foo bar baz\". Note: Rich text is not supported for the immediate rendering API.",textAlign:"Text alignment. Possible values: 'left', 'right', 'center', 'end' or 'start'. Default is 'center' for placement: 'point'. For placement: 'line', the default is to let the renderer choose a placement where maxAngle is not exceeded.",justify:"Text justification within the text box. If not set, text is justified towards the textAlign anchor. Otherwise, use options 'left', 'center', or 'right' to justify the text within the text box. Note: justify is ignored for immediate rendering and also for placement: 'line'.",textBaseline:"Text base line. Possible values: 'bottom', 'top', 'middle', 'alphabetic', 'hanging', 'ideographic'.",fill:"Fill style. If none is provided, we'll use a dark fill-style (#333).",stroke:"Stroke style.",backgroundFill:"Fill style for the text background when placement is 'point'. Default is no fill.",backgroundStroke:"Stroke style for the text background when placement is 'point'. Default is no stroke.",padding:"Padding in pixels around the text for decluttering and background. The order of values in the array is [top, right, bottom, left]."},e.olTextAlignTypeEnums=[["left","left"],["right","right"],["center","center"],["end","end"],["start","start"]],e.olTextPlacementTypeEnums=[["point","point"],["line","line"]],e.olTextJustifyTypeEnums=[["left","left"],["center","center"],["right","right"]],e.olTextBaselineTypeEnums=[["bottom","bottom"],["top","top"],["middle","middle"],["alphabetic","alphabetic"],["hanging","hanging"],["ideographic","ideographic"]],e}(l.ESSceneObject);e.OlText=c,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,position:(0,u.reactArrayWithUndefined)(void 0),editing:void 0,allowPicking:void 0,font:void 0,maxAngle:void 0,offsetX:void 0,offsetY:void 0,overflow:void 0,placement:void 0,scale:void 0,rotateWithView:void 0,rotation:void 0,text:void 0,textAlign:void 0,justify:void 0,textBaseline:void 0,fill:(0,u.reactArrayWithUndefined)(void 0),stroke:(0,u.reactJsonWithUndefined)(void 0),backgroundFill:(0,u.reactArrayWithUndefined)(void 0),backgroundStroke:(0,u.reactJsonWithUndefined)(void 0),padding:(0,u.reactArrayWithUndefined)(void 0),zIndex:void 0})}}(c=e.OlText||(e.OlText={})),e.OlText=c,(0,u.extendClassProps)(c.prototype,c.createDefaultProps)},17663:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(5613),e),r(n(13506),e)},96880:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlView=void 0;var o=n(43938),s=n(19239),a=n(87442),l=n(57777),u=n(27933),c=function(t){function e(e,n){var i,r=this;r=t.call(this,e,n)||this;var a=n.map;if(!a)return console.warn("map is undefined!"),r;a.getView();var u=r.disposeVar(new l.OlPoint);n.add(u),r.dispose((function(){return n.delete(u)})),r.dispose(u.pickedEvent.disposableOn((function(t){e.pickedEvent.emit(new o.SceneObjectPickedInfo(e,t))}))),r.dispose((0,s.bind)([u,"position"],[e,"position"])),r.dispose((0,s.bind)([u,"editing"],[e,"editing"]));var c=function(){var t;u.show=null!==(t=e.show)&&void 0!==t&&t};return c(),r.dispose(e.showChanged.disposableOn(c)),r.dispose(e.flyToEvent.disposableOn((function(t){e.flyIn()}))),r.dispose(e.resetWithCurrentCameraEvent.disposableOn((function(){n.actived&&(e.position=n.position,e.zoom=n.zoom,e.rotation=n.rotation)}))),r.dispose(e.flyInEvent.disposableOn((function(t){n.actived&&(e.position&&e.zoom?n.flyTo({position:e.position,zoom:e.zoom,rotation:e.rotation,duration:t}):console.warn("!sceneObject.position || !sceneObject.zoom"))}))),null!==(i=e.default)&&void 0!==i&&i&&(0,o.hasSameViewerTags)(n.devTags,e.devTags)&&e.flyIn(),r}var n;return r(e,t),n=e,e.type=n.register(u.OlView.type,n),e}(a.OpenLayersObject);e.OlOlView=c},27933:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlView=void 0;var l=n(43938),u=n(19239),c=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n._flyToEvent=n.disposeVar(new u.Event),n._resetWithCurrentCameraEvent=n.disposeVar(new u.Event),n._flyInEvent=n.disposeVar(new u.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlView"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},Object.defineProperty(e.prototype,"resetWithCurrentCameraEvent",{get:function(){return this._resetWithCurrentCameraEvent},enumerable:!1,configurable:!0}),e.prototype.resetWithCurrentCamera=function(){this._resetWithCurrentCameraEvent.emit()},Object.defineProperty(e.prototype,"flyInEvent",{get:function(){return this._flyInEvent},enumerable:!1,configurable:!0}),e.prototype.flyIn=function(t){this._flyInEvent.emit(t)},e.prototype.execOnCreating=function(){this.resetWithCurrentCamera()},e.prototype.getProperties=function(e){var n=this;return a(a([],s(t.prototype.getProperties.call(this,e)),!1),[new l.GroupProperty("","",[new l.BooleanProperty("",".",!0,!1,[this,"show"],!0),new l.BooleanProperty("","false, .",!0,!1,[this,"default"]),new l.FunctionProperty("","",["number"],(function(t){return n.flyTo(t)}),[1e3]),new l.Number2Property("","",!0,!1,[this,"position"]),new l.BooleanProperty("","",!0,!1,[this,"editing"],!1),new l.BooleanProperty("","",!0,!1,[this,"allowPicking"],!1),new l.NumberProperty("zoom","zoom",!0,!1,[this,"zoom"]),new l.NumberProperty("rotation","rotation",!0,!1,[this,"rotation"]),new l.FunctionProperty("","",[],(function(){return n.resetWithCurrentCamera()}),[]),new l.FunctionProperty("flyIn","flyIn",["number"],(function(t){return n.flyIn(t)}),[1e3])])],!1)},n=e,e.type=n.register("OlView",n,{chsName:"OlView",tags:["OlObjects","_ES_Misc_NoEditingOnCreating","_ES_Impl_OpenLayers"],description:"OlView"}),e}(l.ESSceneObject);e.OlView=c,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,position:(0,u.reactArrayWithUndefined)(void 0),zoom:void 0,rotation:void 0,editing:void 0,allowPicking:void 0,default:void 0})}}(c=e.OlView||(e.OlView={})),e.OlView=c,(0,u.extendClassProps)(c.prototype,c.createDefaultProps)},67754:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(27933),e),r(n(96880),e)},82704:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlWMTSLayer=void 0;var a=n(28641),l=s(n(20228)),u=n(57646),c=s(n(57433)),h=s(n(59600)),p=n(19239),d=n(87442),f=n(51497),g=n(55452),y=n(94525),_=function(t){function e(e,n){var i,r,s,d,y,_,m=this;m=t.call(this)||this;var v=n.map;if(!v)return console.warn("map is undefined!"),m;var b=(0,u.get)("EPSG:4326");if(!b)return m;for(var x=b.getExtent(),w=(0,a.getWidth)(x)/256,E=new Array(19),P=new Array(19),C=0;C<19;++C)E[C]=w/Math.pow(2,C),P[C]=C;var O=function(){var t={hue:0,saturation:0,lightness:0},n=[e.allHSL0?o({colorIndex:0},e.allHSL0):o({colorIndex:0},t),e.redHSL1?o({colorIndex:1},e.redHSL1):o({colorIndex:1},t),e.yellowHSL2?o({colorIndex:2},e.yellowHSL2):o({colorIndex:2},t),e.greenHSL3?o({colorIndex:3},e.greenHSL3):o({colorIndex:3},t),e.cyanHSL4?o({colorIndex:4},e.cyanHSL4):o({colorIndex:4},t),e.blueHSL5?o({colorIndex:5},e.blueHSL5):o({colorIndex:5},t),e.magentaHSL6?o({colorIndex:6},e.magentaHSL6):o({colorIndex:6},t)];return(0,f.getHSLChannels)(n)},S=function(){var t,n,i,r,o,s,a={shadow:0,midtones:1,highlight:255,outputShadow:0,outputHighlight:255},l=null!==(t=e.colorLevelRgb)&&void 0!==t?t:a,u=null!==(n=e.colorLevelRed)&&void 0!==n?n:a,c=null!==(i=e.colorLevelGreen)&&void 0!==i?i:a,h=null!==(r=e.colorLevelBlue)&&void 0!==r?r:a,p=(0,f.createTable)(),d=(0,f.getColorsLevelTable)(p,l,u,c,h);return(0,f.setBrightnessContrast)(d,null!==(o=e.brightness)&&void 0!==o?o:0,null!==(s=e.contrast)&&void 0!==s?s:0)},I=function(){var t=[[0,0],[255,255]],n=e.curveRgb?e.curveRgb.points:t;return{redColor:e.curveRed?e.curveRed.points:t,greenColor:e.curveGreen?e.curveGreen.points:t,blueColor:e.curveBlue?e.curveBlue.points:t,rgbColor:n}},L=new c.default({layer:e.layer,matrixSet:e.matrixSet,style:null!==(i=e.style)&&void 0!==i?i:"default",format:e.format,tileGrid:new h.default(null!==(r=e.tileGrid)&&void 0!==r?r:{origin:(0,a.getTopLeft)(x),resolutions:E,matrixIds:P}),url:e.url,urls:e.urls,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:null!==(s=e.crossOrigin)&&void 0!==s?s:"anonymous",interpolate:e.interpolate,projection:null!==(d=e.projection)&&void 0!==d?d:b,reprojectionErrorThreshold:e.reprojectionErrorThreshold,requestEncoding:e.requestEncoding,tileClass:e.tileClass&&JSON.parse(e.tileClass),tilePixelRatio:e.tilePixelRatio,version:e.version,dimensions:e.dimensions,tileLoadFunction:e.tileLoadFunction&&Function('"use strict";return ('+e.tileLoadFunction+")")(),wrapX:e.wrapX,transition:e.transition,zDirection:e.zDirection});m.dispose((function(){return L.dispose()}));var M=S(),T=O(),R=I(),N=m.disposeVar((0,p.react)({colorsTable:M,hslChannels:T,curveChannels:R})),A=(0,g.createRasterSource)([L],{sceneObject:e,channels:N});m.dispose((function(){return A.dispose()}));var D=new l.default({opacity:1,source:A});D.setVisible(null===(y=e.show)||void 0===y||y),D.setZIndex(null!==(_=e.zIndex)&&void 0!==_?_:0),m.dispose((function(){return D.dispose()})),m.dispose(e.showChanged.disposableOn((function(t){D.setVisible(null==t||t)}))),m.dispose(e.zIndexChanged.disposableOn((function(t){D.setZIndex(null!=t?t:0)}))),v.addLayer(D),m.dispose((function(){return v.removeLayer(D)}));var j=function(){var t=S(),e=O(),n=I();N.value={colorsTable:t,hslChannels:e,curveChannels:n},A.changed()};j();var F=m.disposeVar((0,p.createNextAnimateFrameEvent)(e.colorLevelRgbChanged,e.colorLevelRedChanged,e.colorLevelGreenChanged,e.colorLevelBlueChanged,e.brightnessChanged,e.contrastChanged,e.allHSL0Changed,e.redHSL1Changed,e.yellowHSL2Changed,e.greenHSL3Changed,e.cyanHSL4Changed,e.blueHSL5Changed,e.magentaHSL6Changed,e.curveRgbChanged,e.curveRedChanged,e.curveGreenChanged,e.curveBlueChanged));m.dispose(F.disposableOn(j));var k=m.disposeVar((0,p.createNextAnimateFrameEvent)(e.attributionsChanged,e.tileGridChanged,e.tileLoadFunctionChanged));return m.dispose(k.disposableOn((function(){var t;L.tileGrid=new h.default(null!==(t=e.tileGrid)&&void 0!==t?t:{origin:(0,a.getTopLeft)(x),resolutions:E,matrixIds:P}),e.attributions&&L.setAttributions(e.attributions),e.tileLoadFunction&&L.setTileLoadFunction(Function('"use strict";return ('+e.tileLoadFunction+")")())}))),e.urlChanged.disposableOn((function(t){L.setUrl(null!=t?t:"")})),e.urlsChanged.disposableOn((function(t){L.setUrls(null!=t?t:[])})),m}return r(e,t),e}(p.Destroyable),m=function(t){function e(e,n){var i,r=t.call(this,e,n)||this;r.dispose((function(){return i&&i.destroy()}));var o=function(){i&&i.destroy(),e.layer&&e.matrixSet&&(i=new _(e,n))};o();var s=r.disposeVar((0,p.createNextAnimateFrameEvent)(e.attributionsCollapsibleChanged,e.cacheSizeChanged,e.crossOriginChanged,e.interpolateChanged,e.projectionChanged,e.reprojectionErrorThresholdChanged,e.layerChanged,e.matrixSetChanged,e.styleChanged,e.requestEncodingChanged,e.tileClassChanged,e.tilePixelRatioChanged,e.formatChanged,e.versionChanged,e.dimensionsChanged,e.wrapXChanged,e.transitionChanged,e.zDirectionChanged));return r.dispose(s.disposableOn(o)),r}var n;return r(e,t),n=e,e.type=n.register(y.OlWMTSLayer.type,n),e}(d.OpenLayersObject);e.OlOlWMTSLayer=m},94525:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlWMTSLayer=void 0;var l=n(43938),u=n(19239),c=n(51497),h=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlWMTSLayer"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(n){return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new l.GroupProperty("","",[new l.BooleanProperty("",".",!0,!1,[this,"show"],!0),new l.GroupProperty("","",[new l.GroupProperty("","",[new l.NumberProperty("","brightness,[-100,100] 0",!0,!1,[this,"brightness"],0),new l.NumberProperty("","contrast,[-100,100]0",!0,!1,[this,"contrast"],0)]),new l.GroupProperty("","",[new l.JsonProperty("rgb","rgb",!0,!1,[this,"colorLevelRgb"],e.default.colorLevel,e.description.colorLevel),new l.JsonProperty("red","red",!0,!1,[this,"colorLevelRed"],e.default.colorLevel,e.description.colorLevel),new l.JsonProperty("green","green",!0,!1,[this,"colorLevelGreen"],e.default.colorLevel,e.description.colorLevel),new l.JsonProperty("blue","blue",!0,!1,[this,"colorLevelBlue"],e.default.colorLevel,e.description.colorLevel)]),new l.GroupProperty("(HSL)","(HSL)",[new l.JsonProperty("","0",!0,!1,[this,"allHSL0"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","1",!0,!1,[this,"redHSL1"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","2",!0,!1,[this,"yellowHSL2"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","3",!0,!1,[this,"greenHSL3"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","4",!0,!1,[this,"cyanHSL4"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","5",!0,!1,[this,"blueHSL5"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","6",!0,!1,[this,"magentaHSL6"],e.default.colorHSL,e.description.colorHSL)]),new l.GroupProperty("","",[new l.JsonProperty("rgb","rgb",!0,!1,[this,"curveRgb"],e.default.curve,e.description.curve),new l.JsonProperty("red","red",!0,!1,[this,"curveRed"],e.default.curve,e.description.curve),new l.JsonProperty("green","green",!0,!1,[this,"curveGreen"],e.default.curve,e.description.curve),new l.JsonProperty("blue","blue",!0,!1,[this,"curveBlue"],e.default.curve,e.description.curve)])])]),new l.GroupProperty("WMTS","WMTS",[new l.StringProperty("url",e.description.url,!0,!1,[this,"url"]),new l.StringsProperty("urls",e.description.urls,!0,!1,[this,"urls"]),new l.StringsProperty("attributions",e.description.attributions,!0,!1,[this,"attributions"]),new l.BooleanProperty("attributionsCollapsible",e.description.attributionsCollapsible,!0,!1,[this,"attributionsCollapsible"],e.default.attributionsCollapsible),new l.NumberProperty("cacheSize",e.description.cacheSize,!0,!1,[this,"cacheSize"]),new l.StringProperty("crossOrigin",e.description.crossOrigin,!0,!1,[this,"crossOrigin"],"anonymous"),new l.BooleanProperty("interpolate",e.description.interpolate,!0,!1,[this,"interpolate"],e.default.interpolate),new l.JsonProperty("tileGrid",e.description.tileGrid,!0,!1,[this,"tileGrid"]),new l.JsonProperty("projection",e.description.projection,!0,!1,[this,"projection"]),new l.NumberProperty("reprojectionErrorThreshold",e.description.reprojectionErrorThreshold,!0,!1,[this,"reprojectionErrorThreshold"],e.default.reprojectionErrorThreshold),new l.EnumProperty("requestEncoding",e.description.requestEncoding,!0,!1,[this,"requestEncoding"],[["KVP","KVP"],["REST","REST"]],e.default.requestEncoding),new l.StringProperty("layer",e.description.layer,!0,!1,[this,"layer"]),new l.StringProperty("style",e.description.style,!0,!1,[this,"style"],e.default.style),new l.EvalStringProperty("tileClass",e.description.tileClass,!0,!1,[this,"tileClass"]),new l.NumberProperty("tilePixelRatio",e.description.tilePixelRatio,!0,!1,[this,"tilePixelRatio"],e.default.tilePixelRatio),new l.StringProperty("format",e.description.format,!0,!1,[this,"format"],e.default.format),new l.StringProperty("version",e.description.version,!0,!1,[this,"version"],e.default.version),new l.StringProperty("matrixSet",e.description.matrixSet,!0,!1,[this,"matrixSet"]),new l.JsonProperty("dimensions",e.description.dimensions,!0,!1,[this,"dimensions"]),new l.EvalStringProperty("tileLoadFunction",e.description.tileLoadFunction,!0,!1,[this,"tileLoadFunction"],e.default.tileLoadFunction),new l.BooleanProperty("wrapX",e.description.wrapX,!0,!1,[this,"wrapX"],e.default.wrapX),new l.NumberProperty("transition",e.description.transition,!0,!1,[this,"transition"],e.default.transition),new l.NumberProperty("zDirection",e.description.zDirection,!0,!1,[this,"zDirection"],e.default.zDirection),new l.NumberProperty("zIndex","zIndex",!0,!1,[this,"zIndex"])])],!1)},n=e,e.type=n.register("OlWMTSLayer",n,{chsName:"OlWMTSLayer",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlWMTSLayer"}),e.description=o({url:"A URL for the service. For the RESTful request encoding, this is a URL template. For KVP encoding, it is normal URL. A {?-?} template pattern, for example subdomain{a-f}.domain.com, may be used instead of defining each one separately in the urls option.",urls:"An array of URLs. Requests will be distributed among the URLs in this array.",attributions:"Attributions",attributionsCollapsible:"true,Attributions are collapsible.",cacheSize:"Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.",crossOrigin:"The crossOrigin attribute for loaded images. Note that you must provide a crossOrigin value if you want to access pixel data with the Canvas renderer. See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.",interpolate:"true,Use interpolated values when resampling. By default, linear interpolation is used when resampling. Set to false to use the nearest neighbor instead.",tileGrid:"Tile grid.",projection:"Projection. Default is the view projection.",reprojectionErrorThreshold:"0.5,Maximum allowed reprojection error (in pixels). Higher values can increase reprojection performance, but decrease precision.",requestEncoding:"'KVP',Request encoding. One of 'KVP', 'REST'.",layer:"Layer name as advertised in the WMTS capabilities.",style:"Style name as advertised in the WMTS capabilities.",tileClass:"Class used to instantiate image tiles. Default is ImageTile.",tilePixelRatio:"1,The pixel ratio used by the tile service. For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px by 512px images (for retina/hidpi devices) then tilePixelRatio should be set to 2.",format:"'image/jpeg',Image format.Only used when requestEncoding is 'KVP'.",version:"'1.0.0',WMTS version.",matrixSet:"Matrix set.",dimensions:'Additional "dimensions" for tile requests. This is an object with properties named like the advertised WMTS dimensions.',tileLoadFunction:"Optional function to load a tile given a URL. The default is function(imageTile, src) {imageTile.getImage().src = src;};",wrapX:"false,Whether to wrap the world horizontally.",transition:"Duration of the opacity transition for rendering. To disable the opacity transition, pass transition: 0.",zDirection:"0\tChoose whether to use tiles with a higher or lower zoom level when between integer zoom levels. See getZForResolution"},c.sampleColorValue),e.default=o({interpolate:!0,attributionsCollapsible:!0,reprojectionErrorThreshold:.5,requestEncoding:"KVP",style:"default",tilePixelRatio:1,format:"image/jpeg",version:"1.0.0",tileLoadFunction:"function(imageTile, src) {imageTile.getImage().src = src;}",wrapX:!1,transition:250,zDirection:0},c.defaultColorValue),e}(l.ESSceneObject);e.OlWMTSLayer=h,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,curveRgb:(0,u.reactJsonWithUndefined)(void 0),curveRed:(0,u.reactJsonWithUndefined)(void 0),curveGreen:(0,u.reactJsonWithUndefined)(void 0),curveBlue:(0,u.reactJsonWithUndefined)(void 0),colorLevelRgb:(0,u.reactJsonWithUndefined)(void 0),colorLevelRed:(0,u.reactJsonWithUndefined)(void 0),colorLevelGreen:(0,u.reactJsonWithUndefined)(void 0),colorLevelBlue:(0,u.reactJsonWithUndefined)(void 0),allHSL0:(0,u.reactJsonWithUndefined)(void 0),redHSL1:(0,u.reactJsonWithUndefined)(void 0),yellowHSL2:(0,u.reactJsonWithUndefined)(void 0),greenHSL3:(0,u.reactJsonWithUndefined)(void 0),cyanHSL4:(0,u.reactJsonWithUndefined)(void 0),blueHSL5:(0,u.reactJsonWithUndefined)(void 0),magentaHSL6:(0,u.reactJsonWithUndefined)(void 0),brightness:void 0,contrast:void 0,zIndex:void 0,url:void 0,urls:(0,u.reactArrayWithUndefined)(void 0),attributions:(0,u.reactArrayWithUndefined)(void 0),attributionsCollapsible:void 0,cacheSize:void 0,crossOrigin:void 0,interpolate:void 0,tileGrid:(0,u.reactJsonWithUndefined)(void 0),projection:(0,u.reactJsonWithUndefined)(void 0),reprojectionErrorThreshold:void 0,requestEncoding:void 0,layer:void 0,style:void 0,tileClass:void 0,tilePixelRatio:void 0,format:void 0,version:void 0,matrixSet:void 0,dimensions:(0,u.reactJsonWithUndefined)(void 0),tileLoadFunction:void 0,wrapX:void 0,transition:void 0,zDirection:void 0})}}(h=e.OlWMTSLayer||(e.OlWMTSLayer={})),e.OlWMTSLayer=h,(0,u.extendClassProps)(h.prototype,h.createDefaultProps)},61357:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(94525),e),r(n(82704),e)},61631:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlOlXYZLayer=void 0;var a=n(28641),l=s(n(20228)),u=n(57646),c=s(n(54680)),h=s(n(8738)),p=n(19239),d=n(87442),f=n(51497),g=n(55452),y=n(29394),_=function(t){function e(e,n){var i,r,s,d,y,_=this;_=t.call(this)||this;var m=n.map;if(!m)return console.warn("map is undefined!"),_;var v=(0,u.get)("EPSG:3857");if(!v)return _;for(var b=v.getExtent(),x=(0,a.getWidth)(b)/256,w=new Array(19),E=new Array(19),P=0;P<19;++P)w[P]=x/Math.pow(2,P),E[P]=P;var C=function(){var t={hue:0,saturation:0,lightness:0},n=[e.allHSL0?o({colorIndex:0},e.allHSL0):o({colorIndex:0},t),e.redHSL1?o({colorIndex:1},e.redHSL1):o({colorIndex:1},t),e.yellowHSL2?o({colorIndex:2},e.yellowHSL2):o({colorIndex:2},t),e.greenHSL3?o({colorIndex:3},e.greenHSL3):o({colorIndex:3},t),e.cyanHSL4?o({colorIndex:4},e.cyanHSL4):o({colorIndex:4},t),e.blueHSL5?o({colorIndex:5},e.blueHSL5):o({colorIndex:5},t),e.magentaHSL6?o({colorIndex:6},e.magentaHSL6):o({colorIndex:6},t)];return(0,f.getHSLChannels)(n)},O=function(){var t,n,i,r,o,s,a={shadow:0,midtones:1,highlight:255,outputShadow:0,outputHighlight:255},l=null!==(t=e.colorLevelRgb)&&void 0!==t?t:a,u=null!==(n=e.colorLevelRed)&&void 0!==n?n:a,c=null!==(i=e.colorLevelGreen)&&void 0!==i?i:a,h=null!==(r=e.colorLevelBlue)&&void 0!==r?r:a,p=(0,f.createTable)(),d=(0,f.getColorsLevelTable)(p,l,u,c,h);return(0,f.setBrightnessContrast)(d,null!==(o=e.brightness)&&void 0!==o?o:0,null!==(s=e.contrast)&&void 0!==s?s:0)},S=function(){var t=[[0,0],[255,255]],n=e.curveRgb?e.curveRgb.points:t;return{redColor:e.curveRed?e.curveRed.points:t,greenColor:e.curveGreen?e.curveGreen.points:t,blueColor:e.curveBlue?e.curveBlue.points:t,rgbColor:n}},I=new c.default({tileGrid:new h.default(null!==(i=e.tileGrid)&&void 0!==i?i:{origin:(0,a.getTopLeft)(b),resolutions:w,matrixIds:E}),url:e.url,urls:e.urls,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:null!==(r=e.crossOrigin)&&void 0!==r?r:"anonymous",interpolate:e.interpolate,projection:null!==(s=e.projection)&&void 0!==s?s:v,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tilePixelRatio:e.tilePixelRatio,tileLoadFunction:e.tileLoadFunction&&Function('"use strict";return ('+e.tileLoadFunction+")")(),wrapX:e.wrapX,transition:e.transition,zDirection:e.zDirection,maxZoom:e.maxZoom,minZoom:e.minZoom,opaque:e.opaque,maxResolution:e.maxResolution,tileSize:e.tileSize,gutter:e.gutter,tileUrlFunction:e.tileUrlFunction&&Function('"use strict";return ('+e.tileUrlFunction+")")()});_.dispose((function(){return I.dispose()}));var L=O(),M=C(),T=S(),R=_.disposeVar((0,p.react)({colorsTable:L,hslChannels:M,curveChannels:T})),N=(0,g.createRasterSource)([I],{sceneObject:e,channels:R});_.dispose((function(){return N.dispose()}));var A=new l.default({opacity:1,source:N});A.setVisible(null===(d=e.show)||void 0===d||d),A.setZIndex(null!==(y=e.zIndex)&&void 0!==y?y:0),_.dispose((function(){return A.dispose()})),_.dispose(e.showChanged.disposableOn((function(t){A.setVisible(null==t||t)}))),_.dispose(e.zIndexChanged.disposableOn((function(t){A.setZIndex(null!=t?t:0)}))),m.addLayer(A),_.dispose((function(){return m.removeLayer(A)}));var D=function(){var t=O(),e=C(),n=S();R.value={colorsTable:t,hslChannels:e,curveChannels:n},N.changed()};D();var j=_.disposeVar((0,p.createNextAnimateFrameEvent)(e.colorLevelRgbChanged,e.colorLevelRedChanged,e.colorLevelGreenChanged,e.colorLevelBlueChanged,e.brightnessChanged,e.contrastChanged,e.allHSL0Changed,e.redHSL1Changed,e.yellowHSL2Changed,e.greenHSL3Changed,e.cyanHSL4Changed,e.blueHSL5Changed,e.magentaHSL6Changed,e.curveRgbChanged,e.curveRedChanged,e.curveGreenChanged,e.curveBlueChanged));_.dispose(j.disposableOn(D));var F=_.disposeVar((0,p.createNextAnimateFrameEvent)(e.attributionsChanged,e.tileGridChanged,e.tileLoadFunctionChanged,e.tileUrlFunctionChanged));return _.dispose(F.disposableOn((function(){var t;I.tileGrid=new h.default(null!==(t=e.tileGrid)&&void 0!==t?t:{origin:(0,a.getTopLeft)(b),resolutions:w,matrixIds:E}),e.attributions&&I.setAttributions(e.attributions),e.tileLoadFunction&&I.setTileLoadFunction(Function('"use strict";return ('+e.tileLoadFunction+")")()),e.tileUrlFunction&&I.setTileUrlFunction(Function('"use strict";return ('+e.tileUrlFunction+")")())}))),e.urlChanged.disposableOn((function(t){I.setUrl(null!=t?t:"")})),e.urlsChanged.disposableOn((function(t){I.setUrls(null!=t?t:[])})),_}return r(e,t),e}(p.Destroyable),m=function(t){function e(e,n){var i,r=t.call(this,e,n)||this;r.dispose((function(){return i&&i.destroy()}));var o=function(){i&&i.destroy(),i=new _(e,n)};o();var s=r.disposeVar((0,p.createNextAnimateFrameEvent)(e.attributionsCollapsibleChanged,e.cacheSizeChanged,e.crossOriginChanged,e.interpolateChanged,e.projectionChanged,e.reprojectionErrorThresholdChanged,e.tilePixelRatioChanged,e.wrapXChanged,e.transitionChanged,e.zDirectionChanged,e.maxZoomChanged,e.minZoomChanged,e.opaqueChanged,e.maxResolutionChanged,e.tileSizeChanged,e.gutterChanged));return r.dispose(s.disposableOn(o)),r}var n;return r(e,t),n=e,e.type=n.register(y.OlXYZLayer.type,n),e}(d.OpenLayersObject);e.OlOlXYZLayer=m},29394:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OlXYZLayer=void 0;var l=n(43938),u=n(19239),c=n(51497),h=function(t){function e(e){var n=t.call(this,e)||this;return n._pickedEvent=n.disposeVar(new u.Event),n}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OlXYZLayer"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._innerGetJson()},set:function(t){this._innerSetJson(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickedEvent",{get:function(){return this._pickedEvent},enumerable:!1,configurable:!0}),e.prototype.getProperties=function(n){return a(a([],s(t.prototype.getProperties.call(this,n)),!1),[new l.GroupProperty("","",[new l.BooleanProperty("",".",!0,!1,[this,"show"],!0),new l.GroupProperty("","",[new l.GroupProperty("","",[new l.NumberProperty("","brightness,[-100,100] 0",!0,!1,[this,"brightness"],0),new l.NumberProperty("","contrast,[-100,100]0",!0,!1,[this,"contrast"],0)]),new l.GroupProperty("","",[new l.JsonProperty("rgb","rgb",!0,!1,[this,"colorLevelRgb"],e.default.colorLevel,e.description.colorLevel),new l.JsonProperty("red","red",!0,!1,[this,"colorLevelRed"],e.default.colorLevel,e.description.colorLevel),new l.JsonProperty("green","green",!0,!1,[this,"colorLevelGreen"],e.default.colorLevel,e.description.colorLevel),new l.JsonProperty("blue","blue",!0,!1,[this,"colorLevelBlue"],e.default.colorLevel,e.description.colorLevel)]),new l.GroupProperty("(HSL)","(HSL)",[new l.JsonProperty("","0",!0,!1,[this,"allHSL0"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","1",!0,!1,[this,"redHSL1"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","2",!0,!1,[this,"yellowHSL2"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","3",!0,!1,[this,"greenHSL3"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","4",!0,!1,[this,"cyanHSL4"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","5",!0,!1,[this,"blueHSL5"],e.default.colorHSL,e.description.colorHSL),new l.JsonProperty("","6",!0,!1,[this,"magentaHSL6"],e.default.colorHSL,e.description.colorHSL)]),new l.GroupProperty("","",[new l.JsonProperty("rgb","rgb",!0,!1,[this,"curveRgb"],e.default.curve,e.description.curve),new l.JsonProperty("red","red",!0,!1,[this,"curveRed"],e.default.curve,e.description.curve),new l.JsonProperty("green","green",!0,!1,[this,"curveGreen"],e.default.curve,e.description.curve),new l.JsonProperty("blue","blue",!0,!1,[this,"curveBlue"],e.default.curve,e.description.curve)])]),new l.GroupProperty("XYZ","XYZ",[new l.StringProperty("url",e.description.url,!0,!1,[this,"url"]),new l.StringsProperty("urls",e.description.urls,!0,!1,[this,"urls"]),new l.StringsProperty("attributions",e.description.attributions,!0,!1,[this,"attributions"]),new l.BooleanProperty("attributionsCollapsible",e.description.attributionsCollapsible,!0,!1,[this,"attributionsCollapsible"],e.default.attributionsCollapsible),new l.NumberProperty("cacheSize",e.description.cacheSize,!0,!1,[this,"cacheSize"]),new l.NumberProperty("zIndex","z-index",!0,!1,[this,"zIndex"],0),new l.StringProperty("crossOrigin",e.description.crossOrigin,!0,!1,[this,"crossOrigin"],"anonymous"),new l.BooleanProperty("interpolate",e.description.interpolate,!0,!1,[this,"interpolate"],e.default.interpolate),new l.JsonProperty("tileGrid",e.description.tileGrid,!0,!1,[this,"tileGrid"]),new l.JsonProperty("projection",e.description.projection,!0,!1,[this,"projection"]),new l.NumberProperty("reprojectionErrorThreshold",e.description.reprojectionErrorThreshold,!0,!1,[this,"reprojectionErrorThreshold"],e.default.reprojectionErrorThreshold),new l.NumberProperty("tilePixelRatio",e.description.tilePixelRatio,!0,!1,[this,"tilePixelRatio"],e.default.tilePixelRatio),new l.EvalStringProperty("tileLoadFunction",e.description.tileLoadFunction,!0,!1,[this,"tileLoadFunction"],e.default.tileLoadFunction),new l.BooleanProperty("wrapX",e.description.wrapX,!0,!1,[this,"wrapX"],e.default.wrapX),new l.NumberProperty("transition",e.description.transition,!0,!1,[this,"transition"],e.default.transition),new l.NumberProperty("zDirection",e.description.zDirection,!0,!1,[this,"zDirection"],e.default.zDirection),new l.NumberProperty("maxZoom",e.description.maxZoom,!0,!1,[this,"maxZoom"],e.default.maxZoom),new l.NumberProperty("minZoom",e.description.minZoom,!0,!1,[this,"minZoom"],e.default.minZoom),new l.NumberProperty("tileSize",e.description.tileSize,!0,!1,[this,"tileSize"],e.default.tileSize),new l.NumberProperty("gutter",e.description.gutter,!0,!1,[this,"gutter"],e.default.gutter),new l.NumberProperty("maxResolution",e.description.maxResolution,!0,!1,[this,"maxResolution"]),new l.EvalStringProperty("tileUrlFunction",e.description.tileUrlFunction,!0,!1,[this,"tileUrlFunction"]),new l.BooleanProperty("opaque",e.description.opaque,!0,!1,[this,"opaque"],e.default.opaque)])])],!1)},n=e,e.type=n.register("OlXYZLayer",n,{chsName:"OlXYZLayer",tags:["OlObjects","_ES_Impl_OpenLayers"],description:"OlXYZLayer"}),e.description=o({url:"URL template.Must include { x }, { y } or { -y }, and { z } placeholders.A {?-?} template pattern, for example subdomain{ a- f}.domain.com, may be used instead of defining each one separately in the urls option.",urls:"An array of URLs. Requests will be distributed among the URLs in this array.",attributions:"Attributions",attributionsCollapsible:"true,Attributions are collapsible.",cacheSize:"Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.",crossOrigin:"The crossOrigin attribute for loaded images. Note that you must provide a crossOrigin value if you want to access pixel data with the Canvas renderer. See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.",interpolate:"true,Use interpolated values when resampling. By default, linear interpolation is used when resampling. Set to false to use the nearest neighbor instead.",opaque:"boolean(defaults to false) Whether the layer is opaque.",tileGrid:"Tile grid.",projection:"Projection. defaults to 'EPSG:3857'",reprojectionErrorThreshold:"0.5,Maximum allowed reprojection error (in pixels). Higher values can increase reprojection performance, but decrease precision.",maxZoom:"number(defaults to 42) Optional max zoom level.Not used if tileGrid is provided.",minZoom:"number(defaults to 0)\tOptional min zoom level.Not used if tileGrid is provided.",maxResolution:"number | undefined,Optional tile grid resolution at level zero.Not used if tileGrid is provided.",tilePixelRatio:"1,The pixel ratio used by the tile service. For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px by 512px images (for retina/hidpi devices) then tilePixelRatio should be set to 2.",tileLoadFunction:"Optional function to load a tile given a URL. The default is function(imageTile, src) {imageTile.getImage().src = src;};",wrapX:"false,Whether to wrap the world horizontally.",tileSize:"(defaults to[256, 256])The tile size used by the tile service.Not used if tileGrid is provided.",gutter:"number(defaults to 0)The size in pixels of the gutter around image tiles to ignore.This allows artifacts of rendering at tile edges to be ignored.Supported images should be wider and taller than the tile size by a value of 2 x gutter.",tileUrlFunction:"Optional function to get tile URL given a tile coordinate and the projection.Required if url or urls are not provided.",transition:"Duration of the opacity transition for rendering. To disable the opacity transition, pass transition: 0.",zDirection:"0\tChoose whether to use tiles with a higher or lower zoom level when between integer zoom levels. See getZForResolution"},c.sampleColorValue),e.default=o({maxZoom:42,minZoom:0,opaque:!1,tileSize:256,gutter:0,interpolate:!0,attributionsCollapsible:!0,reprojectionErrorThreshold:.5,tilePixelRatio:1,tileLoadFunction:"function(imageTile, src) {imageTile.getImage().src = src;}",wrapX:!0,transition:250,zDirection:0},c.defaultColorValue),e}(l.ESSceneObject);e.OlXYZLayer=h,function(t){t.createDefaultProps=function(){return o(o({},l.ESSceneObject.createDefaultProps()),{show:void 0,curveRgb:(0,u.reactJsonWithUndefined)(void 0),curveRed:(0,u.reactJsonWithUndefined)(void 0),curveGreen:(0,u.reactJsonWithUndefined)(void 0),curveBlue:(0,u.reactJsonWithUndefined)(void 0),colorLevelRgb:(0,u.reactJsonWithUndefined)(void 0),colorLevelRed:(0,u.reactJsonWithUndefined)(void 0),colorLevelGreen:(0,u.reactJsonWithUndefined)(void 0),colorLevelBlue:(0,u.reactJsonWithUndefined)(void 0),allHSL0:(0,u.reactJsonWithUndefined)(void 0),redHSL1:(0,u.reactJsonWithUndefined)(void 0),yellowHSL2:(0,u.reactJsonWithUndefined)(void 0),greenHSL3:(0,u.reactJsonWithUndefined)(void 0),cyanHSL4:(0,u.reactJsonWithUndefined)(void 0),blueHSL5:(0,u.reactJsonWithUndefined)(void 0),magentaHSL6:(0,u.reactJsonWithUndefined)(void 0),brightness:void 0,contrast:void 0,attributions:(0,u.reactArrayWithUndefined)(void 0),attributionsCollapsible:void 0,cacheSize:void 0,crossOrigin:void 0,interpolate:void 0,projection:(0,u.reactJsonWithUndefined)(void 0),reprojectionErrorThreshold:void 0,maxZoom:void 0,minZoom:void 0,opaque:void 0,maxResolution:void 0,tileSize:void 0,gutter:void 0,tileUrlFunction:void 0,tileGrid:(0,u.reactJsonWithUndefined)(void 0),tileLoadFunction:void 0,tilePixelRatio:void 0,url:void 0,urls:(0,u.reactArrayWithUndefined)(void 0),wrapX:void 0,transition:void 0,zDirection:void 0,zIndex:void 0})}}(h=e.OlXYZLayer||(e.OlXYZLayer={})),e.OlXYZLayer=h,(0,u.extendClassProps)(h.prototype,h.createDefaultProps)},82040:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(29394),e),r(n(61631),e)},51497:function(t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};function o(t,e,n){return t>n?n:t<e?e:t}function s(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=o(e,-100,100)/100,r=o(n,-100,100)/100;return o((t-127.5*(1-i))*Math.tan((45+44*r)/180*Math.PI)+127.5*(1+i),0,255)}function a(t,e){for(var n=o(t.shadow,0,255),s=o(t.midtones,.01,9.99),a=o(t.highlight,0,255),l=o(t.outputShadow,0,255),u=o(t.outputHighlight,0,255),c=r([],i(e),!1),h=255/(a-n),p=(u-l)/255,d=1/s,f=0,g=0;g<256;g++)c[g]<=n?f=0:(f=(c[g]-n)*h+.5)>255&&(f=255),f=255*Math.pow(f/255,d)+.5,c[g]=f*p+l+.5;return c}function l(t){var e=[[0,0,360,360],[315,345,15,45],[15,45,75,105],[75,105,135,165],[135,165,195,225],[195,225,255,285],[255,285,315,345]][t];return{_left:e[0],left:e[1],right:e[2],_right:e[3]}}function u(t,e,n){return 0!==t||0!==e||0!==n}Object.defineProperty(e,"__esModule",{value:!0}),e.defaultColorValue=e.sampleColorValue=e.getHSLChannels=e.calcDefined=e.getHsvScope=e.setBrightnessContrast=e.getColorsLevelTable=e.colorLevelChannel=e.brightnessContrast=e.clipRange=e.createTable=void 0,e.createTable=function(){var t=Array.from({length:256},(function(t,e){return 0+e}));return[r([],i(t),!1),r([],i(t),!1),r([],i(t),!1)]},e.clipRange=o,e.brightnessContrast=s,e.colorLevelChannel=a,e.getColorsLevelTable=function(t,e,n,o,s){var l=r([],i(t),!1);return l[0]=a(n,l[0]),l[1]=a(o,l[1]),l[2]=a(s,l[2]),l[0]=a(e,l[0]),l[1]=a(e,l[1]),l[2]=a(e,l[2]),l},e.setBrightnessContrast=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);for(var o=r([],i(t),!1),a=0;a<o.length;a++)for(var l=o[a],u=0;u<l.length;u++){var c=s(l[u],e,n);o[a][u]=c}return o},e.getHsvScope=l,e.calcDefined=u,e.getHSLChannels=function(t){var e=[];return t.forEach((function(t){var i=o(t.colorIndex,0,6),r=o(t.hue,-180,180),s=o(t.saturation,-100,100),a=o(t.lightness,-100,100),c=l(i),h=u(r,s,a),p=n({defined:h,colorIndex:i,hue:r,saturation:s,lightness:a},c);e.push(p)})),e},e.sampleColorValue={colorLevel:"\n####   1. shadow, '[0,255] 0,';\n####   2. highlight, '[0,255] 255\t';\n####   3. midtones, '[0.01,9.99]1.0,';\n####   4. outputShadow, '[0,255] 0,';\n####   5. outputHighlight, '[0,255] 255,'.\n#### \n".concat("```","js\n{\n    shadow: 0,\n    midtones: 1,\n    highlight: 255,\n    outputShadow: 0,\n    outputHighlight: 255,\n}\n").concat("```","\n"),colorHSL:"\n####   1. hue\t[-180,180] 0\t;\n####   2. satuation\t[-100,100] 0\t;\n####   3. lightness\t[-100,100] 0\t;\n#### \n".concat("```","js\n{   \n    hue: 0,\n    saturation: 0,\n    lightness: 0,\n}\n").concat("```"),curve:"\n####   1. controlPoints\t[[0, 0], [255, 255]],;\n####   2. points [[0, 0], [255, 255]];\n####   3. density 20,20;\n#### \n".concat("```","js\n{\n    controlPoints: [[0, 0], [255, 255]],\n    points: [[0, 0], [255, 255]],\n    density: 20\n}\n").concat("```"),brightness:"\n    ####  brightness,[-100,100] 0\n    ",contrast:"\n   ####  contrast,[-100,100]0\n    "},e.defaultColorValue={colorLevel:{shadow:0,midtones:1,highlight:255,outputShadow:0,outputHighlight:255},colorHSL:{hue:0,saturation:0,lightness:0},curve:{controlPoints:[[0,0],[255,255]],points:[[0,0],[255,255]],density:20},brightness:0,contrast:0}},70406:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCenterFromPositions=void 0;var i=n(9746),r=n(57646);e.getCenterFromPositions=function(t){var e=t.map((function(t){return(0,r.fromLonLat)(t)})),n=(0,i.getMinMaxCoordinates)(e),o=n.minPos,s=n.maxPos,a=[.5*(o[0]+s[0]),.5*(o[1]+s[1])];return(0,r.toLonLat)(a)}},9746:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMinMaxCoordinates=void 0;var i=n(19239);e.getMinMaxCoordinates=function(t){return{minPos:[(0,i.min)((0,i.objsIterator)(t,["0"])),(0,i.min)((0,i.objsIterator)(t,["1"]))],maxPos:[(0,i.max)((0,i.objsIterator)(t,["0"])),(0,i.max)((0,i.objsIterator)(t,["1"]))]}}},54187:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(44146),e),r(n(9746),e),r(n(70406),e),r(n(60051),e)},60051:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.moveAllPositionsWithCenter=void 0;var i=n(57646);e.moveAllPositionsWithCenter=function(t,e,n){var r=(0,i.fromLonLat)(n),o=(0,i.fromLonLat)(e),s=[o[0]-r[0],o[1]-r[1]];return t.map((function(t){return(0,i.fromLonLat)(t)})).map((function(t){return[t[0]+s[0],t[1]+s[1]]})).map((function(t){return(0,i.toLonLat)(t)}))}},44146:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4964:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(48489),e),r(n(31731),e),r(n(90707),e),r(n(7521),e),r(n(79652),e),r(n(42767),e),r(n(3279),e),r(n(92763),e),r(n(49353),e),r(n(71208),e),r(n(35667),e),r(n(35421),e),r(n(64187),e),r(n(60363),e),r(n(48534),e),r(n(66488),e),r(n(49498),e),r(n(43483),e),r(n(17133),e),r(n(33154),e),r(n(13947),e),r(n(30502),e),r(n(70359),e),r(n(68206),e),r(n(57777),e),r(n(45824),e),r(n(1448),e),r(n(86939),e),r(n(92849),e),r(n(17663),e),r(n(67754),e),r(n(61357),e),r(n(82040),e),r(n(59116),e),r(n(54187),e),r(n(22442),e),r(n(45540),e),r(n(22846),e),r(n(30308),e)},7958:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(4964),e)},34917:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.OpenLayersObject=e.OpenLayersObjectsContext=void 0;var s=n(43938),a=n(19239),l=function(){function t(){this._registerCzmObjsMap=new Map}return t.prototype.register=function(t,e){"string"!=typeof t&&(console.warn("OpenLayersObjectsContext register error: the first param is not string!"),console.warn(t)),this._registerCzmObjsMap.set(t,e)},t.prototype._getObjConstructor=function(t){return this._registerCzmObjsMap.get(t)||void 0},t.prototype.createObject=function(t,e){var n=this._getObjConstructor(t.typeName);return(0,s.sceneObjConstructorCheck)(!!n,t.typeName,"OpenLayers"),n?new n(t,e):new u(t,e)},t}();e.OpenLayersObjectsContext=l;var u=function(t){function e(n,i){var r=t.call(this)||this;r._sceneObject=n,r._openlayersViewer=i,r._id=++e._accumId;var s=r._sceneObject,a=r._openlayersViewer;++e._totalExistingCount,e.debugging&&console.log("OpenLayersObject._totalExistingCount: ".concat(e._totalExistingCount)),r.dispose((function(){--e._totalExistingCount,e.debugging&&console.log("OpenLayersObject._totalExistingCount: ".concat(e._totalExistingCount))}));var l=function(t,e){var n,i,r,s;try{for(var l=o(t),u=l.next();!u.done;u=l.next()){var c=u.value;a.delete(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}try{for(var h=o(e),p=h.next();!p.done;p=h.next())c=p.value,a.add(c)}catch(t){r={error:t}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(r)throw r.error}}};return l([],s.components.values()),r.dispose(s.components.toChange.disposableOn(l)),r.dispose((function(){return l(s.components.values(),[])})),r}var n;return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sceneObject",{get:function(){return this._sceneObject},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"openlayersViewer",{get:function(){return this._openlayersViewer},enumerable:!1,configurable:!0}),n=e,e._accumId=-1,e._totalExistingCount=0,e.debugging=!1,e.context=new l,e.register=n.context.register.bind(n.context),e}(a.Destroyable);e.OpenLayersObject=u},27945:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(34917),e)},37281:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OlMapCreating=e.OlMapAttaching=e.OlPickedInfo=e.setAttachingFromMap=e.getAttachingFromMap=e.getCaptureInteractionFromMap=e.getInteractionFromMap=void 0;var u=n(75265),c=l(n(23851)),h=n(19451),p=l(n(63267)),d=l(n(20537)),f=n(57646),g=l(n(59220)),y=n(43938),_=n(19239),m=n(10070),v=n(55769),b=n(31006);function x(t){return(0,_.getExtProp)(t,"containerInteraction")}function w(t){return(0,_.getExtProp)(t,"captureContainerInteraction")}function E(t,e){(0,_.setExtProp)(t,"containerInteraction",e)}function P(t,e){(0,_.setExtProp)(t,"captureContainerInteraction",e)}function C(t){return(0,_.getExtProp)(t,"olMapAttaching")}function O(t,e){(0,_.setExtProp)(t,"olMapAttaching",e)}e.getInteractionFromMap=x,e.getCaptureInteractionFromMap=w,e.getAttachingFromMap=C,e.setAttachingFromMap=O;var S=function(t){function e(e,n,i){var r=t.call(this,i)||this;return r.feature=e,r.layer=n,r}return r(e,t),e}(y.PickedInfo);e.OlPickedInfo=S;var I=function(t){function e(e,n){var i=t.call(this)||this;return i._map=e,i._openLayersViewer=n,i}return r(e,t),e.prototype.pick=function(t,e){var n=[];try{this._map.forEachFeatureAtPixel(t,(function(t,e){n.push([t,e])}),{})}catch(t){console.warn("openlayer map.forEachFeatureAtPixel error ".concat(t))}var i=n.length>0?n[0]:void 0;if(i){var r=a(i,2),o=r[0],s=r[1];return new S(o,s,new y.AttachedPickedInfo(e))}},e}(_.Destroyable),L=function(t){function e(e,n){var i=t.call(this)||this;return i._map=e,i._openLayersViewer=n,i._olMapPickingManager=i.disposeVar(new I(i._map,i._openLayersViewer)),i}return r(e,t),Object.defineProperty(e.prototype,"olMapPickingManager",{get:function(){return this._olMapPickingManager},enumerable:!1,configurable:!0}),e}(_.Destroyable);e.OlMapAttaching=L;var M=function(t){function e(e,n){var i,r=t.call(this)||this;r.dispose((function(){e&&i&&e.removeChild(i)})),r.dispose((function(){n.setStaus("Raw"),n.setCreatingLog("");var t=n.map;if(t){n.setMap(void 0),n.poiContext=void 0,t.dispose();var e=x(t);null==e||e.destroy(),E(t,void 0);var i=w(t);null==i||i.destroy(),P(t,void 0);var r=C(t);null==r||r.destroy(),O(t,void 0)}}));var a=r.disposeVar((0,m.createProcessingFromAsyncFunc)((function(t,e){return o(r,void 0,void 0,(function(){var r,o,a,l,_,x,w,C,S,I,M,T,R=this;return s(this,(function(s){switch(s.label){case 0:return n.setStaus("Creating"),n.setCreatingLog("OpenLayers..."),(i=document.createElement("div")).style.cssText="height: 100%",e.appendChild(i),r=new y.ContainerViewerInteraction(i,!0),o=new y.ContainerViewerInteraction(i,!1),(a=new d.default({target:i,view:new g.default({center:[0,0],zoom:0,enableRotation:null!==(T=n.enableRotation)&&void 0!==T?T:b.OpenLayersViewer.defaults.enableRotation}),interactions:(0,h.defaults)({doubleClickZoom:!1}),controls:(0,u.defaults)({zoom:!1,rotate:!1,attribution:!1})})).getViewport().oncontextmenu=function(){return!1},C=function(){var t=n.dragPanEnabled,e=void 0===t||t,i=a.getInteractions().getArray().find((function(t){return t instanceof p.default}));i?i.setActive(e):console.warn("cannot find dragPan interaction!")},C(),this.dispose(n.dragPanEnabledChanged.disposableOn(C)),C=function(){var t;null!==(t=n.scaleLineEnabled)&&void 0!==t&&!t&&l?(a.removeControl(l),l.dispose()):(l&&(a.removeControl(l),l.dispose()),l=new u.ScaleLine({units:"metric"}),R.dispose((function(){return l&&l.dispose()})),a.addControl(l))},C(),this.dispose(n.scaleLineEnabledChanged.disposableOn(C)),x=function(){var t;null!==(t=n.zoomIconEnabled)&&void 0!==t&&!t&&_?(a.removeControl(_),_.dispose()):(_&&(a.removeControl(_),_.dispose()),_=new c.default,R.dispose((function(){return _&&_.dispose()})),a.addControl(_))},x(),this.dispose(n.zoomIconEnabledChanged.disposableOn(x)),w=a.getView(),C=function(){var t=n.zoom,e=void 0===t?b.OpenLayersViewer.defaultValue.zoom:t;w.getZoom()!==e&&w.setZoom(e)},C(),this.dispose(n.zoomChanged.disposableOn(C)),C=function(){var t=n.rotation,e=(void 0===t?b.OpenLayersViewer.defaultValue.rotation:t)*Math.PI/180;Math.abs(w.getRotation()-e)>1e-6&&w.setRotation(e)},C(),this.dispose(n.rotationChanged.disposableOn(C)),C=function(){var t=n.position,e=void 0===t?b.OpenLayersViewer.defaultValue.position:t,i=(0,f.fromLonLat)(e);w.getCenter()!==i&&w.setCenter(i)},C(),this.dispose(n.positionChanged.disposableOn(C)),S=function(){if(a.isRendered()){var t=a.getSize();if(t){var e=[[0,0],[t[0],0],[t[0],t[1]],[0,t[1]]];try{n.boundary=e.map((function(t){var e=a.getCoordinateFromPixel(t),n=(0,f.toLonLat)(e);return[n[0],n[1]]}))}catch(t){console.error("setBoundary error: ",t)}}}},this.dispose(n.getJsonEvent.disposableOn(S)),I=function(){n.zoom=w.getZoom(),n.rotation=180*w.getRotation()/Math.PI;var t=w.getCenter();n.position=t?(0,f.toLonLat)(t):void 0,n.resolution=w.getResolution(),S();var e=w.getProjection();n.projectionCode=e.getCode()},w.on("change",I),I(),this.dispose((function(){return w.un("change",I)})),this.dispose(n.flyToEvent.disposableOn((function(t){var e=t.position,n=t.zoom,i=t.rotation,r=t.duration,o=e&&(0,f.fromLonLat)(e),s="number"==typeof i?i*Math.PI/180:void 0;w.animate({center:o,zoom:n,rotation:s,duration:r})}))),(M=a.getViewport().getElementsByClassName("ol-layers")[0])&&(M.style.pointerEvents="none"),[4,t.promise((0,m.sleep)(1e3))];case 1:return s.sent(),a.renderSync(),E(a,o),P(a,r),O(a,new L(a,n)),n.poiContext=this.disposeVar(new v.OlPoisContext(a)),n.setMap(a),n.setStaus("Created"),n.setCreatingLog("OpenLayers!"),[2]}}))}))})));return a.start(e),r}return r(e,t),e}(_.Destroyable);e.OlMapCreating=M},31006:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},l=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.OpenLayersViewer=void 0;var u=n(57646),c=n(43938),h=n(19239),p=n(27945),d=n(37281),f=function(t){function e(e,n){var i=t.call(this,e)||this;i._sceneObjectsMap=new Map,i._map=(0,h.react)(void 0),i._flyToEvent=i.disposeVar(new h.Event),i._getJsonEvent=i.disposeVar(new h.Event),i._poiContext=i.disposeVar((0,h.react)(void 0));var r=i.disposeVar((0,h.createNextAnimateFrameEvent)(i.subContainerChanged,i.enableRotationChanged));return i.disposeVar(new c.ObjResettingWithEvent(r,(function(){if(i.subContainer)return new d.OlMapCreating(i.subContainer,i)}))),i.dispose(i.mapChanged.disposableOn((function(t){var e,n,r,o;try{for(var l=s(i._sceneObjectsMap.entries()),u=l.next();!u.done;u=l.next()){var c=a(u.value,2),h=c[0],d=c[1];d&&(d.destroy(),i._sceneObjectsMap.set(h,void 0))}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}if(t)try{for(var f=s(i._sceneObjectsMap.entries()),g=f.next();!g.done;g=f.next()){var y=a(g.value,2);if(h=y[0],!y[1]){var _=p.OpenLayersObject.context.createObject(h,i);_&&i._sceneObjectsMap.set(h,_)}}}catch(t){r={error:t}}finally{try{g&&!g.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}}))),i.dispose((function(){return i.container=void 0})),n&&(i.devTags=n),i}var n;return r(e,t),Object.defineProperty(e.prototype,"typeName",{get:function(){return"OpenLayersViewer"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultProps",{get:function(){return e.createDefaultProps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._getJsonEvent.emit(),this._innerGetJson()},set:function(t){this._innerSetJson(t,["resolution","boundary","projectionCode"])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sceneObjects",{get:function(){return this._sceneObjectsMap.keys()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this._map.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapChanged",{get:function(){return this._map.changed},enumerable:!1,configurable:!0}),e.prototype.setMap=function(t){this._map.value=t},Object.defineProperty(e.prototype,"olPickedEvent",{get:function(){return this.nativePickedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flyToEvent",{get:function(){return this._flyToEvent},enumerable:!1,configurable:!0}),e.prototype.flyTo=function(t){this._flyToEvent.emit(t)},Object.defineProperty(e.prototype,"getJsonEvent",{get:function(){return this._getJsonEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poiContext",{get:function(){return this._poiContext.value},set:function(t){this._poiContext.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poiContextChanged",{get:function(){return this._poiContext.changed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return"OpenLayersViewer"},enumerable:!1,configurable:!0}),e.prototype._add=function(t){if(this.map){var e=p.OpenLayersObject.context.createObject(t,this);this._sceneObjectsMap.set(t,e)}else this._sceneObjectsMap.set(t,void 0)},e.prototype._delete=function(t){if(this._sceneObjectsMap.has(t)){var e=this._sceneObjectsMap.get(t);e&&e.destroy(),this._sceneObjectsMap.delete(t)}},e.prototype.add=function(){for(var e,n,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];t.prototype.add.apply(this,l([],a(i),!1));try{for(var o=s(i),u=o.next();!u.done;u=o.next()){var c=u.value;this._add(c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},e.prototype.delete=function(){for(var e,n,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];try{for(var o=s(i),u=o.next();!u.done;u=o.next()){var c=u.value;this._delete(c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}t.prototype.delete.apply(this,l([],a(i),!1))},e.prototype.has=function(t){return this._sceneObjectsMap.has(t)},e.prototype.getProperties=function(){return l(l([],a(t.prototype.getProperties.call(this)),!1),[new c.GroupProperty("","",[new c.BooleanProperty("dragPanEnabled","dragPanEnabled",!0,!1,[this,"dragPanEnabled"]),new c.BooleanProperty("scaleLineEnabled","",!0,!1,[this,"scaleLineEnabled"],!0),new c.BooleanProperty("zoomIconEnabled","",!0,!1,[this,"zoomIconEnabled"],!0),new c.BooleanProperty("enableRotation","enableRotation",!0,!1,[this,"enableRotation"],e.defaults.enableRotation),new c.Number2Property("position","position",!0,!1,[this,"position"],e.defaultValue.position),new c.NumberProperty("zoom","zoom",!0,!1,[this,"zoom"],e.defaultValue.zoom),new c.NumberProperty("rotation","rotation",!0,!1,[this,"rotation"],e.defaultValue.rotation),new c.NumberProperty("resolution","resolution",!0,!0,[this,"resolution"]),new c.Number2sProperty("projectionCode","projectionCode",!0,!0,[this,"projectionCode"])])],!1)},e.prototype.getInteractionFromMap=function(){return this.map&&(0,d.getInteractionFromMap)(this.map)},e.prototype.getCaptureInteractionFromMap=function(){return this.map&&(0,d.getCaptureInteractionFromMap)(this.map)},e.prototype.getAttachingFromMap=function(){return this.map&&(0,d.getAttachingFromMap)(this.map)},e.prototype.getCenter=function(t){if(void 0===t&&(t=!1),this.map){var e=this.map.getView().getCenter();if(e)return t?(0,u.toLonLat)(e):e}},e.prototype.getCenterResolution=function(){if(this.map&&this.position&&this.resolution){var t=this.position[1];return this.resolution*Math.cos(t*Math.PI/180)}},e.prototype.setCenterResolution=function(t){if(this.map){var e=this.map.getView().getZoomForResolution(t);this.zoom=e}},e.prototype.getLBFromPixel=function(t){var e=this.map;if(e){var n=e.getCoordinateFromPixel(t);return(0,u.toLonLat)(n)}},e.prototype.pick=function(t,e){var n=this.getAttachingFromMap();if(n)return n.olMapPickingManager.pick(t,e)},n=e,e.type=n.register("OpenLayersViewer",n,{chsName:"OpenLayers",tags:["OpenLayersViewer"],description:"OpenLayers"}),e.toLonLat=u.toLonLat,e.fromLonLat=u.fromLonLat,e.defaultValue={position:[116.39,39.9],rotation:0,zoom:4.5644554756954925},e.defaults=o(o({},c.Viewer.defaults),{enableRotation:!0}),e}(c.Viewer);e.OpenLayersViewer=f,function(t){t.createDefaultProps=function(){return o(o({},c.Viewer.createDefaultProps()),{dragPanEnabled:void 0,scaleLineEnabled:void 0,zoomIconEnabled:void 0,position:(0,h.reactArrayWithUndefined)(void 0),zoom:void 0,rotation:void 0,enableRotation:void 0,resolution:void 0,boundary:(0,h.reactArrayWithUndefined)(void 0),projectionCode:void 0})}}(f=e.OpenLayersViewer||(e.OpenLayersViewer={})),e.OpenLayersViewer=f,(0,h.extendClassProps)(f.prototype,f.createDefaultProps)},87442:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(27945),e),r(n(31006),e)},7067:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OlBasePoi=void 0;var o=n(19239),s=function(t){function e(e){var n=t.call(this)||this;n._olPoisContext=e,n._show=n.disposeVar((0,o.react)(!0)),n._position=n.disposeVar((0,o.reactArrayWithUndefined)(void 0)),n._actualShow=n.disposeVar((0,o.react)(!1));var i=n._olPoisContext,r=(i.map,i.viewChanged),s=function(){n.show?n._actualShow.value=n._position.value&&!n._olPoisContext.isPointOccludedByExtend(n._position.value)||!1:n._actualShow.value=!1};s();var a=n.disposeVar((0,o.createNextMicroTaskEvent)(n._show.changed,r,n._position.changed));return n.dispose(a.disposableOn(s)),n}return r(e,t),Object.defineProperty(e.prototype,"show",{get:function(){return this._show.value},set:function(t){this._show.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showChanged",{get:function(){return this._show.changed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position.value},set:function(t){this._position.value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"positionChanged",{get:function(){return this._position.changed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualShow",{get:function(){return this._actualShow.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualShowChanged",{get:function(){return this._actualShow.changed},enumerable:!1,configurable:!0}),e}(o.Destroyable);e.OlBasePoi=s},68809:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.OlCanvasPoi=void 0;var s=n(57646),a=function(t){function e(e,n){var i=t.call(this,n)||this,r=i._olPoisContext,a=r.canvasPrimitivesContext,l=r.viewChanged;i._canvasPoi=i.disposeVar(new e(a));var u=function(){if(i.actualShow&&void 0!==i.position){var t=(0,s.fromLonLat)(i.position),e=n.map.getPixelFromCoordinate(t);if(!e)return void console.error("OlCanvasPoi error: updateWinPosAndDepth olPoisContext.map.getPixelFromCoordinate(coordinate) => ".concat(e));var r=o(e,2),a=r[0],l=r[1];i._canvasPoi.winPos=[a,l],i._canvasPoi.depth=0,i._canvasPoi.show=!0}else i._canvasPoi.show=!1};return u(),i.dispose(i.positionChanged.disposableOn((function(){u()}))),i.dispose(i.actualShowChanged.disposableOn((function(t){i._canvasPoi.show=t,u()}))),i.dispose(l.disposableOn((function(){u()}))),i}return r(e,t),Object.defineProperty(e.prototype,"canvasPoi",{get:function(){return this._canvasPoi},enumerable:!1,configurable:!0}),e}(n(7067).OlBasePoi);e.OlCanvasPoi=a},55769:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.OlPoisContext=void 0;var l=n(19239),u=n(10070),c=n(28641),h=n(57646),p=function(t){function e(e){var n=t.call(this)||this,i=e.getView(),r=i.getState(),a=r.center,u=r.rotation,c=r.zoom,h=e.getSize(),p={center:s([],o(a),!1),rotation:u,zoom:c,size:h&&s([],o(h),!1)||[0,0]};return n.dispose((0,l.animateFrame)((function(t){var r,o=i.getState(),s=o.center,a=o.rotation,l=o.zoom,u=null!==(r=e.getSize())&&void 0!==r?r:[0,0];p.center[0]===s[0]&&p.center[1]===s[1]&&p.rotation===a&&p.zoom===l&&p.size[0]===u[0]&&p.size[1]===u[1]||(p.center[0]=s[0],p.center[1]=s[1],p.rotation=a,p.zoom=l,p.size[0]=u[0],p.size[1]=u[1],n.emit())}))),n}return r(e,t),e}(l.Event),d=function(t){function e(e,n){void 0===n&&(n=!0);var i=t.call(this)||this;i._map=e,i._useInnerInteraction=n,i._clickEvent=i.disposeVar(new l.Event),i._dbclickEvent=i.disposeVar(new l.Event),i._downEvent=i.disposeVar(new l.Event),i._upEvent=i.disposeVar(new l.Event),i._moveEvent=i.disposeVar(new l.Event),i._outEvent=i.disposeVar(new l.Event),i._viewChanged=i.disposeVar(new p(i._map));var r=i._map.getViewport().parentElement;i._divContainer=r;var s=document.createElement("div");s.style.position="absolute",s.style.left="0px",s.style.top="0px",s.style.width="100%",s.style.height="100%",s.style.pointerEvents="none",r.appendChild(s),i.dispose((function(){r.removeChild(s)}));var d,f,g=new u.CanvasPrimitivesContext;function y(t){f!==t&&(f&&(f.hovered=!1),(f=t)&&(f.hovered=!0))}i._canvasPrimitivesContext=g,i.dispose((function(){i._canvasPrimitivesContext.destroy()})),s.appendChild(g.element),i._isPointOccludedByExtend=function(t){var e=i._map.getSize();if(!e)return!1;var n=i._map.getView().getState(),r=(0,c.getForViewAndSize)(n.center,n.resolution,n.rotation,e),o=(0,h.fromLonLat)(t);return!(0,c.containsCoordinate)(r,o)},i.dispose(i._clickEvent.disposableOn((function(t,e,n){var r,o,s,l,u=g.pick(t,e,1,1);if(u.length>0){i._poiClickedEvent&&i._poiClickedEvent.emit(!0);var c=u[0],h=c.poi,p=c.tag;try{for(var d=a(g.pois),f=d.next();!f.done;f=d.next())(m=f.value)===h?m.hasClickEvent()&&m.clickEvent.emit(t,e,p,m,n):m.hasClickOutEvent()&&m.clickOutEvent.emit(t,e,"",m,n)}catch(t){r={error:t}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}}else{i._poiClickedEvent&&i._poiClickedEvent.emit(!1);try{for(var y=a(g.pois),_=y.next();!_.done;_=y.next()){var m;(m=_.value).hasClickOutEvent()&&m.clickOutEvent.emit(t,e,"",m,n)}}catch(t){s={error:t}}finally{try{_&&!_.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}}}))),i.dispose(i._dbclickEvent.disposableOn((function(t,e,n){var r,o,s,l,u=g.pick(t,e,1,1);if(u.length>0){i._poiClickedEvent&&i._poiClickedEvent.emit(!0);var c=u[0],h=c.poi,p=c.tag;try{for(var d=a(g.pois),f=d.next();!f.done;f=d.next())(m=f.value)===h?m.hasDbclickEvent()&&m.dbclickEvent.emit(t,e,p,m,n):m.hasDbclickOutEvent()&&m.dbclickOutEvent.emit(t,e,"",m,n)}catch(t){r={error:t}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}}else{i._poiClickedEvent&&i._poiClickedEvent.emit(!1);try{for(var y=a(g.pois),_=y.next();!_.done;_=y.next()){var m;(m=_.value).hasDbclickOutEvent()&&m.dbclickOutEvent.emit(t,e,"",m,n)}}catch(t){s={error:t}}finally{try{_&&!_.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}}}))),i.dispose(i._downEvent.disposableOn((function(t,e){d&&(d.actived=!1);var n=g.pick(t,e,1,1);if(n.length>0){var i=n[0],r=i.poi;i.tag,r instanceof u.CanvasPoi&&(r.actived=!0,d=r)}}))),i.dispose(i._upEvent.disposableOn((function(){d&&(d.actived=!1,d=void 0)})));var _=i._moveEvent.disposableOn((function(t,e){var n,i=g.pick(t,e,1,1);if(i.length>0){var r=i[0].poi;r instanceof u.CanvasPrimitive&&(n=r)}y(n)}));if(i.dispose(_),i.dispose(i._outEvent.disposableOn((function(t,e,n){y(void 0)}))),i._useInnerInteraction){var m=i._map.getViewport().parentElement,v=i.disposeVar(u.DomElementEvent.create(m,"pointerdown")),b=i.disposeVar(u.DomElementEvent.create(m,"pointermove")),x=i.disposeVar(u.DomElementEvent.create(m,"pointerup")),w=i.disposeVar(u.DomElementEvent.create(m,"pointerout")),E=i.disposeVar(new u.PointerClick),P=i.disposeVar(new u.PointerHover);i.dispose(v.disposableOn((function(t){return E.pointerDown(t)}))),i.dispose(b.disposableOn((function(t){return E.pointerMove(t)}))),i.dispose(x.disposableOn((function(t){return E.pointerUp(t)}))),i.dispose(w.disposableOn((function(t){return E.pointerOut(t)}))),i.dispose(v.disposableOn((function(t){return P.pointerDown(t)}))),i.dispose(b.disposableOn((function(t){return P.pointerMove(t)}))),i.dispose(x.disposableOn((function(t){return P.pointerUp(t)}))),i.dispose(w.disposableOn((function(t){return P.pointerOut(t)}))),i.dispose(E.clickEvent.disposableOn((function(t){var e=o((0,u.getDomEventCurrentTargetPos)(t),2),n=e[0],r=e[1];0===t.button?i._clickEvent.emit(n,r,t):t.button}))),i.dispose(E.dbclickEvent.disposableOn((function(t){var e=o((0,u.getDomEventCurrentTargetPos)(t),2),n=e[0],r=e[1];0===t.button&&i._dbclickEvent.emit(n,r,t)}))),i.dispose(v.disposableOn((function(t){var e=o((0,u.getDomEventCurrentTargetPos)(t),2),n=e[0],r=e[1];0===t.button&&i._downEvent.emit(n,r,t)}))),i.dispose(x.disposableOn((function(t){var e=o((0,u.getDomEventCurrentTargetPos)(t),2),n=e[0],r=e[1];0===t.button&&i._upEvent.emit(n,r,t)}))),i.dispose(b.disposableOn((function(t){var e=o((0,u.getDomEventCurrentTargetPos)(t),2),n=e[0],r=e[1];i._moveEvent.emit(n,r,t)}))),i.dispose(w.disposableOn((function(t){var e=o((0,u.getDomEventCurrentTargetPos)(t),2),n=e[0],r=e[1];i._outEvent.emit(n,r,t)})))}return i}return r(e,t),Object.defineProperty(e.prototype,"useInnerInteraction",{get:function(){return this._useInnerInteraction},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"divContainer",{get:function(){return this._divContainer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasPrimitivesContext",{get:function(){return this._canvasPrimitivesContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewChanged",{get:function(){return this._viewChanged},enumerable:!1,configurable:!0}),e.prototype.isPointOccludedByExtend=function(t){return this._isPointOccludedByExtend(t)},Object.defineProperty(e.prototype,"poiClickedEvent",{get:function(){return this._poiClickedEvent||(this._poiClickedEvent=new l.Event),this._poiClickedEvent},enumerable:!1,configurable:!0}),e.prototype.pointerClick=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._useInnerInteraction?console.warn("(useInnerInteractiontrue)"):(t=this._clickEvent).emit.apply(t,s([],o(e),!1))},e.prototype.pointerDbclick=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._useInnerInteraction?console.warn("(useInnerInteractiontrue)"):(t=this._dbclickEvent).emit.apply(t,s([],o(e),!1))},e.prototype.pointerDown=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._useInnerInteraction?console.warn("(useInnerInteractiontrue)"):(t=this._downEvent).emit.apply(t,s([],o(e),!1))},e.prototype.pointerUp=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._useInnerInteraction?console.warn("(useInnerInteractiontrue)"):(t=this._upEvent).emit.apply(t,s([],o(e),!1))},e.prototype.pointerMove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._useInnerInteraction?console.warn("(useInnerInteractiontrue)"):(t=this._moveEvent).emit.apply(t,s([],o(e),!1))},e}(l.Destroyable);e.OlPoisContext=d},78353:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(68809),e)},85817:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),(0,n(10070).registerScript)(),r(n(99256),e),r(n(87442),e),r(n(23644),e),r(n(7958),e)},46374:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPositionsEditingRefForOlViewer=void 0;var i=n(43938);e.createPositionsEditingRefForOlViewer=function(t,e,n,r){return(0,i.createPositionsEditingRef)(t,e,(function(t){return n.add(t)}),(function(t){return n.delete(t)}),r)}},23644:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(46374),e)},45623:(t,e,n)=>{"use strict";n.r(e),n.d(e,{gcj02Mecator:()=>p});var i=n(57646);const r=Math.PI,o=6378245,s=.006693421622965943;function a(t,e){let n=function(t,e){let n=2*t-100+3*e+.2*e*e+.1*t*e+.2*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*r)+20*Math.sin(2*t*r))/3,n+=2*(20*Math.sin(e*r)+40*Math.sin(e/3*r))/3,n+=2*(160*Math.sin(e/12*r)+320*Math.sin(e*r/30))/3,n}(t-105,e-35),i=function(t,e){let n=300+t+2*e+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*r)+20*Math.sin(2*t*r))/3,n+=2*(20*Math.sin(t*r)+40*Math.sin(t/3*r))/3,n+=2*(150*Math.sin(t/12*r)+300*Math.sin(t/30*r))/3,n}(t-105,e-35);const a=e/180*r;let l=Math.sin(a);l=1-s*l*l;const u=Math.sqrt(l);return n=180*n/(o*(1-s)/(l*u)*r),i=180*i/(o/u*Math.cos(a)*r),[i,n]}function l(t,e){return t<72.004||t>137.8347||e<.8293||e>55.8271}const u=function(t){return function(e,n,i){const r=e.length,o=i||2;let s;s=n||(2!==o?e.slice():new Array(r));for(let n=0;n<r;n+=o)t(e,s,n);return s}},c={toWGS84:u((function(t,e,n){let i=t[n],r=t[n+1];if(!l(i,r)){const t=a(i,r);i-=t[0],r-=t[1]}e[n]=i,e[n+1]=r})),fromWGS84:u((function(t,e,n){let i=t[n],r=t[n+1];if(!l(i,r)){const t=a(i,r);i+=t[0],r+=t[1]}e[n]=i,e[n+1]=r}))},h={ll2smerc:(0,i.getTransform)("EPSG:4326","EPSG:3857"),smerc2ll:(0,i.getTransform)("EPSG:3857","EPSG:4326"),ll2gmerc:function(t,e,n){const i=c.fromWGS84(t,e,n);return h.ll2smerc(i,i,n)},gmerc2ll:function(t,e,n){const i=h.smerc2ll(t,t,n);return c.toWGS84(i,e,n)},smerc2gmerc:function(t,e,n){let i=h.smerc2ll(t,t,n);return i=c.fromWGS84(i,i,n),h.ll2smerc(i,i,n)},gmerc2smerc:function(t,e,n){let i=h.smerc2ll(t,t,n);return i=c.toWGS84(i,i,n),h.ll2smerc(i,i,n)}},p=new i.Projection({code:"GCJ-02",extent:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],units:"m"});(0,i.addProjection)(p),(0,i.addCoordinateTransforms)("EPSG:4326",p,h.ll2gmerc,h.gmerc2ll),(0,i.addCoordinateTransforms)("EPSG:3857",p,h.smerc2gmerc,h.gmerc2smerc)},55452:(t,e,n)=>{"use strict";n.r(e),n.d(e,{createRasterSource:()=>T});var i=n(55431),r=n(291),o=n(85487),s=n(31798),a=n(70553);class l extends s.Z{constructor(t,e,n,i,r){super(t,e,n,void 0!==r?a.Z.IDLE:a.Z.LOADED),this.loader_=void 0!==r?r:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=a.Z.ERROR):this.state=a.Z.LOADED,this.changed()}load(){this.state==a.Z.IDLE&&(this.state=a.Z.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const u=l;var c=n(20228),h=n(50636),p=n(58458),d=n(61140),f=n(2918),g=n(57302),y=n(68326),_=n(6101),m=n(28641),v=n(74187);let b,x=!0;try{new ImageData(10,10)}catch(t){x=!1}function w(t){let e=!0;try{new ImageData(10,10)}catch(t){e=!1}function n(t,n,i){return e?new ImageData(t,n,i):{data:t,width:n,height:i}}return function(e){const i=e.buffers,r=e.meta,o=e.imageOps,s=e.width,a=e.height,l=i.length,u=i[0].byteLength;if(o){const e=new Array(l);for(let t=0;t<l;++t)e[t]=n(new Uint8ClampedArray(i[t]),s,a);return t(e,r).data.buffer}const c=new Uint8ClampedArray(u),h=new Array(l),p=new Array(l);for(let t=0;t<l;++t)h[t]=new Uint8ClampedArray(i[t]),p[t]=[0,0,0,0];for(let e=0;e<u;e+=4){for(let t=0;t<l;++t){const n=h[t];p[t][0]=n[e],p[t][1]=n[e+1],p[t][2]=n[e+2],p[t][3]=n[e+3]}const n=t(p,r);c[e]=n[0],c[e+1]=n[1],c[e+2]=n[2],c[e+3]=n[3]}return c.buffer}}function E(t,e){const n=Object.keys(t.lib||{}).map((function(e){return"const "+e+" = "+t.lib[e].toString()+";"})).concat(["const __minion__ = ("+w.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(n.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})));return i.addEventListener("message",e),i}class P extends i.Z{constructor(t){let e;super(),this._imageOps=!!t.imageOps,e=0===t.threads?0:this._imageOps?1:t.threads||1;const n=new Array(e);if(e)for(let i=0;i<e;++i)n[i]=E(t,this._onWorkerMessage.bind(this,i));else n[0]=function(t,e){const n=w(t.operation);let i=!1;return{postMessage:function(t){setTimeout((function(){i||e({data:{buffer:n(t),meta:t.meta}})}),0)},terminate:function(){i=!0}}}(t,this._onWorkerMessage.bind(this,0));this._workers=n,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(t,e,n){this._enqueue({inputs:t,meta:e,callback:n}),this._dispatch()}_enqueue(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return;const t=this._queue.shift();this._job=t;const e=t.inputs[0].width,n=t.inputs[0].height,i=t.inputs.map((function(t){return t.data.buffer})),r=this._workers.length;if(this._running=r,1===r)return void this._workers[0].postMessage({buffers:i,meta:t.meta,imageOps:this._imageOps,width:e,height:n},i);const o=t.inputs[0].data.length,s=4*Math.ceil(o/4/r);for(let o=0;o<r;++o){const r=o*s,a=[];for(let t=0,e=i.length;t<e;++t)a.push(i[t].slice(r,r+s));this._workers[o].postMessage({buffers:a,meta:t.meta,imageOps:this._imageOps,width:e,height:n},a)}}_onWorkerMessage(t,e){this.disposed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const t=this._job,e=this._workers.length;let n,i;if(1===e)n=new Uint8ClampedArray(this._dataLookup[0].buffer),i=this._dataLookup[0].meta;else{const r=t.inputs[0].data.length;n=new Uint8ClampedArray(r),i=new Array(e);const o=4*Math.ceil(r/4/e);for(let t=0;t<e;++t){const e=this._dataLookup[t].buffer,r=t*o;n.set(new Uint8ClampedArray(e),r),i[t]=this._dataLookup[t].meta}}this._job=null,this._dataLookup={},t.callback(null,function(t,e,n){if(x)return new ImageData(t,e,n);b||(b=document.createElement("canvas").getContext("2d"));const i=b.createImageData(e,n);return i.data.set(t),i}(n,t.inputs[0].width,t.inputs[0].height),i),this._dispatch()}disposeInternal(){for(let t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0}}class C extends r.ZP{constructor(t,e,n){super(t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=n}}class O extends h.ZP{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=void 0!==t.operationType?t.operationType:"pixel",this.threads_=void 0!==t.threads?t.threads:1,this.layers_=function(t){const e=t.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=L(t[i]);return n}(t.sources);const e=this.changed.bind(this);for(let t=0,n=this.layers_.length;t<n;++t)this.layers_[t].addEventListener(o.Z.CHANGE,e);var n;this.tileQueue_=new f.Z((function(){return 1}),this.changed.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:(0,_.Ue)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(n=this.layers_,n.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:(0,_.Ue)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,v.sq)(this),renderTargets:{}},this.setAttributions((function(e){const n=[];for(let i=0,r=t.sources.length;i<r;++i){const r=t.sources[i],o=(r instanceof p.Z?r:r.getSource()).getAttributions();if("function"==typeof o){const t=o(e);n.push.apply(n,t)}}return 0!==n.length?n:null})),void 0!==t.operation&&this.setOperation(t.operation,t.lib)}setOperation(t,e){this.processor_&&this.processor_.dispose(),this.processor_=new P({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()}updateFrameState_(t,e,n){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const r=(0,m.getCenter)(t);i.extent=t.slice(),i.size[0]=Math.round((0,m.getWidth)(t)/e),i.size[1]=Math.round((0,m.getHeight)(t)/e),i.time=Date.now();const o=i.viewState;return o.center=r,o.projection=n,o.resolution=e,i}allSourcesReady_(){let t,e=!0;for(let n=0,i=this.layers_.length;n<i;++n)if(t=this.layers_[n].getSource(),"ready"!==t.getState()){e=!1;break}return e}getImage(t,e,n,i){if(!this.allSourcesReady_())return null;const r=this.updateFrameState_(t,e,i);if(this.requestedFrameState_=r,this.renderedImageCanvas_){const n=this.renderedImageCanvas_.getResolution(),i=this.renderedImageCanvas_.getExtent();e===n&&(0,m.equals)(t,i)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),r.tileQueue.loadMoreTiles(16,16),r.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,e=this.layers_.length,n=new Array(e);for(let i=0;i<e;++i){t.layerIndex=i;const e=I(this.layers_[i],t);if(!e)return;n[i]=e}const i={};this.dispatchEvent(new C("beforeoperations",t,i)),this.processor_.process(n,i,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,e,n,i){if(e||!n)return;const r=t.extent,o=t.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!(0,m.equals)(r,this.requestedFrameState_.extent))return;let s;if(this.renderedImageCanvas_)s=this.renderedImageCanvas_.getImage().getContext("2d");else{const t=Math.round((0,m.getWidth)(r)/o),e=Math.round((0,m.getHeight)(r)/o);s=(0,y.E4)(t,e),this.renderedImageCanvas_=new u(r,o,1,s.canvas)}s.putImageData(n,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new C("afteroperations",t,i)),t.animate&&requestAnimationFrame(this.changed.bind(this))}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}O.prototype.dispose;let S=null;function I(t,e){const n=t.getRenderer();if(!n)throw new Error("Unsupported layer type: "+t);if(!n.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(0===i||0===r)return null;const o=n.renderFrame(e,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===i&&s.height===r)return s.getContext("2d").getImageData(0,0,i,r)}if(S){const t=S.canvas;t.width!==i||t.height!==r?S=(0,y.E4)(i,r):S.clearRect(0,0,i,r)}else S=(0,y.E4)(i,r);return S.drawImage(s,0,0,i,r),S.getImageData(0,0,i,r)}function L(t){let e;return t instanceof p.Z?t instanceof g.Z?e=new d.default({source:t}):t instanceof h.ZP&&(e=new c.default({source:t})):e=t,e}const M=O;function T(t,e){const n=new M({sources:t,operation:Function('"use strict"; return (function (pixels, data) {\n    let rgb = pixels[0];\n\n    {\n        //PS \n        const colorsTable = data.colorsTable\n        rgb[0] = colorsTable[0][rgb[0]]\n        rgb[1] = colorsTable[1][rgb[1]]\n        rgb[2] = colorsTable[2][rgb[2]]\n\n    }\n\n    {\n        //\n        const { redColor, greenColor, blueColor, rgbColor } = data.curveChannels\n        const rColor = getSlope(rgb[0], redColor)\n        const gColor = getSlope(rgb[1], greenColor)\n        const bColor = getSlope(rgb[2], blueColor)\n        rgb[0] = getSlope(rColor, rgbColor)\n        rgb[1] = getSlope(gColor, rgbColor)\n        rgb[2] = getSlope(bColor, rgbColor)\n    }\n\n    {\n        //HSL\n        const hslChannels = data.hslChannels\n        let hsb = []\n        let deltaHsb = [0, 0, 0]\n\n        const colorA = rgb[3]\n        const color = [rgb[0], rgb[1], rgb[2]]\n\n        const hsv = RGB2HSV(color)\n        const hsbH = hsv[0] * 2;\n        const hsbS = hsv[1] / 255;\n        const hsbB = hsv[2] / 255;\n        hsb = [hsbH, hsbS, hsbB]\n\n        for (let i = 0; i < 7; i++) {\n            if (hslChannels[i].defined) {\n                deltaHsb = adjustHSL(hsb[0], deltaHsb, hslChannels[i])\n            }\n        }\n        const hsl = getHsv(hsb, deltaHsb)\n        const rgbColor = HSV2RGB(hsl)\n        rgbColor.push(colorA)\n        rgb = [...rgbColor]\n    }\n    return rgb;\n})')(),lib:{getSlope:Function('"use strict"; return (function getSlope(color, curve) {\n    let outPut = color\n    curve.forEach((el, index) => {\n        if ((curve[index + 1]) && (color >= el[0] && color <= curve[index + 1][0])) {\n            const point2 = curve[index + 1]\n            const k = (point2[1] - el[1]) / (point2[0] - el[0])\n            outPut = point2[1] - ((point2[0] - color) * k)\n            return\n        }\n    })\n    const outPutColor = clipRange(outPut, 0, 255)\n    return outPutColor\n})')(),clipRange:Function('"use strict"; return (function clipRange (value, min, max) {\n    if (value > max)\n        return max\n    else if (value < min)\n        return min\n    else\n        return value\n})')(),RGB2HSV:Function('"use strict"; return (function RGB2HSV([r, g, b]) {\n    r = r / 255\n    g = g / 255\n    b = b / 255\n    const max = Math.max(r, g, b)\n    const min = Math.min(r, g, b)\n    const d = max - min\n    const v = max\n    const s = max === 0 ? 0 : d / max\n    let h = 0\n    if (d !== 0) {\n        switch (max) {\n            case r:\n                h = (g - b) / d + (g < b ? 6 : 0)\n                break\n            case g:\n                h = (b - r) / d + 2\n                break\n            case b:\n                h = (r - g) / d + 4\n                break\n            default:\n                break\n        }\n        h = h / 6\n    }\n    return [parseInt(h * 360 / 2), parseInt(s * 255), parseInt(v * 255)]\n})')(),HSV2RGB:Function('"use strict"; return (function HSV2RGB([h, s, v]) {\n    let i, f, p1, p2, p3;\n    let r = 0, g = 0, b = 0;\n    if (s < 0) s = 0;\n    if (s > 1) s = 1;\n    if (v < 0) v = 0;\n    if (v > 1) v = 1;\n    h %= 360;\n    if (h < 0) h += 360;\n    h /= 60;\n    i = Math.floor(h);\n    f = h - i;\n    p1 = v * (1 - s);\n    p2 = v * (1 - s * f);\n    p3 = v * (1 - s * (1 - f));\n    switch (i) {\n        case 0: r = v; g = p3; b = p1; break;\n        case 1: r = p2; g = v; b = p1; break;\n        case 2: r = p1; g = v; b = p3; break;\n        case 3: r = p1; g = p2; b = v; break;\n        case 4: r = p3; g = p1; b = v; break;\n        case 5: r = v; g = p1; b = p2; break;\n    }\n    return [parseInt(r*255), parseInt(g * 255), parseInt(b * 255)];\n})')(),getHsv:Function('"use strict"; return (function getHsv(hsv, delta) {\n    let hsb = [...hsv]\n    let deltaHsb = [...delta]\n\n    hsb[0] = (hsb[0] + deltaHsb[0]) % 360\n    if (hsb[0] < 0) hsb[0] += 360\n\n    deltaHsb[1] = clipRange(deltaHsb[1], -100, 100)\n    if (deltaHsb[1] < 0) {\n        hsb[1] = hsb[1] * (1 + deltaHsb[1] / 100.0)\n    } else {\n        hsb[1] = hsb[1] + (1 - hsb[1]) * deltaHsb[1] / 100.0\n        hsb[2] = hsb[2] + (1 - hsb[2]) * deltaHsb[1] / 100.0\n    }\n\n    deltaHsb[2] = clipRange(deltaHsb[2], -100, 100)\n    if (deltaHsb[2] < 0) {\n        hsb[2] = hsb[2] * (1 + deltaHsb[2] / 100.0)\n    } else {\n        hsb[2] = hsb[2] + (1 - hsb[2]) * deltaHsb[2] / 100.0\n        hsb[1] = hsb[1] - hsb[1] * deltaHsb[2] / 100.0\n    }\n    return hsb\n})')(),adjustHSL:Function('"use strict"; return (function adjustHSL(pixelHue, delta, channel) {\n    const { colorIndex, hue, saturation, lightness, _left, left, right, _right } = channel\n    let deltaHsb = [...delta]\n    if (colorIndex === 0) {\n        deltaHsb[0] += hue\n        deltaHsb[1] += saturation\n        deltaHsb[2] += lightness\n        return deltaHsb\n    }\n    if (left < right) {\n        if (pixelHue >= _left && pixelHue <= _right) {\n            if (pixelHue >= left && pixelHue <= right) {\n                deltaHsb[0] += hue\n                deltaHsb[1] += saturation\n                deltaHsb[2] += lightness\n                return deltaHsb\n            } else if (pixelHue >= _left && pixelHue <= left && left > _left) {\n                deltaHsb[0] += hue * (pixelHue - _left) / (left - _left)\n                deltaHsb[1] += saturation * (pixelHue - _left) / (left - _left)\n                deltaHsb[2] += lightness * (pixelHue - _left) / (left - _left)\n                return deltaHsb\n            } else if (pixelHue >= right && pixelHue <= _right && _right > right) {\n                deltaHsb[0] += hue * (_right - pixelHue) / (_right - right)\n                deltaHsb[1] += saturation * (_right - pixelHue) / (_right - right)\n                deltaHsb[2] += lightness * (_right - pixelHue) / (_right - right)\n                return deltaHsb\n            } else {\n                return deltaHsb\n            }\n        } else {\n            return deltaHsb\n        }\n    } else {\n        if (pixelHue >= left && pixelHue <= 360) {\n            deltaHsb[0] += hue\n            deltaHsb[1] += saturation\n            deltaHsb[2] += lightness\n            return deltaHsb\n        } else if (pixelHue >= 0 && pixelHue <= right) {\n            deltaHsb[0] += hue\n            deltaHsb[1] += saturation\n            deltaHsb[2] += lightness\n            return deltaHsb\n        } else if (pixelHue >= _left && pixelHue <= left && left > _left) {\n            deltaHsb[0] += hue * (pixelHue - _left) / (left - _left)\n            deltaHsb[1] += saturation * (pixelHue - _left) / (left - _left)\n            deltaHsb[2] += lightness * (pixelHue - _left) / (left - _left)\n            return deltaHsb\n        } else if (pixelHue >= right && pixelHue <= _right && _right > right) {\n            deltaHsb[0] += hue * (_right - pixelHue) / (_right - right)\n            deltaHsb[1] += saturation * (_right - pixelHue) / (_right - right)\n            deltaHsb[2] += lightness * (_right - pixelHue) / (_right - right)\n            return deltaHsb\n        } else {\n            return deltaHsb\n        }\n    }\n})')()}});return n.on("beforeoperations",(function(t){const n=t.data;n.colorsTable=e.channels.value.colorsTable,n.hslChannels=e.channels.value.hslChannels,n.curveChannels=e.channels.value.curveChannels})),n}},43938:t=>{"use strict";t.exports=require("../xe2-base-objects")},19239:t=>{"use strict";t.exports=require("../xe2-base-utils")},8068:t=>{"use strict";t.exports=require("../xe2-objects")},10070:t=>{"use strict";t.exports=require("../xe2-utils")},6813:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const i={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class r extends Error{constructor(t){const e=i[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const o=r},78714:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var i=n(6813),r=n(72971),o=n(42071),s=n(291);const a="length";class l extends s.ZP{constructor(t,e,n){super(t),this.element=e,this.index=n}}class u extends r.Z{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(a)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new l(o.Z.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new l(o.Z.REMOVE,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new l(o.Z.REMOVE,n,t)),this.dispatchEvent(new l(o.Z.ADD,e,t))}updateLength_(){this.set(a,this.array_.length)}assertUnique_(t,e){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new i.Z(58)}}const c=u},42071:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={ADD:"add",REMOVE:"remove"}},55431:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},81090:(t,e,n)=>{"use strict";n.r(e),n.d(e,{createStyleFunction:()=>l,default:()=>u});var i=n(72971),r=n(85487),o=n(99515),s=n(65818);class a extends i.Z{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new a(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,s.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=(0,s.listen)(t,r.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?l(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function l(t){if("function"==typeof t)return t;{let e;return Array.isArray(t)?e=t:((0,o.h)("function"==typeof t.getZIndex,41),e=[t]),function(){return e}}}const u=a},18096:(t,e,n)=>{"use strict";n.d(e,{K:()=>c,Z:()=>h});var i=n(85487),r=n(31798),o=n(70553),s=n(40177),a=n(28641),l=n(65818);class u extends r.Z{constructor(t,e,n,i,r,s){super(t,e,n,o.Z.IDLE),this.src_=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.unlisten_=null,this.state=o.Z.IDLE,this.imageLoadFunction_=s}getImage(){return this.image_}handleImageError_(){this.state=o.Z.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=(0,a.getHeight)(this.extent)/this.image_.height),this.state=o.Z.LOADED,this.unlistenImage_(),this.changed()}load(){this.state!=o.Z.IDLE&&this.state!=o.Z.ERROR||(this.state=o.Z.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=c(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(t){this.image_=t,this.resolution=(0,a.getHeight)(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function c(t,e,n){const r=t;let o=!0,a=!1,u=!1;const c=[(0,l.listenOnce)(r,i.Z.LOAD,(function(){u=!0,a||e()}))];return r.src&&s.Tp?(a=!0,r.decode().then((function(){o&&e()})).catch((function(t){o&&(u?e():n())}))):c.push((0,l.listenOnce)(r,i.Z.ERROR,n)),function(){o=!1,c.forEach(l.unlistenByKey)}}const h=u},31798:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(208),r=n(85487),o=n(74187);class s extends i.Z{constructor(t,e,n,i){super(),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state=i}changed(){this.dispatchEvent(r.Z.CHANGE)}getExtent(){return this.extent}getImage(){return(0,o.O3)()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){(0,o.O3)()}}const a=s},70553:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},20825:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(94806),r=n(37195),o=n(68326),s=n(18096);class a extends i.Z{constructor(t,e,n,i,r,o){super(t,e,o),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=r.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=r.Z.ERROR,this.unlistenImage_(),this.image_=function(){const t=(0,o.E4)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=r.Z.LOADED:this.state=r.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==r.Z.ERROR&&(this.state=r.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==r.Z.IDLE&&(this.state=r.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,s.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}const l=a},20537:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>tt});var i=n(72971),r=n(78714),o=n(42071),s=n(55431),a=n(36885),l=n(74187),u=n(6101),c=n(28641),h=n(92710),p=n(1295),d=n(76171);class f extends s.Z{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){(0,l.O3)()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;(0,u.qC)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,u.nb)(i,n)}forEachFeatureAtCoordinate(t,e,n,i,r,o,s,a){let l;const u=e.viewState;function h(t,e,n,i){return r.call(o,e,t?n:null,i)}const f=u.projection,g=(0,d.Cf)(t.slice(),f),y=[[0,0]];if(f.canWrapX()&&i){const t=f.getExtent(),e=(0,c.getWidth)(t);y.push([-e,0],[e,0])}const _=e.layerStatesArray,m=_.length,v=[],b=[];for(let i=0;i<y.length;i++)for(let r=m-1;r>=0;--r){const o=_[r],c=o.layer;if(c.hasRenderer()&&(0,p.j)(o,u)&&s.call(a,c)){const r=c.getRenderer(),s=c.getSource();if(r&&s){const a=s.getWrapX()?g:t,u=h.bind(null,o.managed);b[0]=a[0]+y[i][0],b[1]=a[1]+y[i][1],l=r.forEachFeatureAtCoordinate(b,e,n,u,v)}if(l)return l}}if(0===v.length)return;const x=1/v.length;return v.forEach(((t,e)=>t.distanceSq+=e*x)),v.sort(((t,e)=>t.distanceSq-e.distanceSq)),v.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,n,i,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,a.uX,this,r,o)}getMap(){return this.map_}renderFrame(t){(0,l.O3)()}scheduleExpireIconCache(t){h.c.canExpireCache()&&t.postRenderFunctions.push(g)}}function g(t,e){h.c.expire()}const y=f;var _=n(35990),m=n(57380),v=n(98771),b=n(10245),x=n(50147),w=n(65818),E=n(68326);const P=class extends y{constructor(t){super(t),this.fontChangeListenerKey_=(0,w.listen)(x.sG,_.Z.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=b.XV+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new m.Z(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){(0,w.unlistenByKey)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(v.Z.PRECOMPOSE,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;const i=[];let r=null;for(let o=0,s=e.length;o<s;++o){const s=e[o];t.layerIndex=o;const a=s.layer,l=a.getSourceState();if(!(0,p.j)(s,n)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const u=a.render(t,r);u&&(u!==r&&(this.children_.push(u),r=u),"getDeclutter"in a&&i.push(a))}for(let e=i.length-1;e>=0;--e)i[e].renderDeclutter(t);(0,E.hF)(this.element_,this.children_),this.dispatchRenderEvent(v.Z.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}};var C=n(85487),O=n(947),S=n(291),I=n(99515),L=n(69374);class M extends S.ZP{constructor(t,e){super(t),this.layer=e}}const T="layers";class R extends O.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(T,this.handleLayersChanged_),n?Array.isArray(n)?n=new r.Z(n.slice(),{unique:!0}):(0,I.h)("function"==typeof n.getArray,43):n=new r.Z(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(w.unlistenByKey),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push((0,w.listen)(t,o.Z.ADD,this.handleLayersAdd_,this),(0,w.listen)(t,o.Z.REMOVE,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(w.unlistenByKey);(0,L.Z)(this.listenerKeys_);const e=t.getArray();for(let t=0,n=e.length;t<n;t++){const n=e[t];this.registerLayerListeners_(n),this.dispatchEvent(new M("addlayer",n))}this.changed()}registerLayerListeners_(t){const e=[(0,w.listen)(t,_.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,w.listen)(t,C.Z.CHANGE,this.handleLayerChange_,this)];t instanceof R&&e.push((0,w.listen)(t,"addlayer",this.handleLayerGroupAdd_,this),(0,w.listen)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,l.sq)(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new M("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new M("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new M("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=(0,l.sq)(e);this.listenerKeys_[n].forEach(w.unlistenByKey),delete this.listenerKeys_[n],this.dispatchEvent(new M("removelayer",e)),this.changed()}getLayers(){return this.get(T)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new M("removelayer",t[e]))}this.set(T,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const i=this.getLayerState();let r=i.zIndex;t||void 0!==i.zIndex||(r=0);for(let t=n,o=e.length;t<o;t++){const n=e[t];n.opacity*=i.opacity,n.visible=n.visible&&i.visible,n.maxResolution=Math.min(n.maxResolution,i.maxResolution),n.minResolution=Math.max(n.minResolution,i.minResolution),n.minZoom=Math.max(n.minZoom,i.minZoom),n.maxZoom=Math.min(n.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==n.extent?n.extent=(0,c.getIntersection)(n.extent,i.extent):n.extent=i.extent),void 0===n.zIndex&&(n.zIndex=r)}return e}getSourceState(){return"ready"}}const N=R;var A=n(48630),D=n(92217),j=n(44238),F=n(208),k=n(40177);class G extends F.Z{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=(0,w.listen)(n,j.Z.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=(0,w.listen)(n,j.Z.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(C.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!k.bM&&{passive:!1})}emulateClick_(t){let e=new A.Z(D.Z.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new A.Z(D.Z.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const e=new A.Z(D.Z.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==D.Z.POINTERUP||e.type==D.Z.POINTERCANCEL){delete this.trackedTouches_[n];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=D.Z.POINTERDOWN&&e.type!=D.Z.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new A.Z(D.Z.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(w.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new A.Z(D.Z.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(const e in t){const n=t[e];this.down_[e]="function"==typeof n?a.Zn:n}if(0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,w.listen)(t,D.Z.POINTERMOVE,this.handlePointerMove_,this),(0,w.listen)(t,D.Z.POINTERUP,this.handlePointerUp_,this),(0,w.listen)(this.element_,D.Z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push((0,w.listen)(this.element_.getRootNode(),D.Z.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new A.Z(D.Z.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new A.Z(D.Z.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,w.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(C.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,w.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(w.unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const V=G;var Z=n(43536),z=n(32126),B=n(63222),U=n(2918),W=n(59220),q=n(37755),X=n(28871),Y=n(19451),H=n(57646),J=n(4307);function K(t){t instanceof p.Z?t.setMapInternal(null):t instanceof N&&t.getLayers().forEach(K)}function $(t,e){if(t instanceof p.Z)t.setMapInternal(e);else if(t instanceof N){const n=t.getLayers().getArray();for(let t=0,i=n.length;t<i;++t)$(n[t],e)}}class Q extends i.Z{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new N({layers:t.layers});let o,s,a;return n[B.Z.LAYERGROUP]=i,n[B.Z.TARGET]=t.target,n[B.Z.VIEW]=t.view instanceof W.default?t.view:new W.default,void 0!==t.controls&&(Array.isArray(t.controls)?o=new r.Z(t.controls.slice()):((0,I.h)("function"==typeof t.controls.getArray,47),o=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?s=new r.Z(t.interactions.slice()):((0,I.h)("function"==typeof t.interactions.getArray,48),s=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?a=new r.Z(t.overlays.slice()):((0,I.h)("function"==typeof t.overlays.getArray,49),a=t.overlays):a=new r.Z,{controls:o,interactions:s,keyboardEventTarget:e,overlays:a,values:n}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:k.MP,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,u.Ue)(),this.pixelToCoordinateTransform_=(0,u.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||(0,X.c)(),this.interactions=e.interactions||(0,Y.defaults)({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new U.Z(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(B.Z.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(B.Z.VIEW,this.handleViewChanged_),this.addChangeListener(B.Z.SIZE,this.handleSizeChanged_),this.addChangeListener(B.Z.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const n=this;!t.view||t.view instanceof W.default||t.view.then((function(t){n.setView(new W.default(t))})),this.controls.addEventListener(o.Z.ADD,function(t){t.element.setMap(this)}.bind(this)),this.controls.addEventListener(o.Z.REMOVE,function(t){t.element.setMap(null)}.bind(this)),this.interactions.addEventListener(o.Z.ADD,function(t){t.element.setMap(this)}.bind(this)),this.interactions.addEventListener(o.Z.REMOVE,function(t){t.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(o.Z.ADD,function(t){this.addOverlayInternal_(t.element)}.bind(this)),this.overlays_.addEventListener(o.Z.REMOVE,function(t){const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(this)),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){$(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:a.uX,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,s,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}getAllLayers(){const t=[];return function e(n){n.forEach((function(n){n instanceof N?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:a.uX,r=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]}getTarget(){return this.get(B.Z.TARGET)}getTargetElement(){const t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null}getCoordinateFromPixel(t){return(0,H.toUserCoordinate)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?(0,u.nn)(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(B.Z.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof r.Z)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=(0,H.fromUserCoordinate)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?(0,u.nn)(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(B.Z.SIZE)}getView(){return this.get(B.Z.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return(0,U.R)(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new A.Z(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===j.Z.POINTERDOWN||n===C.Z.WHEEL||n===C.Z.KEYDOWN){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target;if(this.overlayContainerStopEvent_.contains(i)||!(n===t?t.documentElement:n).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getMap()===this&&i.getActive()&&this.getTargetElement()&&(!i.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;if(e[q.Z.ANIMATING]||e[q.Z.INTERACTING]){const e=Date.now()-t.time>8;n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(v.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(v.Z.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Z.Z(z.default.LOADEND,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Z.Z(z.default.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let e=0,i=n.length;e<i;++e)n[e](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)(0,w.unlistenByKey)(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(C.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(C.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,E.ZF)(this.viewport_)}const t=this.getTargetElement();if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new P(this)),this.mapBrowserEventHandler_=new V(this,this.moveTolerance_);for(const t in D.Z)this.mapBrowserEventHandler_.addEventListener(D.Z[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(C.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(C.Z.WHEEL,this.boundHandleBrowserEvent_,!!k.bM&&{passive:!1});const e=this.getOwnerDocument().defaultView,n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[(0,w.listen)(n,C.Z.KEYDOWN,this.handleBrowserEvent,this),(0,w.listen)(n,C.Z.KEYPRESS,this.handleBrowserEvent,this),(0,w.listen)(e,C.Z.RESIZE,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,w.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,w.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,w.listen)(t,_.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,w.listen)(t,C.Z.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(w.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new M("addlayer",t)),this.layerGroupPropertyListenerKeys_=[(0,w.listen)(t,_.Z.PROPERTYCHANGE,this.render,this),(0,w.listen)(t,C.Z.CHANGE,this.render,this),(0,w.listen)(t,"addlayer",this.handleLayerAdd_,this),(0,w.listen)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){K(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let r=null;if(void 0!==e&&(0,J.py)(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,c.getForViewAndSize)(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:i,wantedTiles:{},mapId:(0,l.sq)(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation;r.nextExtent=(0,c.getForViewAndSize)(o.nextCenter,o.nextResolution,t,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i&&(!this.previousExtent_||!(0,c.isEmpty)(this.previousExtent_)&&!(0,c.equals)(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Z.Z(z.default.MOVESTART,this,i)),this.previousExtent_=(0,c.createOrUpdateEmpty)(this.previousExtent_)),this.previousExtent_&&!r.viewHints[q.Z.ANIMATING]&&!r.viewHints[q.Z.INTERACTING]&&!(0,c.equals)(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Z.Z(z.default.MOVEEND,this,r)),(0,c.clone)(r.extent,this.previousExtent_))),this.dispatchEvent(new Z.Z(z.default.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(z.default.LOADSTART)||this.hasListener(z.default.LOADEND)||this.hasListener(v.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new M("removelayer",e)),this.set(B.Z.LAYERGROUP,t)}setSize(t){this.set(B.Z.SIZE,t)}setTarget(t){this.set(B.Z.TARGET,t)}setView(t){if(!t||t instanceof W.default)return void this.set(B.Z.VIEW,t);this.set(B.Z.VIEW,new W.default);const e=this;t.then((function(t){e.setView(new W.default(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(r)||(e=[i,r],!(0,J.py)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){const t=this.getView();if(t){let e;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}}const tt=Q},48630:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(43536);class r extends i.Z{constructor(t,e,n,i,r,o){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const o=r},92217:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(85487);const r={SINGLECLICK:"singleclick",CLICK:i.Z.CLICK,DBLCLICK:i.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},43536:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(291);class r extends i.ZP{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}}const o=r},32126:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});const i={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},63222:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},72971:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var i=n(291),r=n(35990),o=n(62706),s=n(74187),a=n(69374);class l extends i.ZP{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class u extends o.Z{constructor(t){super(),this.on,this.once,this.un,(0,s.sq)(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new l(n,t,e)),n=r.Z.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new l(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],(0,a.x)(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}const c=u},35990:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={PROPERTYCHANGE:"propertychange"}},62706:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(208),r=n(85487),o=n(65818);class s extends i.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(r.Z.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=(0,o.listen)(this,t[r],e);return i}return(0,o.listen)(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let r=0;r<i;++r)n[r]=(0,o.listenOnce)(this,t[r],e)}else n=(0,o.listenOnce)(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)(0,o.unlistenByKey)(t[e]);else(0,o.unlistenByKey)(t)}(n);else if(Array.isArray(t))for(let n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}s.prototype.on,s.prototype.once,s.prototype.un;const a=s},94806:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(208),r=n(85487),o=n(37195),s=n(74187),a=n(31015);class l extends i.Z{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(r.Z.CHANGE)}release(){this.state===o.Z.ERROR&&this.setState(o.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==o.Z.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==o.Z.LOADED){t.interimTile=null;break}t.getState()==o.Z.LOADING?e=t:t.getState()==o.Z.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==o.Z.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){(0,s.O3)()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;const i=e-n+1e3/60;return i>=this.transition_?1:(0,a.YQ)(i/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const u=l},95532:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(99515);var r=n(98634);const o=class extends class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return(0,i.h)(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return(0,i.h)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,i.h)(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const t=this.peekFirstKey(),e=(0,r.Ul)(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove((0,r.km)(t.tileCoord)),t.release())}.bind(this))}}},2918:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l,R:()=>u});var i=n(85487),r=n(99515),o=n(69374);const s=1/0;var a=n(37195);const l=class extends class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,o.Z)(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){(0,r.h)(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=s&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,r=e[t],o=n[t],s=t;for(;t<i>>1;){const r=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),s=o<i&&n[o]<n[r]?o:r;e[t]=e[s],n[t]=n[s],t=s}e[t]=r,n[t]=o,this.siftDown_(s,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,r=n[e],o=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>o))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=r,i[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const r=e.length;let o,a,l;for(a=0;a<r;++a)o=e[a],l=t(o),l==s?delete this.queuedElements_[this.keyFunction_(o)]:(n[i]=l,e[i++]=o);e.length=i,n.length=i,this.heapify_()}}{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(i.Z.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===a.Z.LOADED||n===a.Z.ERROR||n===a.Z.EMPTY){n!==a.Z.ERROR&&e.removeEventListener(i.Z.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n,i,r,o=0;for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)i=this.dequeue()[0],r=i.getKey(),n=i.getState(),n!==a.Z.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,i.load())}};function u(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return s;if(!t.wantedTiles[n][e.getKey()])return s;const o=t.viewState.center,a=i[0]-o[0],l=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(a*a+l*l)/r}},2519:(t,e,n)=>{"use strict";n.d(e,{T:()=>r,Z:()=>o});class i{constructor(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function r(t,e,n,r,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=n,o.maxY=r,o):new i(t,e,n,r)}const o=i},37195:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},59220:(t,e,n)=>{"use strict";n.r(e),n.d(e,{createCenterConstraint:()=>P,createResolutionConstraint:()=>C,createRotationConstraint:()=>O,default:()=>L,isNoopAnimation:()=>S});var i=n(72971),r=n(37755),o=n(97240),s=n(94768),a=n(57646),l=n(36885),u=n(76171),c=n(99515),h=n(33983);function p(t,e,n){return function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const l=e?0:o[0]*r,u=e?0:o[1]*r,c=a?a[0]:0,p=a?a[1]:0;let d=t[0]+l/2+c,f=t[2]-l/2+c,g=t[1]+u/2+p,y=t[3]-u/2+p;d>f&&(d=(f+d)/2,f=d),g>y&&(g=(y+g)/2,y=g);let _=(0,h.uZ)(i[0],d,f),m=(0,h.uZ)(i[1],g,y);if(s&&n&&r){const t=30*r;_+=-t*Math.log(1+Math.max(0,d-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-f)/t),m+=-t*Math.log(1+Math.max(0,g-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-y)/t)}return[_,m]}}function d(t){return t}var f=n(28641),g=n(65537);function y(t,e,n,i){const r=(0,f.getWidth)(e)/n[0],o=(0,f.getHeight)(e)/n[1];return i?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function _(t,e,n){let i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),(0,h.uZ)(i,n/2,2*e)}function m(t,e,n,i,r){return n=void 0===n||n,function(o,s,a,l){if(void 0!==o){const s=i?y(t,i,a,r):t;return n&&l?_(o,s,e):(0,h.uZ)(o,e,s)}}}var v=n(60828),b=n(31015),x=n(2033);class w extends i.Z{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,a.createProjection)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(0,a.disableCoordinateWarning)(),t.center&&(t.center=(0,a.fromUserCoordinate)(t.center,this.projection_)),t.extent&&(t.extent=(0,a.fromUserExtent)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in o.Z)delete e[t];this.setProperties(e,!0);const n=C(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=P(t),r=n.constraint,s=O(t);this.constraints_={center:i,resolution:r,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenter();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),o=r/2*(i[3]-e[3]+e[1]-i[1]),s=r/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+o,n[1]-s])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let n=arguments[t];n.center&&(n=Object.assign({},n),n.center=(0,a.fromUserCoordinate)(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=(0,a.fromUserCoordinate)(n.anchor,this.getProjection())),e[t]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&E(e,!0));let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<n;++i){const t=arguments[i],n={start:o,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||b.rd,callback:e};if(t.center&&(n.sourceCenter=s,n.targetCenter=t.center.slice(),s=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=a,n.targetResolution=this.getResolutionForZoom(t.zoom),a=n.targetResolution):t.resolution&&(n.sourceResolution=a,n.targetResolution=t.resolution,a=n.targetResolution),void 0!==t.rotation){n.sourceRotation=l;const e=(0,h.$W)(t.rotation-l+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=l+e,l=n.targetRotation}S(n)?n.complete=!0:o+=n.duration,u.push(n)}this.animations_.push(u),this.setHint(r.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[r.Z.ANIMATING]>0}getInteracting(){return this.hints_[r.Z.INTERACTING]>0}cancelAnimations(){let t;this.setHint(r.Z.ANIMATING,-this.hints_[r.Z.ANIMATING]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&E(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let o=!0;for(let n=0,r=i.length;n<r;++n){const r=i[n];if(r.complete)continue;const s=t-r.start;let a=r.duration>0?s/r.duration:1;a>=1?(r.complete=!0,a=1):o=!1;const l=r.easing(a);if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1],n=r.targetCenter[0],i=r.targetCenter[1];this.nextCenter_=r.targetCenter;const o=t+l*(n-t),s=e+l*(i-e);this.targetCenter_=[o,s]}if(r.sourceResolution&&r.targetResolution){const t=1===l?r.targetResolution:r.sourceResolution+l*(r.targetResolution-r.sourceResolution);if(r.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,r.anchor)}this.nextResolution_=r.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const t=1===l?(0,h.$W)(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+l*(r.targetRotation-r.sourceRotation);if(r.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,r.anchor)}this.nextRotation_=r.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!r.complete)break}if(o){this.animations_[n]=null,this.setHint(r.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&E(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],(0,u.U1)(n,t-this.getRotation()),(0,u.IH)(n,e)),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),r=this.getResolution();return void 0!==i&&void 0!==r&&(n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]),n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?(0,a.toUserCoordinate)(t,this.getProjection()):t}getCenterInternal(){return this.get(o.Z.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return(0,a.toUserExtent)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();(0,c.h)(e,1);const n=this.getResolution();(0,c.h)(void 0!==n,2);const i=this.getRotation();return(0,c.h)(void 0!==i,3),(0,f.getForViewAndSize)(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(o.Z.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,a.fromUserExtent)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=(0,f.getWidth)(t)/e[0],i=(0,f.getHeight)(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(o.Z.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const r=this.padding_;if(r){const t=this.getViewportSizeMinusPadding_();i=I(i,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const r=(0,g.h7)(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=(0,h.uZ)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,(0,h.uZ)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if((0,c.h)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,c.h)(!(0,f.isEmpty)(t),25);const e=(0,a.fromUserExtent)(t,this.getProjection());n=(0,x.oJ)(e)}else if("Circle"===t.getType()){const e=(0,a.fromUserExtent)(t.getExtent(),this.getProjection());n=(0,x.oJ)(e),n.rotate(this.getRotation(),(0,f.getCenter)(e))}else{const e=(0,a.getUserProjection)();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let s=1/0,a=1/0,l=-1/0,u=-1/0;for(let t=0,e=r.length;t<e;t+=o){const e=r[t]*n-r[t+1]*i,o=r[t]*i+r[t+1]*n;s=Math.min(s,e),a=Math.min(a,o),l=Math.max(l,e),u=Math.max(u,o)}return[s,a,l,u]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const s=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,r?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),p=(0,f.getCenter)(s);p[0]+=(i[1]-i[3])/2*a,p[1]+=(i[0]-i[2])/2*a;const d=p[0]*h-p[1]*c,g=p[1]*h+p[0]*c,y=this.getConstrainedCenter([d,g],a),_=e.callback?e.callback:l.Zn;void 0!==e.duration?this.animateInternal({resolution:a,center:y,duration:e.duration,easing:e.easing},_):(this.targetResolution_=a,this.targetCenter_=y,this.applyTargetState_(!1,!0),E(_,!0))}centerOn(t,e,n){this.centerOnInternal((0,a.fromUserCoordinate)(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(I(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let r;const o=this.padding_;if(o&&t){const s=this.getViewportSizeMinusPadding_(-n),a=I(t,i,[s[0]/2+o[3],s[1]/2+o[0]],e,n);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,a.toUserCoordinate)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&(0,a.fromUserCoordinate)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,a.fromUserCoordinate)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?(0,a.fromUserCoordinate)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,s,r,n,this.calculateCenterShift(this.targetCenter_,s,i,r));this.get(o.Z.ROTATION)!==i&&this.set(o.Z.ROTATION,i),this.get(o.Z.RESOLUTION)!==s&&(this.set(o.Z.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),a&&this.get(o.Z.CENTER)&&(0,u.fS)(this.get(o.Z.CENTER),a)||this.set(o.Z.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,i,o),a=this.constraints_.center(this.targetCenter_,s,o,!1,this.calculateCenterShift(this.targetCenter_,s,r,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&(0,u.fS)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:s,duration:t,easing:b.Vv,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(r.Z.INTERACTING,1)}endInteraction(t,e,n){n=n&&(0,a.fromUserCoordinate)(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.setHint(r.Z.INTERACTING,-1),this.resolveConstraints(t,e,n)}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function E(t,e){setTimeout((function(){t(e)}),0)}function P(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return p(t.extent,t.constrainOnlyCenter,e)}const e=(0,a.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,p(t,!1,!1)}return d}function C(t){let e,n,i,r=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28;const l=void 0!==t.zoomFactor?t.zoomFactor:2,u=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,p=void 0!==t.showFullExtent&&t.showFullExtent,d=(0,a.createProjection)(t.projection,"EPSG:3857"),v=d.getExtent();let b=t.constrainOnlyCenter,x=t.extent;if(u||x||!d.isGlobal()||(b=!1,x=v),void 0!==t.resolutions){const s=t.resolutions;n=s[r],i=void 0!==s[o]?s[o]:s[s.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(r,o,s,a){if(void 0!==r){const l=t[0],u=t[t.length-1],c=n?y(l,n,s,i):l;if(a)return e?_(r,c,u):(0,h.uZ)(r,u,c);const p=Math.min(c,r),d=Math.floor((0,g.h7)(t,p,o));return t[d]>c&&d<t.length-1?t[d+1]:t[d]}}}(s,c,!b&&x,p):m(n,i,c,!b&&x,p)}else{const u=(v?Math.max((0,f.getWidth)(v),(0,f.getHeight)(v)):360*a.METERS_PER_UNIT.degrees/d.getMetersPerUnit())/s.S/Math.pow(2,0),g=u/Math.pow(2,28);n=t.maxResolution,void 0!==n?r=0:n=u/Math.pow(l,r),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(l,o):u/Math.pow(l,o):g),o=r+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,o-r),e=t.constrainResolution?function(t,e,n,i,r,o){return i=void 0===i||i,n=void 0!==n?n:0,function(s,a,l,u){if(void 0!==s){const c=r?y(e,r,l,o):e;if(u)return i?_(s,c,n):(0,h.uZ)(s,n,c);const p=1e-9,d=Math.ceil(Math.log(e/c)/Math.log(t)-p),f=-a*(.5-p)+.5,g=Math.min(c,s),m=Math.floor(Math.log(e/g)/Math.log(t)+f),v=Math.max(d,m),b=e/Math.pow(t,v);return(0,h.uZ)(b,n,c)}}}(l,n,i,c,!b&&x,p):m(n,i,c,!b&&x,p)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:r,zoomFactor:l}}function O(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?(0,v.Gw)():!1===e?v.YP:"number"==typeof e?(0,v.gE)(e):v.YP}return v.h$}function S(t){return!(t.sourceCenter&&t.targetCenter&&!(0,u.fS)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function I(t,e,n,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=t[0]*o-t[1]*s,l=t[1]*o+t[0]*s;return a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,s=-s,[a*o-l*s,l*o+a*s]}const L=w},37755:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={ANIMATING:0,INTERACTING:1}},97240:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},65537:(t,e,n)=>{"use strict";function i(t,e,n){let i,o;n=n||r;let s=0,a=t.length,l=!1;for(;s<a;)i=s+(a-s>>1),o=+n(t[i],e),o<0?s=i+1:(a=i,l=!o);return l?s:~s}function r(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){const i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;{let r;if(n>0){for(r=1;r<i;++r)if(t[r]<e)return r-1}else if(n<0){for(r=1;r<i;++r)if(t[r]<=e)return r}else for(r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return"function"==typeof n?n(e,t[r-1],t[r])>0?r-1:r:t[r-1]-e<e-t[r]?r-1:r}return i-1}}function s(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function a(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let e=0;e<i;e++)t[t.length]=n[e]}function l(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function u(t,e,n){const i=e||r;return t.every((function(e,r){if(0===r)return!0;const o=i(t[r-1],e);return!(o>0||n&&0===o)}))}n.d(e,{FZ:()=>s,fS:()=>l,h7:()=>o,kK:()=>r,l7:()=>a,pT:()=>u,ry:()=>i})},99515:(t,e,n)=>{"use strict";n.d(e,{h:()=>r});var i=n(6813);function r(t,e){if(!t)throw new i.Z(e)}},79706:(t,e,n)=>{"use strict";n.d(e,{BB:()=>h,XC:()=>a,_2:()=>u});var i=n(99515),r=n(33983);const o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,s=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(t){return"string"==typeof t?t:h(t)}const l=function(){const t={};let e=0;return function(n){let r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){let n=0;for(const i in t)0==(3&n++)&&(delete t[i],--e)}r=function(t){let e,n,r,a,l;if(s.exec(t)&&(t=function(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(t)),o.exec(t)){const i=t.length-1;let o;o=i<=4?1:2;const s=4===i||8===i;e=parseInt(t.substr(1+0*o,o),16),n=parseInt(t.substr(1+1*o,o),16),r=parseInt(t.substr(1+2*o,o),16),a=s?parseInt(t.substr(1+3*o,o),16):255,1==o&&(e=(e<<4)+e,n=(n<<4)+n,r=(r<<4)+r,s&&(a=(a<<4)+a)),l=[e,n,r,a/255]}else t.startsWith("rgba(")?(l=t.slice(5,-1).split(",").map(Number),c(l)):t.startsWith("rgb(")?(l=t.slice(4,-1).split(",").map(Number),l.push(1),c(l)):(0,i.h)(!1,14);return l}(n),t[n]=r,++e}return r}}();function u(t){return Array.isArray(t)?t:l(t)}function c(t){return t[0]=(0,r.uZ)(t[0]+.5|0,0,255),t[1]=(0,r.uZ)(t[1]+.5|0,0,255),t[2]=(0,r.uZ)(t[2]+.5|0,0,255),t[3]=(0,r.uZ)(t[3],0,1),t}function h(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}},96620:(t,e,n)=>{"use strict";n.d(e,{y:()=>r});var i=n(79706);function r(t){return Array.isArray(t)?(0,i.BB)(t):t}},75265:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Attribution:()=>i.Z,Control:()=>r.Z,FullScreen:()=>g,MousePosition:()=>x,OverviewMap:()=>G,Rotate:()=>V.Z,ScaleLine:()=>q,Zoom:()=>X.default,ZoomSlider:()=>$,ZoomToExtent:()=>tt,defaults:()=>et.c});var i=n(42657),r=n(88775),o=n(85487),s=n(63222),a=n(10245),l=n(65818),u=n(68326);const c=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];class h extends r.Z{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=void 0!==t.keys&&t.keys,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==t.className?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==t.activeClassName?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==t.inactiveClassName?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const e=void 0!==t.label?t.label:"";this.labelNode_="string"==typeof e?document.createTextNode(e):e;const n=void 0!==t.labelActive?t.labelActive:"";this.labelActiveNode_="string"==typeof n?document.createTextNode(n):n;const i=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=i,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(o.Z.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${a.XV} ${a.hg}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const e=t.getOwnerDocument();if(p(e))if(d(e))!function(t){t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}(e);else{let n;n=this.source_?"string"==typeof this.source_?e.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():f(t)}(n):f(n)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const e=this.isInFullscreen_;this.isInFullscreen_=d(t.getOwnerDocument()),e!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,u.$H)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):((0,u.$H)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),t.updateSize())}setClassName_(t,e){e?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const e=this.getMap();e&&e.removeChangeListener(s.Z.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener(s.Z.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let e=0,n=t.length;e<n;++e)(0,l.unlistenByKey)(t[e]);t.length=0;const e=this.getMap();if(e){const n=e.getOwnerDocument();p(n)?this.element.classList.remove(a.Qi):this.element.classList.add(a.Qi);for(let e=0,i=c.length;e<i;++e)t.push((0,l.listen)(n,c[e],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function p(t){const e=t.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&t.fullscreenEnabled)}function d(t){return!(!t.webkitIsFullScreen&&!t.fullscreenElement)}function f(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}const g=h;var y=n(44238),_=n(57646);const m="projection",v="coordinateFormat";class b extends r.Z{constructor(t){t=t||{};const e=document.createElement("div");e.className=void 0!==t.className?t.className:"ol-mouse-position",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un,this.addChangeListener(m,this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.renderOnMouseOut_=void 0!==t.placeholder,this.placeholder_=this.renderOnMouseOut_?t.placeholder:"&#160;",this.renderedHTML_=e.innerHTML,this.mapProjection_=null,this.transform_=null}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(v)}getProjection(){return this.get(m)}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const e=t.getViewport();this.listenerKeys.push((0,l.listen)(e,y.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,l.listen)(e,y.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(v,t)}setProjection(t){this.set(m,(0,_.get)(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){const t=this.getProjection();this.transform_=t?(0,_.getTransformFromProjections)(this.mapProjection_,t):_.identityTransform}const n=this.getMap().getCoordinateFromPixelInternal(t);if(n){const t=(0,_.getUserProjection)();t&&(this.transform_=(0,_.getTransformFromProjections)(this.mapProjection_,t)),this.transform_(n,n);const i=this.getCoordinateFormat();e=i?i(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}}const x=b;var w=n(78714),E=n(20537),P=n(32126),C=n(35990),O=n(72971),S=n(28641);const I="element",L="map",M="offset",T="position",R="positioning";class N extends O.Z{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+a.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(I,this.handleElementChanged),this.addChangeListener(L,this.handleMapChanged),this.addChangeListener(M,this.handleOffsetChanged),this.addChangeListener(T,this.handlePositionChanged),this.addChangeListener(R,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(I)}getId(){return this.id}getMap(){return this.get(L)||null}getOffset(){return this.get(M)}getPosition(){return this.get(T)}getPositioning(){return this.get(R)}handleElementChanged(){(0,u.ep)(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,u.ZF)(this.element),(0,l.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,l.listen)(t,P.default.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(I,t)}setMap(t){this.set(L,t)}setOffset(t){this.set(M,t)}setPosition(t){this.set(T,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(T))return;const n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),r=this.getRect(i,[(0,u.iO)(i),(0,u.Pb)(i)]),o=void 0===(t=t||{}).margin?20:t.margin;if(!(0,S.containsExtent)(n,r)){const i=r[0]-n[0],s=n[2]-r[2],a=r[1]-n[1],l=n[3]-r[3],u=[0,0];if(i<0?u[0]=i-o:s<0&&(u[0]=Math.abs(s)+o),a<0?u[1]=a-o:l<0&&(u[1]=Math.abs(l)+o),0!==u[0]||0!==u[1]){const n=e.getView().getCenterInternal(),i=e.getPixelFromCoordinateInternal(n);if(!i)return;const r=[i[0]+u[0],i[1]+u[1]],o=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(r),duration:o.duration,easing:o.easing})}}}getRect(t,e){const n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[i,r,i+e[0],r+e[1]]}setPositioning(t){this.set(R,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(t,e){const n=this.element.style,i=this.getOffset(),r=this.getPositioning();this.setVisible(!0);let o="0%",s="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?o="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(o="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?s="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(s="-50%");const a=`translate(${o}, ${s}) translate(${Math.round(t[0]+i[0])+"px"}, ${Math.round(t[1]+i[1])+"px"})`;this.rendered.transform_!=a&&(this.rendered.transform_=a,n.transform=a)}getOptions(){return this.options}}const A=N;var D=n(59220),j=n(97240),F=n(2033);class k extends r.Z{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView,this.viewExtent_=void 0;const e=void 0!==t.className?t.className:"ol-overviewmap",n=void 0!==t.tipLabel?t.tipLabel:"Overview map",i=void 0!==t.collapseLabel?t.collapseLabel:"";"string"==typeof i?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=i):this.collapseLabel_=i;const r=void 0!==t.label?t.label:"";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r):this.label_=r;const s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=n,l.appendChild(s),l.addEventListener(o.Z.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view;const u=new E.default({view:t.view,controls:new w.Z,interactions:new w.Z});this.ovmap_=u,t.layers&&t.layers.forEach((function(t){u.addLayer(t)}));const c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",this.boxOverlay_=new A({position:[0,0],positioning:"center-center",element:c}),this.ovmap_.addOverlay(this.boxOverlay_);const h=e+" "+a.XV+" "+a.hg+(this.collapsed_&&this.collapsible_?" "+a.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=h,p.appendChild(this.ovmapDiv_),p.appendChild(l);const d=this,f=this.boxOverlay_,g=this.boxOverlay_.getElement(),y=function(t){const e={clientX:(n=t).clientX,clientY:n.clientY};var n;const i=u.getEventCoordinateInternal(e);f.setPosition(i)},_=function(t){const e=u.getEventCoordinateInternal(t);d.getMap().getView().setCenterInternal(e),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",_)};g.addEventListener("mousedown",(function(){window.addEventListener("mousemove",y),window.addEventListener("mouseup",_)}))}setMap(t){const e=this.getMap();if(t!==e){if(e){const t=e.getView();t&&this.unbindView_(t),this.ovmap_.setTarget(null)}if(super.setMap(t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,l.listen)(t,C.Z.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const e=t.getView();e&&(this.bindView_(e),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(t){if(t.key===s.Z.VIEW){const e=t.oldValue;e&&this.unbindView_(e);const n=this.getMap().getView();this.bindView_(n)}else this.ovmap_.isRendered()||t.key!==s.Z.TARGET&&t.key!==s.Z.SIZE||this.ovmap_.updateSize()}bindView_(t){if(!this.view_){const e=new D.default({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(j.Z.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(t){t.removeChangeListener(j.Z.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),i=t.getView().calculateExtentInternal(n);if(this.viewExtent_&&(0,S.equals)(i,this.viewExtent_))return;this.viewExtent_=i;const r=e.getSize(),o=e.getView().calculateExtentInternal(r),s=e.getPixelFromCoordinateInternal((0,S.getTopLeft)(i)),a=e.getPixelFromCoordinateInternal((0,S.getBottomRight)(i)),l=Math.abs(s[0]-a[0]),u=Math.abs(s[1]-a[1]),c=r[0],h=r[1];l<.1*c||u<.1*h||l>.75*c||u>.75*h?this.resetExtent_():(0,S.containsExtent)(o,i)||this.recenter_()}resetExtent_(){const t=this.getMap(),e=this.ovmap_,n=t.getSize(),i=t.getView().calculateExtentInternal(n),r=e.getView(),o=Math.log(7.5)/Math.LN2,s=1/(.1*Math.pow(2,o/2));(0,S.scaleFromCenter)(i,s),r.fitInternal((0,F.oJ)(i))}recenter_(){const t=this.getMap(),e=this.ovmap_,n=t.getView();e.getView().setCenterInternal(n.getCenterInternal())}updateBox_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),i=t.getView(),r=e.getView(),o=this.rotateWithView_?0:-i.getRotation(),s=this.boxOverlay_,a=this.boxOverlay_.getElement(),l=i.getCenterInternal(),u=i.getResolution(),c=r.getResolution(),h=n[0]*u/c,p=n[1]*u/c;if(s.setPosition(l),a){a.style.width=h+"px",a.style.height=p+"px";const t="rotate("+o+"rad)";a.style.transform=t}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,l.listenOnce)(this.ovmap_,P.default.POSTRENDER,(function(t){delete this.ovmapPostrenderKey_,this.updateBox_()}),this))}handleClick_(t){t.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(a.hN),this.collapsed_?(0,u.$H)(this.collapseLabel_,this.label_):(0,u.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}setCollapsed(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(t){this.validateExtent_(),this.updateBox_()}}const G=k;var V=n(89965),Z=n(99515);const z="units",B=[1,2,5],U=25.4/.28;class W extends r.Z{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const n=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+a.XV,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(z,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(z)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(z,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,n=t.projection,i=this.getUnits(),r="degrees"==i?"degrees":"m";let o=(0,_.getPointResolution)(n,t.resolution,e,r);const s=this.minWidth_*(this.dpi_||U)/U,a=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||U)/U:void 0;let l=s*o,u="";if("degrees"==i){const t=_.METERS_PER_UNIT.degrees;l*=t,l<t/60?(u="",o*=3600):l<t?(u="",o*=60):u=""}else"imperial"==i?l<.9144?(u="in",o/=.0254):l<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344):"nautical"==i?(o/=1852,u="NM"):"metric"==i?l<.001?(u="m",o*=1e6):l<1?(u="mm",o*=1e3):l<1e3?u="m":(u="km",o/=1e3):"us"==i?l<.9144?(u="in",o*=39.37):l<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472):(0,Z.h)(!1,33);let c,h,p,d,f,g,y=3*Math.floor(Math.log(s*o)/Math.log(10));for(;;){p=Math.floor(y/3);const t=Math.pow(10,p);if(c=B[(y%3+3)%3]*t,h=Math.round(c/o),isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==a&&h>=a){c=d,h=f,p=g;break}if(h>=s)break;d=c,f=h,g=p,++y}const m=this.scaleBar_?this.createScaleBar(h,c,u):c.toFixed(p<0?-p:0)+" "+u;this.renderedHTML_!=m&&(this.innerElement_.innerHTML=m,this.renderedHTML_=m),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,n){const i=this.getScaleForResolution(),r=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),o=this.scaleBarSteps_,s=t/o,a=[this.createMarker("absolute")];for(let i=0;i<o;++i){const r=i%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";a.push(`<div><div class="ol-scale-singlebar ${r}" style="width: ${s}px;"></div>`+this.createMarker("relative")+(i%2==0||2===o?this.createStepText(i,t,!1,e,n):"")+"</div>")}return a.push(this.createStepText(o,t,!0,e,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+r+"</div>":"")+a.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${"absolute"===t?3:-10}px;"></div>`}createStepText(t,e,n,i,r){const o=(0===t?0:Math.round(i/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+r);return`<div class="ol-scale-step-text" style="margin-left: ${0===t?-3:e/this.scaleBarSteps_*-1}px;text-align: ${0===t?"left":"center"};min-width: ${0===t?0:e/this.scaleBarSteps_*2}px;left: ${n?e+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){return(0,_.getPointResolution)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||U)}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}}const q=W;var X=n(23851),Y=n(33983),H=n(31015),J=n(291);class K extends r.Z{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=0,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==t.duration?t.duration:200;const e=void 0!==t.className?t.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=e+"-thumb "+a.XV;const i=this.element;i.className=e+" "+a.XV+" "+a.hg,i.appendChild(n),i.addEventListener(y.Z.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),i.addEventListener(y.Z.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),i.addEventListener(y.Z.POINTERUP,this.handleDraggerEnd_.bind(this),!1),i.addEventListener(o.Z.CLICK,this.handleContainerClick_.bind(this),!1),n.addEventListener(o.Z.CLICK,J.UW,!1)}setMap(t){super.setMap(t),t&&t.render()}initSlider_(){const t=this.element;let e=t.offsetWidth,n=t.offsetHeight;if(0===e&&0===n)return this.sliderInitialized_=!1;const i=getComputedStyle(t);e-=parseFloat(i.paddingRight)+parseFloat(i.paddingLeft),n-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom);const r=t.firstElementChild,o=getComputedStyle(r),s=r.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),a=r.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[s,a],e>n?(this.direction_=1,this.widthLimit_=e-s):(this.direction_=0,this.heightLimit_=n-a),this.sliderInitialized_=!0}handleContainerClick_(t){const e=this.getMap().getView(),n=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),i=this.getResolutionForPosition_(n),r=e.getConstrainedZoom(e.getZoomForResolution(i));e.animateInternal({zoom:r,duration:this.duration_,easing:H.Vv})}handleDraggerStart_(t){if(!this.dragging_&&t.target===this.element.firstElementChild){const e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){const t=this.handleDraggerDrag_,e=this.handleDraggerEnd_,n=this.getMap().getOwnerDocument();this.dragListenerKeys_.push((0,l.listen)(n,y.Z.POINTERMOVE,t,this),(0,l.listen)(n,y.Z.POINTERUP,e,this))}}}handleDraggerDrag_(t){if(this.dragging_){const e=t.clientX-this.startX_,n=t.clientY-this.startY_,i=this.getRelativePosition_(e,n);this.currentResolution_=this.getResolutionForPosition_(i),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(l.unlistenByKey),this.dragListenerKeys_.length=0)}setThumbPosition_(t){const e=this.getPositionForResolution_(t),n=this.element.firstElementChild;1==this.direction_?n.style.left=this.widthLimit_*e+"px":n.style.top=this.heightLimit_*e+"px"}getRelativePosition_(t,e){let n;return n=1===this.direction_?t/this.widthLimit_:e/this.heightLimit_,(0,Y.uZ)(n,0,1)}getResolutionForPosition_(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)}getPositionForResolution_(t){const e=this.getMap().getView().getValueForResolutionFunction();return(0,Y.uZ)(1-e(t),0,1)}render(t){if(!t.frameState)return;if(!this.sliderInitialized_&&!this.initSlider_())return;const e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}const $=K;class Q extends r.Z{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const e=void 0!==t.className?t.className:"ol-zoom-extent",n=void 0!==t.label?t.label:"E",i=void 0!==t.tipLabel?t.tipLabel:"Fit to extent",r=document.createElement("button");r.setAttribute("type","button"),r.title=i,r.appendChild("string"==typeof n?document.createTextNode(n):n),r.addEventListener(o.Z.CLICK,this.handleClick_.bind(this),!1);const s=e+" "+a.XV+" "+a.hg,l=this.element;l.className=s,l.appendChild(r)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal((0,F.oJ)(e))}}const tt=Q;var et=n(28871)},42657:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var i=n(88775),r=n(85487),o=n(10245),s=n(65537),a=n(1295),l=n(68326);class u extends i.Z{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",s=void 0!==t.collapseLabel?t.collapseLabel:"",a=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const l=void 0!==t.label?t.label:"i";"string"==typeof l?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=i):this.label_=l;const u=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(u),this.toggleButton_.addEventListener(r.Z.CLICK,this.handleClick_.bind(this),!1);const c=e+" "+o.XV+" "+o.hg+(this.collapsed_&&this.collapsible_?" "+o.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e={},n=[];let i=!0;const r=t.layerStatesArray;for(let o=0,s=r.length;o<s;++o){const s=r[o];if(!(0,a.j)(s,t.viewState))continue;const l=s.layer.getSource();if(!l)continue;const u=l.getAttributions();if(!u)continue;const c=u(t);if(c)if(i=i&&!1!==l.getAttributionsCollapsible(),Array.isArray(c))for(let t=0,i=c.length;t<i;++t)c[t]in e||(n.push(c[t]),e[c[t]]=!0);else c in e||(n.push(c),e[c]=!0)}return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!(0,s.fS)(e,this.renderedAttributions_)){(0,l.ep)(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(o.hN),this.collapsed_?(0,l.$H)(this.collapseLabel_,this.label_):(0,l.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const c=u},88775:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(72971),r=n(32126),o=n(36885),s=n(65818),a=n(68326);class l extends i.Z{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){(0,a.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&(0,a.ZF)(this.element);for(let t=0,e=this.listenerKeys.length;t<e;++t)(0,s.unlistenByKey)(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==o.Zn&&this.listenerKeys.push((0,s.listen)(t,r.default.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}}const u=l},89965:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(88775),r=n(85487),o=n(10245),s=n(31015);class a extends i.Z{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const s=t.tipLabel?t.tipLabel:"Reset rotation",a=document.createElement("button");a.className=e+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(r.Z.CLICK,this.handleClick_.bind(this),!1);const l=e+" "+o.XV+" "+o.hg,u=this.element;u.className=l,u.appendChild(a),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(o.oj)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:s.Vv}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains(o.oj);t||0!==n?t&&0!==n&&this.element.classList.remove(o.oj):this.element.classList.add(o.oj)}this.label_.style.transform=t}this.rotation_=n}}const l=a},23851:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var i=n(88775),r=n(85487),o=n(10245),s=n(31015);class a extends i.Z{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",s=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",a=void 0!==t.zoomInLabel?t.zoomInLabel:"+",l=void 0!==t.zoomOutLabel?t.zoomOutLabel:"",u=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",c=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=i,h.setAttribute("type","button"),h.title=u,h.appendChild("string"==typeof a?document.createTextNode(a):a),h.addEventListener(r.Z.CLICK,this.handleClick_.bind(this,n),!1);const p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=c,p.appendChild("string"==typeof l?document.createTextNode(l):l),p.addEventListener(r.Z.CLICK,this.handleClick_.bind(this,-n),!1);const d=e+" "+o.XV+" "+o.hg,f=this.element;f.className=d,f.appendChild(h),f.appendChild(p),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const n=e.getZoom();if(void 0!==n){const i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:s.Vv})):e.setZoom(i)}}}const l=a},28871:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var i=n(42657),r=n(78714),o=n(89965),s=n(23851);function a(t){t=t||{};const e=new r.Z;return(void 0===t.zoom||t.zoom)&&e.push(new s.default(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new o.Z(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new i.Z(t.attributionOptions)),e}},76171:(t,e,n)=>{"use strict";n.d(e,{IH:()=>s,Ed:()=>a,oL:()=>l,I8:()=>u,TE:()=>f,fS:()=>c,jk:()=>_,U1:()=>h,bA:()=>p,bI:()=>d,Bs:()=>g,Cf:()=>y});var i=n(28641),r=n(33983);function o(t,e,n){const i=void 0!==n?t.toFixed(n):""+t;let r=i.indexOf(".");return r=-1===r?i.length:r,r>e?i:new Array(1+e-r).join("0")+i}function s(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function a(t,e){const n=e.getRadius(),i=e.getCenter(),r=i[0],o=i[1];let s=t[0]-r;const a=t[1]-o;0===s&&0===a&&(s=1);const l=Math.sqrt(s*s+a*a);return[r+n*s/l,o+n*a/l]}function l(t,e){const n=t[0],i=t[1],r=e[0],o=e[1],s=r[0],a=r[1],l=o[0],u=o[1],c=l-s,h=u-a,p=0===c&&0===h?0:(c*(n-s)+h*(i-a))/(c*c+h*h||0);let d,f;return p<=0?(d=s,f=a):p>=1?(d=l,f=u):(d=s+p*c,f=a+p*h),[d,f]}function u(t,e,n){const i=(0,r.$W)(e+180,360)-180,s=Math.abs(3600*i),a=n||0;let l=Math.floor(s/3600),u=Math.floor((s-3600*l)/60),c=(0,r.FH)(s-3600*l-60*u,a);c>=60&&(c=0,u+=1),u>=60&&(u=0,l+=1);let h=l+"";return 0===u&&0===c||(h+=" "+o(u,2)+""),0!==c&&(h+=" "+o(c,2,a)+""),0!==i&&(h+=" "+t.charAt(i<0?1:0)),h}function c(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function h(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=r,t[1]=o,t}function p(t,e){return t[0]*=e,t[1]*=e,t}function d(t,e){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function f(t,e){return Math.sqrt(d(t,e))}function g(t,e){return d(t,l(t,e))}function y(t,e){if(e.canWrapX()){const n=(0,i.getWidth)(e.getExtent()),r=_(t,e,n);r&&(t[0]-=r*n)}return t}function _(t,e,n){const r=e.getExtent();let o=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||(0,i.getWidth)(r),o=Math.floor((t[0]-r[0])/n)),o}},10245:(t,e,n)=>{"use strict";n.d(e,{$A:()=>r,Qi:()=>s,XV:()=>o,hN:()=>l,hg:()=>a,oj:()=>i,p:()=>h});const i="ol-hidden",r="ol-selectable",o="ol-unselectable",s="ol-unsupported",a="ol-control",l="ol-collapsed",u=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),c=["style","variant","weight","size","lineHeight","family"],h=function(t){const e=t.match(u);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let t=0,i=c.length;t<i;++t){const i=e[t+1];void 0!==i&&(n[c[t]]=i)}return n.families=n.family.split(/,\s?/),n}},68326:(t,e,n)=>{"use strict";n.d(e,{$H:()=>l,E4:()=>r,Pb:()=>a,ZF:()=>u,ep:()=>c,hF:()=>h,iO:()=>s,jy:()=>o});var i=n(40177);function r(t,e,n,r){let o;return o=n&&n.length?n.shift():i.Id?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",r)}function o(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function s(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function a(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function l(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function u(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function c(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function h(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],o=e[i];if(!r&&!o)break;r!==o&&(r?o?t.insertBefore(o,r):(t.removeChild(r),--i):t.appendChild(o))}}},31015:(t,e,n)=>{"use strict";function i(t){return Math.pow(t,3)}function r(t){return 1-i(1-t)}function o(t){return 3*t*t-2*t*t*t}function s(t){return t}n.d(e,{GE:()=>s,Vv:()=>r,YQ:()=>i,rd:()=>o})},65818:(t,e,n)=>{"use strict";n.r(e),n.d(e,{listen:()=>r,listenOnce:()=>o,unlistenByKey:()=>s});var i=n(69374);function r(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){const i=n;n=function(){t.removeEventListener(e,n),i.apply(this,arguments)}}const o={target:t,type:e,listener:n};return t.addEventListener(e,n),o}function o(t,e,n,i){return r(t,e,n,i,!0)}function s(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,i.Z)(t))}},291:(t,e,n)=>{"use strict";function i(t){t.stopPropagation()}n.d(e,{UW:()=>i,ZP:()=>r});const r=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},85487:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},208:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(55431),r=n(291),o=n(36885),s=n(69374);class a extends i.Z{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const e="string"==typeof t,n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const s=e?new r.ZP(t):t;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});let u;n in a||(a[n]=0,l[n]=0),++a[n];for(let t=0,e=i.length;t<e;++t)if(u="handleEvent"in i[t]?i[t].handleEvent(s):i[t].call(this,s),!1===u||s.propagationStopped){u=!1;break}if(0==--a[n]){let t=l[n];for(delete l[n];t--;)this.removeEventListener(n,o.Zn);delete a[n]}return u}disposeInternal(){this.listeners_&&(0,s.Z)(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=o.Zn,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}}}const l=a},98683:(t,e,n)=>{"use strict";n.d(e,{$6:()=>a,Bx:()=>h,Fi:()=>d,Kf:()=>f,Ko:()=>l,QL:()=>m,TN:()=>_,Xp:()=>v,aj:()=>u,rM:()=>g,v8:()=>p,vY:()=>y,yZ:()=>c});var i=n(92217),r=n(36885),o=n(40177),s=n(99515);function a(t){const e=arguments;return function(t){let n=!0;for(let i=0,r=e.length;i<r&&(n=n&&e[i](t),n);++i);return n}}const l=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},u=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},c=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},h=r.uX,p=function(t){const e=t.originalEvent;return 0==e.button&&!(o.G$&&o.tK&&e.ctrlKey)},d=r.Dv,f=function(t){return t.type==i.Z.SINGLECLICK},g=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},y=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},_=function(t){const e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},m=function(t){const e=t.originalEvent;return(0,s.h)(void 0!==e,56),"mouse"==e.pointerType},v=function(t){const e=t.originalEvent;return(0,s.h)(void 0!==e,56),e.isPrimary&&0===e.button}},28641:(t,e,n)=>{"use strict";n.r(e),n.d(e,{applyTransform:()=>J,approximatelyEquals:()=>x,boundingExtent:()=>o,buffer:()=>s,clone:()=>a,closestSquaredDistanceXY:()=>l,containsCoordinate:()=>u,containsExtent:()=>c,containsXY:()=>h,coordinateRelationship:()=>p,createEmpty:()=>d,createOrUpdate:()=>f,createOrUpdateEmpty:()=>g,createOrUpdateFromCoordinate:()=>y,createOrUpdateFromCoordinates:()=>_,createOrUpdateFromFlatCoordinates:()=>m,createOrUpdateFromRings:()=>v,equals:()=>b,extend:()=>w,extendCoordinate:()=>E,extendCoordinates:()=>P,extendFlatCoordinates:()=>C,extendRings:()=>O,extendXY:()=>S,forEachCorner:()=>I,getArea:()=>L,getBottomLeft:()=>M,getBottomRight:()=>T,getCenter:()=>R,getCorner:()=>N,getEnlargedArea:()=>A,getForViewAndSize:()=>D,getHeight:()=>F,getIntersection:()=>G,getIntersectionArea:()=>k,getMargin:()=>V,getRotatedViewport:()=>j,getSize:()=>Z,getTopLeft:()=>z,getTopRight:()=>B,getWidth:()=>U,intersects:()=>W,intersectsSegment:()=>H,isEmpty:()=>q,returnOrUpdate:()=>X,scaleFromCenter:()=>Y,wrapAndSliceX:()=>$,wrapX:()=>K});var i=n(28716),r=n(99515);function o(t){const e=[1/0,1/0,-1/0,-1/0];for(let n=0,i=t.length;n<i;++n)E(e,t[n]);return e}function s(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function a(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function l(t,e,n){let i,r;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+r*r}function u(t,e){return h(t,e[0],e[1])}function c(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function h(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function p(t,e){const n=t[0],r=t[1],o=t[2],s=t[3],a=e[0],l=e[1];let u=i.Z.UNKNOWN;return a<n?u|=i.Z.LEFT:a>o&&(u|=i.Z.RIGHT),l<r?u|=i.Z.BELOW:l>s&&(u|=i.Z.ABOVE),u===i.Z.UNKNOWN&&(u=i.Z.INTERSECTING),u}function d(){return[1/0,1/0,-1/0,-1/0]}function f(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function g(t){return f(1/0,1/0,-1/0,-1/0,t)}function y(t,e){const n=t[0],i=t[1];return f(n,i,n,i,e)}function _(t,e){return P(g(e),t)}function m(t,e,n,i,r){return C(g(r),t,e,n,i)}function v(t,e){return O(g(e),t)}function b(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function x(t,e,n){return Math.abs(t[0]-e[0])<n&&Math.abs(t[2]-e[2])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[3]-e[3])<n}function w(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function E(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function P(t,e){for(let n=0,i=e.length;n<i;++n)E(t,e[n]);return t}function C(t,e,n,i,r){for(;n<i;n+=r)S(t,e[n],e[n+1]);return t}function O(t,e){for(let n=0,i=e.length;n<i;++n)P(t,e[n]);return t}function S(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function I(t,e){let n;return n=e(M(t)),n||(n=e(T(t)),n||(n=e(B(t)),n||(n=e(z(t)),n||!1)))}function L(t){let e=0;return q(t)||(e=U(t)*F(t)),e}function M(t){return[t[0],t[1]]}function T(t){return[t[2],t[1]]}function R(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function N(t,e){let n;return"bottom-left"===e?n=M(t):"bottom-right"===e?n=T(t):"top-left"===e?n=z(t):"top-right"===e?n=B(t):(0,r.h)(!1,13),n}function A(t,e){const n=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-n)*(Math.max(t[3],e[3])-i)}function D(t,e,n,i,r){const[o,s,a,l,u,c,h,p]=j(t,e,n,i);return f(Math.min(o,a,u,h),Math.min(s,l,c,p),Math.max(o,a,u,h),Math.max(s,l,c,p),r)}function j(t,e,n,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(n),a=Math.sin(n),l=r*s,u=r*a,c=o*s,h=o*a,p=t[0],d=t[1];return[p-l+h,d-u-c,p-l-h,d-u+c,p+l-h,d+u+c,p+l+h,d+u-c,p-l+h,d-u-c]}function F(t){return t[3]-t[1]}function k(t,e){return L(G(t,e))}function G(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return W(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):g(i),i}function V(t){return U(t)+F(t)}function Z(t){return[t[2]-t[0],t[3]-t[1]]}function z(t){return[t[0],t[3]]}function B(t){return[t[2],t[3]]}function U(t){return t[2]-t[0]}function W(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function q(t){return t[2]<t[0]||t[3]<t[1]}function X(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Y(t,e){const n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}function H(t,e,n){let r=!1;const o=p(t,e),s=p(t,n);if(o===i.Z.INTERSECTING||s===i.Z.INTERSECTING)r=!0;else{const a=t[0],l=t[1],u=t[2],c=t[3],h=e[0],p=e[1],d=n[0],f=n[1],g=(f-p)/(d-h);let y,_;s&i.Z.ABOVE&&!(o&i.Z.ABOVE)&&(y=d-(f-c)/g,r=y>=a&&y<=u),r||!(s&i.Z.RIGHT)||o&i.Z.RIGHT||(_=f-(d-u)*g,r=_>=l&&_<=c),r||!(s&i.Z.BELOW)||o&i.Z.BELOW||(y=d-(f-l)/g,r=y>=a&&y<=u),r||!(s&i.Z.LEFT)||o&i.Z.LEFT||(_=f-(d-a)*g,r=_>=l&&_<=c)}return r}function J(t,e,n,i){let r=[];if(i>1){const e=t[2]-t[0],n=t[3]-t[1];for(let o=0;o<i;++o)r.push(t[0]+e*o/i,t[1],t[2],t[1]+n*o/i,t[2]-e*o/i,t[3],t[0],t[3]-n*o/i)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);const o=[],s=[];for(let t=0,e=r.length;t<e;t+=2)o.push(r[t]),s.push(r[t+1]);return function(t,e,n){return f(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(o,s,n)}function K(t,e){const n=e.getExtent(),i=R(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const e=U(n),r=Math.floor((i[0]-n[0])/e)*e;t[0]-=r,t[2]-=r}return t}function $(t,e){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];K(t,e);const i=U(n);if(U(t)>i)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+i,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-i,t[3]]]}return[t]}},28716:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},36885:(t,e,n)=>{"use strict";n.d(e,{Dv:()=>o,Zn:()=>s,qe:()=>a,uX:()=>r});var i=n(65537);function r(){return!0}function o(){return!1}function s(){}function a(t){let e,n,r,o=!1;return function(){const s=Array.prototype.slice.call(arguments);return o&&this===r&&(0,i.fS)(s,n)||(o=!0,r=this,n=s,e=t.apply(this,arguments)),e}}},56528:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Circle:()=>i.Z,Geometry:()=>r.Z,GeometryCollection:()=>o.Z,LineString:()=>a.Z,LinearRing:()=>s.Z,MultiLineString:()=>l.Z,MultiPoint:()=>u.Z,MultiPolygon:()=>c.Z,Point:()=>h.Z,Polygon:()=>p.ZP,SimpleGeometry:()=>d.ZP});var i=n(57276),r=n(71694),o=n(13958),s=n(67538),a=n(92083),l=n(7403),u=n(36259),c=n(53643),h=n(60188),p=n(2033),d=n(72967)},57276:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(72967),r=n(28641),o=n(18527),s=n(76442);class a extends i.ZP{constructor(t,e,n){super(),void 0!==n&&void 0===e?this.setFlatCoordinates(n,t):(e=e||0,this.setCenterAndRadius(t,e,n))}clone(){const t=new a(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,o=t-r[0],s=e-r[1],a=o*o+s*s;if(a<i){if(0===a)for(let t=0;t<this.stride;++t)n[t]=r[t];else{const t=this.getRadius()/Math.sqrt(a);n[0]=r[0]+t*o,n[1]=r[1]+t*s;for(let t=2;t<this.stride;++t)n[t]=r[t]}return n.length=this.stride,a}return i}containsXY(t,e){const n=this.flatCoordinates,i=t-n[0],r=e-n[1];return i*i+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,n=e[this.stride]-e[0];return(0,r.createOrUpdate)(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){const e=this.getExtent();if((0,r.intersects)(t,e)){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||(0,r.forEachCorner)(t,this.intersectsCoordinate.bind(this))}return!1}setCenter(t){const e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+n;for(let n=1;n<e;++n)i[e+n]=t[n];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let r=(0,o.IG)(i,0,t,this.stride);i[r++]=i[0]+e;for(let t=1,e=this.stride;t<e;++t)i[r++]=i[t];i.length=r,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const n=this.getCenter(),i=this.getStride();this.setCenter((0,s.U1)(n,0,n.length,i,t,e,n)),this.changed()}translate(t,e){const n=this.getCenter(),i=this.getStride();this.setCenter((0,s.Iu)(n,0,n.length,i,t,e,n)),this.changed()}}a.prototype.transform;const l=a},71694:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var i=n(72971),r=n(74187),o=n(6101),s=n(28641),a=n(57646),l=n(36885),u=n(76442);const c=(0,o.Ue)();class h extends i.Z{constructor(){super(),this.extent_=(0,s.createEmpty)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,l.qe)((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return(0,r.O3)()}closestPointXY(t,e,n,i){return(0,r.O3)()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return(0,r.O3)()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&(0,s.createOrUpdateEmpty)(t),this.extentRevision_=this.getRevision()}return(0,s.returnOrUpdate)(this.extent_,t)}rotate(t,e){(0,r.O3)()}scale(t,e,n){(0,r.O3)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return(0,r.O3)()}getType(){return(0,r.O3)()}applyTransform(t){(0,r.O3)()}intersectsExtent(t){return(0,r.O3)()}translate(t,e){(0,r.O3)()}transform(t,e){const n=(0,a.get)(t),i="tile-pixels"==n.getUnits()?function(t,i,r){const l=n.getExtent(),h=n.getWorldExtent(),p=(0,s.getHeight)(h)/(0,s.getHeight)(l);return(0,o.qC)(c,h[0],h[3],p,-p,0,0,0),(0,u.vT)(t,0,t.length,r,c,i),(0,a.getTransform)(n,e)(t,i,r)}:(0,a.getTransform)(n,e);return this.applyTransform(i),this}}const p=h},13958:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(85487),r=n(71694),o=n(28641),s=n(65818);class a extends r.Z{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(s.unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push((0,s.listen)(this.geometries_[t],i.Z.CHANGE,this.changed,this))}clone(){const t=new a(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<(0,o.closestSquaredDistanceXY)(this.getExtent(),t,e))return i;const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)i=r[o].closestPointXY(t,e,n,i);return i}containsXY(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1}computeExtent(t){(0,o.createOrUpdateEmpty)(t);const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)(0,o.extend)(t,e[n].getExtent());return t}getGeometries(){return l(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let i=!1;for(let r=0,o=n.length;r<o;++r){const o=n[r],s=o.getSimplifiedGeometry(t);e.push(s),s!==o&&(i=!0)}if(i){const t=new a(null);return t.setGeometriesArray(e),t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].rotate(t,e);this.changed()}scale(t,e,n){n||(n=(0,o.getCenter)(this.getExtent()));const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(l(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function l(t){const e=[];for(let n=0,i=t.length;n<i;++n)e.push(t[n].clone());return e}const u=a},92083:(t,e,n)=>{"use strict";n.d(e,{Z:()=>g});var i=n(72967),r=n(53042),o=n(28641),s=n(18527),a=n(80226),l=n(65537),u=n(93032),c=n(89241),h=n(49405),p=n(63746),d=n(27374);class f extends i.ZP{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){this.flatCoordinates?(0,l.l7)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new f(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<(0,o.closestSquaredDistanceXY)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))}forEachSegment(t){return(0,u.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,(0,h.iJ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return(0,c.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return(0,h.WW)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return(0,d.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,a.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new f(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return(0,p.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}const g=f},67538:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var i=n(72967),r=n(53042),o=n(28641),s=n(18527),a=n(80226),l=n(89241),u=n(14078);class c extends i.ZP{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new c(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<(0,o.closestSquaredDistanceXY)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return(0,u.QQ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,l.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,a.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new c(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}const h=c},7403:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var i=n(92083),r=n(72967),o=n(53042),s=n(28641),a=n(18527),l=n(80226),u=n(65537),c=n(89241),h=n(49405),p=n(63746);class d extends r.ZP{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{let e=this.getLayout();const n=t,i=[],r=[];for(let t=0,o=n.length;t<o;++t){const o=n[t];0===t&&(e=o.getLayout()),(0,u.l7)(i,o.getFlatCoordinates()),r.push(i.length)}this.setFlatCoordinates(e,i),this.ends_=r}}appendLineString(t){this.flatCoordinates?(0,u.l7)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new d(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<(0,s.closestSquaredDistanceXY)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))}getCoordinateAtM(t,e,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,n=void 0!==n&&n,(0,h.dG)(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return(0,c.o1)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new i.Z(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,r=[];let o=0;for(let s=0,a=e.length;s<a;++s){const a=e[s],l=new i.Z(t.slice(o,a),n);r.push(l),o=a}return r}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const i=this.ends_,r=this.stride;for(let o=0,s=i.length;o<s;++o){const s=i[o],a=(0,h.WW)(e,n,s,r,.5);(0,u.l7)(t,a),n=s}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=(0,l.UJ)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new d(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return(0,p.AW)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=(0,a._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const f=d},36259:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var i=n(60188),r=n(72967),o=n(28641),s=n(18527),a=n(65537),l=n(89241),u=n(33983);class c extends r.ZP{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?(0,a.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new c(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<(0,o.closestSquaredDistanceXY)(this.getExtent(),t,e))return i;const r=this.flatCoordinates,s=this.stride;for(let o=0,a=r.length;o<a;o+=s){const a=(0,u.bI)(t,e,r[o],r[o+1]);if(a<i){i=a;for(let t=0;t<s;++t)n[t]=r[o+t];n.length=s}}return i}getCoordinates(){return(0,l.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new i.Z(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,r=[];for(let o=0,s=t.length;o<s;o+=n){const s=new i.Z(t.slice(o,o+n),e);r.push(s)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,r=e.length;i<r;i+=n){const n=e[i],r=e[i+1];if((0,o.containsXY)(t,n,r))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}const h=c},53643:(t,e,n)=>{"use strict";n.d(e,{Z:()=>m});var i=n(36259),r=n(2033),o=n(72967),s=n(53042),a=n(28641),l=n(18527),u=n(65537),c=n(73448),h=n(89241),p=n(63746),d=n(30974),f=n(14078),g=n(79679),y=n(80226);class _ extends o.ZP{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){let i=this.getLayout();const r=t,o=[],s=[];for(let t=0,e=r.length;t<e;++t){const e=r[t];0===t&&(i=e.getLayout());const n=o.length,a=e.getEnds();for(let t=0,e=a.length;t<e;++t)a[t]+=n;(0,u.l7)(o,e.getFlatCoordinates()),s.push(a)}e=i,t=o,n=s}void 0!==e&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const n=this.flatCoordinates.length;(0,u.l7)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,i=e.length;t<i;++t)e[t]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let n=0;n<t;++n)e[n]=this.endss_[n].slice();const n=new _(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,i){return i<(0,a.closestSquaredDistanceXY)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,s.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,s.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return(0,g.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return(0,f.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,d.dL)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,h.ug)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=function(t,e,n,i){const r=[];let o=(0,a.createEmpty)();for(let s=0,l=n.length;s<l;++s){const l=n[s];o=(0,a.createOrUpdateFromFlatCoordinates)(t,e,l[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,c.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new i.Z(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,d.Oj)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,d.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=(0,y.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new _(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(let t=0,i=n.length;t<i;++t)n[t]-=e;return new r.ZP(this.flatCoordinates.slice(e,i),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s].slice(),l=a[a.length-1];if(0!==o)for(let t=0,e=a.length;t<e;++t)a[t]-=o;const u=new r.ZP(e.slice(o,l),t,a);i.push(u),o=l}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return(0,p.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=(0,l.QT)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const t=n[n.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}const m=_},60188:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(72967),r=n(28641),o=n(18527),s=n(33983);class a extends i.ZP{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new a(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,o=(0,s.bI)(t,e,r[0],r[1]);if(o<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=r[e];return n.length=t,o}return i}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return(0,r.createOrUpdateFromCoordinate)(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return(0,r.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.IG)(this.flatCoordinates,0,t,this.stride),this.changed()}}const l=a},2033:(t,e,n)=>{"use strict";n.d(e,{Bb:()=>x,ZP:()=>v,oJ:()=>b});var i=n(67538),r=n(60188),o=n(72967),s=n(53042),a=n(28641),l=n(18527),u=n(65537),c=n(73448),h=n(89241),p=n(63746),d=n(30974),f=n(14078),g=n(79679),y=n(33983),_=n(80226);class m extends o.ZP{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?(0,u.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new m(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<(0,a.closestSquaredDistanceXY)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,s.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,s.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return(0,g.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return(0,f.KP)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,d.zX)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,h.o1)(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=(0,a.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,c.X)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new r.Z(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new i.Z(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[];let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s],l=new i.Z(e.slice(o,a),t);r.push(l),o=a}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,d.$v)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,d.zX)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=(0,_.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new m(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return(0,p.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=(0,l._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const v=m;function b(t){const e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n];return new m(o,"XY",[o.length])}function x(t,e,n){e=e||32;const i=t.getStride(),r=t.getLayout(),o=t.getCenter(),s=i*(e+1),a=new Array(s);for(let t=0;t<s;t+=i){a[t]=0,a[t+1]=0;for(let e=2;e<i;e++)a[t+e]=o[e]}const l=[a.length],u=new m(a,r,l);return function(t,e,n,i){const r=t.getFlatCoordinates(),o=t.getStride(),s=r.length/o-1,a=i||0;for(let t=0;t<=s;++t){const i=t*o,l=a+2*(0,y.$W)(t,s)*Math.PI/s;r[i]=e[0]+n*Math.cos(l),r[i+1]=e[1]+n*Math.sin(l)}t.changed()}(u,o,t.getRadius(),n),u}},72967:(t,e,n)=>{"use strict";n.d(e,{Kr:()=>u,ZP:()=>c,tP:()=>l});var i=n(71694),r=n(74187),o=n(28641),s=n(76442);class a extends i.Z{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return(0,o.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return(0,r.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=l(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){(0,r.O3)()}setLayout(t,e,n){let i;if(t)i=l(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=function(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();(0,s.U1)(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=(0,o.getCenter)(this.getExtent()));const i=this.getFlatCoordinates();if(i){const r=this.getStride();(0,s.bA)(i,0,i.length,r,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();(0,s.Iu)(n,0,n.length,i,t,e,n),this.changed()}}}function l(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function u(t,e,n){const i=t.getFlatCoordinates();if(i){const r=t.getStride();return(0,s.vT)(i,0,i.length,r,e,n)}return null}const c=a},14078:(t,e,n)=>{"use strict";function i(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=s*n-o*i,o=n,s=i}return r/2}function r(t,e,n,r){let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];o+=i(t,e,a,r),e=a}return o}function o(t,e,n,i){let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];o+=r(t,e,a,i),e=a[a.length-1]}return o}n.d(e,{Eu:()=>o,KP:()=>r,QQ:()=>i})},53042:(t,e,n)=>{"use strict";n.d(e,{Af:()=>s,Bv:()=>o,H$:()=>l,Xl:()=>u,gI:()=>c,sD:()=>a});var i=n(33983);function r(t,e,n,r,o,s,a){const l=t[e],u=t[e+1],c=t[n]-l,h=t[n+1]-u;let p;if(0===c&&0===h)p=e;else{const d=((o-l)*c+(s-u)*h)/(c*c+h*h);if(d>1)p=n;else{if(d>0){for(let o=0;o<r;++o)a[o]=(0,i.t7)(t[e+o],t[n+o],d);return void(a.length=r)}p=e}}for(let e=0;e<r;++e)a[e]=t[p+e];a.length=r}function o(t,e,n,r,o){let s=t[e],a=t[e+1];for(e+=r;e<n;e+=r){const n=t[e],r=t[e+1],l=(0,i.bI)(s,a,n,r);l>o&&(o=l),s=n,a=r}return o}function s(t,e,n,i,r){for(let s=0,a=n.length;s<a;++s){const a=n[s];r=o(t,e,a,i,r),e=a}return r}function a(t,e,n,i,r){for(let o=0,a=n.length;o<a;++o){const a=n[o];r=s(t,e,a,i,r),e=a[a.length-1]}return r}function l(t,e,n,o,s,a,l,u,c,h,p){if(e==n)return h;let d,f;if(0===s){if(f=(0,i.bI)(l,u,t[e],t[e+1]),f<h){for(d=0;d<o;++d)c[d]=t[e+d];return c.length=o,f}return h}p=p||[NaN,NaN];let g=e+o;for(;g<n;)if(r(t,g-o,g,o,l,u,p),f=(0,i.bI)(l,u,p[0],p[1]),f<h){for(h=f,d=0;d<o;++d)c[d]=p[d];c.length=o,g+=o}else g+=o*Math.max((Math.sqrt(f)-Math.sqrt(h))/s|0,1);if(a&&(r(t,n-o,e,o,l,u,p),f=(0,i.bI)(l,u,p[0],p[1]),f<h)){for(h=f,d=0;d<o;++d)c[d]=p[d];c.length=o}return h}function u(t,e,n,i,r,o,s,a,u,c,h){h=h||[NaN,NaN];for(let p=0,d=n.length;p<d;++p){const d=n[p];c=l(t,e,d,i,r,o,s,a,u,c,h),e=d}return c}function c(t,e,n,i,r,o,s,a,l,c,h){h=h||[NaN,NaN];for(let p=0,d=n.length;p<d;++p){const d=n[p];c=u(t,e,d,i,r,o,s,a,l,c,h),e=d[d.length-1]}return c}},79679:(t,e,n)=>{"use strict";n.d(e,{TG:()=>o,Zl:()=>a,uG:()=>r,wY:()=>s});var i=n(28641);function r(t,e,n,r,s){return!(0,i.forEachCorner)(s,(function(i){return!o(t,e,n,r,i[0],i[1])}))}function o(t,e,n,i,r,o){let s=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];l<=o?i>o&&(n-a)*(o-l)-(r-a)*(i-l)>0&&s++:i<=o&&(n-a)*(o-l)-(r-a)*(i-l)<0&&s--,a=n,l=i}return 0!==s}function s(t,e,n,i,r,s){if(0===n.length)return!1;if(!o(t,e,n[0],i,r,s))return!1;for(let e=1,a=n.length;e<a;++e)if(o(t,n[e-1],n[e],i,r,s))return!1;return!0}function a(t,e,n,i,r,o){if(0===n.length)return!1;for(let a=0,l=n.length;a<l;++a){const l=n[a];if(s(t,e,l,i,r,o))return!0;e=l[l.length-1]}return!1}},18527:(t,e,n)=>{"use strict";function i(t,e,n,i){for(let i=0,r=n.length;i<r;++i)t[e++]=n[i];return e}function r(t,e,n,i){for(let r=0,o=n.length;r<o;++r){const o=n[r];for(let n=0;n<i;++n)t[e++]=o[n]}return e}function o(t,e,n,i,o){o=o||[];let s=0;for(let a=0,l=n.length;a<l;++a){const l=r(t,e,n[a],i);o[s++]=l,e=l}return o.length=s,o}function s(t,e,n,i,r){r=r||[];let s=0;for(let a=0,l=n.length;a<l;++a){const l=o(t,e,n[a],i,r[s]);0===l.length&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}n.d(e,{IG:()=>i,QT:()=>s,Sg:()=>r,_5:()=>o})},89241:(t,e,n)=>{"use strict";function i(t,e,n,i,r){r=void 0!==r?r:[];let o=0;for(let s=e;s<n;s+=i)r[o++]=t.slice(s,s+i);return r.length=o,r}function r(t,e,n,r,o){o=void 0!==o?o:[];let s=0;for(let a=0,l=n.length;a<l;++a){const l=n[a];o[s++]=i(t,e,l,r,o[s]),e=l}return o.length=s,o}function o(t,e,n,i,o){o=void 0!==o?o:[];let s=0;for(let a=0,l=n.length;a<l;++a){const l=n[a];o[s++]=1===l.length&&l[0]===e?[]:r(t,e,l,i,o[s]),e=l[l.length-1]}return o.length=s,o}n.d(e,{Ml:()=>i,o1:()=>r,ug:()=>o})},73448:(t,e,n)=>{"use strict";n.d(e,{U:()=>s,X:()=>o});var i=n(79679),r=n(65537);function o(t,e,n,o,s,a,l){let u,c,h,p,d,f,g;const y=s[a+1],_=[];for(let i=0,r=n.length;i<r;++i){const r=n[i];for(p=t[r-o],f=t[r-o+1],u=e;u<r;u+=o)d=t[u],g=t[u+1],(y<=f&&g<=y||f<=y&&y<=g)&&(h=(y-f)/(g-f)*(d-p)+p,_.push(h)),p=d,f=g}let m=NaN,v=-1/0;for(_.sort(r.kK),p=_[0],u=1,c=_.length;u<c;++u){d=_[u];const r=Math.abs(d-p);r>v&&(h=(p+d)/2,(0,i.wY)(t,e,n,o,h,y)&&(m=h,v=r)),p=d}return isNaN(m)&&(m=s[a]),l?(l.push(m,y,v),l):[m,y,v]}function s(t,e,n,i,r){let s=[];for(let a=0,l=n.length;a<l;++a){const l=n[a];s=o(t,e,l,i,r,2*a,s),e=l[l.length-1]}return s}},49405:(t,e,n)=>{"use strict";n.d(e,{WW:()=>o,dG:()=>a,iJ:()=>s});var i=n(65537),r=n(33983);function o(t,e,n,o,s,a,l){let u,c;const h=(n-e)/o;if(1===h)u=e;else if(2===h)u=e,c=s;else if(0!==h){let r=t[e],a=t[e+1],l=0;const h=[0];for(let i=e+o;i<n;i+=o){const e=t[i],n=t[i+1];l+=Math.sqrt((e-r)*(e-r)+(n-a)*(n-a)),h.push(l),r=e,a=n}const p=s*l,d=(0,i.ry)(h,p);d<0?(c=(p-h[-d-2])/(h[-d-1]-h[-d-2]),u=e+(-d-2)*o):u=e+d*o}l=l>1?l:2,a=a||new Array(l);for(let e=0;e<l;++e)a[e]=void 0===u?NaN:void 0===c?t[u+e]:(0,r.t7)(t[u+e],t[u+o+e],c);return a}function s(t,e,n,i,o,s){if(n==e)return null;let a;if(o<t[e+i-1])return s?(a=t.slice(e,e+i),a[i-1]=o,a):null;if(t[n-1]<o)return s?(a=t.slice(n-i,n),a[i-1]=o,a):null;if(o==t[e+i-1])return t.slice(e,e+i);let l=e/i,u=n/i;for(;l<u;){const e=l+u>>1;o<t[(e+1)*i-1]?u=e:l=e+1}const c=t[l*i-1];if(o==c)return t.slice((l-1)*i,(l-1)*i+i);const h=(o-c)/(t[(l+1)*i-1]-c);a=[];for(let e=0;e<i-1;++e)a.push((0,r.t7)(t[(l-1)*i+e],t[l*i+e],h));return a.push(o),a}function a(t,e,n,i,r,o,a){if(a)return s(t,e,n[n.length-1],i,r,o);let l;if(r<t[i-1])return o?(l=t.slice(0,i),l[i-1]=r,l):null;if(t[t.length-1]<r)return o?(l=t.slice(t.length-i),l[i-1]=r,l):null;for(let o=0,a=n.length;o<a;++o){const a=n[o];if(e!=a){if(r<t[e+i-1])return null;if(r<=t[a-1])return s(t,e,a,i,r,!1);e=a}}return null}},63746:(t,e,n)=>{"use strict";n.d(e,{AW:()=>a,Kz:()=>s,ac:()=>u,mV:()=>l,oW:()=>c});var i=n(28641),r=n(93032),o=n(79679);function s(t,e,n,o,s){const a=(0,i.extendFlatCoordinates)((0,i.createEmpty)(),t,e,n,o);return!!(0,i.intersects)(s,a)&&(!!(0,i.containsExtent)(s,a)||a[0]>=s[0]&&a[2]<=s[2]||a[1]>=s[1]&&a[3]<=s[3]||(0,r.E)(t,e,n,o,(function(t,e){return(0,i.intersectsSegment)(s,t,e)})))}function a(t,e,n,i,r){for(let o=0,a=n.length;o<a;++o){if(s(t,e,n[o],i,r))return!0;e=n[o]}return!1}function l(t,e,n,i,r){return!!(s(t,e,n,i,r)||(0,o.TG)(t,e,n,i,r[0],r[1])||(0,o.TG)(t,e,n,i,r[0],r[3])||(0,o.TG)(t,e,n,i,r[2],r[1])||(0,o.TG)(t,e,n,i,r[2],r[3]))}function u(t,e,n,i,r){if(!l(t,e,n[0],i,r))return!1;if(1===n.length)return!0;for(let e=1,a=n.length;e<a;++e)if((0,o.uG)(t,n[e-1],n[e],i,r)&&!s(t,n[e-1],n[e],i,r))return!1;return!0}function c(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o];if(u(t,e,s,i,r))return!0;e=s[s.length-1]}return!1}},27374:(t,e,n)=>{"use strict";function i(t,e,n,i){let r=t[e],o=t[e+1],s=0;for(let a=e+i;a<n;a+=i){const e=t[a],n=t[a+1];s+=Math.sqrt((e-r)*(e-r)+(n-o)*(n-o)),r=e,o=n}return s}n.d(e,{W:()=>i})},30974:(t,e,n)=>{"use strict";function i(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const o=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}function r(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=(n-o)*(i+s),o=n,s=i}return 0===r?void 0:r>0}function o(t,e,n,i,o){o=void 0!==o&&o;for(let s=0,a=n.length;s<a;++s){const a=n[s],l=r(t,e,a,i);if(0===s){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=a}return!0}function s(t,e,n,i,r){for(let s=0,a=n.length;s<a;++s){const a=n[s];if(!o(t,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function a(t,e,n,o,s){s=void 0!==s&&s;for(let a=0,l=n.length;a<l;++a){const l=n[a],u=r(t,e,l,o);(0===a?s&&u||!s&&!u:s&&!u||!s&&u)&&i(t,e,l,o),e=l}return e}function l(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o)e=a(t,e,n[o],i,r);return e}n.d(e,{$v:()=>o,Oj:()=>s,zX:()=>a,dL:()=>l})},93032:(t,e,n)=>{"use strict";function i(t,e,n,i,r){let o;for(e+=i;e<n;e+=i)if(o=r(t.slice(e-i,e),t.slice(e,e+i)),o)return o;return!1}n.d(e,{E:()=>i})},80226:(t,e,n)=>{"use strict";n.d(e,{Pp:()=>u,UJ:()=>o,Zh:()=>l,dt:()=>r,uZ:()=>s});var i=n(33983);function r(t,e,n,r,o,s,a){const l=(n-e)/r;if(l<3){for(;e<n;e+=r)s[a++]=t[e],s[a++]=t[e+1];return a}const u=new Array(l);u[0]=1,u[l-1]=1;const c=[e,n-r];let h=0;for(;c.length>0;){const n=c.pop(),s=c.pop();let a=0;const l=t[s],p=t[s+1],d=t[n],f=t[n+1];for(let e=s+r;e<n;e+=r){const n=t[e],r=t[e+1],o=(0,i.rU)(n,r,l,p,d,f);o>a&&(h=e,a=o)}a>o&&(u[(h-e)/r]=1,s+r<h&&c.push(s,h),h+r<n&&c.push(h,n))}for(let n=0;n<l;++n)u[n]&&(s[a++]=t[e+n*r],s[a++]=t[e+n*r+1]);return a}function o(t,e,n,i,o,s,a,l){for(let u=0,c=n.length;u<c;++u){const c=n[u];a=r(t,e,c,i,o,s,a),l.push(a),e=c}return a}function s(t,e){return e*Math.round(t/e)}function a(t,e,n,i,r,o,a){if(e==n)return a;let l,u,c=s(t[e],r),h=s(t[e+1],r);e+=i,o[a++]=c,o[a++]=h;do{if(l=s(t[e],r),u=s(t[e+1],r),(e+=i)==n)return o[a++]=l,o[a++]=u,a}while(l==c&&u==h);for(;e<n;){const n=s(t[e],r),p=s(t[e+1],r);if(e+=i,n==l&&p==u)continue;const d=l-c,f=u-h,g=n-c,y=p-h;d*y==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&y<f||f==y||f>0&&y>f)?(l=n,u=p):(o[a++]=l,o[a++]=u,c=l,h=u,l=n,u=p)}return o[a++]=l,o[a++]=u,a}function l(t,e,n,i,r,o,s,l){for(let u=0,c=n.length;u<c;++u){const c=n[u];s=a(t,e,c,i,r,o,s),l.push(s),e=c}return s}function u(t,e,n,i,r,o,s,a){for(let u=0,c=n.length;u<c;++u){const c=n[u],h=[];s=l(t,e,c,i,r,o,s,h),a.push(h),e=c[c.length-1]}return s}},76442:(t,e,n)=>{"use strict";function i(t,e,n,i,r,o){o=o||[];let s=0;for(let a=e;a<n;a+=i){const e=t[a],n=t[a+1];o[s++]=r[0]*e+r[2]*n+r[4],o[s++]=r[1]*e+r[3]*n+r[5]}return o&&o.length!=s&&(o.length=s),o}function r(t,e,n,i,r,o,s){s=s||[];const a=Math.cos(r),l=Math.sin(r),u=o[0],c=o[1];let h=0;for(let r=e;r<n;r+=i){const e=t[r]-u,n=t[r+1]-c;s[h++]=u+e*a-n*l,s[h++]=c+e*l+n*a;for(let e=r+2;e<r+i;++e)s[h++]=t[e]}return s&&s.length!=h&&(s.length=h),s}function o(t,e,n,i,r,o,s,a){a=a||[];const l=s[0],u=s[1];let c=0;for(let s=e;s<n;s+=i){const e=t[s]-l,n=t[s+1]-u;a[c++]=l+r*e,a[c++]=u+o*n;for(let e=s+2;e<s+i;++e)a[c++]=t[e]}return a&&a.length!=c&&(a.length=c),a}function s(t,e,n,i,r,o,s){s=s||[];let a=0;for(let l=e;l<n;l+=i){s[a++]=t[l]+r,s[a++]=t[l+1]+o;for(let e=l+2;e<l+i;++e)s[a++]=t[e]}return s&&s.length!=a&&(s.length=a),s}n.d(e,{Iu:()=>s,U1:()=>r,bA:()=>o,vT:()=>i})},40177:(t,e,n)=>{"use strict";n.d(e,{G$:()=>o,Id:()=>l,MP:()=>a,Tp:()=>u,V:()=>r,bM:()=>c,tK:()=>s});const i="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",r=i.includes("firefox"),o=(i.includes("safari")&&!i.includes("chrom")&&(i.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(i)),i.includes("webkit")&&!i.includes("edge")),s=i.includes("macintosh"),a="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,l="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,u="undefined"!=typeof Image&&Image.prototype.decode,c=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}()},47145:(t,e,n)=>{"use strict";n.r(e),n.d(e,{DoubleClickZoom:()=>i.Z,DragAndDrop:()=>p,DragBox:()=>d.Z,DragPan:()=>f.default,DragRotate:()=>g.Z,DragRotateAndZoom:()=>v,DragZoom:()=>b.Z,Draw:()=>Q,Extent:()=>st,Interaction:()=>s.ZP,KeyboardPan:()=>at.Z,KeyboardZoom:()=>lt.Z,Link:()=>ft,Modify:()=>Mt,MouseWheelZoom:()=>Tt.Z,PinchRotate:()=>Rt.Z,PinchZoom:()=>Nt.Z,Pointer:()=>y.Z,Select:()=>kt,Snap:()=>zt,Translate:()=>Wt,defaults:()=>qt.defaults});var i=n(13522),r=n(291),o=n(85487),s=n(47182),a=n(36885),l=n(57646),u=n(65818);class c extends r.ZP{constructor(t,e,n,i){super(t),this.features=n,this.file=e,this.projection=i}}class h extends s.ZP{constructor(t){t=t||{},super({handleEvent:a.uX}),this.on,this.once,this.un,this.readAsBuffer_=!1,this.formats_=[];const e=t.formatConstructors?t.formatConstructors:[];for(let t=0,n=e.length;t<n;++t){let n=e[t];"function"==typeof n&&(n=new n),this.formats_.push(n),this.readAsBuffer_=this.readAsBuffer_||"arraybuffer"===n.getType()}this.projection_=t.projection?(0,l.get)(t.projection):null,this.dropListenKeys_=null,this.source_=t.source||null,this.target=t.target?t.target:null}handleResult_(t,e){const n=e.target.result,i=this.getMap();let r,o=this.projection_;o||(o=(0,l.getUserProjection)(),o)||(o=i.getView().getProjection());const s=this.formats_;for(let e=0,i=s.length;e<i;++e){const i=s[e];let a=n;this.readAsBuffer_&&"arraybuffer"!==i.getType()&&(void 0===r&&(r=(new TextDecoder).decode(n)),a=r);const l=this.tryReadFeatures_(i,a,{featureProjection:o});if(l&&l.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(l)),this.dispatchEvent(new c("addfeatures",t,l,o));break}}}registerListeners_(){const t=this.getMap();if(t){const e=this.target?this.target:t.getViewport();this.dropListenKeys_=[(0,u.listen)(e,o.Z.DROP,this.handleDrop,this),(0,u.listen)(e,o.Z.DRAGENTER,this.handleStop,this),(0,u.listen)(e,o.Z.DRAGOVER,this.handleStop,this),(0,u.listen)(e,o.Z.DROP,this.handleStop,this)]}}setActive(t){!this.getActive()&&t&&this.registerListeners_(),this.getActive()&&!t&&this.unregisterListeners_(),super.setActive(t)}setMap(t){this.unregisterListeners_(),super.setMap(t),this.getActive()&&this.registerListeners_()}tryReadFeatures_(t,e,n){try{return t.readFeatures(e,n)}catch(t){return null}}unregisterListeners_(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(u.unlistenByKey),this.dropListenKeys_=null)}handleDrop(t){const e=t.dataTransfer.files;for(let t=0,n=e.length;t<n;++t){const n=e.item(t),i=new FileReader;i.addEventListener(o.Z.LOAD,this.handleResult_.bind(this,n)),this.readAsBuffer_?i.readAsArrayBuffer(n):i.readAsText(n)}}handleStop(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}}const p=h;var d=n(11518),f=n(63267),g=n(32857),y=n(14515),_=n(98683);class m extends y.Z{constructor(t){super(t=t||{}),this.condition_=t.condition?t.condition:_.vY,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==t.duration?t.duration:400}handleDragEvent(t){if(!(0,_.QL)(t))return;const e=t.map,n=e.getSize(),i=t.pixel,r=i[0]-n[0]/2,o=n[1]/2-i[1],s=Math.atan2(o,r),a=Math.sqrt(r*r+o*o),l=e.getView();if(void 0!==this.lastAngle_){const t=this.lastAngle_-s;l.adjustRotationInternal(t)}this.lastAngle_=s,void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/a),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/a),this.lastMagnitude_=a}handleUpEvent(t){if(!(0,_.QL)(t))return!0;const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),this.lastScaleDelta_=0,!1}handleDownEvent(t){return!!(0,_.QL)(t)&&!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)}}const v=m;var b=n(519),x=n(57276),w=n(81090),E=n(13958),P=n(54049),C=n(92083),O=n(48630),S=n(92217),I=n(7403),L=n(36259),M=n(53643),T=n(60188),R=n(2033),N=n(16899),A=n(71800),D=n(28641),j=n(33983),F=n(47539),k=n(76171),G=n(72967);const V="drawstart";class Z extends r.ZP{constructor(t,e){super(t),this.feature=e}}function z(t,e){return(0,j.bI)(t[0],t[1],e[0],e[1])}function B(t,e){const n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function U(t,e,n){let i,r;e<n?(i=e,r=n):(i=n,r=e);const o=Math.ceil(i),s=Math.floor(r);if(o>s)return z(J(t,i),J(t,r));let a=0;i<o&&(a+=z(J(t,i),B(t,o))),s<r&&(a+=z(B(t,s),J(t,r)));for(let e=o;e<s-1;++e)a+=z(B(t,e),B(t,e+1));return a}function W(t,e,n){if(e instanceof C.Z)X(t,e.getCoordinates(),!1,n);else if(e instanceof I.Z){const i=e.getCoordinates();for(let e=0,r=i.length;e<r;++e)X(t,i[e],!1,n)}else if(e instanceof R.ZP){const i=e.getCoordinates();for(let e=0,r=i.length;e<r;++e)X(t,i[e],!0,n)}else if(e instanceof M.Z){const i=e.getCoordinates();for(let e=0,r=i.length;e<r;++e){const r=i[e];for(let e=0,i=r.length;e<i;++e)X(t,r[e],!0,n)}}else if(e instanceof E.Z){const i=e.getGeometries();for(let e=0;e<i.length;++e)W(t,i[e],n)}}const q={index:-1,endIndex:NaN};function X(t,e,n,i){const r=t[0],o=t[1];for(let t=0,s=e.length-1;t<s;++t){const s=H(r,o,e[t],e[t+1]);if(0===s.squaredDistance){const r=t+s.along;return void i.push({coordinates:e,ring:n,startIndex:r,endIndex:r})}}}const Y={along:0,squaredDistance:0};function H(t,e,n,i){const r=n[0],o=n[1],s=i[0]-r,a=i[1]-o;let l=0,u=r,c=o;return 0===s&&0===a||(l=(0,j.uZ)(((t-r)*s+(e-o)*a)/(s*s+a*a),0,1),u+=s*l,c+=a*l),Y.along=l,Y.squaredDistance=(0,j.FH)((0,j.bI)(t,e,u,c),10),Y}function J(t,e){const n=t.length;let i=Math.floor(e);const r=e-i;i>=n?i-=n:i<0&&(i+=n);let o=i+1;o>=n&&(o-=n);const s=t[i],a=s[0],l=s[1],u=t[o];return[a+(u[0]-a)*r,l+(u[1]-l)*r]}class K extends y.Z{constructor(t){const e=t;e.stopDown||(e.stopDown=a.Dv),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:a.uX,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let n=t.geometryFunction;if(!n){const t=this.mode_;if("Circle"===t)n=function(t,e,n){const i=e||new x.Z([NaN,NaN]),r=(0,l.fromUserCoordinate)(t[0],n),o=(0,k.bI)(r,(0,l.fromUserCoordinate)(t[t.length-1],n));i.setCenterAndRadius(r,Math.sqrt(o),this.geometryLayout_);const s=(0,l.getUserProjection)();return s&&i.transform(n,s),i};else{let e;"Point"===t?e=T.Z:"LineString"===t?e=C.Z:"Polygon"===t&&(e=R.ZP),n=function(n,i,r){return i?"Polygon"===t?n[0].length?i.setCoordinates([n[0].concat([n[0][0]])],this.geometryLayout_):i.setCoordinates([],this.geometryLayout_):i.setCoordinates(n,this.geometryLayout_):i=new e(n,this.geometryLayout_),i}}}this.geometryFunction_=n,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new N.default({source:new A.default({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:$(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:_.rM,this.freehandCondition_,t.freehand?this.freehandCondition_=_.Bx:this.freehandCondition_=t.freehandCondition?t.freehandCondition:_.vY,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(P.Z.ACTIVE,this.updateState_)}setTrace(t){let e;e=t?!0===t?_.Bx:t:_.Fi,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===o.Z.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);let e=t.type===S.Z.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&t.type===S.Z.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===S.Z.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),n=!1):this.freehand_&&t.type===S.Z.POINTERDOWN?n=!1:e&&this.getPointerCount()<2?(n=t.type===S.Z.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===S.Z.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t)):t.type===S.Z.DBLCLICK&&(n=!1),super.handleEvent(t)&&n}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new O.Z(S.Z.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();const e=this.getMap(),n=e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),i=e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_]),r=(0,D.boundingExtent)([n,i]),o=this.traceSource_.getFeaturesInExtent(r);if(0===o.length)return;const s=function(t,e){const n=[];for(let i=0;i<e.length;++i)W(t,e[i].getGeometry(),n);return n}(t.coordinate,o);s.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:s,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const n=t.startIndex<=t.endIndex;n===t.startIndex<=e?n&&e>t.endIndex||!n&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(n&&e<t.endIndex||!n&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let n=0;if(t<e){const i=Math.ceil(t);let r=Math.floor(e);r===e&&(r-=1),n=r-i+1}else{const i=Math.floor(t);let r=Math.ceil(e);r===e&&(r+=1),n=i-r+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(t,e,n){if(e===n)return;const i=[];if(e<n){const r=Math.ceil(e);let o=Math.floor(n);o===n&&(o-=1);for(let e=r;e<=o;++e)i.push(B(t.coordinates,e))}else{const r=Math.floor(e);let o=Math.ceil(n);o===n&&(o+=1);for(let e=r;e>=o;--e)i.push(B(t.coordinates,e))}i.length&&this.appendCoordinates(i)}updateTrace_(t){const e=this.traceState_;if(!e.active)return;if(-1===e.targetIndex&&(0,k.TE)(e.startPx,t.pixel)<this.snapTolerance_)return;const n=function(t,e,n,i){const r=t[0],o=t[1];let s=1/0,a=-1,l=NaN;for(let t=0;t<e.targets.length;++t){const n=e.targets[t],i=n.coordinates;let u,c=1/0;for(let t=0;t<i.length-1;++t){const e=H(r,o,i[t],i[t+1]);e.squaredDistance<c&&(c=e.squaredDistance,u=t+e.along)}c<s&&(s=c,n.ring&&e.targetIndex===t&&(n.endIndex>n.startIndex?u<n.startIndex&&(u+=i.length):n.endIndex<n.startIndex&&u>n.startIndex&&(u-=i.length)),l=u,a=t)}const u=e.targets[a];let c=u.ring;if(e.targetIndex===a&&c){const t=J(u.coordinates,l),r=n.getPixelFromCoordinate(t);(0,k.TE)(r,e.startPx)>i&&(c=!1)}if(c){const t=u.coordinates,e=t.length,n=u.startIndex,i=l;if(n<i){const r=U(t,n,i);U(t,n,i-e)<r&&(l-=e)}else{const r=U(t,n,i);U(t,n,i+e)<r&&(l+=e)}}return q.index=a,q.endIndex=l,q}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==n.index){if(-1!==e.targetIndex){const t=e.targets[e.targetIndex];this.removeTracedCoordinates_(t.startIndex,t.endIndex)}const t=e.targets[n.index];this.addTracedCoordinates_(t,t.startIndex,n.endIndex)}else{const t=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(t,n.endIndex)}e.targetIndex=n.index;const i=e.targets[e.targetIndex];i.endIndex=n.endIndex;const r=J(i.coordinates,i.endIndex),o=this.getMap().getPixelFromCoordinate(r);t.coordinate=r,t.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(t){let e=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const n=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():this.freehand_||i&&"Point"!==this.mode_||(this.atFinish_(t.pixel,n)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,n=t.pixel,i=e[0]-n[0],r=e[1]-n[1],o=i*i+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}atFinish_(t,e){let n=!1;if(this.sketchFeature_){let i=!1,r=[this.finishCoordinate_];const o=this.mode_;if("Point"===o)n=!0;else if("Circle"===o)n=2===this.sketchCoords_.length;else if("LineString"===o)i=!e&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){const t=this.sketchCoords_;i=t[0].length>this.minPoints_,r=[t[0][0],t[0][t[0].length-2]],r=e?[t[0][0]]:[t[0][0],t[0][t[0].length-2]]}if(i){const e=this.getMap();for(let i=0,o=r.length;i<o;i++){const o=r[i],s=e.getPixelFromCoordinate(o),a=t[0]-s[0],l=t[1]-s[1],u=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(a*a+l*l)<=u,n){this.finishCoordinate_=o;break}}}}return n}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new w.default(new T.Z(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new w.default);const e=t.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new C.Z(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(t){const e=this.getMap().getView().getProjection(),n=(0,G.tP)(this.geometryLayout_);for(;t.length<n;)t.push(0);this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new w.default(new C.Z(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new w.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new Z(V,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),n=this.sketchFeature_.getGeometry(),i=e.getView().getProjection(),r=(0,G.tP)(this.geometryLayout_);let o,s;for(;t.length<r;)t.push(0);"Point"===this.mode_?s=this.sketchCoords_:"Polygon"===this.mode_?(o=this.sketchCoords_[0],s=o[o.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(o=this.sketchCoords_,s=o[o.length-1]),s[0]=t[0],s[1]=t[1],this.geometryFunction_(this.sketchCoords_,n,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),"Polygon"===n.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let i,r;const o=this.mode_;"LineString"===o||"Circle"===o?(this.finishCoordinate_=t.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():i=!0),r.push(t.slice()),this.geometryFunction_(r,e,n)):"Polygon"===o&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():i=!0),r.push(t.slice()),i&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,e,n)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),i&&this.finishDrawing()}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i=this.mode_;for(let r=0;r<t;++r){let t;if("LineString"===i||"Circle"===i){if(t=this.sketchCoords_,t.splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();const e=this.finishCoordinate_.slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}this.geometryFunction_(t,e,n),"Polygon"===e.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if("Polygon"===i){t=this.sketchCoords_[0],t.splice(-2,1);const i=this.sketchLine_.getGeometry();if(t.length>=2){const e=t[t.length-2].slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}i.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,n)}if(1===t.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const n=t.getGeometry(),i=this.getMap().getView().getProjection();"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,n,i)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,n,i),e=n.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new L.Z([e])):"MultiLineString"===this.type_?t.setGeometry(new I.Z([e])):"MultiPolygon"===this.type_&&t.setGeometry(new M.Z([e])),this.dispatchEvent(new Z("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new Z("drawabort",t))}appendCoordinates(t){const e=this.mode_,n=!this.sketchFeature_;let i;if(n&&this.startDrawing_(t[0]),"LineString"===e||"Circle"===e)i=this.sketchCoords_;else{if("Polygon"!==e)return;i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&i.shift(),i.pop();for(let e=0;e<t.length;e++)this.addToDrawing_(t[e]);const r=t[t.length-1];this.addToDrawing_(r),this.modifyDrawing_(r)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new w.default(new T.Z(n)),this.updateSketchFeatures_(),this.dispatchEvent(new Z(V,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function $(){const t=(0,F.createEditingStyle)();return function(e,n){return t[e.getGeometry().getType()]}}const Q=K;class tt extends r.ZP{constructor(t){super("extentchanged"),this.extent=t}}class et extends y.Z{constructor(t){super(t=t||{}),this.on,this.once,this.un,this.condition_=t.condition?t.condition:_.Bx,this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,t||(t={}),this.extentOverlay_=new N.default({source:new A.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:nt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new N.default({source:new A.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:it(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&this.setExtent(t.extent)}snapToVertex_(t,e){const n=e.getCoordinateFromPixelInternal(t),i=function(t,e){return(0,k.Bs)(n,t)-(0,k.Bs)(n,e)},r=this.getExtentInternal();if(r){const o=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);o.sort(i);const s=o[0];let a=(0,k.oL)(n,s);const l=e.getPixelFromCoordinateInternal(a);if((0,k.TE)(t,l)<=this.pixelTolerance_){const t=e.getPixelFromCoordinateInternal(s[0]),n=e.getPixelFromCoordinateInternal(s[1]),i=(0,k.bI)(l,t),r=(0,k.bI)(l,n),o=Math.sqrt(Math.min(i,r));return this.snappedToVertex_=o<=this.pixelTolerance_,this.snappedToVertex_&&(a=i>r?s[1]:s[0]),a}}return null}handlePointerMove_(t){const e=t.pixel,n=t.map;let i=this.snapToVertex_(e,n);i||(i=n.getCoordinateFromPixelInternal(e)),this.createOrUpdatePointerFeature_(i)}createOrUpdateExtentFeature_(t){let e=this.extentFeature_;return e?t?e.setGeometry((0,R.oJ)(t)):e.setGeometry(void 0):(e=t?new w.default((0,R.oJ)(t)):new w.default({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e}createOrUpdatePointerFeature_(t){let e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new w.default(new T.Z(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e)),e}handleEvent(t){return!t.originalEvent||!this.condition_(t)||(t.type!=S.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),super.handleEvent(t),!1)}handleDownEvent(t){const e=t.pixel,n=t.map,i=this.getExtentInternal();let r=this.snapToVertex_(e,n);const o=function(t){let e=null,n=null;return t[0]==i[0]?e=i[2]:t[0]==i[2]&&(e=i[0]),t[1]==i[1]?n=i[3]:t[1]==i[3]&&(n=i[1]),null!==e&&null!==n?[e,n]:null};if(r&&i){const t=r[0]==i[0]||r[0]==i[2]?r[0]:null,e=r[1]==i[1]||r[1]==i[3]?r[1]:null;null!==t&&null!==e?this.pointerHandler_=rt(o(r)):null!==t?this.pointerHandler_=ot(o([t,i[1]]),o([t,i[3]])):null!==e&&(this.pointerHandler_=ot(o([i[0],e]),o([i[2],e])))}else r=n.getCoordinateFromPixelInternal(e),this.setExtent([r[0],r[1],r[0],r[1]]),this.pointerHandler_=rt(r);return!0}handleDragEvent(t){if(this.pointerHandler_){const e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}}handleUpEvent(t){this.pointerHandler_=null;const e=this.getExtentInternal();return e&&0!==(0,D.getArea)(e)||this.setExtent(null),!1}setMap(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),super.setMap(t)}getExtent(){return(0,l.toUserExtent)(this.getExtentInternal(),this.getMap().getView().getProjection())}getExtentInternal(){return this.extent_}setExtent(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new tt(this.extent_))}}function nt(){const t=(0,F.createEditingStyle)();return function(e,n){return t.Polygon}}function it(){const t=(0,F.createEditingStyle)();return function(e,n){return t.Point}}function rt(t){return function(e){return(0,D.boundingExtent)([t,e])}}function ot(t,e){return t[0]==e[0]?function(n){return(0,D.boundingExtent)([t,[n[0],e[1]]])}:t[1]==e[1]?function(n){return(0,D.boundingExtent)([t,[e[0],n[1]]])}:null}const st=et;var at=n(58789),lt=n(834),ut=n(32126);function ct(t){return parseFloat(t)}function ht(t){return function(t){return(0,j.FH)(t,5)}(t).toString()}function pt(t,e){return!isNaN(t)&&t!==ct(ht(e))}class dt extends s.ZP{constructor(t){let e;super(),e=!0===(t=Object.assign({animate:!0,replace:!1,prefix:""},t||{})).animate?{duration:250}:t.animate?t.animate:null,this.animationOptions_=e,this.replace_=t.replace,this.prefix_=t.prefix,this.listenerKeys_=[],this.initial_=!0,this.updateState_=this.updateState_.bind(this)}getParamName_(t){return this.prefix_?this.prefix_+t:t}get_(t,e){return t.get(this.getParamName_(e))}set_(t,e,n){t.set(this.getParamName_(e),n)}delete_(t,e){t.delete(this.getParamName_(e))}setMap(t){const e=this.getMap();super.setMap(t),t!==e&&(e&&this.unregisterListeners_(e),t&&(this.initial_=!0,this.updateState_(),this.registerListeners_(t)))}registerListeners_(t){this.listenerKeys_.push((0,u.listen)(t,ut.default.MOVEEND,this.updateUrl_,this),(0,u.listen)(t.getLayerGroup(),o.Z.CHANGE,this.updateUrl_,this),(0,u.listen)(t,"change:layergroup",this.handleChangeLayerGroup_,this)),this.replace_||addEventListener("popstate",this.updateState_)}unregisterListeners_(t){for(let t=0,e=this.listenerKeys_.length;t<e;++t)(0,u.unlistenByKey)(this.listenerKeys_[t]);this.listenerKeys_.length=0,this.replace_||removeEventListener("popstate",this.updateState_);const e=new URL(window.location.href),n=e.searchParams;this.delete_(n,"x"),this.delete_(n,"y"),this.delete_(n,"z"),this.delete_(n,"r"),this.delete_(n,"l"),window.history.replaceState(null,"",e)}handleChangeLayerGroup_(){const t=this.getMap();t&&(this.unregisterListeners_(t),this.registerListeners_(t),this.initial_=!0,this.updateUrl_())}updateState_(){const t=this.getMap();if(!t)return;const e=t.getView();if(!e)return;const n=new URL(window.location.href).searchParams;let i=!1;const r={},o=ct(this.get_(n,"z"));pt(o,e.getZoom())&&(i=!0,r.zoom=o);const s=ct(this.get_(n,"r"));pt(s,e.getRotation())&&(i=!0,r.rotation=s);const a=[ct(this.get_(n,"x")),ct(this.get_(n,"y"))];var l,u;l=a,u=e.getCenter(),(pt(l[0],u[0])||pt(l[1],u[1]))&&(i=!0,r.center=a),i&&(!this.initial_&&this.animationOptions_?e.animate(Object.assign(r,this.animationOptions_)):(r.center&&e.setCenter(r.center),"zoom"in r&&e.setZoom(r.zoom),"rotation"in r&&e.setRotation(r.rotation)));const c=t.getAllLayers(),h=this.get_(n,"l");if(h&&h.length===c.length)for(let t=0,e=c.length;t<e;++t){const e=parseInt(h[t]);if(!isNaN(e)){const n=Boolean(e),i=c[t];i.getVisible()!==n&&i.setVisible(n)}}}updateUrl_(){const t=this.getMap();if(!t)return;const e=t.getView();if(!e)return;const n=this.initial_;this.initial_=!1;const i=e.getCenter(),r=e.getZoom(),o=e.getRotation(),s=t.getAllLayers(),a=new Array(s.length);for(let t=0,e=s.length;t<e;++t)a[t]=s[t].getVisible()?"1":"0";const l=new URL(window.location.href),u=l.searchParams;this.set_(u,"x",ht(i[0])),this.set_(u,"y",ht(i[1])),this.set_(u,"z",ht(r)),this.set_(u,"r",ht(o)),this.set_(u,"l",a.join("")),l.href!==window.location.href&&(n||this.replace_?window.history.replaceState(null,"",l):window.history.pushState(null,"",l))}}const ft=dt;var gt=n(78714),yt=n(42071),_t=n(39781),mt=n(22796),vt=n(65537),bt=n(74187);const xt=[0,0,0,0],wt=[],Et="modifyend";class Pt extends r.ZP{constructor(t,e,n){super(t),this.features=e,this.mapBrowserEvent=n}}class Ct extends y.Z{constructor(t){let e;if(super(t),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:_.Xp,this.defaultDeleteCondition_=function(t){return(0,_.Ko)(t)&&(0,_.Kf)(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:_.Bx,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new _t.Z,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new N.default({source:new A.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:Lt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,t.features?e=t.features:t.source&&(this.source_=t.source,e=new gt.Z(this.source_.getFeatures()),this.source_.addEventListener(mt.Z.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(mt.Z.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!e)throw new Error("The modify interaction requires features, a source or a layer");t.hitDetection&&(this.hitDetection_=t.hitDetection),this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(yt.Z.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(yt.Z.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===t.snapToPointer?!this.hitDetection_:t.snapToPointer}addFeature_(t){const e=t.getGeometry();if(e){const n=this.SEGMENT_WRITERS_[e.getType()];n&&n(t,e)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(o.Z.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new gt.Z;const n=this.featuresBeingModified_.getArray();for(let t=0,i=e.length;t<i;++t){const i=e[t];for(let t=0,e=i.length;t<e;++t){const e=i[t].feature;e&&!n.includes(e)&&this.featuresBeingModified_.push(e)}}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new Pt("modifystart",this.featuresBeingModified_,t))}}removeFeature_(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(o.Z.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){const e=this.rBush_,n=[];e.forEach((function(e){t===e.feature&&n.push(e)}));for(let t=n.length-1;t>=0;--t){const i=n[t];for(let t=this.dragSegments_.length-1;t>=0;--t)this.dragSegments_[t][0]===i&&this.dragSegments_.splice(t,1);e.remove(i)}}setActive(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&&this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&&this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,e){const n=e.getCoordinates(),i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)}writeMultiPointGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i],o={feature:t,geometry:e,depth:[i],index:i,segment:[r,r]};this.rBush_.insert(e.getExtent(),o)}}writeLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length-1;i<r;++i){const r=n.slice(i,i+2),o={feature:t,geometry:e,index:i,segment:r};this.rBush_.insert((0,D.boundingExtent)(r),o)}}writeMultiLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let n=0,o=r.length-1;n<o;++n){const o=r.slice(n,n+2),s={feature:t,geometry:e,depth:[i],index:n,segment:o};this.rBush_.insert((0,D.boundingExtent)(o),s)}}}writePolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let n=0,o=r.length-1;n<o;++n){const o=r.slice(n,n+2),s={feature:t,geometry:e,depth:[i],index:n,segment:o};this.rBush_.insert((0,D.boundingExtent)(o),s)}}}writeMultiPolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let n=0,o=r.length;n<o;++n){const o=r[n];for(let r=0,s=o.length-1;r<s;++r){const s=o.slice(r,r+2),a={feature:t,geometry:e,depth:[n,i],index:r,segment:s};this.rBush_.insert((0,D.boundingExtent)(s),a)}}}}writeCircleGeometry_(t,e){const n=e.getCenter(),i={feature:t,geometry:e,index:0,segment:[n,n]},r={feature:t,geometry:e,index:1,segment:[n,n]},o=[i,r];i.featureSegments=o,r.featureSegments=o,this.rBush_.insert((0,D.createOrUpdateFromCoordinate)(n),i);let s=e;const a=(0,l.getUserProjection)();if(a&&this.getMap()){const t=this.getMap().getView().getProjection();s=s.clone().transform(a,t),s=(0,R.Bb)(s).transform(t,a)}this.rBush_.insert(s.getExtent(),r)}writeGeometryCollectionGeometry_(t,e){const n=e.getGeometriesArray();for(let e=0;e<n.length;++e){const i=n[e];(0,this.SEGMENT_WRITERS_[i.getType()])(t,i)}}createOrUpdateVertexFeature_(t,e,n){let i=this.vertexFeature_;return i?i.getGeometry().setCoordinates(t):(i=new w.default(new T.Z(t)),this.vertexFeature_=i,this.overlay_.getSource().addFeature(i)),i.set("features",e),i.set("geometries",n),i}handleEvent(t){if(!t.originalEvent)return!0;let e;return this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=S.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=S.Z.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==S.Z.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&&!e}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);const e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],n=[],i=[];for(let r=0,o=this.dragSegments_.length;r<o;++r){const o=this.dragSegments_[r],s=o[0],a=s.feature;n.includes(a)||n.push(a);const u=s.geometry;i.includes(u)||i.push(u);const c=s.depth;let h;const p=s.segment,d=o[1];for(;e.length<u.getStride();)e.push(p[d][e.length]);switch(u.getType()){case"Point":h=e,p[0]=e,p[1]=e;break;case"MultiPoint":h=u.getCoordinates(),h[s.index]=e,p[0]=e,p[1]=e;break;case"LineString":h=u.getCoordinates(),h[s.index+d]=e,p[d]=e;break;case"MultiLineString":case"Polygon":h=u.getCoordinates(),h[c[0]][s.index+d]=e,p[d]=e;break;case"MultiPolygon":h=u.getCoordinates(),h[c[1]][c[0]][s.index+d]=e,p[d]=e;break;case"Circle":if(p[0]=e,p[1]=e,0===s.index)this.changingFeature_=!0,u.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;const n=t.map.getView().getProjection();let i=(0,k.TE)((0,l.fromUserCoordinate)(u.getCenter(),n),(0,l.fromUserCoordinate)(e,n));const r=(0,l.getUserProjection)();if(r){const t=u.clone().transform(r,n);t.setRadius(i),i=t.transform(n,r).getRadius()}u.setRadius(i),this.changingFeature_=!1}}h&&this.setGeometryCoordinates_(u,h)}this.createOrUpdateVertexFeature_(e,n,i)}handleDownEvent(t){if(!this.condition_(t))return!1;const e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const n=this.vertexFeature_;if(n){const i=t.map.getView().getProjection(),r=[],o=n.getGeometry().getCoordinates(),s=(0,D.boundingExtent)([o]),a=this.rBush_.getInExtent(s),l={};a.sort(Ot);for(let n=0,s=a.length;n<s;++n){const s=a[n],u=s.segment;let c=(0,bt.sq)(s.geometry);const h=s.depth;if(h&&(c+="-"+h.join("-")),l[c]||(l[c]=new Array(2)),"Circle"!==s.geometry.getType()||1!==s.index)if(!(0,k.fS)(u[0],o)||l[c][0])if(!(0,k.fS)(u[1],o)||l[c][1])(0,bt.sq)(u)in this.vertexSegments_&&!l[c][0]&&!l[c][1]&&this.insertVertexCondition_(t)&&r.push(s);else{if(l[c][0]&&0===l[c][0].index){let t=s.geometry.getCoordinates();switch(s.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":t=t[h[1]];case"Polygon":if(s.index!==t[h[0]].length-2)continue}}this.dragSegments_.push([s,1]),l[c][1]=s}else this.dragSegments_.push([s,0]),l[c][0]=s;else{const t=It(e,s,i);(0,k.fS)(t,o)&&!l[c][0]&&(this.dragSegments_.push([s,0]),l[c][0]=s)}}r.length&&this.willModifyFeatures_(t,[r]);for(let t=r.length-1;t>=0;--t)this.insertVertex_(r[t],o)}return!!this.vertexFeature_}handleUpEvent(t){for(let e=this.dragSegments_.length-1;e>=0;--e){const n=this.dragSegments_[e][0],i=n.geometry;if("Circle"===i.getType()){const e=i.getCenter(),r=n.featureSegments[0],o=n.featureSegments[1];r.segment[0]=e,r.segment[1]=e,o.segment[0]=e,o.segment[1]=e,this.rBush_.update((0,D.createOrUpdateFromCoordinate)(e),r);let s=i;const a=(0,l.getUserProjection)();if(a){const e=t.map.getView().getProjection();s=s.clone().transform(a,e),s=(0,R.Bb)(s).transform(e,a)}this.rBush_.update(s.getExtent(),o)}else this.rBush_.update((0,D.boundingExtent)(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new Pt(Et,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)}handlePointerAtPixel_(t,e,n){const i=n||e.getCoordinateFromPixel(t),r=e.getView().getProjection(),o=function(t,e){return St(i,t,r)-St(i,e,r)};let s,a;if(this.hitDetection_){const n="object"==typeof this.hitDetection_?t=>t===this.hitDetection_:void 0;e.forEachFeatureAtPixel(t,((t,e,n)=>{if("Point"===(n=n||t.getGeometry()).getType()&&this.features_.getArray().includes(t)){a=n;const e=n.getFlatCoordinates().slice(0,2);s=[{feature:t,geometry:n,segment:[e,e]}]}return!0}),{layerFilter:n})}if(!s){const t=(0,l.fromUserExtent)((0,D.createOrUpdateFromCoordinate)(i,xt),r),n=e.getView().getResolution()*this.pixelTolerance_,o=(0,l.toUserExtent)((0,D.buffer)(t,n,xt),r);s=this.rBush_.getInExtent(o)}if(s&&s.length>0){const n=s.sort(o)[0],l=n.segment;let u=It(i,n,r);const c=e.getPixelFromCoordinate(u);let h=(0,k.TE)(t,c);if(a||h<=this.pixelTolerance_){const t={};if(t[(0,bt.sq)(l)]=!0,this.snapToPointer_||(this.delta_[0]=u[0]-i[0],this.delta_[1]=u[1]-i[1]),"Circle"===n.geometry.getType()&&1===n.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u,[n.feature],[n.geometry]);else{const i=e.getPixelFromCoordinate(l[0]),r=e.getPixelFromCoordinate(l[1]),o=(0,k.bI)(c,i),a=(0,k.bI)(c,r);h=Math.sqrt(Math.min(o,a)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(u=o>a?l[1]:l[0]),this.createOrUpdateVertexFeature_(u,[n.feature],[n.geometry]);const p={};p[(0,bt.sq)(n.geometry)]=!0;for(let e=1,n=s.length;e<n;++e){const n=s[e].segment;if(!((0,k.fS)(l[0],n[0])&&(0,k.fS)(l[1],n[1])||(0,k.fS)(l[0],n[1])&&(0,k.fS)(l[1],n[0])))break;{const i=(0,bt.sq)(s[e].geometry);i in p||(p[i]=!0,t[(0,bt.sq)(n)]=!0)}}}return void(this.vertexSegments_=t)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,e){const n=t.segment,i=t.feature,r=t.geometry,o=t.depth,s=t.index;let a;for(;e.length<r.getStride();)e.push(0);switch(r.getType()){case"MultiLineString":case"Polygon":a=r.getCoordinates(),a[o[0]].splice(s+1,0,e);break;case"MultiPolygon":a=r.getCoordinates(),a[o[1]][o[0]].splice(s+1,0,e);break;case"LineString":a=r.getCoordinates(),a.splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(r,a);const l=this.rBush_;l.remove(t),this.updateSegmentIndices_(r,s,o,1);const u={segment:[n[0],e],feature:i,geometry:r,depth:o,index:s};l.insert((0,D.boundingExtent)(u.segment),u),this.dragSegments_.push([u,1]);const c={segment:[e,n[1]],feature:i,geometry:r,depth:o,index:s+1};l.insert((0,D.boundingExtent)(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=S.Z.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);const e=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new Pt(Et,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1}removeVertex_(){const t=this.dragSegments_,e={};let n,i,r,o,s,a,l,u,c,h,p,d=!1;for(s=t.length-1;s>=0;--s)r=t[s],h=r[0],p=(0,bt.sq)(h.feature),h.depth&&(p+="-"+h.depth.join("-")),p in e||(e[p]={}),0===r[1]?(e[p].right=h,e[p].index=h.index):1==r[1]&&(e[p].left=h,e[p].index=h.index+1);for(p in e){switch(c=e[p].right,l=e[p].left,a=e[p].index,u=a-1,h=void 0!==l?l:c,u<0&&(u=0),o=h.geometry,i=o.getCoordinates(),n=i,d=!1,o.getType()){case"MultiLineString":i[h.depth[0]].length>2&&(i[h.depth[0]].splice(a,1),d=!0);break;case"LineString":i.length>2&&(i.splice(a,1),d=!0);break;case"MultiPolygon":n=n[h.depth[1]];case"Polygon":n=n[h.depth[0]],n.length>4&&(a==n.length-1&&(a=0),n.splice(a,1),d=!0,0===a&&(n.pop(),n.push(n[0]),u=n.length-1))}if(d){this.setGeometryCoordinates_(o,i);const e=[];if(void 0!==l&&(this.rBush_.remove(l),e.push(l.segment[0])),void 0!==c&&(this.rBush_.remove(c),e.push(c.segment[1])),void 0!==l&&void 0!==c){const t={depth:h.depth,feature:h.feature,geometry:h.geometry,index:u,segment:e};this.rBush_.insert((0,D.boundingExtent)(t.segment),t)}this.updateSegmentIndices_(o,a,h.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return d}setGeometryCoordinates_(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1}updateSegmentIndices_(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),(function(r){r.geometry===t&&(void 0===n||void 0===r.depth||(0,vt.fS)(r.depth,n))&&r.index>e&&(r.index+=i)}))}}function Ot(t,e){return t.index-e.index}function St(t,e,n){const i=e.geometry;if("Circle"===i.getType()){let r=i;if(1===e.index){const e=(0,l.getUserProjection)();e&&(r=r.clone().transform(e,n));const i=(0,k.bI)(r.getCenter(),(0,l.fromUserCoordinate)(t,n)),o=Math.sqrt(i)-r.getRadius();return o*o}}const r=(0,l.fromUserCoordinate)(t,n);return wt[0]=(0,l.fromUserCoordinate)(e.segment[0],n),wt[1]=(0,l.fromUserCoordinate)(e.segment[1],n),(0,k.Bs)(r,wt)}function It(t,e,n){const i=e.geometry;if("Circle"===i.getType()&&1===e.index){let e=i;const r=(0,l.getUserProjection)();return r&&(e=e.clone().transform(r,n)),(0,l.toUserCoordinate)(e.getClosestPoint((0,l.fromUserCoordinate)(t,n)),n)}const r=(0,l.fromUserCoordinate)(t,n);return wt[0]=(0,l.fromUserCoordinate)(e.segment[0],n),wt[1]=(0,l.fromUserCoordinate)(e.segment[1],n),(0,l.toUserCoordinate)((0,k.oL)(r,wt),n)}function Lt(){const t=(0,F.createEditingStyle)();return function(e,n){return t.Point}}const Mt=Ct;var Tt=n(20686),Rt=n(13205),Nt=n(14474),At=n(69374);class Dt extends r.ZP{constructor(t,e,n,i){super(t),this.selected=e,this.deselected=n,this.mapBrowserEvent=i}}const jt={};class Ft extends s.ZP{constructor(t){let e;if(super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:_.Kf,this.addCondition_=t.addCondition?t.addCondition:_.Fi,this.removeCondition_=t.removeCondition?t.removeCondition:_.Fi,this.toggleCondition_=t.toggleCondition?t.toggleCondition:_.vY,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:a.uX,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:function(){const t=(0,F.createEditingStyle)();return(0,vt.l7)(t.Polygon,t.LineString),(0,vt.l7)(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),this.features_=t.features||new gt.Z,t.layers)if("function"==typeof t.layers)e=t.layers;else{const n=t.layers;e=function(t){return n.includes(t)}}else e=a.uX;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[(0,bt.sq)(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[(0,bt.sq)(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(yt.Z.ADD,this.boundAddFeature_),this.features_.addEventListener(yt.Z.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(yt.Z.ADD,this.boundAddFeature_),this.features_.removeEventListener(yt.Z.REMOVE,this.boundRemoveFeature_))}addFeature_(t){const e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){const t=this.getMap().getAllLayers().find((function(t){if(t instanceof N.default&&t.getSource()&&t.getSource().hasFeature(e))return t}));t&&this.addFeatureLayerAssociation_(e,t)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const e=(0,bt.sq)(t);e in jt||(jt[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const e=this.getMap().getInteractions().getArray();for(let n=e.length-1;n>=0;--n){const i=e[n];if(i!==this&&i instanceof Ft&&i.getStyle()&&-1!==i.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(i.getStyle())}const n=(0,bt.sq)(t);t.setStyle(jt[n]),delete jt[n]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[(0,bt.sq)(t)]}handleEvent(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),n=this.removeCondition_(t),i=this.toggleCondition_(t),r=!e&&!n&&!i,o=t.map,s=this.getFeatures(),a=[],l=[];if(r){(0,At.Z)(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(t instanceof w.default&&this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),l.push(t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=s.getLength()-1;t>=0;--t){const e=s.item(t),n=l.indexOf(e);n>-1?l.splice(n,1):(s.remove(e),a.push(e))}0!==l.length&&s.extend(l)}else{o.forEachFeatureAtPixel(t.pixel,function(t,r){if(t instanceof w.default&&this.filter_(t,r))return!e&&!i||s.getArray().includes(t)?(n||i)&&s.getArray().includes(t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(this.addFeatureLayerAssociation_(t,r),l.push(t)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.length-1;t>=0;--t)s.remove(a[t]);s.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new Dt("select",l,a,t)),!0}}const kt=Ft;function Gt(t){return t.feature?t.feature:t.element?t.element:void 0}const Vt=[];class Zt extends y.Z{constructor(t){const e=t=t||{};e.handleDownEvent||(e.handleDownEvent=a.uX),e.stopDown||(e.stopDown=a.Dv),super(e),this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.rBush_=new _t.Z,this.GEOMETRY_SEGMENTERS_={Point:this.segmentPointGeometry_.bind(this),LineString:this.segmentLineStringGeometry_.bind(this),LinearRing:this.segmentLineStringGeometry_.bind(this),Polygon:this.segmentPolygonGeometry_.bind(this),MultiPoint:this.segmentMultiPointGeometry_.bind(this),MultiLineString:this.segmentMultiLineStringGeometry_.bind(this),MultiPolygon:this.segmentMultiPolygonGeometry_.bind(this),GeometryCollection:this.segmentGeometryCollectionGeometry_.bind(this),Circle:this.segmentCircleGeometry_.bind(this)}}addFeature(t,e){e=void 0===e||e;const n=(0,bt.sq)(t),i=t.getGeometry();if(i){const e=this.GEOMETRY_SEGMENTERS_[i.getType()];if(e){this.indexedFeaturesExtents_[n]=i.getExtent((0,D.createEmpty)());const r=[];if(e(r,i),1===r.length)this.rBush_.insert((0,D.boundingExtent)(r[0]),{feature:t,segment:r[0]});else if(r.length>1){const e=r.map((t=>(0,D.boundingExtent)(t))),n=r.map((e=>({feature:t,segment:e})));this.rBush_.load(e,n)}}}e&&(this.featureChangeListenerKeys_[n]=(0,u.listen)(t,o.Z.CHANGE,this.handleFeatureChange_,this))}forEachFeatureAdd_(t){this.addFeature(t)}forEachFeatureRemove_(t){this.removeFeature(t)}getFeatures_(){let t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t}handleEvent(t){const e=this.snapTo(t.pixel,t.coordinate,t.map);return e&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel),super.handleEvent(t)}handleFeatureAdd_(t){const e=Gt(t);this.addFeature(e)}handleFeatureRemove_(t){const e=Gt(t);this.removeFeature(e)}handleFeatureChange_(t){const e=t.target;if(this.handlingDownUpSequence){const t=(0,bt.sq)(e);t in this.pendingFeatures_||(this.pendingFeatures_[t]=e)}else this.updateFeature_(e)}handleUpEvent(t){const e=Object.values(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(t,e){const n=void 0===e||e,i=(0,bt.sq)(t),r=this.indexedFeaturesExtents_[i];if(r){const e=this.rBush_,n=[];e.forEachInExtent(r,(function(e){t===e.feature&&n.push(e)}));for(let t=n.length-1;t>=0;--t)e.remove(n[t])}n&&((0,u.unlistenByKey)(this.featureChangeListenerKeys_[i]),delete this.featureChangeListenerKeys_[i])}setMap(t){const e=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();e&&(n.forEach(u.unlistenByKey),n.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),super.setMap(t),t&&(this.features_?n.push((0,u.listen)(this.features_,yt.Z.ADD,this.handleFeatureAdd_,this),(0,u.listen)(this.features_,yt.Z.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push((0,u.listen)(this.source_,mt.Z.ADDFEATURE,this.handleFeatureAdd_,this),(0,u.listen)(this.source_,mt.Z.REMOVEFEATURE,this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))}snapTo(t,e,n){const i=n.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r=n.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=(0,D.boundingExtent)([i,r]),s=this.rBush_.getInExtent(o),a=s.length;if(0===a)return null;const u=n.getView().getProjection(),c=(0,l.fromUserCoordinate)(e,u);let h,p=1/0;const d=this.pixelTolerance_*this.pixelTolerance_,f=()=>{if(h){const e=n.getPixelFromCoordinate(h);if((0,k.bI)(t,e)<=d)return{vertex:h,vertexPixel:[Math.round(e[0]),Math.round(e[1])]}}return null};if(this.vertex_){for(let t=0;t<a;++t){const e=s[t];"Circle"!==e.feature.getGeometry().getType()&&e.segment.forEach((t=>{const e=(0,l.fromUserCoordinate)(t,u),n=(0,k.bI)(c,e);n<p&&(h=t,p=n)}))}const t=f();if(t)return t}if(this.edge_){for(let t=0;t<a;++t){let e=null;const n=s[t];if("Circle"===n.feature.getGeometry().getType()){let t=n.feature.getGeometry();const i=(0,l.getUserProjection)();i&&(t=t.clone().transform(i,u)),e=(0,l.toUserCoordinate)((0,k.Ed)(c,t),u)}else{const[t,i]=n.segment;i&&(Vt[0]=(0,l.fromUserCoordinate)(t,u),Vt[1]=(0,l.fromUserCoordinate)(i,u),e=(0,k.oL)(c,Vt))}if(e){const t=(0,k.bI)(c,e);t<p&&(h=e,p=t)}}const t=f();if(t)return t}return null}updateFeature_(t){this.removeFeature(t,!1),this.addFeature(t,!1)}segmentCircleGeometry_(t,e){const n=this.getMap().getView().getProjection();let i=e;const r=(0,l.getUserProjection)();r&&(i=i.clone().transform(r,n));const o=(0,R.Bb)(i);r&&o.transform(n,r);const s=o.getCoordinates()[0];for(let e=0,n=s.length-1;e<n;++e)t.push(s.slice(e,e+2))}segmentGeometryCollectionGeometry_(t,e){const n=e.getGeometriesArray();for(let e=0;e<n.length;++e){const i=this.GEOMETRY_SEGMENTERS_[n[e].getType()];i&&i(t,n[e])}}segmentLineStringGeometry_(t,e){const n=e.getCoordinates();for(let e=0,i=n.length-1;e<i;++e)t.push(n.slice(e,e+2))}segmentMultiLineStringGeometry_(t,e){const n=e.getCoordinates();for(let e=0,i=n.length;e<i;++e){const i=n[e];for(let e=0,n=i.length-1;e<n;++e)t.push(i.slice(e,e+2))}}segmentMultiPointGeometry_(t,e){e.getCoordinates().forEach((e=>{t.push([e])}))}segmentMultiPolygonGeometry_(t,e){const n=e.getCoordinates();for(let e=0,i=n.length;e<i;++e){const i=n[e];for(let e=0,n=i.length;e<n;++e){const n=i[e];for(let e=0,i=n.length-1;e<i;++e)t.push(n.slice(e,e+2))}}}segmentPointGeometry_(t,e){t.push([e.getCoordinates()])}segmentPolygonGeometry_(t,e){const n=e.getCoordinates();for(let e=0,i=n.length;e<i;++e){const i=n[e];for(let e=0,n=i.length-1;e<n;++e)t.push(i.slice(e,e+2))}}}const zt=Zt;class Bt extends r.ZP{constructor(t,e,n,i,r){super(t),this.features=e,this.coordinate=n,this.startCoordinate=i,this.mapBrowserEvent=r}}class Ut extends y.Z{constructor(t){let e;if(super(t=t||{}),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==t.features?t.features:null,t.layers&&!this.features_)if("function"==typeof t.layers)e=t.layers;else{const n=t.layers;e=function(t){return n.includes(t)}}else e=a.uX;this.layerFilter_=e,this.filter_=t.filter&&!this.features_?t.filter:a.uX,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.condition_=t.condition?t.condition:_.Bx,this.lastFeature_=null,this.addChangeListener(P.Z.ACTIVE,this.handleActiveChanged_)}handleDownEvent(t){if(!t.originalEvent||!this.condition_(t))return!1;if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);const e=this.features_||new gt.Z([this.lastFeature_]);return this.dispatchEvent(new Bt("translatestart",e,t.coordinate,this.startCoordinate_,t)),!0}return!1}handleUpEvent(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);const e=this.features_||new gt.Z([this.lastFeature_]);return this.dispatchEvent(new Bt("translateend",e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1}handleDragEvent(t){if(this.lastCoordinate_){const e=t.coordinate,n=e[0]-this.lastCoordinate_[0],i=e[1]-this.lastCoordinate_[1],r=this.features_||new gt.Z([this.lastFeature_]);r.forEach((function(t){const e=t.getGeometry();e.translate(n,i),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new Bt("translating",r,e,this.startCoordinate_,t))}}handleMoveEvent(t){const e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||this.features_.getArray().includes(t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(t){this.hitTolerance_=t}setMap(t){const e=this.getMap();super.setMap(t),this.updateState_(e)}handleActiveChanged_(){this.updateState_(null)}updateState_(t){let e=this.getMap();const n=this.getActive();e&&n||(e=e||t,!e)||e.getViewport().classList.remove("ol-grab","ol-grabbing")}}const Wt=Ut;var qt=n(19451)},13522:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(47182),r=n(92217);class o extends i.ZP{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==r.Z.DBLCLICK){const n=t.originalEvent,r=t.map,o=t.coordinate,s=n.shiftKey?-this.delta_:this.delta_,a=r.getView();(0,i.FW)(a,s,o,this.duration_),n.preventDefault(),e=!0}return!e}}const s=o},11518:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var i=n(291),r=n(14515),o=n(55431),s=n(2033);class a extends o.Z{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new s.ZP([n])}getGeometry(){return this.geometry_}}const l=a;var u=n(98683);class c extends i.ZP{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class h extends r.Z{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new l(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:u.v8,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new c("boxdrag",t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new c(e?"boxend":"boxcancel",t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new c("boxstart",t.coordinate,t)),!0)}onBoxEnd(t){}}const p=h},63267:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>u});var i=n(14515),r=n(36885),o=n(98683),s=n(31015),a=n(76171);class l extends i.Z{constructor(t){super({stopDown:r.Dv}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:(0,o.$6)(o.rM,o.Xp);this.condition_=t.onFocusOnly?(0,o.$6)(o.yZ,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const e=this.targetPointers,n=(0,i.S)(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const e=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();(0,a.bA)(e,i.getResolution()),(0,a.U1)(e,i.getRotation()),i.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),o=e.getPixelFromCoordinateInternal(r),a=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(i),o[1]-t*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(a),duration:500,easing:s.Vv})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const u=l},32857:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(14515),r=n(36885),o=n(98683),s=n(60828);class a extends i.Z{constructor(t){t=t||{},super({stopDown:r.Dv}),this.condition_=t.condition?t.condition:o.aj,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!(0,o.QL)(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===s.h$)return;const i=e.getSize(),r=t.pixel,a=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=a-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=a}handleUpEvent(t){return!(0,o.QL)(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!(0,o.QL)(t)&&(!(!(0,o.v8)(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}}const l=a},519:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(11518),r=n(31015),o=n(98683);class s extends i.Z{constructor(t){super({condition:(t=t||{}).condition?t.condition:o.vY,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let n=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(t),r=e.getResolution()/i;n=n.clone(),n.scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:r.Vv})}}const a=s},47182:(t,e,n)=>{"use strict";n.d(e,{Cv:()=>a,FW:()=>l,ZP:()=>u});var i=n(72971),r=n(54049),o=n(31015);class s extends i.Z{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(r.Z.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(r.Z.ACTIVE,t)}setMap(t){this.map_=t}}function a(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:o.GE,center:t.getConstrainedCenter(r)})}}function l(t,e,n,i){const r=t.getZoom();if(void 0===r)return;const s=t.getConstrainedZoom(r+e),a=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==i?i:250,easing:o.Vv})}const u=s},58789:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(85487),r=n(47182);var o=n(98683),s=n(76171);class a extends r.ZP{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return(0,o.rM)(t)&&(0,o.TN)(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==i.Z.KEYDOWN){const n=t.originalEvent,i=n.keyCode;if(this.condition_(t)&&(40==i||37==i||39==i||38==i)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,u=0;40==i?u=-a:37==i?l=-a:39==i?l=a:u=a;const c=[l,u];(0,s.U1)(c,o.getRotation()),(0,r.Cv)(o,c,this.duration_),n.preventDefault(),e=!0}}return!e}}const l=a},834:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(85487),r=n(47182),o=n(98683);class s extends r.ZP{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:o.TN,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==i.Z.KEYDOWN||t.type==i.Z.KEYPRESS){const n=t.originalEvent,i=n.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){const o=t.map,s=i=="+".charCodeAt(0)?this.delta_:-this.delta_,a=o.getView();(0,r.FW)(a,s,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}const a=s},20686:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(85487),r=n(47182),o=n(40177),s=n(98683),a=n(33983);class l extends r.ZP{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:s.Bx;this.condition_=t.onFocusOnly?(0,s.$6)(s.yZ,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==i.Z.WHEEL)return!0;const e=t.map,n=t.originalEvent;let r;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==i.Z.WHEEL&&(r=n.deltaY,o.V&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=o.MP),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),0===r)return!1;this.lastDelta_=r;const s=Date.now();void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=e.getView();if("trackpad"===this.mode_&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-(0,a.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),(0,r.FW)(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const u=l},13205:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(14515),r=n(36885),o=n(60828);class s extends i.Z{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=r.Dv),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=s;const a=t.map,l=a.getView();if(l.getConstraints().rotation===o.h$)return;const u=a.getViewport().getBoundingClientRect(),c=(0,i.S)(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(c),this.rotating_&&(a.render(),l.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const a=s},14474:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(14515),r=n(36885);class o extends i.Z{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=r.Dv),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],r=this.targetPointers[1],o=n.clientX-r.clientX,s=n.clientY-r.clientY,a=Math.sqrt(o*o+s*s);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,u=l.getView();1!=e&&(this.lastScaleDelta_=e);const c=l.getViewport().getBoundingClientRect(),h=(0,i.S)(this.targetPointers);h[0]-=c.left,h[1]-=c.top,this.anchor_=l.getCoordinateFromPixelInternal(h),l.render(),u.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const s=o},14515:(t,e,n)=>{"use strict";n.d(e,{S:()=>s,Z:()=>a});var i=n(47182),r=n(92217);class o extends i.ZP{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==r.Z.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==r.Z.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==r.Z.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==r.Z.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function s(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return[n/e,i/e]}const a=o},54049:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={ACTIVE:"active"}},19451:(t,e,n)=>{"use strict";n.r(e),n.d(e,{defaults:()=>d});var i=n(78714),r=n(13522),o=n(63267),s=n(32857),a=n(519),l=n(58789),u=n(834);var c=n(20686),h=n(13205),p=n(14474);function d(t){t=t||{};const e=new i.Z,n=new class{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new s.Z),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new r.Z({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new o.default({onFocusOnly:t.onFocusOnly,kinetic:n})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new h.Z),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new p.Z({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new l.Z),e.push(new u.Z({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new c.Z({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new a.Z({duration:t.zoomDuration})),e}},947:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(72971),r=n(71912),o=n(74187),s=n(99515),a=n(33983);class l extends i.Z{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[r.Z.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,s.h)("number"==typeof e[r.Z.OPACITY],64),e[r.Z.VISIBLE]=void 0===t.visible||t.visible,e[r.Z.Z_INDEX]=t.zIndex,e[r.Z.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[r.Z.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[r.Z.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[r.Z.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=(0,a.uZ)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return(0,o.O3)()}getLayerStatesArray(t){return(0,o.O3)()}getExtent(){return this.get(r.Z.EXTENT)}getMaxResolution(){return this.get(r.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(r.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(r.Z.MIN_ZOOM)}getMaxZoom(){return this.get(r.Z.MAX_ZOOM)}getOpacity(){return this.get(r.Z.OPACITY)}getSourceState(){return(0,o.O3)()}getVisible(){return this.get(r.Z.VISIBLE)}getZIndex(){return this.get(r.Z.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(r.Z.EXTENT,t)}setMaxResolution(t){this.set(r.Z.MAX_RESOLUTION,t)}setMinResolution(t){this.set(r.Z.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(r.Z.MAX_ZOOM,t)}setMinZoom(t){this.set(r.Z.MIN_ZOOM,t)}setOpacity(t){(0,s.h)("number"==typeof t,64),this.set(r.Z.OPACITY,t)}setVisible(t){this.set(r.Z.VISIBLE,t)}setZIndex(t){this.set(r.Z.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const u=l},48599:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>C});var i=n(78714),r=n(98771),o=n(81090),s=n(51345),a=n(92083),l=n(60188),u=n(58958),c=n(47539),h=n(21280),p=n(16899),d=n(71800),f=n(28641),g=n(33983),y=n(76171),_=n(57646),m=n(55069),v=n(6101),b=n(76234);function x(t,e,n){const i=[];let r=t(0),o=t(1),s=e(r),a=e(o);const l=[o,r],u=[a,s],c=[1,0],h={};let p,d,f,y,_,m,v=1e5;for(;--v>0&&c.length>0;)f=c.pop(),r=l.pop(),s=u.pop(),m=f.toString(),m in h||(i.push(s[0],s[1]),h[m]=!0),y=c.pop(),o=l.pop(),a=u.pop(),_=(f+y)/2,p=t(_),d=e(p),(0,g.rU)(d[0],d[1],s[0],s[1],a[0],a[1])<n?(i.push(a[0],a[1]),m=y.toString(),h[m]=!0):(c.push(y,_,_,f),u.push(a,d,d,s),l.push(o,p,p,r));return i}const w=new u.default({color:"rgba(0,0,0,0.2)"}),E=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class P extends p.default{constructor(t){t=t||{};const e=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,super(e),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=void 0!==t.targetSize?t.targetSize:100,this.maxLines_=void 0!==t.maxLines?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==t.strokeStyle?t.strokeStyle:w,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=null==t.lonLabelFormatter?y.I8.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=null==t.latLabelFormatter?y.I8.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=null==t.lonLabelPosition?0:t.lonLabelPosition,this.latLabelPosition_=null==t.latLabelPosition?1:t.latLabelPosition,this.lonLabelStyleBase_=new c.default({text:void 0!==t.lonLabelStyle?t.lonLabelStyle.clone():new h.Z({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new s.default({color:"rgba(0,0,0,1)"}),stroke:new u.default({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=function(t){const e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(this),this.latLabelStyleBase_=new c.default({text:void 0!==t.latLabelStyle?t.latLabelStyle.clone():new h.Z({font:"12px Calibri,sans-serif",textAlign:"right",fill:new s.default({color:"rgba(0,0,0,1)"}),stroke:new u.default({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=function(t){const e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(this),this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(r.Z.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=void 0!==t.intervals?t.intervals:E,this.setSource(new d.default({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new i.Z,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new c.default({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,e){let n=t.slice();return this.projection_&&this.getSource().getWrapX()&&(0,f.wrapX)(n,this.projection_),this.loadedExtent_&&((0,f.approximatelyEquals)(this.loadedExtent_,n,e)?n=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[n]}loaderFunction(t,e,n){this.loadedExtent_=t;const i=this.getSource(),r=this.getExtent()||[-1/0,-1/0,1/0,1/0],s=(0,f.getIntersection)(r,t);if(this.renderedExtent_&&(0,f.equals)(this.renderedExtent_,s)&&this.renderedResolution_===e)return;if(this.renderedExtent_=s,this.renderedResolution_=e,(0,f.isEmpty)(s))return;const a=(0,f.getCenter)(s),l=e*e/4;(!this.projection_||!(0,_.equivalent)(this.projection_,n))&&this.updateProjectionInfo_(n),this.createGraticule_(s,a,e,l);let u,c=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(c+=this.meridians_.length),this.parallelsLabels_&&(c+=this.parallels_.length);c>this.featurePool_.length;)u=new o.default,this.featurePool_.push(u);const h=i.getFeaturesCollection();h.clear();let p,d,g=0;for(p=0,d=this.meridians_.length;p<d;++p)u=this.featurePool_[g++],u.setGeometry(this.meridians_[p]),u.setStyle(this.lineStyle_),h.push(u);for(p=0,d=this.parallels_.length;p<d;++p)u=this.featurePool_[g++],u.setGeometry(this.parallels_[p]),u.setStyle(this.lineStyle_),h.push(u)}addMeridian_(t,e,n,i,r,o){const s=this.getMeridian_(t,e,n,i,o);if((0,f.intersects)(s.getExtent(),r)){if(this.meridiansLabels_){const e=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=e:this.meridiansLabels_[o]={geom:new l.Z([]),text:e}}this.meridians_[o++]=s}return o}addParallel_(t,e,n,i,r,o){const s=this.getParallel_(t,e,n,i,o);if((0,f.intersects)(s.getExtent(),r)){if(this.parallelsLabels_){const e=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=e:this.parallelsLabels_[o]={geom:new l.Z([]),text:e}}this.parallels_[o++]=s}return o}drawLabels_(t){const e=t.frameState.viewState.rotation,n=t.frameState.viewState.resolution,i=t.frameState.size,r=t.frameState.extent,o=(0,f.getCenter)(r);let s=r;if(e){const t=i[0]*n,e=i[1]*n;s=[o[0]-t/2,o[1]-e/2,o[0]+t/2,o[1]+e/2]}let a=0,l=0,u=this.latLabelPosition_<.5;const c=this.projection_.getExtent(),h=(0,f.getWidth)(c);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,f.containsExtent)(c,r)&&(a=Math.floor((r[0]-c[0])/h),l=Math.ceil((r[2]-c[2])/h),u=u!==Math.abs(e)>Math.PI/2);const p=function(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=t.inversePixelTransform[0],n=t.frameState,i=(0,v.Jp)(t.inversePixelTransform.slice(),n.coordinateToPixelTransform),r=(0,b.se)(n.viewState.resolution,e);let o;const s=(0,_.getUserProjection)();return s&&(o=(0,_.getTransformFromProjections)(s,n.viewState.projection)),new m.Z(t.context,e,n.extent,i,n.viewState.rotation,r,o)}(t);for(let t=a;t<=l;++t){let n,i,c,d,f=this.meridians_.length+this.parallels_.length;if(this.meridiansLabels_)for(i=0,c=this.meridiansLabels_.length;i<c;++i){const a=this.meridians_[i];if(e||0!==t){const n=a.clone();n.translate(t*h,0),n.rotate(-e,o),d=this.getMeridianPoint_(n,s,i),d.rotate(e,o)}else d=this.getMeridianPoint_(a,r,i);n=this.featurePool_[f++],n.setGeometry(d),n.set("graticule_label",this.meridiansLabels_[i].text),p.drawFeature(n,this.lonLabelStyle_(n))}if(this.parallelsLabels_&&(t===a&&u||t===l&&!u))for(i=0,c=this.parallels_.length;i<c;++i){const a=this.parallels_[i];if(e||0!==t){const n=a.clone();n.translate(t*h,0),n.rotate(-e,o),d=this.getParallelPoint_(n,s,i),d.rotate(e,o)}else d=this.getParallelPoint_(a,r,i);n=this.featurePool_[f++],n.setGeometry(d),n.set("graticule_label",this.parallelsLabels_[i].text),p.drawFeature(n,this.latLabelStyle_(n))}}}createGraticule_(t,e,n,i){const r=this.getInterval_(n);if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));let o=!1;const s=this.projection_.getExtent(),a=(0,f.getWidth)(s);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,f.containsExtent)(s,t)&&((0,f.getWidth)(t)>=a?(t[0]=s[0],t[2]=s[2]):o=!0);const l=[(0,g.uZ)(e[0],this.minX_,this.maxX_),(0,g.uZ)(e[1],this.minY_,this.maxY_)],u=this.toLonLatTransform_(l);isNaN(u[1])&&(u[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let c=(0,g.uZ)(u[0],this.minLon_,this.maxLon_),h=(0,g.uZ)(u[1],this.minLat_,this.maxLat_);const p=this.maxLines_;let d,y,_,m,v=t;o||(v=[(0,g.uZ)(t[0],this.minX_,this.maxX_),(0,g.uZ)(t[1],this.minY_,this.maxY_),(0,g.uZ)(t[2],this.minX_,this.maxX_),(0,g.uZ)(t[3],this.minY_,this.maxY_)]);const b=(0,f.applyTransform)(v,this.toLonLatTransform_,void 0,8);let x=b[3],w=b[2],E=b[1],P=b[0];if(o||((0,f.containsCoordinate)(v,this.bottomLeft_)&&(P=this.minLon_,E=this.minLat_),(0,f.containsCoordinate)(v,this.bottomRight_)&&(w=this.maxLon_,E=this.minLat_),(0,f.containsCoordinate)(v,this.topLeft_)&&(P=this.minLon_,x=this.maxLat_),(0,f.containsCoordinate)(v,this.topRight_)&&(w=this.maxLon_,x=this.maxLat_),x=(0,g.uZ)(x,h,this.maxLat_),w=(0,g.uZ)(w,c,this.maxLon_),E=(0,g.uZ)(E,this.minLat_,h),P=(0,g.uZ)(P,this.minLon_,c)),c=Math.floor(c/r)*r,m=(0,g.uZ)(c,this.minLon_,this.maxLon_),y=this.addMeridian_(m,E,x,i,t,0),d=0,o)for(;(m-=r)>=P&&d++<p;)y=this.addMeridian_(m,E,x,i,t,y);else for(;m!=this.minLon_&&d++<p;)m=Math.max(m-r,this.minLon_),y=this.addMeridian_(m,E,x,i,t,y);if(m=(0,g.uZ)(c,this.minLon_,this.maxLon_),d=0,o)for(;(m+=r)<=w&&d++<p;)y=this.addMeridian_(m,E,x,i,t,y);else for(;m!=this.maxLon_&&d++<p;)m=Math.min(m+r,this.maxLon_),y=this.addMeridian_(m,E,x,i,t,y);for(this.meridians_.length=y,this.meridiansLabels_&&(this.meridiansLabels_.length=y),h=Math.floor(h/r)*r,_=(0,g.uZ)(h,this.minLat_,this.maxLat_),y=this.addParallel_(_,P,w,i,t,0),d=0;_!=this.minLat_&&d++<p;)_=Math.max(_-r,this.minLat_),y=this.addParallel_(_,P,w,i,t,y);for(_=(0,g.uZ)(h,this.minLat_,this.maxLat_),d=0;_!=this.maxLat_&&d++<p;)_=Math.min(_+r,this.maxLat_),y=this.addParallel_(_,P,w,i,t,y);this.parallels_.length=y,this.parallelsLabels_&&(this.parallelsLabels_.length=y)}getInterval_(t){const e=this.projectionCenterLonLat_[0],n=this.projectionCenterLonLat_[1];let i=-1;const r=Math.pow(this.targetSize_*t,2),o=[],s=[];for(let t=0,a=this.intervals_.length;t<a;++t){const a=(0,g.uZ)(this.intervals_[t]/2,0,90),l=(0,g.uZ)(n,-90+a,90-a);if(o[0]=e-a,o[1]=l-a,s[0]=e+a,s[1]=l+a,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(s,s),Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)<=r)break;i=this.intervals_[t]}return i}getMeridian_(t,e,n,i,r){const o=function(t,e,n,i,r){const o=(0,_.get)("EPSG:4326");return x((function(i){return[t,e+(n-e)*i]}),(0,_.getTransform)(o,i),r)}(t,e,n,this.projection_,i);let s=this.meridians_[r];return s?(s.setFlatCoordinates("XY",o),s.changed()):(s=new a.Z(o,"XY"),this.meridians_[r]=s),s}getMeridianPoint_(t,e,n){const i=t.getFlatCoordinates();let r=1,o=i.length-1;i[r]>i[o]&&(r=o,o=1);const s=Math.max(e[1],i[r]),a=Math.min(e[3],i[o]),l=(0,g.uZ)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,s,a),u=[i[r-1]+(i[o-1]-i[r-1])*(l-i[r])/(i[o]-i[r]),l],c=this.meridiansLabels_[n].geom;return c.setCoordinates(u),c}getMeridians(){return this.meridians_}getParallel_(t,e,n,i,r){const o=function(t,e,n,i,r){const o=(0,_.get)("EPSG:4326");return x((function(i){return[e+(n-e)*i,t]}),(0,_.getTransform)(o,i),r)}(t,e,n,this.projection_,i);let s=this.parallels_[r];return s?(s.setFlatCoordinates("XY",o),s.changed()):s=new a.Z(o,"XY"),s}getParallelPoint_(t,e,n){const i=t.getFlatCoordinates();let r=0,o=i.length-2;i[r]>i[o]&&(r=o,o=0);const s=Math.max(e[0],i[r]),a=Math.min(e[2],i[o]),l=(0,g.uZ)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,s,a),u=[l,i[r+1]+(i[o+1]-i[r+1])*(l-i[r])/(i[o]-i[r])],c=this.parallelsLabels_[n].geom;return c.setCoordinates(u),c}getParallels(){return this.parallels_}updateProjectionInfo_(t){const e=(0,_.get)("EPSG:4326"),n=t.getWorldExtent();this.maxLat_=n[3],this.maxLon_=n[2],this.minLat_=n[1],this.minLon_=n[0];const i=(0,_.getTransform)(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{const t=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(e,n,r){const o=i(e,n,r=r||2);for(let e=0,n=o.length;e<n;e+=r)o[e]<t&&(o[e]+=360);return o}}this.fromLonLatTransform_=(0,_.getTransform)(e,t);const r=(0,f.applyTransform)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=r[0],this.maxX_=r[2],this.minY_=r[1],this.maxY_=r[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,f.getCenter)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}}const C=P},20228:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var i=n(1295);class r extends i.Z{constructor(t){super(t=t||{})}}const o=r;var s=n(98015),a=n(70553),l=n(37755),u=n(6101),c=n(28641),h=n(57646);class p extends s.Z{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,i=t.viewState,r=i.resolution,o=this.getLayer().getSource(),s=t.viewHints;let u=t.extent;if(void 0!==e.extent&&(u=(0,c.getIntersection)(u,(0,h.fromUserExtent)(e.extent,i.projection))),!s[l.Z.ANIMATING]&&!s[l.Z.INTERACTING]&&!(0,c.isEmpty)(u))if(o){const t=i.projection,e=o.getImage(u,r,n,t);e&&(this.loadImage(e)?this.image_=e:e.getState()===a.Z.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=(0,u.nn)(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!(0,c.containsCoordinate)(r,i))return null;const o=this.image_.getExtent(),s=this.image_.getImage(),a=(0,c.getWidth)(o),l=Math.floor(s.width*((i[0]-o[0])/a));if(l<0||l>=s.width)return null;const h=(0,c.getHeight)(o),p=Math.floor(s.height*((o[3]-i[1])/h));return p<0||p>=s.height?null:this.getImageData(s,l,p)}renderFrame(t,e){const n=this.image_,i=n.getExtent(),r=n.getResolution(),o=n.getPixelRatio(),s=t.layerStatesArray[t.layerIndex],a=t.pixelRatio,l=t.viewState,p=l.center,d=a*r/(l.resolution*o),f=t.extent,g=l.resolution,y=l.rotation,_=Math.round((0,c.getWidth)(f)/g*a),m=Math.round((0,c.getHeight)(f)/g*a);(0,u.qC)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,y,-_/2,-m/2),(0,u.nb)(this.inversePixelTransform,this.pixelTransform);const v=(0,u.BB)(this.pixelTransform);this.useContainer(e,v,this.getBackground(t));const b=this.context,x=b.canvas;x.width!=_||x.height!=m?(x.width=_,x.height=m):this.containerReused||b.clearRect(0,0,_,m);let w=!1,E=!0;if(s.extent){const e=(0,h.fromUserExtent)(s.extent,l.projection);E=(0,c.intersects)(e,t.extent),w=E&&!(0,c.containsExtent)(e,t.extent),w&&this.clipUnrotated(b,t,e)}const P=n.getImage(),C=(0,u.qC)(this.tempTransform,_/2,m/2,d,d,0,o*(i[0]-p[0])/r,o*(p[1]-i[3])/r);this.renderedResolution=r*a/o;const O=P.width*C[0],S=P.height*C[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,t),E&&O>=.5&&S>=.5){const t=C[4],e=C[5],n=s.opacity;let i;1!==n&&(i=b.globalAlpha,b.globalAlpha=n),b.drawImage(P,0,0,+P.width,+P.height,t,e,O,S),1!==n&&(b.globalAlpha=i)}return this.postRender(b,t),w&&b.restore(),b.imageSmoothingEnabled=!0,v!==x.style.transform&&(x.style.transform=v),this.container}}const d=p,f=class extends o{constructor(t){super(t)}createRenderer(){return new d(this)}getData(t){return super.getData(t)}}},1295:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h,j:()=>c});var i=n(947),r=n(85487),o=n(71912),s=n(98771),a=n(99515),l=n(65818);class u extends i.Z{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(o.Z.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(o.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,l.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=(0,l.listen)(t,r.Z.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((t=>t([])))}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}render(t,e){const n=this.getRenderer();if(n.prepareFrame(t))return this.rendered=!0,n.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(o.Z.MAP,t)}getMapInternal(){return this.get(o.Z.MAP)}setMap(t){this.mapPrecomposeKey_&&((0,l.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,l.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,l.listen)(t,s.Z.PRECOMPOSE,(function(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);(0,a.h)(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=(0,l.listen)(this,r.Z.CHANGE,t.render,t),this.changed())}setSource(t){this.set(o.Z.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function c(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}const h=u},71912:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},61140:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>x});var i=n(1295);const r="preload",o="useInterimTilesOnError";class s extends i.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(r)}setPreload(t){this.set(r,t)}getUseInterimTilesOnError(){return this.get(o)}setUseInterimTilesOnError(t){this.set(o,t)}getData(t){return super.getData(t)}}const a=s;var l=n(98015),u=n(20825),c=n(9494),h=n(2519),p=n(37195),d=n(6101),f=n(28641),g=n(57646),y=n(74187),_=n(65537),m=n(4307);class v extends l.Z{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,f.createEmpty)(),this.tmpTileRange_=new h.Z(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==p.Z.LOADED||n==p.Z.EMPTY||n==p.Z.ERROR&&!i}getTile(t,e,n,i){const r=i.pixelRatio,o=i.viewState.projection,s=this.getLayer();let a=s.getSource().getTile(t,e,n,r,o);return a.getState()==p.Z.ERROR&&s.getUseInterimTilesOnError()&&s.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=(0,d.nn)(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!(0,f.containsCoordinate)(r,i))return null;const o=e.pixelRatio,s=e.viewState.projection,a=e.viewState,l=n.getRenderSource(),h=l.getTileGridForProjection(a.projection),g=l.getTilePixelRatio(e.pixelRatio);for(let t=h.getZForResolution(a.resolution);t>=h.getMinZoom();--t){const e=h.getTileCoordForCoordAndZ(i,t),n=l.getTile(t,e[1],e[2],o,s);if(!(n instanceof u.Z||n instanceof c.Z)||n instanceof c.Z&&n.getState()===p.Z.EMPTY)return null;if(n.getState()!==p.Z.LOADED)continue;const r=h.getOrigin(t),d=(0,m.Pq)(h.getTileSize(t)),f=h.getResolution(t),y=Math.floor(g*((i[0]-r[0])/f-e[1]*d[0])),_=Math.floor(g*((r[1]-i[1])/f-e[2]*d[1])),v=Math.round(g*l.getGutterForProjection(a.projection));return this.getImageData(n.getImage(),y+v,_+v)}return null}loadedTileCallback(t,e,n){return!!this.isDrawableTile(n)&&super.loadedTileCallback(t,e,n)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,o=i.resolution,s=i.center,a=i.rotation,l=t.pixelRatio,u=this.getLayer(),c=u.getSource(),h=c.getRevision(),m=c.getTileGridForProjection(r),v=m.getZForResolution(o,c.zDirection),b=m.getResolution(v);let x=t.extent;const w=t.viewState.resolution,E=c.getTilePixelRatio(l),P=Math.round((0,f.getWidth)(x)/w*l),C=Math.round((0,f.getHeight)(x)/w*l),O=n.extent&&(0,g.fromUserExtent)(n.extent,r);O&&(x=(0,f.getIntersection)(x,(0,g.fromUserExtent)(n.extent,r)));const S=b*P/2/E,I=b*C/2/E,L=[s[0]-S,s[1]-I,s[0]+S,s[1]+I],M=m.getTileRangeForExtentAndZ(x,v),T={};T[v]={};const R=this.createLoadedTileFinder(c,r,T),N=this.tmpExtent,A=this.tmpTileRange_;this.newTiles_=!1;const D=a?(0,f.getRotatedViewport)(i.center,w,a,t.size):void 0;for(let e=M.minX;e<=M.maxX;++e)for(let i=M.minY;i<=M.maxY;++i){if(a&&!m.tileCoordIntersectsViewport([v,e,i],D))continue;const r=this.getTile(v,e,i,t);if(this.isDrawableTile(r)){const e=(0,y.sq)(this);if(r.getState()==p.Z.LOADED){T[v][r.tileCoord.toString()]=r;let t=r.inTransition(e);t&&1!==n.opacity&&(r.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(r)||(this.newTiles_=!0)}if(1===r.getAlpha(e,t.time))continue}const o=m.getTileCoordChildTileRange(r.tileCoord,A,N);let s=!1;o&&(s=R(v+1,o)),s||m.forEachTileCoordParentTileRange(r.tileCoord,R,A,N)}const j=b/o*l/E;(0,d.qC)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,a,-P/2,-C/2);const F=(0,d.BB)(this.pixelTransform);this.useContainer(e,F,this.getBackground(t));const k=this.context,G=k.canvas;(0,d.nb)(this.inversePixelTransform,this.pixelTransform),(0,d.qC)(this.tempTransform,P/2,C/2,j,j,0,-P/2,-C/2),G.width!=P||G.height!=C?(G.width=P,G.height=C):this.containerReused||k.clearRect(0,0,P,C),O&&this.clipUnrotated(k,t,O),c.getInterpolate()||(k.imageSmoothingEnabled=!1),this.preRender(k,t),this.renderedTiles.length=0;let V,Z,z,B=Object.keys(T).map(Number);B.sort(_.kK),1!==n.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(V=[],Z=[]):B=B.reverse();for(let e=B.length-1;e>=0;--e){const n=B[e],i=c.getTilePixelSize(n,l,r),o=m.getResolution(n)/b,s=i[0]*o*j,a=i[1]*o*j,u=m.getTileCoordForCoordAndZ((0,f.getTopLeft)(L),n),h=m.getTileCoordExtent(u),p=(0,d.nn)(this.tempTransform,[E*(h[0]-L[0])/b,E*(L[3]-h[3])/b]),g=E*c.getGutterForProjection(r),_=T[n];for(const e in _){const i=_[e],r=i.tileCoord,o=u[1]-r[1],l=Math.round(p[0]-(o-1)*s),h=u[2]-r[2],d=Math.round(p[1]-(h-1)*a),m=Math.round(p[0]-o*s),b=Math.round(p[1]-h*a),x=l-m,w=d-b,E=v===n,P=E&&1!==i.getAlpha((0,y.sq)(this),t.time);let C=!1;if(!P)if(V){z=[m,b,m+x,b,m+x,b+w,m,b+w];for(let t=0,e=V.length;t<e;++t)if(v!==n&&n<Z[t]){const e=V[t];(0,f.intersects)([m,b,m+x,b+w],[e[0],e[3],e[4],e[7]])&&(C||(k.save(),C=!0),k.beginPath(),k.moveTo(z[0],z[1]),k.lineTo(z[2],z[3]),k.lineTo(z[4],z[5]),k.lineTo(z[6],z[7]),k.moveTo(e[6],e[7]),k.lineTo(e[4],e[5]),k.lineTo(e[2],e[3]),k.lineTo(e[0],e[1]),k.clip())}V.push(z),Z.push(n)}else k.clearRect(m,b,x,w);this.drawTileImage(i,t,m,b,x,w,g,E),V&&!P?(C&&k.restore(),this.renderedTiles.unshift(i)):this.renderedTiles.push(i),this.updateUsedTiles(t.usedTiles,c,i)}}return this.renderedRevision=h,this.renderedResolution=b,this.extentChanged=!this.renderedExtent_||!(0,f.equals)(this.renderedExtent_,L),this.renderedExtent_=L,this.renderedPixelRatio=l,this.renderedProjection=r,this.manageTilePyramid(t,c,m,l,r,x,v,u.getPreload()),this.scheduleExpireCache(t,c),this.postRender(k,t),n.extent&&k.restore(),k.imageSmoothingEnabled=!0,F!==G.style.transform&&(G.style.transform=F),this.container}drawTileImage(t,e,n,i,r,o,s,a){const l=this.getTileImage(t);if(!l)return;const u=(0,y.sq)(this),c=e.layerStatesArray[e.layerIndex],h=c.opacity*(a?t.getAlpha(u,e.time):1),p=h!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(l,s,s,l.width-2*s,l.height-2*s,n,i,r,o),p&&this.context.restore(),h!==c.opacity?e.animate=!0:a&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=function(t,e,n){const i=(0,y.sq)(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const i=(0,y.sq)(e);i in t||(t[i]={}),t[i][n.getKey()]=!0}manageTilePyramid(t,e,n,i,r,o,s,a,l){const u=(0,y.sq)(e);u in t.wantedTiles||(t.wantedTiles[u]={});const c=t.wantedTiles[u],h=t.tileQueue,d=n.getMinZoom(),g=t.viewState.rotation,_=g?(0,f.getRotatedViewport)(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let m,v,b,x,w,E,P=0;for(E=d;E<=s;++E)for(v=n.getTileRangeForExtentAndZ(o,E,v),b=n.getResolution(E),x=v.minX;x<=v.maxX;++x)for(w=v.minY;w<=v.maxY;++w)g&&!n.tileCoordIntersectsViewport([E,x,w],_)||(s-E<=a?(++P,m=e.getTile(E,x,w,i,r),m.getState()==p.Z.IDLE&&(c[m.getKey()]=!0,h.isKeyQueued(m.getKey())||h.enqueue([m,u,n.getTileCoordCenter(m.tileCoord),b])),void 0!==l&&l(m)):e.useTile(E,x,w,r));e.updateCacheSize(P,r)}}const b=v,x=class extends a{constructor(t){super(t)}createRenderer(){return new b(this)}}},16899:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_t});var i=n(1295),r=n(59197),o=n(47539),s=n(30283),a=n(51345),l=n(2370),u=n(35393),c=n(58958),h=n(21280);function p(t){return new o.default({fill:d(t,""),stroke:f(t,""),text:g(t),image:y(t)})}function d(t,e){const n=t[e+"fill-color"];if(n)return new a.default({color:n})}function f(t,e){const n=t[e+"stroke-width"],i=t[e+"stroke-color"];if(n||i)return new c.default({width:n,color:i,lineCap:t[e+"stroke-line-cap"],lineJoin:t[e+"stroke-line-join"],lineDash:t[e+"stroke-line-dash"],lineDashOffset:t[e+"stroke-line-dash-offset"],miterLimit:t[e+"stroke-miter-limit"]})}function g(t){const e=t["text-value"];if(e)return new h.Z({text:e,font:t["text-font"],maxAngle:t["text-max-angle"],offsetX:t["text-offset-x"],offsetY:t["text-offset-y"],overflow:t["text-overflow"],placement:t["text-placement"],scale:t["text-scale"],rotateWithView:t["text-rotate-with-view"],rotation:t["text-rotation"],textAlign:t["text-align"],justify:t["text-justify"],textBaseline:t["text-baseline"],padding:t["text-padding"],fill:d(t,"text-"),backgroundFill:d(t,"text-background-"),stroke:f(t,"text-"),backgroundStroke:f(t,"text-background-")})}function y(t){const e=t["icon-src"],n=t["icon-img"];if(e||n)return new l.default({src:e,img:n,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]});const i=t["shape-points"];if(i){const e="shape-";return new u.Z({points:i,fill:d(t,e),stroke:f(t,e),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}const r=t["circle-radius"];if(r){const e="circle-";return new s.default({radius:r,fill:d(t,e),stroke:f(t,e),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}const _="renderOrder";class m extends i.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(_)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new r.default(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(_,t)}setStyle(t){let e;if(void 0===t)e=o.createDefaultStyle;else if(null===t)e=null;else if("function"==typeof t)e=t;else if(t instanceof o.default)e=t;else if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let e=0;e<n;++e){const n=t[e];n instanceof o.default?i[e]=n:i[e]=p(n)}e=i}else e=p(t);this.style_=e,this.styleFunction_=null===t?void 0:(0,o.toFunction)(this.style_),this.changed()}}const v=m,b={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},x=[b.FILL],w=[b.STROKE],E=[b.BEGIN_PATH],P=[b.CLOSE_PATH],C=b;var O=n(28716),S=n(45624),I=n(96620),L=n(28641),M=n(50147),T=n(65537),R=n(89241);class N extends S.Z{constructor(t,e,n,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let s=0,a=t.length;s<a;s+=e)i[0]=t[s],i[1]=t[s+1],(0,L.containsCoordinate)(n,i)&&(r[o++]=i[0],r[o++]=i[1]);return o}appendFlatLineCoordinates(t,e,n,i,r,o){const s=this.coordinates;let a=s.length;const l=this.getBufferedMaxExtent();o&&(e+=i);let u=t[e],c=t[e+1];const h=this.tmpCoordinate_;let p,d,f,g=!0;for(p=e+i;p<n;p+=i)h[0]=t[p],h[1]=t[p+1],f=(0,L.coordinateRelationship)(l,h),f!==d?(g&&(s[a++]=u,s[a++]=c,g=!1),s[a++]=h[0],s[a++]=h[1]):f===O.Z.INTERSECTING?(s[a++]=h[0],s[a++]=h[1],g=!1):g=!0,u=h[0],c=h[1],d=f;return(r&&g||p===e+i)&&(s[a++]=u,s[a++]=c),a}drawCustomCoordinates_(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o],a=this.appendFlatLineCoordinates(t,e,s,i,!1,!1);r.push(a),e=s}return e}drawCustom(t,e,n,i){this.beginGeometry(t,e);const r=t.getType(),o=t.getStride(),s=this.coordinates.length;let a,l,u,c,h;switch(r){case"MultiPolygon":a=t.getOrientedFlatCoordinates(),c=[];const e=t.getEndss();h=0;for(let t=0,n=e.length;t<n;++t){const n=[];h=this.drawCustomCoordinates_(a,h,e[t],o,n),c.push(n)}this.instructions.push([C.CUSTOM,s,c,t,n,R.ug]),this.hitDetectionInstructions.push([C.CUSTOM,s,c,t,i||n,R.ug]);break;case"Polygon":case"MultiLineString":u=[],a="Polygon"==r?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(a,0,t.getEnds(),o,u),this.instructions.push([C.CUSTOM,s,u,t,n,R.o1]),this.hitDetectionInstructions.push([C.CUSTOM,s,u,t,i||n,R.o1]);break;case"LineString":case"Circle":a=t.getFlatCoordinates(),l=this.appendFlatLineCoordinates(a,0,a.length,o,!1,!1),this.instructions.push([C.CUSTOM,s,l,t,n,R.Ml]),this.hitDetectionInstructions.push([C.CUSTOM,s,l,t,i||n,R.Ml]);break;case"MultiPoint":a=t.getFlatCoordinates(),l=this.appendFlatPointCoordinates(a,o),l>s&&(this.instructions.push([C.CUSTOM,s,l,t,n,R.Ml]),this.hitDetectionInstructions.push([C.CUSTOM,s,l,t,i||n,R.Ml]));break;case"Point":a=t.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),l=this.coordinates.length,this.instructions.push([C.CUSTOM,s,l,t,n]),this.hitDetectionInstructions.push([C.CUSTOM,s,l,t,i||n])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[C.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[C.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const n=t.length;let i,r,o=-1;for(e=0;e<n;++e)i=t[e],r=i[0],r==C.END_GEOMETRY?o=e:r==C.BEGIN_GEOMETRY&&(i[2]=e,(0,T.FZ)(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const e=t.getColor();n.fillStyle=(0,I.y)(e||M.bL)}else n.fillStyle=void 0;if(e){const t=e.getColor();n.strokeStyle=(0,I.y)(t||M.Tx);const i=e.getLineCap();n.lineCap=void 0!==i?i:M.mb;const r=e.getLineDash();n.lineDash=r?r.slice():M.X9;const o=e.getLineDashOffset();n.lineDashOffset=o||M.He;const s=e.getLineJoin();n.lineJoin=void 0!==s?s:M.rc;const a=e.getWidth();n.lineWidth=void 0!==a?a:M.yC;const l=e.getMiterLimit();n.miterLimit=void 0!==l?l:M.V4,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[C.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(!0),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[C.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,i=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||r!=t.currentLineDash&&!(0,T.fS)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[C.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,L.clone)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,L.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const A=N;var D=n(80226);const j=class extends A{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinatess_(t,e,n,i){const r=this.state,o=void 0!==r.fillStyle,s=void 0!==r.strokeStyle,a=n.length;this.instructions.push(E),this.hitDetectionInstructions.push(E);for(let r=0;r<a;++r){const o=n[r],a=this.coordinates.length,l=this.appendFlatLineCoordinates(t,e,o,i,!0,!s),u=[C.MOVE_TO_LINE_TO,a,l];this.instructions.push(u),this.hitDetectionInstructions.push(u),s&&(this.instructions.push(P),this.hitDetectionInstructions.push(P)),e=o}return o&&(this.instructions.push(x),this.hitDetectionInstructions.push(x)),s&&(this.instructions.push(w),this.hitDetectionInstructions.push(w)),e}drawCircle(t,e){const n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0===i&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([C.SET_FILL_STYLE,M.bL]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([C.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);const l=[C.CIRCLE,a];this.instructions.push(E,l),this.hitDetectionInstructions.push(E,l),void 0!==n.fillStyle&&(this.instructions.push(x),this.hitDetectionInstructions.push(x)),void 0!==n.strokeStyle&&(this.instructions.push(w),this.hitDetectionInstructions.push(w)),this.endGeometry(e)}drawPolygon(t,e){const n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0===i&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([C.SET_FILL_STYLE,M.bL]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([C.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(e)}drawMultiPolygon(t,e){const n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0===i&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([C.SET_FILL_STYLE,M.bL]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([C.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride();let l=0;for(let t=0,e=o.length;t<e;++t)l=this.drawFlatCoordinatess_(s,l,o[t],a);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=(0,D.uZ)(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};var F=n(74187);function k(t,e,n,i,r){let o,s,a,l,u,c,h,p,d,f,g=n,y=n,_=0,m=0,v=n;for(s=n;s<i;s+=r){const n=e[s],i=e[s+1];void 0!==u&&(d=n-u,f=i-c,l=Math.sqrt(d*d+f*f),void 0!==h&&(m+=a,o=Math.acos((h*d+p*f)/(a*l)),o>t&&(m>_&&(_=m,g=v,y=s),m=0,v=s-r)),a=l,h=d,p=f),u=n,c=i}return m+=l,m>_?[v,s]:[g,y]}const G={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},V={Circle:j,Default:A,Image:class extends A{constructor(t,e,n,i){super(t,e,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,i);this.instructions.push([C.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([C.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,i);this.instructions.push([C.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([C.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),i=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class extends A{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinates_(t,e,n,i){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),s=[C.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n}drawLineString(t,e){const n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0===i||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([C.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,M.X9,M.He],E);const o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(w),this.endGeometry(e)}drawMultiLineString(t,e){const n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0===i||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([C.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],E);const o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride();let l=0;for(let t=0,e=o.length;t<e;++t)l=this.drawFlatCoordinates_(s,l,o[t],a);this.hitDetectionInstructions.push(w),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(w),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(w),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(E)}},Polygon:j,Text:class extends A{constructor(t,e,n,i){super(t,e,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const n=this.textFillState_,i=this.textStrokeState_,r=this.textState_;if(""===this.text_||!r||!n&&!i)return;const o=this.coordinates;let s=o.length;const a=t.getType();let l=null,u=t.getStride();if("line"!==r.placement||"LineString"!=a&&"MultiLineString"!=a&&"Polygon"!=a&&"MultiPolygon"!=a){let n=r.overflow?null:[];switch(a){case"Point":case"MultiPoint":l=t.getFlatCoordinates();break;case"LineString":l=t.getFlatMidpoint();break;case"Circle":l=t.getCenter();break;case"MultiLineString":l=t.getFlatMidpoints(),u=2;break;case"Polygon":l=t.getFlatInteriorPoint(),r.overflow||n.push(l[2]/this.resolution),u=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();l=[];for(let t=0,i=e.length;t<i;t+=3)r.overflow||n.push(e[t+2]/this.resolution),l.push(e[t],e[t+1]);if(0===l.length)return;u=2}const i=this.appendFlatPointCoordinates(l,u);if(i===s)return;if(n&&(i-s)/2!=l.length/u){let t=s/2;n=n.filter(((e,n)=>{const i=o[2*(t+n)]===l[n*u]&&o[2*(t+n)+1]===l[n*u+1];return i||--t,i}))}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let c=r.padding;if(c!=M.oB&&(r.scale[0]<0||r.scale[1]<0)){let t=r.padding[0],e=r.padding[1],n=r.padding[2],i=r.padding[3];r.scale[0]<0&&(e=-e,i=-i),r.scale[1]<0&&(t=-t,n=-n),c=[t,e,n,i]}const h=this.pixelRatio;this.instructions.push([C.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,c==M.oB?M.oB:c.map((function(t){return t*h})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]);const p=1/h;this.hitDetectionInstructions.push([C.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[p,p],NaN,void 0,this.declutterImageWithText_,c,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]),this.endGeometry(e)}else{if(!(0,L.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;let n;if(l=t.getFlatCoordinates(),"LineString"==a)n=[l.length];else if("MultiLineString"==a)n=t.getEnds();else if("Polygon"==a)n=t.getEnds().slice(0,1);else if("MultiPolygon"==a){const e=t.getEndss();n=[];for(let t=0,i=e.length;t<i;++t)n.push(e[t][0])}this.beginGeometry(t,e);const i=r.textAlign;let c,h=0;for(let t=0,e=n.length;t<e;++t){if(null==i){const e=k(r.maxAngle,l,h,n[t],u);h=e[0],c=e[1]}else c=n[t];for(let t=h;t<c;t+=u)o.push(l[t],l[t+1]);const e=o.length;h=n[t],this.drawChars_(s,e),s=e}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||M.PH,justify:e.justify,textBaseline:e.textBaseline||M.ru,scale:e.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,i=this.textState_,r=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=G[i.textBaseline],u=this.textOffsetY_*a,c=this.text_,h=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([C.DRAW_CHARS,t,e,l,i.overflow,s,i.maxAngle,a,u,r,h*a,c,o,1]),this.hitDetectionInstructions.push([C.DRAW_CHARS,t,e,l,i.overflow,s,i.maxAngle,1,u,r,h,c,o,1/a])}setTextStyle(t,e){let n,i,r;if(t){const e=t.getFill();e?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=(0,I.y)(e.getColor()||M.bL)):(i=null,this.textFillState_=i);const o=t.getStroke();if(o){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const t=o.getLineDash(),e=o.getLineDashOffset(),n=o.getWidth(),i=o.getMiterLimit();r.lineCap=o.getLineCap()||M.mb,r.lineDash=t?t.slice():M.X9,r.lineDashOffset=void 0===e?M.He:e,r.lineJoin=o.getLineJoin()||M.rc,r.lineWidth=void 0===n?M.yC:n,r.miterLimit=void 0===i?M.V4:i,r.strokeStyle=(0,I.y)(o.getColor()||M.Tx)}else r=null,this.textStrokeState_=r;n=this.textState_;const s=t.getFont()||M.Df;(0,M.Qx)(s);const a=t.getScaleArray();n.overflow=t.getOverflow(),n.font=s,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||M.ru,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||M.oB,n.scale=void 0===a?[1,1]:a;const l=t.getOffsetX(),u=t.getOffsetY(),c=t.getRotateWithView(),h=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===u?0:u,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===h?0:h,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:(0,F.sq)(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+(0,F.sq)(i.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}},Z=class{constructor(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const i in n){const r=n[i].finish();t[e][i]=r}}return t}getBuilder(t,e){const n=void 0!==t?t.toString():"0";let i=this.buildersByZIndex_[n];void 0===i&&(i={},this.buildersByZIndex_[n]=i);let r=i[e];return void 0===r&&(r=new(0,V[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=r),r}};var z=n(98015),B=n(6101),U=n(33983),W=n(76442);function q(t,e,n,i,r,o,s,a,l,u,c,h){let p=t[e],d=t[e+1],f=0,g=0,y=0,_=0;function m(){f=p,g=d,p=t[e+=i],d=t[e+1],_+=y,y=Math.sqrt((p-f)*(p-f)+(d-g)*(d-g))}do{m()}while(e<n-i&&_+y<o);let v=0===y?0:(o-_)/y;const b=(0,U.t7)(f,p,v),x=(0,U.t7)(g,d,v),w=e-i,E=_,P=o+a*l(u,r,c);for(;e<n-i&&_+y<P;)m();v=0===y?0:(P-_)/y;const C=(0,U.t7)(f,p,v),O=(0,U.t7)(g,d,v);let S;if(h){const t=[b,x,C,O];(0,W.U1)(t,0,4,2,h,t,t),S=t[0]>t[2]}else S=b>C;const I=Math.PI,L=[],M=w+i===e;let T;if(y=0,_=E,p=t[e=w],d=t[e+1],M){m(),T=Math.atan2(d-g,p-f),S&&(T+=T>0?-I:I);const t=(C+b)/2,e=(O+x)/2;return L[0]=[t,e,(P-o)/2,T,r],L}for(let t=0,h=(r=r.replace(/\n/g," ")).length;t<h;){m();let b=Math.atan2(d-g,p-f);if(S&&(b+=b>0?-I:I),void 0!==T){let t=b-T;if(t+=t>I?-2*I:t<-I?2*I:0,Math.abs(t)>s)return null}T=b;const x=t;let w=0;for(;t<h;++t){const s=a*l(u,r[S?h-t-1:t],c);if(e+i<n&&_+y<o+w+s/2)break;w+=s}if(t===x)continue;const E=S?r.substring(h-x,h-t):r.substring(x,t);v=0===y?0:(o+w/2-_)/y;const P=(0,U.t7)(f,p,v),C=(0,U.t7)(g,d,v);L.push([P,C,w/2,b,E]),o+=w}return L}var X=n(27374);const Y=(0,L.createEmpty)(),H=[],J=[],K=[],$=[];function Q(t){return t[3].declutterBox}const tt=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function et(t,e){return"start"!==e&&"end"!==e||tt.test(t)||(e="start"===e?"left":"right"),G[e]}function nt(t,e,n){return n>0&&t.push("\n",""),t.push(e,""),t}const it=class{constructor(t,e,n,i){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,B.Ue)(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,n,i){const r=t+e+n+i;if(this.labels_[r])return this.labels_[r];const o=i?this.strokeStates[i]:null,s=n?this.fillStates[n]:null,a=this.textStates[e],l=this.pixelRatio,u=[a.scale[0]*l,a.scale[1]*l],c=Array.isArray(t),h=a.justify?G[a.justify]:et(Array.isArray(t)?t[0]:t,a.textAlign||M.PH),p=i&&o.lineWidth?o.lineWidth:0,d=c?t:t.split("\n").reduce(nt,[]),{width:f,height:g,widths:y,heights:_,lineWidths:m}=(0,M.Zw)(a,d),v=f+p,b=[],x=(v+2)*u[0],w=(g+p)*u[1],E={width:x<0?Math.floor(x):Math.ceil(x),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:b};1==u[0]&&1==u[1]||b.push("scale",u),i&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",p),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)),n&&b.push("fillStyle",s.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const P=.5-h;let C=h*v+P*p;const O=[],S=[];let I,L=0,T=0,R=0,N=0;for(let t=0,e=d.length;t<e;t+=2){const e=d[t];if("\n"===e){T+=L,L=0,C=h*v+P*p,++N;continue}const r=d[t+1]||a.font;r!==I&&(i&&O.push("font",r),n&&S.push("font",r),I=r),L=Math.max(L,_[R]);const o=[e,C+P*y[R]+h*(y[R]-m[N]),.5*(p+L)+T];C+=y[R],i&&O.push("strokeText",o),n&&S.push("fillText",o),++R}return Array.prototype.push.apply(b,O),Array.prototype.push.apply(b,S),this.labels_[r]=E,E}replayTextBackground_(t,e,n,i,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,i,r,o,s,a,l,u,c,h,p,d,f,g){let y=n-(s*=h[0]),_=i-(a*=h[1]);const m=r+l>t?t-l:r,v=o+u>e?e-u:o,b=d[3]+m*h[0]+d[1],x=d[0]+v*h[1]+d[2],w=y-d[3],E=_-d[0];let P;return(f||0!==c)&&(H[0]=w,$[0]=w,H[1]=E,J[1]=E,J[0]=w+b,K[0]=J[0],K[1]=E+x,$[1]=K[1]),0!==c?(P=(0,B.qC)((0,B.Ue)(),n,i,1,1,c,-n,-i),(0,B.nn)(P,H),(0,B.nn)(P,J),(0,B.nn)(P,K),(0,B.nn)(P,$),(0,L.createOrUpdate)(Math.min(H[0],J[0],K[0],$[0]),Math.min(H[1],J[1],K[1],$[1]),Math.max(H[0],J[0],K[0],$[0]),Math.max(H[1],J[1],K[1],$[1]),Y)):(0,L.createOrUpdate)(Math.min(w,w+b),Math.min(E,E+x),Math.max(w,w+b),Math.max(E,E+x),Y),p&&(y=Math.round(y),_=Math.round(_)),{drawImageX:y,drawImageY:_,drawImageW:m,drawImageH:v,originX:l,originY:u,declutterBox:{minX:Y[0],minY:Y[1],maxX:Y[2],maxY:Y[3],value:g},canvasTransform:P,scale:h}}replayImageOrLabel_(t,e,n,i,r,o,s){const a=!(!o&&!s),l=i.declutterBox,u=t.canvas,c=s?s[2]*i.scale[0]/2:0;return l.minX-c<=u.width/e&&l.maxX+c>=0&&l.minY-c<=u.height/e&&l.maxY+c>=0&&(a&&this.replayTextBackground_(t,H,J,K,$,o,s),(0,M._f)(t,i.canvasTransform,r,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){if(this.alignFill_){const e=(0,B.nn)(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,i){const r=this.textStates[e],o=this.createLabel(t,e,i,n),s=this.strokeStates[n],a=this.pixelRatio,l=et(Array.isArray(t)?t[0]:t,r.textAlign||M.PH),u=G[r.textBaseline||M.ru],c=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:l*(o.width/a-2*r.scale[0])+2*(.5-l)*c,anchorY:u*o.height/a+2*(.5-u)*c}}execute_(t,e,n,i,r,o,s,a){let l;this.pixelCoordinates_&&(0,T.fS)(n,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=(0,W.vT)(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),(0,B.lk)(this.renderedTransform_,n));let u=0;const c=i.length;let h,p,d,f,g,y,_,m,v,b,x,w,E=0,P=0,O=0,S=null,I=null;const R=this.coordinateCache_,N=this.viewRotation_,A=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},j=this.instructions!=i||this.overlaps?0:200;let F,k,V,Z;for(;u<c;){const n=i[u];switch(n[0]){case C.BEGIN_GEOMETRY:F=n[1],Z=n[3],F.getGeometry()?void 0===s||(0,L.intersects)(s,Z.getExtent())?++u:u=n[2]+1:u=n[2];break;case C.BEGIN_PATH:P>j&&(this.fill_(t),P=0),O>j&&(t.stroke(),O=0),P||O||(t.beginPath(),f=NaN,g=NaN),++u;break;case C.CIRCLE:E=n[1];const i=l[E],c=l[E+1],T=l[E+2]-i,z=l[E+3]-c,B=Math.sqrt(T*T+z*z);t.moveTo(i+B,c),t.arc(i,c,B,0,2*Math.PI,!0),++u;break;case C.CLOSE_PATH:t.closePath(),++u;break;case C.CUSTOM:E=n[1],h=n[2];const U=n[3],W=n[4],Y=6==n.length?n[5]:void 0;D.geometry=U,D.feature=F,u in R||(R[u]=[]);const H=R[u];Y?Y(l,E,h,2,H):(H[0]=l[E],H[1]=l[E+1],H.length=2),W(H,D),++u;break;case C.DRAW_IMAGE:E=n[1],h=n[2],m=n[3],p=n[4],d=n[5];let J=n[6];const K=n[7],$=n[8],tt=n[9],et=n[10];let nt=n[11];const it=n[12];let rt=n[13];const ot=n[14],st=n[15];if(!m&&n.length>=20){v=n[19],b=n[20],x=n[21],w=n[22];const t=this.drawLabelWithPointPlacement_(v,b,x,w);m=t.label,n[3]=m;const e=n[23];p=(t.anchorX-e)*this.pixelRatio,n[4]=p;const i=n[24];d=(t.anchorY-i)*this.pixelRatio,n[5]=d,J=m.height,n[6]=J,rt=m.width,n[13]=rt}let at,lt,ut,ct;n.length>25&&(at=n[25]),n.length>17?(lt=n[16],ut=n[17],ct=n[18]):(lt=M.oB,ut=!1,ct=!1),et&&A?nt+=N:et||A||(nt-=N);let ht=0;for(;E<h;E+=2){if(at&&at[ht++]<rt/this.pixelRatio)continue;const n=this.calculateImageOrLabelDimensions_(m.width,m.height,l[E],l[E+1],rt,J,p,d,$,tt,nt,it,r,lt,ut||ct,F),i=[t,e,m,n,K,ut?S:null,ct?I:null];if(a){if("none"===ot)continue;if("obstacle"===ot){a.insert(n.declutterBox);continue}{let t,e;if(st){const n=h-E;if(!st[n]){st[n]=i;continue}if(t=st[n],delete st[n],e=Q(t),a.collides(e))continue}if(a.collides(n.declutterBox))continue;t&&(a.insert(e),this.replayImageOrLabel_.apply(this,t)),a.insert(n.declutterBox)}}this.replayImageOrLabel_.apply(this,i)}++u;break;case C.DRAW_CHARS:const pt=n[1],dt=n[2],ft=n[3],gt=n[4];w=n[5];const yt=n[6],_t=n[7],mt=n[8];x=n[9];const vt=n[10];v=n[11],b=n[12];const bt=[n[13],n[13]],xt=this.textStates[b],wt=xt.font,Et=[xt.scale[0]*_t,xt.scale[1]*_t];let Pt;wt in this.widths_?Pt=this.widths_[wt]:(Pt={},this.widths_[wt]=Pt);const Ct=(0,X.W)(l,pt,dt,2),Ot=Math.abs(Et[0])*(0,M.Kd)(wt,v,Pt);if(gt||Ot<=Ct){const n=this.textStates[b].textAlign,i=q(l,pt,dt,2,v,(Ct-Ot)*G[n],yt,Math.abs(Et[0]),M.Kd,wt,Pt,A?0:this.viewRotation_);t:if(i){const n=[];let r,o,s,l,u;if(x)for(r=0,o=i.length;r<o;++r){u=i[r],s=u[4],l=this.createLabel(s,b,"",x),p=u[2]+(Et[0]<0?-vt:vt),d=ft*l.height+2*(.5-ft)*vt*Et[1]/Et[0]-mt;const o=this.calculateImageOrLabelDimensions_(l.width,l.height,u[0],u[1],l.width,l.height,p,d,0,0,u[3],bt,!1,M.oB,!1,F);if(a&&a.collides(o.declutterBox))break t;n.push([t,e,l,o,1,null,null])}if(w)for(r=0,o=i.length;r<o;++r){u=i[r],s=u[4],l=this.createLabel(s,b,w,""),p=u[2],d=ft*l.height-mt;const o=this.calculateImageOrLabelDimensions_(l.width,l.height,u[0],u[1],l.width,l.height,p,d,0,0,u[3],bt,!1,M.oB,!1,F);if(a&&a.collides(o.declutterBox))break t;n.push([t,e,l,o,1,null,null])}a&&a.load(n.map(Q));for(let t=0,e=n.length;t<e;++t)this.replayImageOrLabel_.apply(this,n[t])}}++u;break;case C.END_GEOMETRY:if(void 0!==o){F=n[1];const t=o(F,Z);if(t)return t}++u;break;case C.FILL:j?P++:this.fill_(t),++u;break;case C.MOVE_TO_LINE_TO:for(E=n[1],h=n[2],k=l[E],V=l[E+1],y=k+.5|0,_=V+.5|0,y===f&&_===g||(t.moveTo(k,V),f=y,g=_),E+=2;E<h;E+=2)k=l[E],V=l[E+1],y=k+.5|0,_=V+.5|0,E!=h-2&&y===f&&_===g||(t.lineTo(k,V),f=y,g=_);++u;break;case C.SET_FILL_STYLE:S=n,this.alignFill_=n[2],P&&(this.fill_(t),P=0,O&&(t.stroke(),O=0)),t.fillStyle=n[1],++u;break;case C.SET_STROKE_STYLE:I=n,O&&(t.stroke(),O=0),this.setStrokeStyle_(t,n),++u;break;case C.STROKE:j?O++:t.stroke(),++u;break;default:++u}}P&&this.fill_(t),O&&t.stroke()}execute(t,e,n,i,r,o){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,n,i,r){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,i,r)}};var rt=n(68326),ot=n(69374);const st=["Polygon","Circle","LineString","Image","Text","Default"],at={},lt=class{constructor(t,e,n,i,r,o){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,B.Ue)(),this.createExecutors_(r)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t){for(const e in t){let n=this.executorsByZIndex_[e];void 0===n&&(n={},this.executorsByZIndex_[e]=n);const i=t[e];for(const t in i){const e=i[t];n[t]=new it(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let e=0,i=t.length;e<i;++e)if(t[e]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,i,r,o){const s=2*(i=Math.round(i))+1,a=(0,B.qC)(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=(0,rt.E4)(s,s));const u=this.hitDetectionContext_;let c;u.canvas.width!==s||u.canvas.height!==s?(u.canvas.width=s,u.canvas.height=s):l||u.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(c=(0,L.createEmpty)(),(0,L.extendCoordinate)(c,t),(0,L.buffer)(c,e*(this.renderBuffer_+i),c));const h=function(t){if(void 0!==at[t])return at[t];const e=2*t+1,n=t*t,i=new Array(n+1);for(let r=0;r<=t;++r)for(let o=0;o<=t;++o){const s=r*r+o*o;if(s>n)break;let a=i[s];a||(a=[],i[s]=a),a.push(4*((t+r)*e+(t+o))+3),r>0&&a.push(4*((t-r)*e+(t+o))+3),o>0&&(a.push(4*((t+r)*e+(t-o))+3),r>0&&a.push(4*((t-r)*e+(t-o))+3))}const r=[];for(let t=0,e=i.length;t<e;++t)i[t]&&r.push(...i[t]);return at[t]=r,r}(i);let p;function d(t,e){const n=u.getImageData(0,0,s,s).data;for(let a=0,l=h.length;a<l;a++)if(n[h[a]]>0){if(!o||"Image"!==p&&"Text"!==p||o.includes(t)){const n=(h[a]-3)/4,o=i-n%s,l=i-(n/s|0),u=r(t,e,o*o+l*l);if(u)return u}u.clearRect(0,0,s,s);break}}const f=Object.keys(this.executorsByZIndex_).map(Number);let g,y,_,m,v;for(f.sort(T.kK),g=f.length-1;g>=0;--g){const t=f[g].toString();for(_=this.executorsByZIndex_[t],y=st.length-1;y>=0;--y)if(p=st[y],m=_[p],void 0!==m&&(v=m.executeHitDetection(u,a,n,d,c),v))return v}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],i=e[1],r=e[2],o=e[3],s=[n,i,n,o,r,o,r,i];return(0,W.vT)(s,0,8,2,t,s),s}isEmpty(){return(0,ot.x)(this.executorsByZIndex_)}execute(t,e,n,i,r,o,s){const a=Object.keys(this.executorsByZIndex_).map(Number);let l,u,c,h,p,d;for(a.sort(T.kK),this.maxExtent_&&(t.save(),this.clip(t,n)),o=o||st,s&&a.reverse(),l=0,u=a.length;l<u;++l){const u=a[l].toString();for(p=this.executorsByZIndex_[u],c=0,h=o.length;c<h;++c)d=p[o[c]],void 0!==d&&d.execute(t,e,n,i,r,s)}this.maxExtent_&&t.restore()}};var ut=n(37755),ct=n(55069);const ht=.5;var pt=n(76234),dt=n(57646),ft=n(76171);class gt extends z.Z{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,L.createEmpty)(),this.wrappedRenderedExtent_=(0,L.createEmpty)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,n){const i=e.extent,r=e.viewState,o=r.center,s=r.resolution,a=r.projection,l=r.rotation,u=a.getExtent(),c=this.getLayer().getSource(),h=e.pixelRatio,p=e.viewHints,d=!(p[ut.Z.ANIMATING]||p[ut.Z.INTERACTING]),f=this.compositionContext_,g=Math.round(e.size[0]*h),y=Math.round(e.size[1]*h),_=c.getWrapX()&&a.canWrapX(),m=_?(0,L.getWidth)(u):null,v=_?Math.ceil((i[2]-u[2])/m)+1:1;let b=_?Math.floor((i[0]-u[0])/m):0;do{const e=this.getRenderTransform(o,s,l,h,g,y,b*m);t.execute(f,1,e,l,d,void 0,n)}while(++b<v)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,rt.E4)(this.context.canvas.width,this.context.canvas.height,z.r);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,rt.jy)(this.compositionContext_),z.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const n=t.pixelRatio,i=t.layerStatesArray[t.layerIndex];(0,B.n3)(this.pixelTransform,1/n,1/n),(0,B.nb)(this.inversePixelTransform,this.pixelTransform);const r=(0,B.BB)(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const o=this.context,s=o.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!l||l.isEmpty()))return null;const u=Math.round(t.size[0]*n),c=Math.round(t.size[1]*n);s.width!=u||s.height!=c?(s.width=u,s.height=c,s.style.transform!==r&&(s.style.transform=r)):this.containerReused||o.clearRect(0,0,u,c),this.preRender(o,t);const h=t.viewState,p=h.projection;this.opacity_=i.opacity,this.setupCompositionContext_();let d=!1,f=!0;if(i.extent&&this.clipping){const e=(0,dt.fromUserExtent)(i.extent,p);f=(0,L.intersects)(e,t.extent),d=f&&!(0,L.containsExtent)(e,t.extent),d&&this.clipUnrotated(this.compositionContext_,t,e)}return f&&this.renderWorlds(a,t),d&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==h.rotation&&(this.renderedRotation_=h.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];(0,B.nn)(this.pixelTransform,t);const e=this.renderedCenter_,n=this.renderedResolution_,i=this.renderedRotation_,r=this.renderedProjection_,o=this.wrappedRenderedExtent_,s=this.getLayer(),a=[],u=t[0]*ht,c=t[1]*ht;a.push(this.getRenderTransform(e,n,i,ht,u,c,0).slice());const h=s.getSource(),p=r.getExtent();if(h.getWrapX()&&r.canWrapX()&&!(0,L.containsExtent)(p,o)){let t=o[0];const r=(0,L.getWidth)(p);let s,l=0;for(;t<p[0];)--l,s=r*l,a.push(this.getRenderTransform(e,n,i,ht,u,c,s).slice()),t+=r;for(l=0,t=o[2];t>p[2];)++l,s=r*l,a.push(this.getRenderTransform(e,n,i,ht,u,c,s).slice()),t-=r}this.hitDetectionImageData_=function(t,e,n,i,r,o,s){const a=t[0]*ht,u=t[1]*ht,c=(0,rt.E4)(a,u);c.imageSmoothingEnabled=!1;const h=c.canvas,p=new ct.Z(c,ht,r,null,s),d=n.length,f=Math.floor(16777215/d),g={};for(let t=1;t<=d;++t){const e=n[t-1],s=e.getStyleFunction()||i;if(!i)continue;let a=s(e,o);if(!a)continue;Array.isArray(a)||(a=[a]);const u="#"+("000000"+(t*f).toString(16)).slice(-6);for(let t=0,n=a.length;t<n;++t){const n=a[t],i=n.getGeometryFunction()(e);if(!i||!(0,L.intersects)(r,i.getExtent()))continue;const o=n.clone(),s=o.getFill();s&&s.setColor(u);const c=o.getStroke();c&&(c.setColor(u),c.setLineDash(null)),o.setText(void 0);const h=n.getImage();if(h&&0!==h.getOpacity()){const t=h.getImageSize();if(!t)continue;const e=(0,rt.E4)(t[0],t[1],void 0,{alpha:!1}),n=e.canvas;e.fillStyle=u,e.fillRect(0,0,n.width,n.height),o.setImage(new l.default({img:n,imgSize:t,anchor:h.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:h.getOrigin(),opacity:1,size:h.getSize(),scale:h.getScale(),rotation:h.getRotation(),rotateWithView:h.getRotateWithView()}))}const p=o.getZIndex()||0;let d=g[p];d||(d={},g[p]=d,d.Polygon=[],d.Circle=[],d.LineString=[],d.Point=[]),d[i.getType().replace("Multi","")].push(i,o)}}const y=Object.keys(g).map(Number).sort(T.kK);for(let t=0,n=y.length;t<n;++t){const n=g[y[t]];for(const t in n){const i=n[t];for(let t=0,n=i.length;t<n;t+=2){p.setStyle(i[t+1]);for(let n=0,r=e.length;n<r;++n)p.setTransform(e[n]),p.drawGeometry(i[t])}}}return c.getImageData(0,0,h.width,h.height)}(t,a,this.renderedFeatures_,s.getStyleFunction(),o,n,i)}e(function(t,e,n){const i=[];if(n){const r=Math.floor(Math.round(t[0])*ht),o=Math.floor(Math.round(t[1])*ht),s=4*((0,U.uZ)(r,0,n.width-1)+(0,U.uZ)(o,0,n.height-1)*n.width),a=n.data[s],l=n.data[s+1],u=n.data[s+2]+256*(l+256*a),c=Math.floor(16777215/e.length);u&&u%c==0&&i.push(e[u/c-1])}return i}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,n,i,r){if(!this.replayGroup_)return;const o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={},u=function(t,e,n){const o=(0,F.sq)(t),s=l[o];if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return l[o]=!0,r.splice(r.lastIndexOf(s),1),i(t,a,e);s.geometry=e,s.distanceSq=n}}else{if(0===n)return l[o]=!0,i(t,a,e);r.push(l[o]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}};let c;const h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some((i=>c=i.forEachFeatureAtCoordinate(t,o,s,n,u,i===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((t=>t.value)):null))),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const i=t.viewHints[ut.Z.ANIMATING],r=t.viewHints[ut.Z.INTERACTING],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(this.ready&&!o&&i||!s&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=t.extent,l=t.viewState,u=l.projection,c=l.resolution,h=t.pixelRatio,p=e.getRevision(),d=e.getRenderBuffer();let f=e.getRenderOrder();void 0===f&&(f=pt.eR);const g=l.center.slice(),y=(0,L.buffer)(a,d*c),_=y.slice(),m=[y.slice()],v=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!(0,L.containsExtent)(v,t.extent)){const t=(0,L.getWidth)(v),e=Math.max((0,L.getWidth)(y)/2,t);y[0]=v[0]-e,y[2]=v[2]+e,(0,ft.Cf)(g,u);const n=(0,L.wrapX)(m[0],u);n[0]<v[0]&&n[2]<v[2]?m.push([n[0]+t,n[1],n[2]+t,n[3]]):n[0]>v[0]&&n[2]>v[2]&&m.push([n[0]-t,n[1],n[2]-t,n[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==p&&this.renderedRenderOrder_==f&&(0,L.containsExtent)(this.wrappedRenderedExtent_,y))return(0,T.fS)(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new Z((0,pt.Qz)(c,h),y,c,h);let x;this.getLayer().getDeclutter()&&(x=new Z((0,pt.Qz)(c,h),y,c,h));const w=(0,dt.getUserProjection)();let E;if(w){for(let t=0,e=m.length;t<e;++t){const e=m[t],i=(0,dt.toUserExtent)(e,u);n.loadFeatures(i,(0,dt.toUserResolution)(c,u),w)}E=(0,dt.getTransformFromProjections)(w,u)}else for(let t=0,e=m.length;t<e;++t)n.loadFeatures(m[t],c,u);const P=(0,pt.se)(c,h);let C=!0;const O=function(t){let n;const i=t.getStyleFunction()||e.getStyleFunction();if(i&&(n=i(t,c)),n){const e=this.renderFeature(t,P,n,b,E,x);C=C&&!e}}.bind(this),S=(0,dt.toUserExtent)(y,u),I=n.getFeaturesInExtent(S);f&&I.sort(f);for(let t=0,e=I.length;t<e;++t)O(I[t]);this.renderedFeatures_=I,this.ready=C;const M=b.finish(),R=new lt(y,c,h,n.getOverlaps(),M,e.getRenderBuffer());return x&&(this.declutterExecutorGroup=new lt(y,c,h,n.getOverlaps(),x.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=p,this.renderedRenderOrder_=f,this.renderedExtent_=_,this.wrappedRenderedExtent_=y,this.renderedCenter_=g,this.renderedProjection_=u,this.replayGroup_=R,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,i,r,o){if(!n)return!1;let s=!1;if(Array.isArray(n))for(let a=0,l=n.length;a<l;++a)s=(0,pt.Pn)(i,t,n[a],e,this.boundHandleStyleImageChange_,r,o)||s;else s=(0,pt.Pn)(i,t,n,e,this.boundHandleStyleImageChange_,r,o);return s}}const yt=gt,_t=class extends v{constructor(t){super(t)}createRenderer(){return new yt(this)}}},33983:(t,e,n)=>{"use strict";function i(t,e,n){return Math.min(Math.max(t,e),n)}function r(t,e,n,i,r,s){const a=r-n,l=s-i;if(0!==a||0!==l){const o=((t-n)*a+(e-i)*l)/(a*a+l*l);o>1?(n=r,i=s):o>0&&(n+=a*o,i+=l*o)}return o(t,e,n,i)}function o(t,e,n,i){const r=n-t,o=i-e;return r*r+o*o}function s(t){const e=t.length;for(let n=0;n<e;n++){let i=n,r=Math.abs(t[n][n]);for(let o=n+1;o<e;o++){const e=Math.abs(t[o][n]);e>r&&(r=e,i=o)}if(0===r)return null;const o=t[i];t[i]=t[n],t[n]=o;for(let i=n+1;i<e;i++){const r=-t[i][n]/t[n][n];for(let o=n;o<e+1;o++)n==o?t[i][o]=0:t[i][o]+=r*t[n][o]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function a(t){return t*Math.PI/180}function l(t,e){const n=t%e;return n*e<0?n+e:n}function u(t,e,n){return t+n*(e-t)}function c(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function h(t,e){return Math.floor(c(t,e))}function p(t,e){return Math.ceil(c(t,e))}n.d(e,{$W:()=>l,FH:()=>c,GW:()=>h,SV:()=>s,Yr:()=>a,bI:()=>o,mD:()=>p,rU:()=>r,t7:()=>u,uZ:()=>i})},69374:(t,e,n)=>{"use strict";function i(t){for(const e in t)delete t[e]}function r(t){let e;for(e in t)return!1;return!e}n.d(e,{Z:()=>i,x:()=>r})},44238:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},57646:(t,e,n)=>{"use strict";n.r(e),n.d(e,{METERS_PER_UNIT:()=>i,Projection:()=>r,addCommon:()=>ot,addCoordinateTransforms:()=>k,addEquivalentProjections:()=>N,addEquivalentTransforms:()=>A,addProjection:()=>L,addProjections:()=>M,clearAllProjections:()=>D,clearUserProjection:()=>H,cloneTransform:()=>S,createProjection:()=>j,createSafeCoordinateTransform:()=>rt,createTransformFromCoordinateTransform:()=>F,disableCoordinateWarning:()=>O,equivalent:()=>Z,fromLonLat:()=>G,fromUserCoordinate:()=>Q,fromUserExtent:()=>et,fromUserResolution:()=>it,get:()=>T,getPointResolution:()=>R,getTransform:()=>B,getTransformFromProjections:()=>z,getUserProjection:()=>J,identityTransform:()=>I,setUserProjection:()=>Y,toLonLat:()=>V,toUserCoordinate:()=>$,toUserExtent:()=>tt,toUserResolution:()=>nt,transform:()=>U,transformExtent:()=>W,transformWithProjections:()=>q,useGeographic:()=>K});const i={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},r=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||i[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},o=6378137,s=Math.PI*o,a=[-s,-s,s,s],l=[-180,-85,180,85],u=o*Math.log(Math.tan(Math.PI/2));class c extends r{constructor(t){super({code:t,units:"m",extent:a,global:!0,worldExtent:l,getPointResolution:function(t,e){return t/Math.cosh(e[1]/o)}})}}const h=[new c("EPSG:3857"),new c("EPSG:102100"),new c("EPSG:102113"),new c("EPSG:900913"),new c("http://www.opengis.net/def/crs/EPSG/0/3857"),new c("http://www.opengis.net/gml/srs/epsg.xml#3857")];function p(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n){e[r]=s*t[r]/180;let n=o*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));n>u?n=u:n<-u&&(n=-u),e[r+1]=n}return e}function d(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n)e[r]=180*t[r]/s,e[r+1]=360*Math.atan(Math.exp(t[r+1]/o))/Math.PI-90;return e}const f=[-180,-90,180,90],g=6378137*Math.PI/180;class y extends r{constructor(t,e){super({code:t,units:"degrees",extent:f,axisOrientation:e,global:!0,metersPerUnit:g,worldExtent:f})}}const _=[new y("CRS:84"),new y("EPSG:4326","neu"),new y("urn:ogc:def:crs:OGC:1.3:CRS84"),new y("urn:ogc:def:crs:OGC:2:84"),new y("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new y("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new y("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let m={},v={};function b(t,e,n){const i=t.getCode(),r=e.getCode();i in v||(v[i]={}),v[i][r]=n}var x=n(28641),w=n(33983),E=n(76171);function P(t,e,n){n=n||6371008.8;const i=(0,w.Yr)(t[1]),r=(0,w.Yr)(e[1]),o=(r-i)/2,s=(0,w.Yr)(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}let C=!0;function O(t){C=!(void 0===t||t)}function S(t,e,n){if(void 0!==e)for(let n=0,i=t.length;n<i;++n)e[n]=t[n];else e=t.slice();return e}function I(t,e,n){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function L(t){!function(t,e){m[t]=e}(t.getCode(),t),b(t,t,S)}function M(t){t.forEach(L)}function T(t){return"string"==typeof t?m[e=t]||m[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function R(t,e,n,r){let o;const s=(t=T(t)).getPointResolutionFunc();if(s){if(o=s(e,n),r&&r!==t.getUnits()){const e=t.getMetersPerUnit();e&&(o=o*e/i[r])}}else{const s=t.getUnits();if("degrees"==s&&!r||"degrees"==r)o=e;else{const a=z(t,T("EPSG:4326"));if(a===I&&"degrees"!==s)o=e*t.getMetersPerUnit();else{let t=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];t=a(t,t,2),o=(P(t.slice(0,2),t.slice(2,4))+P(t.slice(4,6),t.slice(6,8)))/2}const l=r?i[r]:t.getMetersPerUnit();void 0!==l&&(o/=l)}}return o}function N(t){M(t),t.forEach((function(e){t.forEach((function(t){e!==t&&b(e,t,S)}))}))}function A(t,e,n,i){t.forEach((function(t){e.forEach((function(e){b(t,e,n),b(e,t,i)}))}))}function D(){m={},v={}}function j(t,e){return t?"string"==typeof t?T(t):t:T(e)}function F(t){return function(e,n,i){const r=e.length;i=void 0!==i?i:2,n=void 0!==n?n:new Array(r);for(let o=0;o<r;o+=i){const r=t(e.slice(o,o+i)),s=r.length;for(let t=0,a=i;t<a;++t)n[o+t]=t>=s?e[o+t]:r[t]}return n}}function k(t,e,n,i){const r=T(t),o=T(e);b(r,o,F(n)),b(o,r,F(i))}function G(t,e){return O(),U(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function V(t,e){const n=U(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=n[0];return(i<-180||i>180)&&(n[0]=(0,w.$W)(i+180,360)-180),n}function Z(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||z(t,e)===S)&&n}function z(t,e){let n=function(t,e){let n;return t in v&&e in v[t]&&(n=v[t][e]),n}(t.getCode(),e.getCode());return n||(n=I),n}function B(t,e){return z(T(t),T(e))}function U(t,e,n){return B(e,n)(t,void 0,t.length)}function W(t,e,n,i){const r=B(e,n);return(0,x.applyTransform)(t,r,void 0,i)}function q(t,e,n){return z(e,n)(t)}let X=null;function Y(t){X=T(t)}function H(){X=null}function J(){return X}function K(){Y("EPSG:4326")}function $(t,e){return X?U(t,e,X):t}function Q(t,e){return X?U(t,X,e):(C&&!(0,E.fS)(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(C=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function tt(t,e){return X?W(t,e,X):t}function et(t,e){return X?W(t,X,e):t}function nt(t,e){if(!X)return t;const n=T(e).getUnits(),r=X.getUnits();return n&&r?t*i[n]/i[r]:t}function it(t,e){if(!X)return t;const n=T(e).getUnits(),r=X.getUnits();return n&&r?t*i[r]/i[n]:t}function rt(t,e,n){return function(i){let r,o;if(t.canWrapX()){const e=t.getExtent(),s=(0,x.getWidth)(e);i=i.slice(0),o=(0,E.jk)(i,t,s),o&&(i[0]=i[0]-o*s),i[0]=(0,w.uZ)(i[0],e[0],e[2]),i[1]=(0,w.uZ)(i[1],e[1],e[3]),r=n(i)}else r=n(i);return o&&e.canWrapX()&&(r[0]+=o*(0,x.getWidth)(e.getExtent())),r}}function ot(){N(h),N(_),A(_,h,p,d)}ot()},57380:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(291);class r extends i.ZP{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}}const o=r},98771:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},45624:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=class{drawCustom(t,e,n,i){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}},50147:(t,e,n)=>{"use strict";n.d(e,{Df:()=>l,He:()=>p,Kd:()=>I,PH:()=>y,Qx:()=>P,Tx:()=>g,V4:()=>f,X9:()=>h,Zw:()=>L,_f:()=>M,bL:()=>u,mb:()=>c,oB:()=>m,rc:()=>d,ru:()=>_,sG:()=>b,yC:()=>v});var i=n(72971),r=n(40177),o=n(69374),s=n(68326),a=n(10245);const l="10px sans-serif",u="#000",c="round",h=[],p=0,d="round",f=10,g="#000",y="center",_="middle",m=[0,0,0,0],v=1,b=new i.Z;let x,w=null;const E={},P=function(){const t="32px ",e=["monospace","serif"],n=e.length,i="wmytzilWMYTZIL@#/&?$%10";let r,s;function l(r,o,a){let l=!0;for(let u=0;u<n;++u){const n=e[u];if(s=S(r+" "+o+" "+t+n,i),a!=n){const e=S(r+" "+o+" "+t+a+","+n,i);l=l&&e!=s}}return!!l}function u(){let t=!0;const e=b.getKeys();for(let n=0,i=e.length;n<i;++n){const i=e[n];b.get(i)<100&&(l.apply(this,i.split("\n"))?((0,o.Z)(E),w=null,x=void 0,b.set(i,100)):(b.set(i,b.get(i)+1,!0),t=!1))}t&&(clearInterval(r),r=void 0)}return function(t){const e=(0,a.p)(t);if(!e)return;const n=e.families;for(let t=0,i=n.length;t<i;++t){const i=n[t],o=e.style+"\n"+e.weight+"\n"+i;void 0===b.get(o)&&(b.set(o,100,!0),l(e.style,e.weight,i)||(b.set(o,0,!0),void 0===r&&(r=setInterval(u,32))))}}}(),C=function(){let t;return function(e){let n=E[e];if(null==n){if(r.Id){const t=(0,a.p)(e),i=O(e,"g");n=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);E[e]=n}return n}}();function O(t,e){return w||(w=(0,s.E4)(1,1)),t!=x&&(w.font=t,x=w.font),w.measureText(e)}function S(t,e){return O(t,e).width}function I(t,e,n){if(e in n)return n[e];const i=e.split("\n").reduce(((e,n)=>Math.max(e,S(t,n))),0);return n[e]=i,i}function L(t,e){const n=[],i=[],r=[];let o=0,s=0,a=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){const h=e[u];if("\n"===h||u===c){o=Math.max(o,s),r.push(s),s=0,a+=l;continue}const p=e[u+1]||t.font,d=S(p,h);n.push(d),s+=d;const f=C(p);i.push(f),l=Math.max(l,f)}return{width:o,height:a,widths:n,heights:i,lineWidths:r}}function M(t,e,n,i,r,o,s,a,l,u,c){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.setTransform.apply(t,e),i.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),function(t,e){const n=t.contextInstructions;for(let t=0,i=n.length;t<i;t+=2)Array.isArray(n[t+1])?e[n[t]].apply(e,n[t+1]):e[n[t]]=n[t+1]}(i,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(i,r,o,s,a,0,0,s,a)):t.drawImage(i,r,o,s,a,l,u,s*c[0],a*c[1]),t.restore()}},55069:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var i=n(45624),r=n(96620),o=n(6101),s=n(50147),a=n(65537),l=n(28641),u=n(76442),c=n(72967);class h extends i.Z{constructor(t,e,n,i,r,s,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.viewRotation_=r,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,o.Ue)()}drawImages_(t,e,n,i){if(!this.image_)return;const r=(0,u.vT)(t,e,n,i,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,l=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.imageRotateWithView_&&(c+=this.viewRotation_);for(let t=0,e=r.length;t<e;t+=2){const e=r[t]-this.imageAnchorX_,n=r[t+1]-this.imageAnchorY_;if(0!==c||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const t=e+this.imageAnchorX_,i=n+this.imageAnchorY_;(0,o.qC)(a,t,i,1,1,c,-t,-i),s.setTransform.apply(s,a),s.translate(t,i),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,n,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=l)}drawText_(t,e,n,i){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=(0,u.vT)(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_;let s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=i){const t=r[e]+this.textOffsetX_,n=r[e+1]+this.textOffsetY_;0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(t-this.textOffsetX_,n-this.textOffsetY_),o.rotate(s),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,t,n),this.textFillState_&&o.fillText(this.text_,t,n))}}moveToLineTo_(t,e,n,i,r){const o=this.context_,s=(0,u.vT)(t,e,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);let a=s.length;r&&(a-=2);for(let t=2;t<a;t+=2)o.lineTo(s[t],s[t+1]);return r&&o.closePath(),n}drawRings_(t,e,n,i){for(let r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e}drawCircle(t){if((0,l.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,c.Kr)(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&(0,l.intersects)(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let t=0,n=e.length;t<n;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,l.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();let i=0;const r=t.getEnds(),o=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t)i=this.moveToLineTo_(n,i,r[t],o,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const r=t.getEndss(),o=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t){const e=r[t];i=this.drawRings_(n,i,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,a.fS)(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:s.PH;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:(0,r.y)(e||s.bL)}}else this.fillState_=null;if(e){const t=e.getColor(),n=e.getLineCap(),i=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),u=e.getMiterLimit(),c=i||s.X9;this.strokeState_={lineCap:void 0!==n?n:s.mb,lineDash:1===this.pixelRatio_?c:c.map((t=>t*this.pixelRatio_)),lineDashOffset:(o||s.He)*this.pixelRatio_,lineJoin:void 0!==a?a:s.rc,lineWidth:(void 0!==l?l:s.yC)*this.pixelRatio_,miterLimit:void 0!==u?u:s.V4,strokeStyle:(0,r.y)(t||s.Tx)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const n=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:(0,r.y)(t||s.bL)}}else this.textFillState_=null;const n=t.getStroke();if(n){const t=n.getColor(),e=n.getLineCap(),i=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),u=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:s.mb,lineDash:i||s.X9,lineDashOffset:o||s.He,lineJoin:void 0!==a?a:s.rc,lineWidth:void 0!==l?l:s.yC,miterLimit:void 0!==u?u:s.V4,strokeStyle:(0,r.y)(t||s.Tx)}}else this.textStrokeState_=null;const i=t.getFont(),o=t.getOffsetX(),a=t.getOffsetY(),l=t.getRotateWithView(),u=t.getRotation(),c=t.getScaleArray(),h=t.getText(),p=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:void 0!==i?i:s.Df,textAlign:void 0!==p?p:s.PH,textBaseline:void 0!==d?d:s.ru},this.text_=void 0!==h?Array.isArray(h)?h.reduce(((t,e,n)=>t+(n%2?" ":e)),""):h:"",this.textOffsetX_=void 0!==o?this.pixelRatio_*o:0,this.textOffsetY_=void 0!==a?this.pixelRatio_*a:0,this.textRotateWithView_=void 0!==l&&l,this.textRotation_=void 0!==u?u:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}else this.text_=""}}const p=h},98015:(t,e,n)=>{"use strict";n.d(e,{r:()=>y,Z:()=>m});var i=n(85487),r=n(70553),o=n(62706),s=n(74187);class a extends o.Z{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return(0,s.O3)()}getData(t){return null}prepareFrame(t){return(0,s.O3)()}renderFrame(t,e){return(0,s.O3)()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return function(i,r){const o=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,r,o)}.bind(this)}forEachFeatureAtCoordinate(t,e,n,i,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===r.Z.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=r.Z.LOADED&&e!=r.Z.ERROR&&t.addEventListener(i.Z.CHANGE,this.boundHandleImageChange_),e==r.Z.IDLE&&(t.load(),e=t.getState()),e==r.Z.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const l=a;var u=n(57380),c=n(98771),h=n(6101),p=n(79706),d=n(68326),f=n(65537),g=n(28641);const y=[];let _=null;const m=class extends l{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,h.Ue)(),this.pixelTransform=(0,h.Ue)(),this.inversePixelTransform=(0,h.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){let i;_||function(){const t=document.createElement("canvas");t.width=1,t.height=1,_=t.getContext("2d")}(),_.clearRect(0,0,1,1);try{_.drawImage(t,e,n,1,1,0,0,1,1),i=_.getImageData(0,0,1,1).data}catch(t){return _=null,null}return i}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName();let r,o;if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&(0,f.fS)((0,p._2)(t.style.backgroundColor),(0,p._2)(n)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=i;let t=r.style;t.position="absolute",t.width="100%",t.height="100%",o=(0,d.E4)();const e=o.canvas;r.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=o}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=(0,g.getTopLeft)(n),r=(0,g.getTopRight)(n),o=(0,g.getBottomRight)(n),s=(0,g.getBottomLeft)(n);(0,h.nn)(e.coordinateToPixelTransform,i),(0,h.nn)(e.coordinateToPixelTransform,r),(0,h.nn)(e.coordinateToPixelTransform,o),(0,h.nn)(e.coordinateToPixelTransform,s);const a=this.inversePixelTransform;(0,h.nn)(a,i),(0,h.nn)(a,r),(0,h.nn)(a,o),(0,h.nn)(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const r=new u.Z(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(c.Z.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(c.Z.POSTRENDER,t,e)}getRenderTransform(t,e,n,i,r,o,s){const a=r/2,l=o/2,u=i/e,c=-u,p=-t[0]+s,d=-t[1];return(0,h.qC)(this.tempTransform,a,l,u,c,-n,p,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}},76234:(t,e,n)=>{"use strict";n.d(e,{Pn:()=>u,Qz:()=>l,eR:()=>s,se:()=>a});var i=n(70553),r=n(74187);const o={Point:function(t,e,n,r,o){const s=n.getImage(),a=n.getText();let l;if(s){if(s.getImageState()!=i.Z.LOADED)return;let u=t;if(o){const i=s.getDeclutterMode();if("none"!==i)if(u=o,"obstacle"===i){const i=t.getBuilder(n.getZIndex(),"Image");i.setImageStyle(s,l),i.drawPoint(e,r)}else a&&a.getText()&&(l={})}const c=u.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,l),c.drawPoint(e,r)}if(a&&a.getText()){let i=t;o&&(i=o);const s=i.getBuilder(n.getZIndex(),"Text");s.setTextStyle(a,l),s.drawText(e,r)}},LineString:function(t,e,n,i,r){const o=n.getStroke();if(o){const r=t.getBuilder(n.getZIndex(),"LineString");r.setFillStrokeStyle(null,o),r.drawLineString(e,i)}const s=n.getText();if(s&&s.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(s),o.drawText(e,i)}},Polygon:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke();if(o||s){const r=t.getBuilder(n.getZIndex(),"Polygon");r.setFillStrokeStyle(o,s),r.drawPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i)}},MultiPoint:function(t,e,n,r,o){const s=n.getImage(),a=n.getText();let l;if(s){if(s.getImageState()!=i.Z.LOADED)return;let u=t;if(o){const i=s.getDeclutterMode();if("none"!==i)if(u=o,"obstacle"===i){const i=t.getBuilder(n.getZIndex(),"Image");i.setImageStyle(s,l),i.drawMultiPoint(e,r)}else a&&a.getText()&&(l={})}const c=u.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,l),c.drawMultiPoint(e,r)}if(a&&a.getText()){let i=t;o&&(i=o);const s=i.getBuilder(n.getZIndex(),"Text");s.setTextStyle(a,l),s.drawText(e,r)}},MultiLineString:function(t,e,n,i,r){const o=n.getStroke();if(o){const r=t.getBuilder(n.getZIndex(),"LineString");r.setFillStrokeStyle(null,o),r.drawMultiLineString(e,i)}const s=n.getText();if(s&&s.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(s),o.drawText(e,i)}},MultiPolygon:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke();if(s||o){const r=t.getBuilder(n.getZIndex(),"Polygon");r.setFillStrokeStyle(o,s),r.drawMultiPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i)}},GeometryCollection:function(t,e,n,i,r){const s=e.getGeometriesArray();let a,l;for(a=0,l=s.length;a<l;++a)(0,o[s[a].getType()])(t,s[a],n,i,r)},Circle:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke();if(o||s){const r=t.getBuilder(n.getZIndex(),"Circle");r.setFillStrokeStyle(o,s),r.drawCircle(e,i)}const a=n.getText();if(a&&a.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i)}}};function s(t,e){return parseInt((0,r.sq)(t),10)-parseInt((0,r.sq)(e),10)}function a(t,e){const n=l(t,e);return n*n}function l(t,e){return.5*t/e}function u(t,e,n,r,s,a,l){let u=!1;const h=n.getImage();if(h){const t=h.getImageState();t==i.Z.LOADED||t==i.Z.ERROR?h.unlistenImageChange(s):(t==i.Z.IDLE&&h.load(),h.listenImageChange(s),u=!0)}return function(t,e,n,i,r,s){const a=n.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(i,r);n.getRenderer()?c(t,l,n,e):(0,o[l.getType()])(t,l,n,e,s)}(t,e,n,r,a,l),u}function c(t,e,n,i){if("GeometryCollection"!=e.getType())t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer());else{const r=e.getGeometries();for(let e=0,o=r.length;e<o;++e)c(t,r[e],n,i)}}},87161:(t,e,n)=>{"use strict";n.d(e,{Co:()=>p,aA:()=>h,rX:()=>l,sY:()=>d});var i=n(28641),r=n(68326),o=n(57646),s=n(33983);let a;const l=[];function u(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function c(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function h(t,e,n,r){const s=(0,o.transform)(n,e,t);let a=(0,o.getPointResolution)(e,r,n);const l=e.getMetersPerUnit();void 0!==l&&(a*=l);const u=t.getMetersPerUnit();void 0!==u&&(a/=u);const c=t.getExtent();if(!c||(0,i.containsCoordinate)(c,s)){const e=(0,o.getPointResolution)(t,a,s)/a;isFinite(e)&&e>0&&(a/=e)}return a}function p(t,e,n,r){const o=(0,i.getCenter)(n);let s=h(t,e,o,r);return(!isFinite(s)||s<=0)&&(0,i.forEachCorner)(n,(function(n){return s=h(t,e,n,r),isFinite(s)&&s>0})),s}function d(t,e,n,o,h,p,d,f,g,y,_,m){const v=(0,r.E4)(Math.round(n*t),Math.round(n*e),l);if(m||(v.imageSmoothingEnabled=!1),0===g.length)return v.canvas;function b(t){return Math.round(t*n)/n}v.scale(n,n),v.globalCompositeOperation="lighter";const x=(0,i.createEmpty)();g.forEach((function(t,e,n){(0,i.extend)(x,t.extent)}));const w=(0,i.getWidth)(x),E=(0,i.getHeight)(x),P=(0,r.E4)(Math.round(n*w/o),Math.round(n*E/o));m||(P.imageSmoothingEnabled=!1);const C=n/o;g.forEach((function(t,e,n){const r=t.extent[0]-x[0],o=-(t.extent[3]-x[3]),s=(0,i.getWidth)(t.extent),a=(0,i.getHeight)(t.extent);t.image.width>0&&t.image.height>0&&P.drawImage(t.image,y,y,t.image.width-2*y,t.image.height-2*y,r*C,o*C,s*C,a*C)}));const O=(0,i.getTopLeft)(d);return f.getTriangles().forEach((function(t,e,i){const r=t.source,l=t.target;let h=r[0][0],d=r[0][1],f=r[1][0],g=r[1][1],y=r[2][0],_=r[2][1];const w=b((l[0][0]-O[0])/p),E=b(-(l[0][1]-O[1])/p),C=b((l[1][0]-O[0])/p),S=b(-(l[1][1]-O[1])/p),I=b((l[2][0]-O[0])/p),L=b(-(l[2][1]-O[1])/p),M=h,T=d;h=0,d=0,f-=M,g-=T,y-=M,_-=T;const R=[[f,g,0,0,C-w],[y,_,0,0,I-w],[0,0,f,g,S-E],[0,0,y,_,L-E]],N=(0,s.SV)(R);if(N){if(v.save(),v.beginPath(),function(){if(void 0===a){const t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",u(t,4,5,4,0),u(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;a=c(e,0)||c(e,4)||c(e,8)}return a}()||!m){v.moveTo(C,S);const t=4,e=w-C,n=E-S;for(let i=0;i<t;i++)v.lineTo(C+b((i+1)*e/t),S+b(i*n/(t-1))),i!=t-1&&v.lineTo(C+b((i+1)*e/t),S+b((i+1)*n/(t-1)));v.lineTo(I,L)}else v.moveTo(C,S),v.lineTo(w,E),v.lineTo(I,L);v.clip(),v.transform(N[0],N[2],N[1],N[3],w,E),v.translate(x[0]-M,x[3]-T),v.scale(o/n,-o/n),v.drawImage(P.canvas,0,0),v.restore()}})),_&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,f.getTriangles().forEach((function(t,e,n){const i=t.target,r=(i[0][0]-O[0])/p,o=-(i[0][1]-O[1])/p,s=(i[1][0]-O[0])/p,a=-(i[1][1]-O[1])/p,l=(i[2][0]-O[0])/p,u=-(i[2][1]-O[1])/p;v.beginPath(),v.moveTo(s,a),v.lineTo(r,o),v.lineTo(l,u),v.closePath(),v.stroke()})),v.restore()),v.canvas}},9494:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var i=n(4773),r=n(85487),o=n(94806),s=n(37195),a=n(55476),l=n(87161),u=n(33983),c=n(28641),h=n(65818),p=n(68326);class d extends o.Z{constructor(t,e,n,r,o,h,p,d,f,g,y,_){super(o,s.Z.IDLE,{interpolate:!!_}),this.renderEdges_=void 0!==y&&y,this.pixelRatio_=p,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=h||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const m=r.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let b=this.sourceTileGrid_.getExtent();const x=v?(0,c.getIntersection)(m,v):m;if(0===(0,c.getArea)(x))return void(this.state=s.Z.EMPTY);const w=t.getExtent();w&&(b=b?(0,c.getIntersection)(b,w):w);const E=r.getResolution(this.wrappedTileCoord_[0]),P=(0,l.Co)(t,n,x,E);if(!isFinite(P)||P<=0)return void(this.state=s.Z.EMPTY);const C=void 0!==g?g:i.m;if(this.triangulation_=new a.Z(t,n,x,b,P*C,E),0===this.triangulation_.getTriangles().length)return void(this.state=s.Z.EMPTY);this.sourceZ_=e.getZForResolution(P);let O=this.triangulation_.calculateSourceExtent();if(b&&(t.canWrapX()?(O[1]=(0,u.uZ)(O[1],b[1],b[3]),O[3]=(0,u.uZ)(O[3],b[1],b[3])):O=(0,c.getIntersection)(O,b)),(0,c.getArea)(O)){const t=e.getTileRangeForExtentAndZ(O,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let n=t.minY;n<=t.maxY;n++){const t=f(this.sourceZ_,e,n,p);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=s.Z.EMPTY)}else this.state=s.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(function(e,n,i){e&&e.getState()==s.Z.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=s.Z.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,l.sY)(i,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,u,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=s.Z.LOADED}this.changed()}load(){if(this.state==s.Z.IDLE){this.state=s.Z.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,i){const o=e.getState();if(o==s.Z.IDLE||o==s.Z.LOADING){t++;const n=(0,h.listen)(e,r.Z.CHANGE,(function(i){const r=e.getState();r!=s.Z.LOADED&&r!=s.Z.ERROR&&r!=s.Z.EMPTY||((0,h.unlistenByKey)(n),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(n)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){t.getState()==s.Z.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(h.unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,p.jy)(this.canvas_.getContext("2d")),l.rX.push(this.canvas_),this.canvas_=null),super.release()}}const f=d},55476:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(28641),r=n(57646),o=n(33983);const s=class{constructor(t,e,n,o,s,a){this.sourceProj_=t,this.targetProj_=e;let l={};const u=(0,r.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return l[e]||(l[e]=u(t)),l[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&(0,i.getWidth)(o)==(0,i.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,i.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,i.getWidth)(this.targetProj_.getExtent()):null;const c=(0,i.getTopLeft)(n),h=(0,i.getTopRight)(n),p=(0,i.getBottomRight)(n),d=(0,i.getBottomLeft)(n),f=this.transformInv_(c),g=this.transformInv_(h),y=this.transformInv_(p),_=this.transformInv_(d),m=10+(a?Math.max(0,Math.ceil(Math.log2((0,i.getArea)(n)/(a*a*256*256)))):0);if(this.addQuad_(c,h,p,d,f,g,y,_,m),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.sourceWorldWidth_/2&&(e.source=n)}}.bind(this))}l={}}addTriangle_(t,e,n,i,r,o){this.triangles_.push({source:[i,r,o],target:[t,e,n]})}addQuad_(t,e,n,r,s,a,l,u,c){const h=(0,i.boundingExtent)([s,a,l,u]),p=this.sourceWorldWidth_?(0,i.getWidth)(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&p>.5&&p<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const o=(0,i.boundingExtent)([t,e,n,r]);g=(0,i.getWidth)(o)/this.targetWorldWidth_>.25||g}!f&&this.sourceProj_.isGlobal()&&p&&(g=p>.25||g)}if(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!(0,i.intersects)(h,this.maxSourceExtent_))return;let y=0;if(!(g||isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])))if(c>0)g=!0;else if(y=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1),1!=y&&2!=y&&4!=y&&8!=y)return;if(c>0){if(!g){const e=[(t[0]+n[0])/2,(t[1]+n[1])/2],i=this.transformInv_(e);let r;r=f?((0,o.$W)(s[0],d)+(0,o.$W)(l[0],d))/2-(0,o.$W)(i[0],d):(s[0]+l[0])/2-i[0];const a=(s[1]+l[1])/2-i[1];g=r*r+a*a>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const i=[(e[0]+n[0])/2,(e[1]+n[1])/2],o=this.transformInv_(i),h=[(r[0]+t[0])/2,(r[1]+t[1])/2],p=this.transformInv_(h);this.addQuad_(t,e,i,h,s,a,o,p,c-1),this.addQuad_(h,i,n,r,p,o,l,u,c-1)}else{const i=[(t[0]+e[0])/2,(t[1]+e[1])/2],o=this.transformInv_(i),h=[(n[0]+r[0])/2,(n[1]+r[1])/2],p=this.transformInv_(h);this.addQuad_(t,i,h,r,s,o,p,u,c-1),this.addQuad_(i,e,n,h,o,a,l,p,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&y)&&this.addTriangle_(t,n,r,s,l,u),0==(14&y)&&this.addTriangle_(t,n,e,s,l,a),y&&(0==(13&y)&&this.addTriangle_(e,r,t,a,u,s),0==(7&y)&&this.addTriangle_(e,r,n,a,u,l))}calculateSourceExtent(){const t=(0,i.createEmpty)();return this.triangles_.forEach((function(e,n,r){const o=e.source;(0,i.extendCoordinate)(t,o[0]),(0,i.extendCoordinate)(t,o[1]),(0,i.extendCoordinate)(t,o[2])})),t}getTriangles(){return this.triangles_}}},4773:(t,e,n)=>{"use strict";n.d(e,{m:()=>i});const i=.5},60828:(t,e,n)=>{"use strict";n.d(e,{Gw:()=>a,YP:()=>o,gE:()=>s,h$:()=>r});var i=n(33983);function r(t){return void 0!==t?0:void 0}function o(t){return void 0!==t?t:void 0}function s(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function a(t){return t=t||(0,i.Yr)(5),function(e,n){return n?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}},4307:(t,e,n)=>{"use strict";function i(t){return t[0]>0&&t[1]>0}function r(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function o(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}n.d(e,{Pq:()=>o,bA:()=>r,py:()=>i})},50636:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>x,r6:()=>b});var i=n(291),r=n(70553),o=n(4773),s=n(85487),a=n(31798),l=n(55476),u=n(87161),c=n(28641),h=n(65818);class p extends a.Z{constructor(t,e,n,i,s,a,h){const p=t.getExtent(),d=e.getExtent(),f=d?(0,c.getIntersection)(n,d):n,g=(0,c.getCenter)(f),y=(0,u.aA)(t,e,g,i),_=o.m,m=new l.Z(t,e,f,p,y*_,i),v=a(m.calculateSourceExtent(),y,s),b=v?r.Z.IDLE:r.Z.EMPTY,x=v?v.getPixelRatio():1;super(n,i,x,b),this.targetProj_=e,this.maxSourceExtent_=p,this.triangulation_=m,this.targetResolution_=i,this.targetExtent_=n,this.sourceImage_=v,this.sourcePixelRatio_=x,this.interpolate_=h,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==r.Z.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==r.Z.LOADED){const t=(0,c.getWidth)(this.targetExtent_)/this.targetResolution_,e=(0,c.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,u.sY)(t,e,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}load(){if(this.state==r.Z.IDLE){this.state=r.Z.LOADING,this.changed();const t=this.sourceImage_.getState();t==r.Z.LOADED||t==r.Z.ERROR?this.reproject_():(this.sourceListenerKey_=(0,h.listen)(this.sourceImage_,s.Z.CHANGE,(function(t){const e=this.sourceImage_.getState();e!=r.Z.LOADED&&e!=r.Z.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}unlistenSource_(){(0,h.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null}}const d=p;var f=n(58458),g=n(74187),y=n(57646),_=n(65537);class m extends i.ZP{constructor(t,e){super(t),this.image=e}}class v extends f.Z{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}findNearestResolution(t){if(this.resolutions_){const e=(0,_.h7)(this.resolutions_,t,0);t=this.resolutions_[e]}return t}getImage(t,e,n,i){const r=this.getProjection();if(r&&i&&!(0,y.equivalent)(r,i)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,y.equivalent)(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==e&&(0,c.equals)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new d(r,i,t,e,n,function(t,e,n){return this.getImageInternal(t,e,n,r)}.bind(this),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return r&&(i=r),this.getImageInternal(t,e,n,i)}getImageInternal(t,e,n,i){return(0,g.O3)()}handleImageChange(t){const e=t.target;let n;switch(e.getState()){case r.Z.LOADING:this.loading=!0,n="imageloadstart";break;case r.Z.LOADED:this.loading=!1,n="imageloadend";break;case r.Z.ERROR:this.loading=!1,n="imageloaderror";break;default:return}this.hasListener(n)&&this.dispatchEvent(new m(n,e))}}function b(t,e){t.getImage().src=e}const x=v},39293:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>h});var i=n(85487),r=n(50636),o=n(70553),s=n(18096),a=n(68326),l=n(28641),u=n(57646);class c extends r.ZP{constructor(t){const e=void 0!==t.crossOrigin?t.crossOrigin:null,n=void 0!==t.imageLoadFunction?t.imageLoadFunction:r.r6;super({attributions:t.attributions,interpolate:t.interpolate,projection:(0,u.get)(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image_=new s.Z(this.imageExtent_,void 0,1,this.url_,e,n),this.imageSize_=t.imageSize?t.imageSize:null,this.image_.addEventListener(i.Z.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,e,n,i){return(0,l.intersects)(t,this.image_.getExtent())?this.image_:null}getUrl(){return this.url_}handleImageChange(t){if(this.image_.getState()==o.Z.LOADED){const t=this.image_.getExtent(),e=this.image_.getImage();let n,i;this.imageSize_?(n=this.imageSize_[0],i=this.imageSize_[1]):(n=e.width,i=e.height);const r=(0,l.getWidth)(t),o=(0,l.getHeight)(t),s=r/n,u=o/i;let c=n,h=i;if(s>u?c=Math.round(r/u):h=Math.round(o/s),c!==n||h!==i){const t=(0,a.E4)(c,h);this.getInterpolate()||(t.imageSmoothingEnabled=!1);const r=t.canvas;t.drawImage(e,0,0,n,i,0,0,r.width,r.height),this.image_.setImage(r)}}super.handleImageChange(t)}}const h=c},58458:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(72971),r=n(74187),o=n(57646);class s extends i.Z{constructor(t){super(),this.projection=(0,o.get)(t.projection),this.attributions_=a(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,n){e.viewResolver=t,e.viewRejector=n}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return(0,r.O3)()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=a(t),this.changed()}setState(t){this.state_=t,this.changed()}}function a(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const l=s},57302:(t,e,n)=>{"use strict";n.d(e,{Z:()=>g,s:()=>f});var i=n(291),r=n(58458),o=n(95532),s=n(37195),a=n(74187),l=n(99515),u=n(57646),c=n(98634),h=n(57248),p=n(4307);class d extends r.Z{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;this.tileGrid&&(0,p.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new o.Z(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,i){const r=this.getTileCacheForProjection(t);if(!r)return!1;let o,a,l,u=!0;for(let t=n.minX;t<=n.maxX;++t)for(let h=n.minY;h<=n.maxY;++h)a=(0,c.lg)(e,t,h),l=!1,r.containsKey(a)&&(o=r.get(a),l=o.getState()===s.Z.LOADED,l&&(l=!1!==i(o))),l||(u=!1);return u}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,n,i,r){return(0,a.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:(0,h.X$)(t)}getTileCacheForProjection(t){const e=this.getProjection();return(0,l.h)(null===e||(0,u.equivalent)(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=(0,p.Pq)(i.getTileSize(t),this.tmpSize);return 1==r?o:(0,p.bA)(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=(0,h.Cf)(n,t,e)),(0,c.tE)(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,i){}}class f extends i.ZP{constructor(t,e){super(t),this.tile=e}}const g=d},37261:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var i=n(85487),r=n(20825),o=n(9494),s=n(95532),a=n(37195);var l=n(57302),u=n(67848),c=n(98634),h=n(74187);class p extends l.Z{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===p.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=(0,h.sq)(e),i=e.getState();let r;i==a.Z.LOADING?(this.tileLoadingKeys_[n]=!0,r="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=i==a.Z.ERROR?"tileloaderror":i==a.Z.LOADED?"tileloadend":void 0),null!=r&&this.dispatchEvent(new l.s(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=(0,u.Gk)(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,u.uR)(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const i=(0,c.lg)(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}const d=p;var f=n(57646),g=n(57248);function y(t,e){t.getImage().src=e}const _=class extends d{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:y,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:r.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const t in this.tileCacheForProjection){const i=this.tileCacheForProjection[t];i.expireCache(i==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!(0,f.equivalent)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!(0,f.equivalent)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(!this.tileGrid||e&&!(0,f.equivalent)(e,t)){const e=(0,h.sq)(t);return e in this.tileGridForProjection||(this.tileGridForProjection[e]=(0,g.X$)(t)),this.tileGridForProjection[e]}return this.tileGrid}getTileCacheForProjection(t){const e=this.getProjection();if(!e||(0,f.equivalent)(e,t))return this.tileCache;{const e=(0,h.sq)(t);return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new s.Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]}}createTile_(t,e,n,r,o,s){const l=[t,e,n],u=this.getTileCoordForTileUrlFunction(l,o),c=u?this.tileUrlFunction(u,r,o):void 0,h=new this.tileClass(l,void 0!==c?a.Z.IDLE:a.Z.EMPTY,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=s,h.addEventListener(i.Z.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,e,n,i,r){const s=this.getProjection();if(s&&r&&!(0,f.equivalent)(s,r)){const a=this.getTileCacheForProjection(r),l=[t,e,n];let u;const h=(0,c.km)(l);a.containsKey(h)&&(u=a.get(h));const p=this.getKey();if(u&&u.key==p)return u;{const t=this.getTileGridForProjection(s),e=this.getTileGridForProjection(r),n=this.getTileCoordForTileUrlFunction(l,r),c=new o.Z(s,t,r,e,l,n,this.getTilePixelRatio(i),this.getGutter(),function(t,e,n,i){return this.getTileInternal(t,e,n,i,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return c.key=p,u?(c.interimTile=u,c.refreshInterimChain(),a.replace(h,c)):a.set(h,c),c}}return this.getTileInternal(t,e,n,i,s||r)}getTileInternal(t,e,n,i,r){let o=null;const s=(0,c.lg)(t,e,n),l=this.getKey();if(this.tileCache.containsKey(s)){if(o=this.tileCache.get(s),o.key!=l){const u=o;o=this.createTile_(t,e,n,i,r,l),u.getState()==a.Z.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,n,i,r,l),this.tileCache.set(s,o);return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const n=(0,f.get)(t);if(n){const t=(0,h.sq)(n);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}},71800:(t,e,n)=>{"use strict";n.r(e),n.d(e,{VectorSourceEvent:()=>b,default:()=>w});var i=n(78714),r=n(42071),o=n(291),s=n(85487),a=n(35990),l=n(39781),u=n(58458),c=n(22796),h=n(36885);function p(t,e){return[[-1/0,-1/0,1/0,1/0]]}n(57646);var d=n(99515),f=n(28641),g=n(65537),y=n(74187),_=n(69374),m=n(65818);function v(t,e){return function(n,i,r,o,s){const a=this;!function(t,e,n,i,r,o,s){const a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(n,i,r):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){const t=e.getType();let i;"json"==t||"text"==t?i=a.responseText:"xml"==t?(i=a.responseXML,i||(i=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==t&&(i=a.response),i?o(e.readFeatures(i,{extent:n,featureProjection:r}),e.readProjection(i)):s()}else s()},a.onerror=s,a.send()}(t,e,n,i,r,(function(t,e){a.addFeatures(t),void 0!==o&&o(t)}),s||h.Zn)}}class b extends o.ZP{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class x extends u.Z{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=h.Zn,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,d.h)(this.format_,7),this.loader_=v(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:p;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let n,r;this.featuresRtree_=e?new l.Z:null,this.loadedExtentsRtree_=new l.Z,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?r=t.features:t.features&&(n=t.features,r=n.getArray()),e||void 0!==n||(n=new i.Z(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==n&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=(0,y.sq)(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const e=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new b(c.Z.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[(0,m.listen)(e,s.Z.CHANGE,this.handleFeatureChange_,this),(0,m.listen)(e,a.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let n=!0;const i=e.getId();return void 0!==i&&(i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e),n&&((0,d.h)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],i=[];for(let e=0,i=t.length;e<i;e++){const i=t[e],r=(0,y.sq)(i);this.addToIndex_(r,i)&&n.push(i)}for(let t=0,r=n.length;t<r;t++){const r=n[t],o=(0,y.sq)(r);this.setupChangeEvents_(o,r);const s=r.getGeometry();if(s){const t=s.getExtent();e.push(t),i.push(r)}else this.nullGeometryFeatures_[o]=r}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(c.Z.ADDFEATURE))for(let t=0,e=n.length;t<e;t++)this.dispatchEvent(new b(c.Z.ADDFEATURE,n[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(c.Z.ADDFEATURE,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(c.Z.REMOVEFEATURE,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(r.Z.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(r.Z.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(m.unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=function(t){this.removeFeatureInternal(t)}.bind(this);this.featuresRtree_.forEach(t);for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new b(c.Z.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){const t=e(n);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,_.x)(this.nullGeometryFeatures_)||(0,g.l7)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=(0,f.wrapAndSliceX)(t,e);return[].concat(...n.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],i=t[1];let r=null;const o=[NaN,NaN];let s=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||h.uX,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=s;if(s=e.closestPointXY(n,i,o,s),s<l){r=t;const e=Math.sqrt(s);a[0]=n-e,a[1]=i-e,a[2]=n+e,a[3]=i+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=(0,y.sq)(e),i=e.getGeometry();if(i){const t=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);const r=e.getId();if(void 0!==r){const t=r.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new b(c.Z.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:(0,y.sq)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,_.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,n){const i=this.loadedExtentsRtree_,r=this.strategy_(t,e,n);for(let t=0,o=r.length;t<o;++t){const o=r[t];i.forEachInExtent(o,(function(t){return(0,f.containsExtent)(t.extent,o)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new b(c.Z.FEATURESLOADSTART)),this.loader_.call(this,o,e,n,function(t){--this.loadingExtentsCount_,this.dispatchEvent(new b(c.Z.FEATURESLOADEND,void 0,t))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new b(c.Z.FEATURESLOADERROR))}.bind(this)),i.insert(o,{extent:o.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,(function(e){if((0,f.equals)(e.extent,t))return n=e,!0})),n&&e.remove(n)}removeFeature(t){if(!t)return;const e=(0,y.sq)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=(0,y.sq)(t),n=this.featureChangeKeys_[e];if(!n)return;n.forEach(m.unlistenByKey),delete this.featureChangeKeys_[e];const i=t.getId();return void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new b(c.Z.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){(0,d.h)(this.format_,7),this.url_=t,this.setLoader(v(t,this.format_))}}const w=x},22796:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},57433:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>c,optionsFromCapabilities:()=>h});var i=n(37261);function r(t,e){const n=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))}));const i=n.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+i}var o=n(28641),s=n(59600),a=n(67848),l=n(57646);class u extends i.Z{constructor(t){const e=void 0!==t.requestEncoding?t.requestEncoding:"KVP",n=t.tileGrid;let i=t.urls;void 0===i&&void 0!==t.url&&(i=(0,a.Gk)(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:i,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),i&&i.length>0&&(this.tileUrlFunction=(0,a.Un)(i.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction((0,a.Un)(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){let t=0;const e=[];for(const n in this.dimensions_)e[t++]=n+"-"+this.dimensions_[n];return e.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==e&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==e?r(t,n):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in n?n[e.toLowerCase()]:t}));const i=this.tileGrid,o=this.dimensions_;return function(n,s,a){if(n){const s={TileMatrix:i.getMatrixId(n[0]),TileCol:n[1],TileRow:n[2]};Object.assign(s,o);let a=t;return a="KVP"==e?r(a,s):a.replace(/\{(\w+?)\}/g,(function(t,e){return s[e]})),a}}}}const c=u;function h(t,e){const n=t.Contents.Layer.find((function(t){return t.Identifier==e.layer}));if(!n)return null;const i=t.Contents.TileMatrixSet;let r;r=n.TileMatrixSetLink.length>1?"projection"in e?n.TileMatrixSetLink.findIndex((function(t){const n=i.find((function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,r=(0,l.get)(n),o=(0,l.get)(e.projection);return r&&o?(0,l.equivalent)(r,o):n==e.projection})):n.TileMatrixSetLink.findIndex((function(t){return t.TileMatrixSet==e.matrixSet})):0,r<0&&(r=0);const a=n.TileMatrixSetLink[r].TileMatrixSet,u=n.TileMatrixSetLink[r].TileMatrixSetLimits;let c=n.Format[0];"format"in e&&(c=e.format),r=n.Style.findIndex((function(t){return"style"in e?t.Title==e.style:t.isDefault})),r<0&&(r=0);const h=n.Style[r].Identifier,p={};"Dimension"in n&&n.Dimension.forEach((function(t,e,n){const i=t.Identifier;let r=t.Default;void 0===r&&(r=t.Value[0]),p[i]=r}));const d=t.Contents.TileMatrixSet.find((function(t){return t.Identifier==a}));let f;const g=d.SupportedCRS;if(g&&(f=(0,l.get)(g)),"projection"in e){const t=(0,l.get)(e.projection);t&&(f&&!(0,l.equivalent)(t,f)||(f=t))}let y=!1;const _="ne"==f.getAxisOrientation().substr(0,2);let m=d.TileMatrix[0],v={MinTileCol:0,MinTileRow:0,MaxTileCol:m.MatrixWidth-1,MaxTileRow:m.MatrixHeight-1};if(u){v=u[u.length-1];const t=d.TileMatrix.find((t=>t.Identifier===v.TileMatrix||d.Identifier+":"+t.Identifier===v.TileMatrix));t&&(m=t)}const b=28e-5*m.ScaleDenominator/f.getMetersPerUnit(),x=_?[m.TopLeftCorner[1],m.TopLeftCorner[0]]:m.TopLeftCorner,w=m.TileWidth*b,E=m.TileHeight*b;let P=d.BoundingBox;P&&_&&(P=[P[1],P[0],P[3],P[2]]);let C=[x[0]+w*v.MinTileCol,x[1]-E*(1+v.MaxTileRow),x[0]+w*(1+v.MaxTileCol),x[1]-E*v.MinTileRow];if(void 0!==P&&!(0,o.containsExtent)(P,C)){const t=n.WGS84BoundingBox,e=(0,l.get)("EPSG:4326").getExtent();if(C=P,t)y=t[0]===e[0]&&t[2]===e[2];else{const t=(0,l.transformExtent)(P,d.SupportedCRS,"EPSG:4326");y=t[0]-1e-10<=e[0]&&t[2]+1e-10>=e[2]}}const O=(0,s.createFromCapabilitiesMatrixSet)(d,C,u),S=[];let I=e.requestEncoding;if(I=void 0!==I?I:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata){const e=t.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let t=0,n=e.length;t<n;++t)if(e[t].Constraint){const n=e[t].Constraint.find((function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===I&&(I=n[0]),"KVP"!==I)break;n.includes("KVP")&&S.push(e[t].href)}else e[t].href&&(I="KVP",S.push(e[t].href))}return 0===S.length&&(I="REST",n.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(c=t.format,S.push(t.template))}))),{urls:S,layer:e.layer,matrixSet:a,format:c,projection:f,requestEncoding:I,tileGrid:O,style:h,dimensions:p,wrapX:y,crossOrigin:e.crossOrigin}}},54680:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var i=n(37261),r=n(57248);class o extends i.Z{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:(0,r.dl)({extent:(0,r.Tl)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}}const s=o},39781:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(59197),r=n(28641),o=n(74187),s=n(69374);const a=class{constructor(t){this.rbush_=new i.default(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[(0,o.sq)(e)]=n}load(t,e){const n=new Array(e.length);for(let i=0,r=e.length;i<r;i++){const r=t[i],s=e[i],a={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:s};n[i]=a,this.items_[(0,o.sq)(s)]=a}this.rbush_.load(n)}remove(t){const e=(0,o.sq)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}update(t,e){const n=this.items_[(0,o.sq)(e)],i=[n.minX,n.minY,n.maxX,n.maxY];(0,r.equals)(i,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let i=0,r=t.length;i<r;i++)if(n=e(t[i]),n)return n;return n}isEmpty(){return(0,s.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return(0,r.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}},89931:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Circle:()=>i.default,Fill:()=>r.default,Icon:()=>o.default,IconImage:()=>s.Z,Image:()=>a.Z,RegularShape:()=>l.Z,Stroke:()=>u.default,Style:()=>c.default,Text:()=>h.Z});var i=n(30283),r=n(51345),o=n(2370),s=n(23713),a=n(28443),l=n(35393),u=n(58958),c=n(47539),h=n(21280)},30283:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var i=n(35393);class r extends i.Z{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new r({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const o=r},51345:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});class i{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){const t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const r=i},2370:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>h});var i=n(85487),r=n(70553),o=n(28443),s=n(79706),a=n(99515),l=n(23713),u=n(74187);class c extends o.Z{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,n=void 0!==t.rotation?t.rotation:0,i=void 0!==t.scale?t.scale:1,o=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:n,scale:i,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const c=void 0!==t.img?t.img:null;this.imgSize_=t.imgSize;let h=t.src;(0,a.h)(!(void 0!==h&&c),4),(0,a.h)(!c||c&&this.imgSize_,5),void 0!==h&&0!==h.length||!c||(h=c.src||(0,u.sq)(c)),(0,a.h)(void 0!==h&&h.length>0,6);const p=void 0!==t.src?r.Z.IDLE:r.Z.LOADED;this.color_=void 0!==t.color?(0,s._2)(t.color):null,this.iconImage_=(0,l.U)(c,h,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,p,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null}clone(){const t=this.getScale();return new c({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(i.Z.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(i.Z.CHANGE,t)}}const h=c},23713:(t,e,n)=>{"use strict";n.d(e,{U:()=>p,Z:()=>d});var i=n(208),r=n(85487),o=n(70553),s=n(79706),a=n(68326),l=n(92710),u=n(18096);let c=null;class h extends i.Z{constructor(t,e,n,i,r,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=r,this.size_=n,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===o.Z.LOADED){c||(c=(0,a.E4)(1,1)),c.drawImage(this.image_,0,0);try{c.getImageData(0,0,1,1),this.tainted_=!1}catch(t){c=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(r.Z.CHANGE)}handleImageError_(){this.imageState_=o.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=o.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=(0,a.E4)(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===o.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=o.Z.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,u.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==o.Z.LOADED)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const i=n.getContext("2d");i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=(0,s.XC)(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function p(t,e,n,i,r,o){let s=l.c.get(e,i,o);return s||(s=new h(t,e,n,i,r,o),l.c.set(e,i,o,s)),s}const d=h},92710:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var i=n(79706);function r(t,e,n){return e+":"+t+":"+(n?(0,i.XC)(n):"null")}const o=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const i=r(t,e,n);return i in this.cache_?this.cache_[i]:null}set(t,e,n,i){const o=r(t,e,n);this.cache_[o]=i,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}},28443:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(74187),r=n(4307);class o{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,r.Pq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new o({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,i.O3)()}getImage(t){return(0,i.O3)()}getHitDetectionImage(){return(0,i.O3)()}getPixelRatio(t){return 1}getImageState(){return(0,i.O3)()}getImageSize(){return(0,i.O3)()}getOrigin(){return(0,i.O3)()}getSize(){return(0,i.O3)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.Pq)(t)}listenImageChange(t){(0,i.O3)()}load(){(0,i.O3)()}unlistenImageChange(t){(0,i.O3)()}}const s=o},35393:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var i=n(70553),r=n(28443),o=n(79706),s=n(96620),a=n(68326),l=n(50147);class u extends r.Z{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new u({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const n=this.renderOptions_,i=(0,a.E4)(n.size*t,n.size*t);this.draw_(n,i,t),e=i.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return i.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let i=this.radius_,r=void 0===this.radius2_?i:this.radius2_;if(i<r){const t=i;i=r,r=t}const o=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/o,a=r*Math.sin(s),l=i-Math.sqrt(r*r-a*a),u=Math.sqrt(a*a+l*l),c=u/a;if("miter"===t&&c<=n)return c*e;const h=e/2/c,p=e/2*(l/u),d=Math.sqrt((i+h)*(i+h)+p*p)-i;if(void 0===this.radius2_||"bevel"===t)return 2*d;const f=i*Math.sin(s),g=r-Math.sqrt(i*i-f*f),y=Math.sqrt(f*f+g*g)/f;if(y<=n){const t=y*e/2-r-i;return 2*Math.max(d,t)}return 2*d}createRenderOptions(){let t,e=l.rc,n=0,i=null,r=0,o=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=l.Tx),t=(0,s.y)(t),o=this.stroke_.getWidth(),void 0===o&&(o=l.yC),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=l.rc),n=this.stroke_.getMiterLimit(),void 0===n&&(n=l.V4));const a=this.calculateLineJoinSize_(e,o,n),u=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*u+a),lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=l.bL),e.fillStyle=(0,s.y)(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),n=0;if("string"==typeof e&&(e=(0,o._2)(e)),null===e?n=1:Array.isArray(e)&&(n=4===e.length?e[3]:1),0===n){const e=(0,a.E4)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const i=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let s=0;s<e;s++){const e=r+s*o,a=s%2==0?n:i;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=l.bL,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const c=u},58958:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});class i{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const r=i},47539:(t,e,n)=>{"use strict";n.r(e),n.d(e,{createDefaultStyle:()=>c,createEditingStyle:()=>h,default:()=>d,toFunction:()=>l});var i=n(30283),r=n(51345),o=n(58958),s=n(99515);class a{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=p,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new a({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=p,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function l(t){let e;if("function"==typeof t)e=t;else{let n;Array.isArray(t)?n=t:((0,s.h)("function"==typeof t.getZIndex,41),n=[t]),e=function(){return n}}return e}let u=null;function c(t,e){if(!u){const t=new r.default({color:"rgba(255,255,255,0.4)"}),e=new o.default({color:"#3399CC",width:1.25});u=[new a({image:new i.default({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return u}function h(){const t={},e=[255,255,255,1],n=[0,153,255,1];return t.Polygon=[new a({fill:new r.default({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new a({stroke:new o.default({color:e,width:5})}),new a({stroke:new o.default({color:n,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new a({image:new i.default({radius:6,fill:new r.default({color:n}),stroke:new o.default({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function p(t){return t.getGeometry()}const d=a},21280:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(51345),r=n(4307);class o{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,r.Pq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new i.default({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.Pq)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const s=o},98634:(t,e,n)=>{"use strict";function i(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function r(t,e,n){return t+"/"+e+"/"+n}function o(t){return r(t[0],t[1],t[2])}function s(t){return t.split("/").map(Number)}function a(t){return(t[1]<<t[0])+t[2]}function l(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const o=e.getFullTileRange(n);return!o||o.containsXY(i,r)}n.d(e,{T9:()=>i,Ul:()=>s,km:()=>o,lg:()=>r,tE:()=>l,vp:()=>a})},57248:(t,e,n)=>{"use strict";n.d(e,{Cf:()=>u,Tl:()=>p,X$:()=>l,dl:()=>c});var i=n(8738),r=n(94768),o=n(57646),s=n(28641),a=n(4307);function l(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,n,r){return function(t,e,n,r){r=void 0!==r?r:"top-left";const o=h(t,undefined,n);return new i.default({extent:t,origin:(0,s.getCorner)(t,r),resolutions:o,tileSize:n})}(p(t),0,void 0,void 0)}(t),t.setDefaultTileGrid(e)),e}function u(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),o=p(n);if((0,s.containsCoordinate)(o,r))return e;{const e=(0,s.getWidth)(o),n=Math.ceil((o[0]-r[0])/e);return r[0]+=e*n,t.getTileCoordForCoordAndZ(r,i)}}function c(t){const e=t||{},n=e.extent||(0,o.get)("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:h(n,e.maxZoom,e.tileSize,e.maxResolution)};return new i.default(r)}function h(t,e,n,i){e=void 0!==e?e:r.e,n=(0,a.Pq)(void 0!==n?n:r.S);const o=(0,s.getHeight)(t),l=(0,s.getWidth)(t);i=i>0?i:Math.max(l/n[0],o/n[1]);const u=e+1,c=new Array(u);for(let t=0;t<u;++t)c[t]=i/Math.pow(2,t);return c}function p(t){let e=(t=(0,o.get)(t)).getExtent();if(!e){const n=180*o.METERS_PER_UNIT.degrees/t.getMetersPerUnit();e=(0,s.createOrUpdate)(-n,-n,n,n)}return e}},8738:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>d});var i=n(2519),r=n(94768),o=n(99515),s=n(33983),a=n(28641),l=n(98634),u=n(63746),c=n(65537),h=n(4307);const p=[0,0,0],d=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,o.h)((0,c.pT)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(let t=0,n=this.resolutions_.length-1;t<n;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,o.h)(this.origins_.length==this.resolutions_.length,20));const n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=(0,a.getTopLeft)(n)),(0,o.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,o.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:r.S,(0,o.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){const r=new i.Z(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(n){const t=this.getTileRangeForExtentAndZ(n,e);r.minX=Math.max(t.minX,r.minX),r.maxX=Math.min(t.maxX,r.maxX),r.minY=Math.max(t.minY,r.minY),r.maxY=Math.min(t.maxY,r.maxY)}return r}),this):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let t=i.minX,r=i.maxX;t<=r;++t)for(let r=i.minY,o=i.maxY;r<=o;++r)n([e,t,r])}forEachTileCoordParentTileRange(t,e,n,r){let o,s,a,l=null,u=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);u>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),a=Math.floor(a/2),o=(0,i.T)(s,s,a,a,n)):o=this.getTileRangeForExtentAndZ(l,u,n),e(u,o))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*t[1],r=2*t[2];return(0,i.T)(n,n+1,r,r+1,e)}const r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const r=t[0],o=t[1],s=t[2];if(e===r)return(0,i.T)(o,s,o,s,n);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-r),a=Math.floor(o*t),l=Math.floor(s*t);if(e<r)return(0,i.T)(a,a,l,l,n);const u=Math.floor(t*(o+1))-1,c=Math.floor(t*(s+1))-1;return(0,i.T)(a,u,l,c,n)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,n)}getTileRangeExtent(t,e,n){const i=this.getOrigin(t),r=this.getResolution(t),o=(0,h.Pq)(this.getTileSize(t),this.tmpSize_),s=i[0]+e.minX*o[0]*r,l=i[0]+(e.maxX+1)*o[0]*r,u=i[1]+e.minY*o[1]*r,c=i[1]+(e.maxY+1)*o[1]*r;return(0,a.createOrUpdate)(s,u,l,c,n)}getTileRangeForExtentAndZ(t,e,n){const r=p;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r);const o=r[1],s=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),(0,i.T)(o,r[1],s,r[2],n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=(0,h.Pq)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=(0,h.Pq)(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*i,s=n[1]-(t[2]+1)*r[1]*i,l=o+r[0]*i,u=s+r[1]*i;return(0,a.createOrUpdate)(o,s,l,u,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,i,r){const o=this.getZForResolution(n),a=n/this.getResolution(o),u=this.getOrigin(o),c=(0,h.Pq)(this.getTileSize(o),this.tmpSize_);let p=a*(t-u[0])/n/c[0],d=a*(u[1]-e)/n/c[1];return i?(p=(0,s.mD)(p,5)-1,d=(0,s.mD)(d,5)-1):(p=(0,s.GW)(p,5),d=(0,s.GW)(d,5)),(0,l.T9)(o,p,d,r)}getTileCoordForXYAndZ_(t,e,n,i,r){const o=this.getOrigin(n),a=this.getResolution(n),u=(0,h.Pq)(this.getTileSize(n),this.tmpSize_);let c=(t-o[0])/a/u[0],p=(o[1]-e)/a/u[1];return i?(c=(0,s.mD)(c,5)-1,p=(0,s.mD)(p,5)-1):(c=(0,s.GW)(c,5),p=(0,s.GW)(p,5)),(0,l.T9)(n,c,p,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=(0,c.h7)(this.resolutions_,t,e||0);return(0,s.uZ)(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return(0,u.mV)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n}}},59600:(t,e,n)=>{"use strict";n.r(e),n.d(e,{createFromCapabilitiesMatrixSet:()=>a,default:()=>s});var i=n(8738),r=n(57646);class o extends i.default{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}}const s=o;function a(t,e,n){const i=[],s=[],a=[],l=[],u=[];n=void 0!==n?n:[];const c=t.SupportedCRS,h=(0,r.get)(c),p=h.getMetersPerUnit(),d="ne"==h.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,e){return e.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(e){let r;if(r=!(n.length>0)||n.find((function(n){return e.Identifier==n.TileMatrix||!e.Identifier.includes(":")&&t.Identifier+":"+e.Identifier===n.TileMatrix})),r){s.push(e.Identifier);const t=28e-5*e.ScaleDenominator/p,n=e.TileWidth,r=e.TileHeight;d?a.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):a.push(e.TopLeftCorner),i.push(t),l.push(n==r?n:[n,r]),u.push([e.MatrixWidth,e.MatrixHeight])}})),new o({extent:e,origins:a,resolutions:i,matrixIds:s,tileSizes:l,sizes:u})}},94768:(t,e,n)=>{"use strict";n.d(e,{S:()=>r,e:()=>i});const i=42,r=256},67848:(t,e,n)=>{"use strict";n.d(e,{Gk:()=>u,Un:()=>l,uR:()=>a});var i=n(99515),r=n(33983),o=n(98634);function s(t,e){const n=/\{z\}/g,r=/\{x\}/g,o=/\{y\}/g,s=/\{-y\}/g;return function(a,l,u){return a?t.replace(n,a[0].toString()).replace(r,a[1].toString()).replace(o,a[2].toString()).replace(s,(function(){const t=a[0],n=e.getFullTileRange(t);return(0,i.h)(n,55),(n.getHeight()-a[2]-1).toString()})):void 0}}function a(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=s(t[r],e);return l(i)}function l(t){return 1===t.length?t[0]:function(e,n,i){if(e){const s=(0,o.vp)(e),a=(0,r.$W)(s,t.length);return t[a](e,n,i)}}}function u(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}},6101:(t,e,n)=>{"use strict";n.d(e,{BB:()=>d,Jp:()=>s,Ue:()=>o,lk:()=>a,n3:()=>u,nb:()=>h,nn:()=>l,qC:()=>c});var i=n(40177),r=n(99515);function o(){return[1,0,0,1,0,0]}function s(t,e){const n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=e[0],u=e[1],c=e[2],h=e[3],p=e[4],d=e[5];return t[0]=n*l+r*u,t[1]=i*l+o*u,t[2]=n*c+r*h,t[3]=i*c+o*h,t[4]=n*p+r*d+s,t[5]=i*p+o*d+a,t}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function l(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function u(t,e,n){return r=e,o=0,s=0,a=n,l=0,u=0,(i=t)[0]=r,i[1]=o,i[2]=s,i[3]=a,i[4]=l,i[5]=u,i;var i,r,o,s,a,l,u}function c(t,e,n,i,r,o,s,a){const l=Math.sin(o),u=Math.cos(o);return t[0]=i*u,t[1]=r*l,t[2]=-i*l,t[3]=r*u,t[4]=s*i*u-a*i*l+e,t[5]=s*r*l+a*r*u+n,t}function h(t,e){const n=(i=e)[0]*i[3]-i[1]*i[2];var i;(0,r.h)(0!==n,32);const o=e[0],s=e[1],a=e[2],l=e[3],u=e[4],c=e[5];return t[0]=l/n,t[1]=-s/n,t[2]=-a/n,t[3]=o/n,t[4]=(a*c-l*u)/n,t[5]=-(o*c-s*u)/n,t}let p;function d(t){const e="matrix("+t.join(", ")+")";if(i.Id)return e;const n=p||(p=document.createElement("div"));return n.style.transform=e,n.style.transform}new Array(6)},74187:(t,e,n)=>{"use strict";function i(){throw new Error("Unimplemented abstract method.")}n.d(e,{O3:()=>i,sq:()=>o});let r=0;function o(t){return t.ol_uid||(t.ol_uid=String(++r))}},25214:(t,e,n)=>{"use strict";n.r(e),n.d(e,{BufferOp:()=>xi,GeoJSONReader:()=>Se,GeoJSONWriter:()=>Ie,OverlayOp:()=>Rr,UnionOp:()=>Zr}),"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var i=function(){};i.prototype.interfaces_=function(){return[]},i.prototype.getClass=function(){return i},i.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var r=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),o=function(){},s={MAX_VALUE:{configurable:!0}};o.isNaN=function(t){return Number.isNaN(t)},o.doubleToLongBits=function(t){return t},o.longBitsToDouble=function(t){return t},o.isInfinite=function(t){return!Number.isFinite(t)},s.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(o,s);var a=function(){},l=function(){},u=function(){};function c(){}var h=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},p={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};h.prototype.setOrdinate=function(t,e){switch(t){case h.X:this.x=e;break;case h.Y:this.y=e;break;case h.Z:this.z=e;break;default:throw new r("Invalid ordinate index: "+t)}},h.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!i.equalsWithTolerance(this.x,e.x,n)&&!!i.equalsWithTolerance(this.y,e.y,n)}},h.prototype.getOrdinate=function(t){switch(t){case h.X:return this.x;case h.Y:return this.y;case h.Z:return this.z}throw new r("Invalid ordinate index: "+t)},h.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||o.isNaN(this.z))&&o.isNaN(t.z)},h.prototype.equals=function(t){return t instanceof h&&this.equals2D(t)},h.prototype.equalInZ=function(t,e){return i.equalsWithTolerance(this.z,t.z,e)},h.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},h.prototype.clone=function(){},h.prototype.copy=function(){return new h(this)},h.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},h.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},h.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},h.prototype.hashCode=function(){var t=17;return 37*(t=37*t+h.hashCode(this.x))+h.hashCode(this.y)},h.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},h.prototype.interfaces_=function(){return[a,l,c]},h.prototype.getClass=function(){return h},h.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=o.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},p.DimensionalComparator.get=function(){return d},p.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},p.NULL_ORDINATE.get=function(){return o.NaN},p.X.get=function(){return 0},p.Y.get=function(){return 1},p.Z.get=function(){return 2},Object.defineProperties(h,p);var d=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new r("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};d.prototype.compare=function(t,e){var n=t,i=e,r=d.compare(n.x,i.x);if(0!==r)return r;var o=d.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:d.compare(n.z,i.z)},d.prototype.interfaces_=function(){return[u]},d.prototype.getClass=function(){return d},d.compare=function(t,e){return t<e?-1:t>e?1:o.isNaN(t)?o.isNaN(e)?0:-1:o.isNaN(e)?1:0};var f=function(){};f.prototype.create=function(){},f.prototype.interfaces_=function(){return[]},f.prototype.getClass=function(){return f};var g=function(){},y={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};g.prototype.interfaces_=function(){return[]},g.prototype.getClass=function(){return g},g.toLocationSymbol=function(t){switch(t){case g.EXTERIOR:return"e";case g.BOUNDARY:return"b";case g.INTERIOR:return"i";case g.NONE:return"-"}throw new r("Unknown location value: "+t)},y.INTERIOR.get=function(){return 0},y.BOUNDARY.get=function(){return 1},y.EXTERIOR.get=function(){return 2},y.NONE.get=function(){return-1},Object.defineProperties(g,y);var _=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},m=function(){},v={LOG_10:{configurable:!0}};m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.log10=function(t){var e=Math.log(t);return o.isInfinite(e)||o.isNaN(e)?e:e/m.LOG_10},m.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},m.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},m.wrap=function(t,e){return t<0?e- -t%e:t%e},m.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],l=r;return o>l&&(l=o),s>l&&(l=s),a>l&&(l=a),l}},m.average=function(t,e){return(t+e)/2},v.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(m,v);var b=function(t){this.str=t};b.prototype.append=function(t){this.str+=t},b.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},b.prototype.toString=function(t){return this.str};var x=function(t){this.value=t};x.prototype.intValue=function(){return this.value},x.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},x.isNaN=function(t){return Number.isNaN(t)};var w=function(){};w.isWhitespace=function(t){return t<=32&&t>=0||127===t},w.toUpperCase=function(t){return t.toUpperCase()};var E=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var i=arguments[0];t.call(this,t.parse(i))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}},P={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};E.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},E.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=E.magnitude(n._hi),r=E.TEN.pow(i);(n=n.divide(r)).gt(E.TEN)?(n=n.divide(E.TEN),i+=1):n.lt(E.ONE)&&(n=n.multiply(E.TEN),i-=1);for(var o=i+1,s=new b,a=E.MAX_PRINT_DIGITS-1,l=0;l<=a;l++){t&&l===o&&s.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,s.append(h),n=n.subtract(E.valueOf(u)).multiply(E.TEN),c&&n.selfAdd(E.TEN);var p=!0,d=E.magnitude(n._hi);if(d<0&&Math.abs(d)>=a-l&&(p=!1),!p)break}return e[0]=i,s.toString()},E.prototype.sqr=function(){return this.multiply(this)},E.prototype.doubleValue=function(){return this._hi+this._lo},E.prototype.subtract=function(){if(arguments[0]instanceof E){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},E.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},E.prototype.isZero=function(){return 0===this._hi&&0===this._lo},E.prototype.selfSubtract=function(){if(arguments[0]instanceof E){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},E.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},E.prototype.min=function(t){return this.le(t)?this:t},E.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,l=null,u=null,c=null,h=null;return l=this._hi/n,h=(r=(u=E.SPLIT*l)-(r=u-l))*(s=(h=E.SPLIT*n)-(s=h-n))-(c=l*n)+r*(a=n-s)+(o=l-r)*s+o*a,h=l+(u=(this._hi-c-h+this._lo-l*i)/n),this._hi=h,this._lo=l-h+u,this}},E.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},E.prototype.divide=function(){if(arguments[0]instanceof E){var t=arguments[0],e=null,n=null,i=null,r=null,s=null,a=null,l=null,u=null;n=(s=this._hi/t._hi)-(e=(a=E.SPLIT*s)-(e=a-s)),u=e*(i=(u=E.SPLIT*t._hi)-(i=u-t._hi))-(l=s*t._hi)+e*(r=t._hi-i)+n*i+n*r;var c=u=s+(a=(this._hi-l-u+this._lo-s*t._lo)/t._hi),h=s-u+a;return new E(c,h)}if("number"==typeof arguments[0]){var p=arguments[0];return o.isNaN(p)?E.createNaN():E.copy(this).selfDivide(p,0)}},E.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},E.prototype.pow=function(t){if(0===t)return E.valueOf(1);var e=new E(this),n=E.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},E.prototype.ceil=function(){if(this.isNaN())return E.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new E(t,e)},E.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},E.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},E.prototype.setValue=function(){if(arguments[0]instanceof E){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},E.prototype.max=function(t){return this.ge(t)?this:t},E.prototype.sqrt=function(){if(this.isZero())return E.valueOf(0);if(this.isNegative())return E.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=E.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)},E.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null;return o=(r=this._hi+e)-(s=r-this._hi),i=(a=(o=e-s+(this._hi-o))+this._lo)+(r-(n=r+a)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],u=arguments[1],c=null,h=null,p=null,d=null,f=null,g=null,y=null;d=this._hi+l,h=this._lo+u,f=d-(g=d-this._hi),p=h-(y=h-this._lo);var _=(c=d+(g=(f=l-g+(this._hi-f))+h))+(g=(p=u-y+(this._lo-p))+(g+(d-c))),m=g+(c-_);return this._hi=_,this._lo=m,this}},E.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof E){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,l=null,u=null;r=(l=E.SPLIT*this._hi)-this._hi,u=E.SPLIT*n,r=l-r,o=this._hi-r,s=u-n;var c=(l=this._hi*n)+(u=r*(s=u-s)-l+r*(a=n-s)+o*s+o*a+(this._hi*i+this._lo*n)),h=u+(r=l-c);return this._hi=c,this._lo=h,this}},E.prototype.selfSqr=function(){return this.selfMultiply(this)},E.prototype.floor=function(){if(this.isNaN())return E.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new E(t,e)},E.prototype.negate=function(){return this.isNaN()?this:new E(-this._hi,-this._lo)},E.prototype.clone=function(){},E.prototype.multiply=function(){if(arguments[0]instanceof E){var t=arguments[0];return t.isNaN()?E.createNaN():E.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return o.isNaN(e)?E.createNaN():E.copy(this).selfMultiply(e,0)}},E.prototype.isNaN=function(){return o.isNaN(this._hi)},E.prototype.intValue=function(){return Math.trunc(this._hi)},E.prototype.toString=function(){var t=E.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},E.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+E.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length;r=n+E.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},E.prototype.reciprocal=function(){var t,e,n,i,r=null,o=null,s=null,a=null;t=(n=1/this._hi)-(r=(s=E.SPLIT*n)-(r=s-n)),o=(a=E.SPLIT*this._hi)-this._hi;var l=n+(s=(1-(i=n*this._hi)-(a=r*(o=a-o)-i+r*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new E(l,n-l+s)},E.prototype.toSciNotation=function(){if(this.isZero())return E.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=E.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},E.prototype.abs=function(){return this.isNaN()?E.NaN:this.isNegative()?this.negate():new E(this)},E.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},E.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},E.prototype.add=function(){if(arguments[0]instanceof E){var t=arguments[0];return E.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return E.copy(this).selfAdd(e)}},E.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof E){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},E.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},E.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},E.prototype.trunc=function(){return this.isNaN()?E.NaN:this.isPositive()?this.floor():this.ceil()},E.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},E.prototype.interfaces_=function(){return[c,a,l]},E.prototype.getClass=function(){return E},E.sqr=function(t){return E.valueOf(t).selfMultiply(t)},E.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return E.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new E(e)}},E.sqrt=function(t){return E.valueOf(t).sqrt()},E.parse=function(t){for(var e=0,n=t.length;w.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new E,s=0,a=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,w.isDigit(u)){var c=u-"0";o.selfMultiply(E.TEN),o.selfAdd(c),s++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=x.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}a=s}}var p=o,d=s-a-l;if(0===d)p=o;else if(d>0){var f=E.TEN.pow(d);p=o.divide(f)}else if(d<0){var g=E.TEN.pow(-d);p=o.multiply(g)}return i?p.negate():p},E.createNaN=function(){return new E(o.NaN,o.NaN)},E.copy=function(t){return new E(t)},E.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},E.stringOfChar=function(t,e){for(var n=new b,i=0;i<e;i++)n.append(t);return n.toString()},P.PI.get=function(){return new E(3.141592653589793,12246467991473532e-32)},P.TWO_PI.get=function(){return new E(6.283185307179586,24492935982947064e-32)},P.PI_2.get=function(){return new E(1.5707963267948966,6123233995736766e-32)},P.E.get=function(){return new E(2.718281828459045,14456468917292502e-32)},P.NaN.get=function(){return new E(o.NaN,o.NaN)},P.EPS.get=function(){return 123259516440783e-46},P.SPLIT.get=function(){return 134217729},P.MAX_PRINT_DIGITS.get=function(){return 32},P.TEN.get=function(){return E.valueOf(10)},P.ONE.get=function(){return E.valueOf(1)},P.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},P.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(E,P);var C=function(){},O={DP_SAFE_EPSILON:{configurable:!0}};C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C},C.orientationIndex=function(t,e,n){var i=C.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=E.valueOf(e.x).selfAdd(-t.x),o=E.valueOf(e.y).selfAdd(-t.y),s=E.valueOf(n.x).selfAdd(-e.x),a=E.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},C.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},C.intersection=function(t,e,n,i){var r=E.valueOf(i.y).selfSubtract(n.y).selfMultiply(E.valueOf(e.x).selfSubtract(t.x)),o=E.valueOf(i.x).selfSubtract(n.x).selfMultiply(E.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=E.valueOf(i.x).selfSubtract(n.x).selfMultiply(E.valueOf(t.y).selfSubtract(n.y)),l=E.valueOf(i.y).selfSubtract(n.y).selfMultiply(E.valueOf(t.x).selfSubtract(n.x)),u=a.subtract(l).selfDivide(s).doubleValue(),c=E.valueOf(t.x).selfAdd(E.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),p=E.valueOf(e.x).selfSubtract(t.x).selfMultiply(E.valueOf(t.y).selfSubtract(n.y)),d=E.valueOf(e.y).selfSubtract(t.y).selfMultiply(E.valueOf(t.x).selfSubtract(n.x)),f=p.subtract(d).selfDivide(s).doubleValue(),g=E.valueOf(n.y).selfAdd(E.valueOf(i.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new h(c,g)},C.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(o<=0)return C.signum(s);i=r+o}else{if(!(r<0))return C.signum(s);if(o>=0)return C.signum(s);i=-r-o}var a=C.DP_SAFE_EPSILON*i;return s>=a||-s>=a?C.signum(s):2},C.signum=function(t){return t>0?1:t<0?-1:0},O.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(C,O);var S=function(){},I={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};I.X.get=function(){return 0},I.Y.get=function(){return 1},I.Z.get=function(){return 2},I.M.get=function(){return 3},S.prototype.setOrdinate=function(t,e,n){},S.prototype.size=function(){},S.prototype.getOrdinate=function(t,e){},S.prototype.getCoordinate=function(){},S.prototype.getCoordinateCopy=function(t){},S.prototype.getDimension=function(){},S.prototype.getX=function(t){},S.prototype.clone=function(){},S.prototype.expandEnvelope=function(t){},S.prototype.copy=function(){},S.prototype.getY=function(t){},S.prototype.toCoordinateArray=function(){},S.prototype.interfaces_=function(){return[l]},S.prototype.getClass=function(){return S},Object.defineProperties(S,I);var L=function(){},M=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(L),T=function(){};T.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},T.getProperty=function(t){return{"line.separator":"\n"}[t]};var R=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof h&&arguments[1]instanceof h){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var p=arguments[0],d=arguments[1],f=arguments[2],g=arguments[3],y=p.y-d.y,_=d.x-p.x,m=p.x*d.y-d.x*p.y,v=f.y-g.y,b=g.x-f.x,x=f.x*g.y-g.x*f.y;this.x=_*x-b*m,this.y=v*m-y*x,this.w=y*b-v*_}};R.prototype.getY=function(){var t=this.y/this.w;if(o.isNaN(t)||o.isInfinite(t))throw new M;return t},R.prototype.getX=function(){var t=this.x/this.w;if(o.isNaN(t)||o.isInfinite(t))throw new M;return t},R.prototype.getCoordinate=function(){var t=new h;return t.x=this.getX(),t.y=this.getY(),t},R.prototype.interfaces_=function(){return[]},R.prototype.getClass=function(){return R},R.intersection=function(t,e,n,i){var r=t.y-e.y,s=e.x-t.x,a=t.x*e.y-e.x*t.y,l=n.y-i.y,u=i.x-n.x,c=n.x*i.y-i.x*n.y,p=r*u-l*s,d=(s*c-u*a)/p,f=(l*a-r*c)/p;if(o.isNaN(d)||o.isInfinite(d)||o.isNaN(f)||o.isInfinite(f))throw new M;return new h(d,f)};var N=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof h){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3];this.init(o,s,a,l)}},A={serialVersionUID:{configurable:!0}};N.prototype.getArea=function(){return this.getWidth()*this.getHeight()},N.prototype.equals=function(t){if(!(t instanceof N))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},N.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new N;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new N(e,i,n,r)},N.prototype.isNull=function(){return this._maxx<this._minx},N.prototype.getMaxX=function(){return this._maxx},N.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof h){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof N){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},N.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof h){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},N.prototype.getMinY=function(){return this._miny},N.prototype.getMinX=function(){return this._minx},N.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof h){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof N){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},N.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},N.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},N.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},N.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},N.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},N.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},N.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},N.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},N.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},N.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof h){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},N.prototype.centre=function(){return this.isNull()?null:new h((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},N.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof h){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof N){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},N.prototype.getMaxY=function(){return this._maxy},N.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},N.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+h.hashCode(this._minx))+h.hashCode(this._maxx))+h.hashCode(this._miny))+h.hashCode(this._maxy)},N.prototype.interfaces_=function(){return[a,c]},N.prototype.getClass=function(){return N},N.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),l=Math.max(o.x,s.x),u=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(u>l||c<a||(a=Math.min(o.y,s.y),l=Math.max(o.y,s.y),u=Math.min(i.y,r.y),c=Math.max(i.y,r.y),u>l||c<a))}},A.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(N,A);var D={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},j=function(t){this.geometryFactory=t||new xe};j.prototype.read=function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=D.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=D.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],k[n]&&(e=k[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},j.prototype.write=function(t){return this.extractGeometry(t)},j.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!F[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+F[e].apply(this,[t])+")"};var F={coordinate:function(t){return t.x+" "+t.y},point:function(t){return F.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+F.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(F.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(F.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+F.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+F.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+F.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+F.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},k={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(D.spaces);return this.geometryFactory.createPoint(new h(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(D.trimParens,"$1"),i.push(k.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(D.spaces),i.push(new h(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(D.spaces),i.push(new h(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(D.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(D.trimParens,"$1"),i.push(k.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){var e,n,i;if(void 0===t)return this.geometryFactory.createPolygon();for(var r,o=t.trim().split(D.parenComma),s=[],a=0,l=o.length;a<l;++a)e=o[a].replace(D.trimParens,"$1"),n=k.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(D.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(D.trimParens,"$1"),i.push(k.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},G=function(t){this.parser=new j(t)};G.prototype.write=function(t){return this.parser.write(t)},G.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var V=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Z=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(V),z=function(){};z.prototype.interfaces_=function(){return[]},z.prototype.getClass=function(){return z},z.shouldNeverReachHere=function(){if(0===arguments.length)z.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Z("Should never reach here"+(null!==t?": "+t:""))}},z.isTrue=function(){var t;if(1===arguments.length)z.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Z:new Z(t)},z.equals=function(){var t,e,n;if(2===arguments.length)z.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new Z("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var B=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new h,this._intPt[1]=new h,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},U={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};B.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},B.prototype.getTopologySummary=function(){var t=new b;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},B.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},B.prototype.getIntersectionNum=function(){return this._result},B.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},B.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},B.prototype.setPrecisionModel=function(t){this._precisionModel=t},B.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},B.prototype.getIntersection=function(t){return this._intPt[t]},B.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},B.prototype.hasIntersection=function(){return this._result!==B.NO_INTERSECTION},B.prototype.getEdgeDistance=function(t,e){return B.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},B.prototype.isCollinear=function(){return this._result===B.COLLINEAR_INTERSECTION},B.prototype.toString=function(){return G.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+G.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},B.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},B.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},B.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},B.prototype.interfaces_=function(){return[]},B.prototype.getClass=function(){return B},B.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return z.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},B.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return z.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},U.DONT_INTERSECT.get=function(){return 0},U.DO_INTERSECT.get=function(){return 1},U.COLLINEAR.get=function(){return 2},U.NO_INTERSECTION.get=function(){return 0},U.POINT_INTERSECTION.get=function(){return 1},U.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(B,U);var W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new N(this._inputLines[0][0],this._inputLines[0][1]),n=new N(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,N.intersects(n,i,e)&&0===Y.orientationIndex(n,i,e)&&0===Y.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=R.intersection(t,n,i,r)}catch(s){if(!(s instanceof M))throw s;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new h(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=C.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);T.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&T.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new h(t),o=new h(e),s=new h(n),a=new h(i),l=new h;this.normalizeToEnvCentre(r,o,s,a,l);var u=this.safeHCoordinateIntersection(r,o,s,a);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=N.intersects(e,n,i),s=N.intersects(e,n,r),a=N.intersects(i,r,e),l=N.intersects(i,r,n);return o&&s?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||s||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,p=n.y>i.y?n.y:i.y,d=((o>u?o:u)+(a<h?a:h))/2,f=((s>c?s:c)+(l<p?l:p))/2;r.x=d,r.y=f,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!N.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=Y.orientationIndex(e,n,i),s=Y.orientationIndex(e,n,r);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Y.orientationIndex(i,r,e),l=Y.orientationIndex(i,r,n);return a>0&&l>0||a<0&&l<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===l?this.computeCollinearIntersection(e,n,i,r):(0===o||0===s||0===a||0===l?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new h(i):0===s?this._intPt[0]=new h(r):0===a?this._intPt[0]=new h(e):0===l&&(this._intPt[0]=new h(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=Y.distancePointLine(t,n,i),s=Y.distancePointLine(e,n,i);return s<o&&(o=s,r=e),(s=Y.distancePointLine(n,t,e))<o&&(o=s,r=n),(s=Y.distancePointLine(i,t,e))<o&&(o=s,r=i),r},e}(B),q=function(){};q.prototype.interfaces_=function(){return[]},q.prototype.getClass=function(){return q},q.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return q.signOfDet2x2(i,r,o,s)},q.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if((i-=(s=Math.floor(n/t))*e)<0)return-r;if(i>e)return r;if(t>(n-=s*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if((e-=(s=Math.floor(t/n))*i)<0)return r;if(e>i)return-r;if(n>(t-=s*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var X=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};X.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,l=q.signOfDet2x2(r,o,s,a);if(0===l)return this._isPointOnSegment=!0,null;a<o&&(l=-l),l>0&&this._crossingCount++}},X.prototype.isPointInPolygon=function(){return this.getLocation()!==g.EXTERIOR},X.prototype.getLocation=function(){return this._isPointOnSegment?g.BOUNDARY:this._crossingCount%2==1?g.INTERIOR:g.EXTERIOR},X.prototype.isOnSegment=function(){return this._isPointOnSegment},X.prototype.interfaces_=function(){return[]},X.prototype.getClass=function(){return X},X.locatePointInRing=function(){if(arguments[0]instanceof h&&_(arguments[1],S)){for(var t=arguments[0],e=arguments[1],n=new X(t),i=new h,r=new h,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof h&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],l=new X(s),u=1;u<a.length;u++){var c=a[u],p=a[u-1];if(l.countSegment(c,p),l.isOnSegment())return l.getLocation()}return l.getLocation()}};var Y=function(){},H={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.orientationIndex=function(t,e,n){return C.orientationIndex(t,e,n)},Y.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y,s=t[i-1].y;e+=r*(s-o)}return e/2}if(_(arguments[0],S)){var a=arguments[0],l=a.size();if(l<3)return 0;var u=new h,c=new h,p=new h;a.getCoordinate(0,c),a.getCoordinate(1,p);var d=c.x;p.x-=d;for(var f=0,g=1;g<l-1;g++)u.y=c.y,c.x=p.x,c.y=p.y,a.getCoordinate(g+1,p),p.x-=d,f+=c.x*(u.y-p.y);return f/2}},Y.distanceLineLine=function(t,e,n,i){if(t.equals(e))return Y.distancePointLine(t,n,i);if(n.equals(i))return Y.distancePointLine(i,t,e);var r=!1;if(N.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=s/o;(l<0||l>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?m.min(Y.distancePointLine(t,n,i),Y.distancePointLine(e,n,i),Y.distancePointLine(n,t,e),Y.distancePointLine(i,t,e)):0},Y.isPointInRing=function(t,e){return Y.locatePointInRing(t,e)!==g.EXTERIOR},Y.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new h;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,l=i.y,u=a-r,c=l-o;n+=Math.sqrt(u*u+c*c),r=a,o=l}return n},Y.isCCW=function(t){var e=t.length-1;if(e<3)throw new r("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,o=1;o<=e;o++){var s=t[o];s.y>n.y&&(n=s,i=o)}var a=i;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==i);var l=i;do{l=(l+1)%e}while(t[l].equals2D(n)&&l!==i);var u=t[a],c=t[l];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var h=Y.computeOrientation(u,n,c);return 0===h?u.x>c.x:h>0},Y.locatePointInRing=function(t,e){return X.locatePointInRing(t,e)},Y.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},Y.computeOrientation=function(t,e,n){return Y.orientationIndex(t,e,n)},Y.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new r("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var o=Y.distancePointLine(t,e[i],e[i+1]);o<n&&(n=o)}return n}if(3===arguments.length){var s=arguments[0],a=arguments[1],l=arguments[2];if(a.x===l.x&&a.y===l.y)return s.distance(a);var u=(l.x-a.x)*(l.x-a.x)+(l.y-a.y)*(l.y-a.y),c=((s.x-a.x)*(l.x-a.x)+(s.y-a.y)*(l.y-a.y))/u;if(c<=0)return s.distance(a);if(c>=1)return s.distance(l);var h=((a.y-s.y)*(l.x-a.x)-(a.x-s.x)*(l.y-a.y))/u;return Math.abs(h)*Math.sqrt(u)}},Y.isOnLine=function(t,e){for(var n=new W,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},H.CLOCKWISE.get=function(){return-1},H.RIGHT.get=function(){return Y.CLOCKWISE},H.COUNTERCLOCKWISE.get=function(){return 1},H.LEFT.get=function(){return Y.COUNTERCLOCKWISE},H.COLLINEAR.get=function(){return 0},H.STRAIGHT.get=function(){return Y.COLLINEAR},Object.defineProperties(Y,H);var J=function(){};J.prototype.filter=function(t){},J.prototype.interfaces_=function(){return[]},J.prototype.getClass=function(){return J};var K=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},$={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};K.prototype.isGeometryCollection=function(){return this.getSortIndex()===K.SORTINDEX_GEOMETRYCOLLECTION},K.prototype.getFactory=function(){return this._factory},K.prototype.getGeometryN=function(t){return this},K.prototype.getArea=function(){return 0},K.prototype.isRectangle=function(){return!1},K.prototype.equals=function(){if(arguments[0]instanceof K){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof K))return!1;var n=e;return this.equalsExact(n)}},K.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},K.prototype.geometryChanged=function(){this.apply(K.geometryChangedFilter)},K.prototype.geometryChangedAction=function(){this._envelope=null},K.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},K.prototype.getLength=function(){return 0},K.prototype.getNumGeometries=function(){return 1},K.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},K.prototype.getUserData=function(){return this._userData},K.prototype.getSRID=function(){return this._SRID},K.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},K.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===K.SORTINDEX_GEOMETRYCOLLECTION)throw new r("This method does not support GeometryCollection arguments")},K.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},K.prototype.norm=function(){var t=this.copy();return t.normalize(),t},K.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},K.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new N(this._envelope)},K.prototype.setSRID=function(t){this._SRID=t},K.prototype.setUserData=function(t){this._userData=t},K.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},K.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},K.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===K.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===K.SORTINDEX_MULTIPOINT||this.getSortIndex()===K.SORTINDEX_MULTILINESTRING||this.getSortIndex()===K.SORTINDEX_MULTIPOLYGON},K.prototype.interfaces_=function(){return[l,a,c]},K.prototype.getClass=function(){return K},K.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},K.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},$.serialVersionUID.get=function(){return 0x799ea46522854c00},$.SORTINDEX_POINT.get=function(){return 0},$.SORTINDEX_MULTIPOINT.get=function(){return 1},$.SORTINDEX_LINESTRING.get=function(){return 2},$.SORTINDEX_LINEARRING.get=function(){return 3},$.SORTINDEX_MULTILINESTRING.get=function(){return 4},$.SORTINDEX_POLYGON.get=function(){return 5},$.SORTINDEX_MULTIPOLYGON.get=function(){return 6},$.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},$.geometryChangedFilter.get=function(){return Q},Object.defineProperties(K,$);var Q=function(){};Q.interfaces_=function(){return[J]},Q.filter=function(t){t.geometryChangedAction()};var tt=function(){};tt.prototype.filter=function(t){},tt.prototype.interfaces_=function(){return[]},tt.prototype.getClass=function(){return tt};var et=function(){},nt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};et.prototype.isInBoundary=function(t){},et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},nt.Mod2BoundaryNodeRule.get=function(){return it},nt.EndPointBoundaryNodeRule.get=function(){return rt},nt.MultiValentEndPointBoundaryNodeRule.get=function(){return ot},nt.MonoValentEndPointBoundaryNodeRule.get=function(){return st},nt.MOD2_BOUNDARY_RULE.get=function(){return new it},nt.ENDPOINT_BOUNDARY_RULE.get=function(){return new rt},nt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ot},nt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new st},nt.OGC_SFS_BOUNDARY_RULE.get=function(){return et.MOD2_BOUNDARY_RULE},Object.defineProperties(et,nt);var it=function(){};it.prototype.isInBoundary=function(t){return t%2==1},it.prototype.interfaces_=function(){return[et]},it.prototype.getClass=function(){return it};var rt=function(){};rt.prototype.isInBoundary=function(t){return t>0},rt.prototype.interfaces_=function(){return[et]},rt.prototype.getClass=function(){return rt};var ot=function(){};ot.prototype.isInBoundary=function(t){return t>1},ot.prototype.interfaces_=function(){return[et]},ot.prototype.getClass=function(){return ot};var st=function(){};st.prototype.isInBoundary=function(t){return 1===t},st.prototype.interfaces_=function(){return[et]},st.prototype.getClass=function(){return st};var at=function(){};function lt(t){this.message=t||""}at.prototype.add=function(){},at.prototype.addAll=function(){},at.prototype.isEmpty=function(){},at.prototype.iterator=function(){},at.prototype.size=function(){},at.prototype.toArray=function(){},at.prototype.remove=function(){},lt.prototype=new Error,lt.prototype.name="IndexOutOfBoundsException";var ut=function(){};ut.prototype.hasNext=function(){},ut.prototype.next=function(){},ut.prototype.remove=function(){};var ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(at);function ht(t){this.message=t||""}ht.prototype=new Error,ht.prototype.name="NoSuchElementException";var pt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof at&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,at]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new dt(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new lt;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(ct),dt=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new ht;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(ut),ft=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[0],i=arguments[1],r=!1,o=n.iterator();o.hasNext();)e.add(o.next(),i),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1];return this.add(i,r,!0),!0}if(arguments[0]instanceof h&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var l=arguments[0],u=arguments[1];return this.add(l,u),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var c=arguments[0],p=arguments[1],d=arguments[2];if(d)for(var f=0;f<c.length;f++)e.add(c[f],p);else for(var g=c.length-1;g>=0;g--)e.add(c[g],p);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof h){var y=arguments[0],_=arguments[1],m=arguments[2];if(!m){var v=this.size();if(v>0){if(y>0){var b=this.get(y-1);if(b.equals2D(_))return null}if(y<v){var x=this.get(y);if(x.equals2D(_))return null}}}t.prototype.add.call(this,y,_)}}else if(4===arguments.length){var w=arguments[0],E=arguments[1],P=arguments[2],C=arguments[3],O=1;P>C&&(O=-1);for(var S=P;S!==C;S+=O)e.add(w[S],E);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new h(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(pt),gt=function(){},yt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};yt.ForwardComparator.get=function(){return _t},yt.BidirectionalComparator.get=function(){return mt},yt.coordArrayType.get=function(){return new Array(0).fill(null)},gt.prototype.interfaces_=function(){return[]},gt.prototype.getClass=function(){return gt},gt.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},gt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(gt.indexOf(i,e)<0)return i}return null},gt.scroll=function(t,e){var n=gt.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);T.arraycopy(t,n,i,0,t.length-n),T.arraycopy(t,0,i,t.length-n,n),T.arraycopy(i,0,t,0,t.length)},gt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}},gt.intersection=function(t,e){for(var n=new ft,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},gt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},gt.removeRepeatedPoints=function(t){return gt.hasRepeatedPoints(t)?new ft(t,!1).toCoordinateArray():t},gt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},gt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},gt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new h(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],l=0;l<a;l++)o[s+l]=new h(i[r+l])},gt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},gt.envelope=function(t){for(var e=new N,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},gt.toCoordinateArray=function(t){return t.toArray(gt.coordArrayType)},gt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},gt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},gt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},gt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},gt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},gt.extract=function(t,e,n){e=m.clamp(e,0,t.length);var i=(n=m.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r},Object.defineProperties(gt,yt);var _t=function(){};_t.prototype.compare=function(t,e){return gt.compare(t,e)},_t.prototype.interfaces_=function(){return[u]},_t.prototype.getClass=function(){return _t};var mt=function(){};mt.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=gt.compare(n,i);return gt.isEqualReversed(n,i)?0:r},mt.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=gt.increasingDirection(n),o=gt.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[s].compareTo(i[a]);if(0!==u)return u;s+=r,a+=o}return 0},mt.prototype.interfaces_=function(){return[u]},mt.prototype.getClass=function(){return mt};var vt=function(){};vt.prototype.get=function(){},vt.prototype.put=function(){},vt.prototype.size=function(){},vt.prototype.values=function(){},vt.prototype.entrySet=function(){};var bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(vt);function xt(t){this.message=t||""}function wt(){}xt.prototype=new Error,xt.prototype.name="OperationNotSupported",wt.prototype=new at,wt.prototype.contains=function(){};var Et=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof at&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Pt(this)},e}(wt),Pt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new ht;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new xt},e}(ut);function Ct(t){return null===t?0:t.color}function Ot(t){return null===t?null:t.parent}function St(t,e){null!==t&&(t.color=e)}function It(t){return null===t?null:t.left}function Lt(t){return null===t?null:t.right}function Mt(){this.root_=null,this.size_=0}Mt.prototype=new bt,Mt.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Mt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Mt.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Ot(t)===It(Ot(Ot(t)))){var n=Lt(Ot(Ot(t)));1===Ct(n)?(St(Ot(t),0),St(n,0),St(Ot(Ot(t)),1),t=Ot(Ot(t))):(t===Lt(Ot(t))&&(t=Ot(t),e.rotateLeft(t)),St(Ot(t),0),St(Ot(Ot(t)),1),e.rotateRight(Ot(Ot(t))))}else{var i=It(Ot(Ot(t)));1===Ct(i)?(St(Ot(t),0),St(i,0),St(Ot(Ot(t)),1),t=Ot(Ot(t))):(t===It(Ot(t))&&(t=Ot(t),e.rotateRight(t)),St(Ot(t),0),St(Ot(Ot(t)),1),e.rotateLeft(Ot(Ot(t))))}this.root_.color=0},Mt.prototype.values=function(){var t=new pt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Mt.successor(e));)t.add(e.value);return t},Mt.prototype.entrySet=function(){var t=new Et,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Mt.successor(e));)t.add(e);return t},Mt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Mt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Mt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Mt.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},Mt.prototype.size=function(){return this.size_};var Tt=function(){};function Rt(){}function Nt(){this.array_=[],arguments[0]instanceof at&&this.addAll(arguments[0])}Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt},Rt.prototype=new wt,Nt.prototype=new Rt,Nt.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Nt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Nt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Nt.prototype.remove=function(t){throw new xt},Nt.prototype.size=function(){return this.array_.length},Nt.prototype.isEmpty=function(){return 0===this.array_.length},Nt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Nt.prototype.iterator=function(){return new At(this)};var At=function(t){this.treeSet_=t,this.position_=0};At.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new ht;return this.treeSet_.array_[this.position_++]},At.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},At.prototype.remove=function(){throw new xt};var Dt=function(){};Dt.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)i=function(t,e){return t.compareTo(e)},r.sort(i);else if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},Dt.asList=function(t){for(var e=new pt,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var jt=function(){},Ft={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ft.P.get=function(){return 0},Ft.L.get=function(){return 1},Ft.A.get=function(){return 2},Ft.FALSE.get=function(){return-1},Ft.TRUE.get=function(){return-2},Ft.DONTCARE.get=function(){return-3},Ft.SYM_FALSE.get=function(){return"F"},Ft.SYM_TRUE.get=function(){return"T"},Ft.SYM_DONTCARE.get=function(){return"*"},Ft.SYM_P.get=function(){return"0"},Ft.SYM_L.get=function(){return"1"},Ft.SYM_A.get=function(){return"2"},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.toDimensionSymbol=function(t){switch(t){case jt.FALSE:return jt.SYM_FALSE;case jt.TRUE:return jt.SYM_TRUE;case jt.DONTCARE:return jt.SYM_DONTCARE;case jt.P:return jt.SYM_P;case jt.L:return jt.SYM_L;case jt.A:return jt.SYM_A}throw new r("Unknown dimension value: "+t)},jt.toDimensionValue=function(t){switch(w.toUpperCase(t)){case jt.SYM_FALSE:return jt.FALSE;case jt.SYM_TRUE:return jt.TRUE;case jt.SYM_DONTCARE:return jt.DONTCARE;case jt.SYM_P:return jt.P;case jt.SYM_L:return jt.L;case jt.SYM_A:return jt.A}throw new r("Unknown dimension symbol: "+t)},Object.defineProperties(jt,Ft);var kt=function(){};kt.prototype.filter=function(t){},kt.prototype.interfaces_=function(){return[]},kt.prototype.getClass=function(){return kt};var Gt=function(){};Gt.prototype.filter=function(t,e){},Gt.prototype.isDone=function(){},Gt.prototype.isGeometryChanged=function(){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var Vt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new r("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new N,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],i=arguments[1];if(!this.isEquivalentClass(n))return!1;var r=n;if(this._geometries.length!==r._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(r._geometries[o],i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Dt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new Nt(Dt.asList(this._geometries)),i=new Nt(Dt.asList(e._geometries));return this.compare(n,i)}if(2===arguments.length){for(var r=arguments[0],o=arguments[1],s=r,a=this.getNumGeometries(),l=s.getNumGeometries(),u=0;u<a&&u<l;){var c=t.getGeometryN(u),h=s.getGeometryN(u),p=c.compareToSameClass(h,o);if(0!==p)return p;u++}return u<a?1:u<l?-1:0}},e.prototype.apply=function(){var t=this;if(_(arguments[0],tt))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(_(arguments[0],Gt)){var i=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(t._geometries[r].apply(i),!i.isDone());r++);i.isGeometryChanged()&&this.geometryChanged()}else if(_(arguments[0],kt)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(_(arguments[0],J)){var a=arguments[0];a.filter(this);for(var l=0;l<this._geometries.length;l++)t._geometries[l].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),z.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(K),Zt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return K.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new zt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Tt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Vt),zt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=et.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};zt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},zt.prototype.getBoundary=function(){return this._geom instanceof Qt?this.boundaryLineString(this._geom):this._geom instanceof Zt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},zt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},zt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},zt.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new pt;this._endpointMap=new Mt;for(var i=0;i<t.getNumGeometries();i++){var r=t.getGeometryN(i);0!==r.getNumPoints()&&(e.addEndpoint(r.getCoordinateN(0)),e.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&n.add(s.getKey())}return gt.toCoordinateArray(n)},zt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Bt,this._endpointMap.put(t,e)),e.count++},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt},zt.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new zt(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],i=arguments[1],r=new zt(n,i);return r.getBoundary()}};var Bt=function(){this.count=null};function Ut(){}function Wt(){}Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt};var qt=function(){};function Xt(){}function Yt(){}function Ht(){}var Jt=function(){},Kt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt},Jt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},Jt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new Xt,n=new Ut(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new Wt(Jt.getStackTrace(i)),a=new Ht(s),l=0;l<r;l++)try{o+=a.readLine()+Jt.NEWLINE}catch(t){if(!(t instanceof Yt))throw t;z.shouldNeverReachHere()}return o}},Jt.split=function(t,e){for(var n=e.length,i=new pt,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),l=0;l<a.length;l++)a[l]=i.get(l);return a},Jt.toString=function(){if(1===arguments.length){var t=arguments[0];return Jt.SIMPLE_ORDINATE_FORMAT.format(t)}},Jt.spaces=function(t){return Jt.chars(" ",t)},Kt.NEWLINE.get=function(){return T.getProperty("line.separator")},Kt.SIMPLE_ORDINATE_FORMAT.get=function(){return new qt("0.#")},Object.defineProperties(Jt,Kt);var $t=function(){};$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t},$t.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},$t.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,S.X)===t.getOrdinate(e-1,S.X)&&t.getOrdinate(0,S.Y)===t.getOrdinate(e-1,S.Y)},$t.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var s=0;s<i;s++){var a=t.getOrdinate(r,s),l=e.getOrdinate(r,s);if(!(t.getOrdinate(r,s)===e.getOrdinate(r,s)||o.isNaN(a)&&o.isNaN(l)))return!1}return!0},$t.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if($t.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)$t.copy(e,r-1,i,o,1);return i},$t.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)$t.swap(t,i,e-i)},$t.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},$t.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)$t.copyCoord(t,e+o,n,i+o)},$t.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new b;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(Jt.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},$t.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?$t.createClosedRing(t,e,4):e.getOrdinate(0,S.X)===e.getOrdinate(n-1,S.X)&&e.getOrdinate(0,S.Y)===e.getOrdinate(n-1,S.Y)?e:$t.createClosedRing(t,e,n+1)},$t.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();$t.copy(e,0,i,0,r);for(var o=r;o<n;o++)$t.copy(e,0,i,o,1);return i};var Qt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new N:this._points.expandEnvelope(new N)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],i=arguments[1];if(!this.isEquivalentClass(n))return!1;var r=n;if(this._points.size()!==r._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),r._points.getCoordinate(o),i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&$t.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Y.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return $t.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=e,i=0,r=0;i<this._points.size()&&r<n._points.size();){var o=t._points.getCoordinate(i).compareTo(n._points.getCoordinate(r));if(0!==o)return o;i++,r++}return i<this._points.size()?1:r<n._points.size()?-1:0}if(2===arguments.length){var s=arguments[0],a=arguments[1],l=s;return a.compare(this._points,l._points)}},e.prototype.apply=function(){var t=this;if(_(arguments[0],tt))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(_(arguments[0],Gt)){var i=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(i.filter(t._points,r),!i.isDone());r++);i.isGeometryChanged()&&this.geometryChanged()}else if(_(arguments[0],kt)){var o=arguments[0];o.filter(this)}else if(_(arguments[0],J)){var s=arguments[0];s.filter(this)}},e.prototype.getBoundary=function(){return new zt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new r("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Tt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(K),te=function(){};te.prototype.interfaces_=function(){return[]},te.prototype.getClass=function(){return te};var ee=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new N;var t=new N;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],i=arguments[1],r=n;return i.compare(this._coordinates,r._coordinates)}},e.prototype.apply=function(){if(_(arguments[0],tt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(_(arguments[0],Gt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(_(arguments[0],kt)){var n=arguments[0];n.filter(this)}else if(_(arguments[0],J)){var i=arguments[0];i.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),z.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[te]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(K),ne=function(){};ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne};var ie=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new r("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new r("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Y.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Y.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var l=t.getX(a),u=t.getY(a);if(l!==o==(u!==s))return!1;o=l,s=u}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],i=arguments[1];if(!this.isEquivalentClass(n))return!1;var r=n,o=this._shell,s=r._shell;if(!o.equalsExact(s,i))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(r._holes[a],i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Dt.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(n.isEmpty())return null;var r=new Array(n.getCoordinates().length-1).fill(null);T.arraycopy(n.getCoordinates(),0,r,0,r.length);var o=gt.minCoordinate(n.getCoordinates());gt.scroll(r,o),T.arraycopy(r,0,n.getCoordinates(),0,r.length),n.getCoordinates()[r.length]=r[0],Y.isCCW(n.getCoordinates())===i&&gt.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,i=e._shell;return n.compareToSameClass(i)}if(2===arguments.length){var r=arguments[0],o=arguments[1],s=r,a=this._shell,l=s._shell,u=a.compareToSameClass(l,o);if(0!==u)return u;for(var c=this.getNumInteriorRing(),h=s.getNumInteriorRing(),p=0;p<c&&p<h;){var d=t.getInteriorRingN(p),f=s.getInteriorRingN(p),g=d.compareToSameClass(f,o);if(0!==g)return g;p++}return p<c?1:p<h?-1:0}},e.prototype.apply=function(t){var e=this;if(_(t,tt)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(_(t,Gt)){if(this._shell.apply(t),!t.isDone())for(var i=0;i<this._holes.length&&(e._holes[i].apply(t),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else if(_(t,kt))t.filter(this);else if(_(t,J)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)e._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[ne]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(K),re=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return K.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[te]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Vt),oe=function(t){function e(e,n){e instanceof h&&n instanceof xe&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return K.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return $t.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new r("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new r("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Qt),se=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return K.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new pt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[ne]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Vt),ae=function(t){this._factory=t||null,this._isUserDataCopied=!1},le={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ae.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ae.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ae.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Vt?this.editGeometryCollection(t,e):t instanceof ie?this.editPolygon(t,e):t instanceof ee||t instanceof Qt?e.edit(t,this._factory):(z.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ae.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new pt,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===re?this._factory.createMultiPoint(i.toArray([])):n.getClass()===Zt?this._factory.createMultiLineString(i.toArray([])):n.getClass()===se?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},ae.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new pt,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(i,r.toArray([]))},ae.prototype.interfaces_=function(){return[]},ae.prototype.getClass=function(){return ae},ae.GeometryEditorOperation=function(){},le.NoOpGeometryOperation.get=function(){return ue},le.CoordinateOperation.get=function(){return ce},le.CoordinateSequenceOperation.get=function(){return he},Object.defineProperties(ae,le);var ue=function(){};ue.prototype.edit=function(t,e){return t},ue.prototype.interfaces_=function(){return[ae.GeometryEditorOperation]},ue.prototype.getClass=function(){return ue};var ce=function(){};ce.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof oe?e.createLinearRing(n):t instanceof Qt?e.createLineString(n):t instanceof ee?n.length>0?e.createPoint(n[0]):e.createPoint():t},ce.prototype.interfaces_=function(){return[ae.GeometryEditorOperation]},ce.prototype.getClass=function(){return ce};var he=function(){};he.prototype.edit=function(t,e){return t instanceof oe?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Qt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof ee?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},he.prototype.interfaces_=function(){return[ae.GeometryEditorOperation]},he.prototype.getClass=function(){return he};var pe=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new h}else if(_(arguments[0],S)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)t._coordinates[r]=i.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],l=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=l;for(var u=0;u<a;u++)t._coordinates[u]=new h}},de={serialVersionUID:{configurable:!0}};pe.prototype.setOrdinate=function(t,e,n){switch(e){case S.X:this._coordinates[t].x=n;break;case S.Y:this._coordinates[t].y=n;break;case S.Z:this._coordinates[t].z=n;break;default:throw new r("invalid ordinateIndex")}},pe.prototype.size=function(){return this._coordinates.length},pe.prototype.getOrdinate=function(t,e){switch(e){case S.X:return this._coordinates[t].x;case S.Y:return this._coordinates[t].y;case S.Z:return this._coordinates[t].z}return o.NaN},pe.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},pe.prototype.getCoordinateCopy=function(t){return new h(this._coordinates[t])},pe.prototype.getDimension=function(){return this._dimension},pe.prototype.getX=function(t){return this._coordinates[t].x},pe.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new pe(t,this._dimension)},pe.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},pe.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new pe(t,this._dimension)},pe.prototype.toString=function(){if(this._coordinates.length>0){var t=new b(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},pe.prototype.getY=function(t){return this._coordinates[t].y},pe.prototype.toCoordinateArray=function(){return this._coordinates},pe.prototype.interfaces_=function(){return[S,c]},pe.prototype.getClass=function(){return pe},de.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(pe,de);var fe=function(){},ge={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};fe.prototype.readResolve=function(){return fe.instance()},fe.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new pe(t)}if(_(arguments[0],S)){var e=arguments[0];return new pe(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new pe(n):new pe(n,i)}},fe.prototype.interfaces_=function(){return[f,c]},fe.prototype.getClass=function(){return fe},fe.instance=function(){return fe.instanceObject},ge.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},ge.instanceObject.get=function(){return new fe},Object.defineProperties(fe,ge);var ye=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new pt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Et;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(vt),_e=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ve){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},me={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};_e.prototype.equals=function(t){if(!(t instanceof _e))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},_e.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new x(n).compareTo(new x(i))},_e.prototype.getScale=function(){return this._scale},_e.prototype.isFloating=function(){return this._modelType===_e.FLOATING||this._modelType===_e.FLOATING_SINGLE},_e.prototype.getType=function(){return this._modelType},_e.prototype.toString=function(){var t="UNKNOWN";return this._modelType===_e.FLOATING?t="Floating":this._modelType===_e.FLOATING_SINGLE?t="Floating-Single":this._modelType===_e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},_e.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return o.isNaN(t)||this._modelType===_e.FLOATING_SINGLE?t:this._modelType===_e.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof h){var e=arguments[0];if(this._modelType===_e.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},_e.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===_e.FLOATING?t=16:this._modelType===_e.FLOATING_SINGLE?t=6:this._modelType===_e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},_e.prototype.setScale=function(t){this._scale=Math.abs(t)},_e.prototype.interfaces_=function(){return[c,a]},_e.prototype.getClass=function(){return _e},_e.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},me.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},me.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(_e,me);var ve=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},be={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ve.prototype.readResolve=function(){return ve.nameToTypeMap.get(this._name)},ve.prototype.toString=function(){return this._name},ve.prototype.interfaces_=function(){return[c]},ve.prototype.getClass=function(){return ve},be.serialVersionUID.get=function(){return-552860263173159e4},be.nameToTypeMap.get=function(){return new ye},Object.defineProperties(ve,be),_e.Type=ve,_e.FIXED=new ve("FIXED"),_e.FLOATING=new ve("FLOATING"),_e.FLOATING_SINGLE=new ve("FLOATING SINGLE");var xe=function t(){this._precisionModel=new _e,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?_(arguments[0],f)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof _e&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},we={serialVersionUID:{configurable:!0}};xe.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new h(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new h(t.getMinX(),t.getMinY()),new h(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new h(t.getMinX(),t.getMinY()),new h(t.getMinX(),t.getMaxY()),new h(t.getMaxX(),t.getMaxY()),new h(t.getMaxX(),t.getMinY()),new h(t.getMinX(),t.getMinY())]),null)},xe.prototype.createLineString=function(t){return t?t instanceof Array?new Qt(this.getCoordinateSequenceFactory().create(t),this):_(t,S)?new Qt(t,this):void 0:new Qt(this.getCoordinateSequenceFactory().create([]),this)},xe.prototype.createMultiLineString=function(){if(0===arguments.length)return new Zt(null,this);if(1===arguments.length){var t=arguments[0];return new Zt(t,this)}},xe.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(xe.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof ie)return this.createMultiPolygon(xe.toPolygonArray(t));if(a instanceof Qt)return this.createMultiLineString(xe.toLineStringArray(t));if(a instanceof ee)return this.createMultiPoint(xe.toPointArray(t));z.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},xe.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},xe.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof h){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(_(arguments[0],S)){var e=arguments[0];return new ee(e,this)}}},xe.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},xe.prototype.createPolygon=function(){if(0===arguments.length)return new ie(null,null,this);if(1===arguments.length){if(_(arguments[0],S)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof oe){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new ie(i,r,this)}},xe.prototype.getSRID=function(){return this._SRID},xe.prototype.createGeometryCollection=function(){if(0===arguments.length)return new Vt(null,this);if(1===arguments.length){var t=arguments[0];return new Vt(t,this)}},xe.prototype.createGeometry=function(t){return new ae(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},xe.prototype.getPrecisionModel=function(){return this._precisionModel},xe.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(_(arguments[0],S)){var e=arguments[0];return new oe(e,this)}}},xe.prototype.createMultiPolygon=function(){if(0===arguments.length)return new se(null,this);if(1===arguments.length){var t=arguments[0];return new se(t,this)}},xe.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new re(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new re(e,this)}if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(_(arguments[0],S)){var i=arguments[0];if(null===i)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(i.size()).fill(null),o=0;o<i.size();o++){var s=t.getCoordinateSequenceFactory().create(1,i.getDimension());$t.copy(i,o,s,0,1),r[o]=t.createPoint(s)}return this.createMultiPoint(r)}}},xe.prototype.interfaces_=function(){return[c]},xe.prototype.getClass=function(){return xe},xe.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.getDefaultCoordinateSequenceFactory=function(){return fe.instance()},xe.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},xe.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},we.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(xe,we);var Ee=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Pe=function(t){this.geometryFactory=t||new xe};Pe.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Ce[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Ee.indexOf(n)?Ce[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Ce[n].apply(this,[e.geometries]):Ce[n].apply(this,[e])},Pe.prototype.write=function(t){var e=t.getGeometryType();if(!Oe[e])throw new Error("Geometry is not supported");return Oe[e].apply(this,[t])};var Ce={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!Ce[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Ce.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new h(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new h(t[0],t[1]),new h(t[2],t[1]),new h(t[2],t[3]),new h(t[0],t[3]),new h(t[0],t[1])])},Point:function(t){var e=new h(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ce.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Ce.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ce.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Ce.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=Ce.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(Ce.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},Oe={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Oe.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Oe.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(Oe.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Oe.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Oe.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=Oe.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Oe.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(Oe[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},Se=function(t){this.geometryFactory=t||new xe,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Pe(this.geometryFactory)};Se.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===_e.FIXED&&this.reducePrecision(e),e},Se.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ie=function(){this.parser=new Pe(this.geometryFactory)};Ie.prototype.write=function(t){return this.parser.write(t)};var Le=function(){},Me={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Te(t){this.message=t||""}function Re(){this.array_=[]}Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le},Le.opposite=function(t){return t===Le.LEFT?Le.RIGHT:t===Le.RIGHT?Le.LEFT:t},Me.ON.get=function(){return 0},Me.LEFT.get=function(){return 1},Me.RIGHT.get=function(){return 2},Object.defineProperties(Le,Me),Te.prototype=new Error,Te.prototype.name="EmptyStackException",Re.prototype=new ct,Re.prototype.add=function(t){return this.array_.push(t),!0},Re.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Re.prototype.push=function(t){return this.array_.push(t),t},Re.prototype.pop=function(t){if(0===this.array_.length)throw new Te;return this.array_.pop()},Re.prototype.peek=function(){if(0===this.array_.length)throw new Te;return this.array_[this.array_.length-1]},Re.prototype.empty=function(){return 0===this.array_.length},Re.prototype.isEmpty=function(){return this.empty()},Re.prototype.search=function(t){return this.array_.indexOf(t)},Re.prototype.size=function(){return this.array_.length},Re.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Ne=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ne.prototype.getCoordinate=function(){return this._minCoord},Ne.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ne.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();z.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=Y.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===Y.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===Y.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Ne.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Le.LEFT;return n[e].y<n[e+1].y&&(i=Le.RIGHT),i},Ne.prototype.getEdge=function(){return this._orientedDe},Ne.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),i=0;i<n.length-1;i++)(null===e._minCoord||n[i].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=i,e._minCoord=n[i])},Ne.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ne.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}z.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Le.LEFT&&(this._orientedDe=this._minDe.getSym())},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne};var Ae=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new h(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(V),De=function(){this.array_=[]};De.prototype.addLast=function(t){this.array_.push(t)},De.prototype.removeFirst=function(){return this.array_.shift()},De.prototype.isEmpty=function(){return 0===this.array_.length};var je=function(){this._finder=null,this._dirEdgeList=new pt,this._nodes=new pt,this._rightMostCoord=null,this._env=null,this._finder=new Ne};je.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},je.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},je.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new Ae("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},je.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Le.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},je.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},je.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Le.RIGHT)>=1&&e.getDepth(Le.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},je.prototype.computeDepths=function(t){var e=new Et,n=new De,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},je.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},je.prototype.getEnvelope=function(){if(null===this._env){for(var t=new N,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},je.prototype.addReachable=function(t){var e=new Re;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},je.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Le.LEFT,t.getDepth(Le.RIGHT)),e.setDepth(Le.RIGHT,t.getDepth(Le.LEFT))},je.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},je.prototype.getNodes=function(){return this._nodes},je.prototype.getDirectedEdges=function(){return this._dirEdgeList},je.prototype.interfaces_=function(){return[a]},je.prototype.getClass=function(){return je};var Fe=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var i=arguments[0];this.init(1),this.location[Le.ON]=i}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var o=0;o<this.location.length;o++)e.location[o]=r.location[o]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],l=arguments[2];this.init(3),this.location[Le.ON]=s,this.location[Le.LEFT]=a,this.location[Le.RIGHT]=l}};Fe.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Fe.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==g.NONE)return!1;return!0},Fe.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===g.NONE&&(this.location[e]=t)},Fe.prototype.isLine=function(){return 1===this.location.length},Fe.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Le.ON]=this.location[Le.ON],e[Le.LEFT]=g.NONE,e[Le.RIGHT]=g.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===g.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Fe.prototype.getLocations=function(){return this.location},Fe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Le.LEFT];this.location[Le.LEFT]=this.location[Le.RIGHT],this.location[Le.RIGHT]=t},Fe.prototype.toString=function(){var t=new b;return this.location.length>1&&t.append(g.toLocationSymbol(this.location[Le.LEFT])),t.append(g.toLocationSymbol(this.location[Le.ON])),this.location.length>1&&t.append(g.toLocationSymbol(this.location[Le.RIGHT])),t.toString()},Fe.prototype.setLocations=function(t,e,n){this.location[Le.ON]=t,this.location[Le.LEFT]=e,this.location[Le.RIGHT]=n},Fe.prototype.get=function(t){return t<this.location.length?this.location[t]:g.NONE},Fe.prototype.isArea=function(){return this.location.length>1},Fe.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===g.NONE)return!0;return!1},Fe.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Le.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Fe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(g.NONE)},Fe.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Fe.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var ke=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Fe(e),this.elt[1]=new Fe(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Fe(n.elt[0]),this.elt[1]=new Fe(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Fe(g.NONE),this.elt[1]=new Fe(g.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Fe(o,s,a),this.elt[1]=new Fe(o,s,a)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Fe(g.NONE,g.NONE,g.NONE),this.elt[1]=new Fe(g.NONE,g.NONE,g.NONE),this.elt[l].setLocations(u,c,h)}};ke.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},ke.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},ke.prototype.isNull=function(t){return this.elt[t].isNull()},ke.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},ke.prototype.isLine=function(t){return this.elt[t].isLine()},ke.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new Fe(t.elt[n]):e.elt[n].merge(t.elt[n])},ke.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},ke.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Le.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},ke.prototype.toString=function(){var t=new b;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},ke.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},ke.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},ke.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Le.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},ke.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},ke.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},ke.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Fe(this.elt[t].location[0]))},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.toLineLabel=function(t){for(var e=new ke(g.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Ge=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new pt,this._pts=new pt,this._label=new ke(g.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new pt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Ge.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Y.isCCW(this._ring.getCoordinates())},Ge.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Ge.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,i=!0;do{if(null===n)throw new Ae("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Ae("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var r=n.getLabel();z.isTrue(r.isArea()),e.mergeLabel(r),e.addPoints(n.getEdge(),n.isForward(),i),i=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},Ge.prototype.getLinearRing=function(){return this._ring},Ge.prototype.getCoordinate=function(t){return this._pts.get(t)},Ge.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Ge.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}},Ge.prototype.isHole=function(){return this._isHole},Ge.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Ge.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Y.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Ge.prototype.addHole=function(t){this._holes.add(t)},Ge.prototype.isShell=function(){return null===this._shell},Ge.prototype.getLabel=function(){return this._label},Ge.prototype.getEdges=function(){return this._edges},Ge.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ge.prototype.getShell=function(){return this._shell},Ge.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,Le.RIGHT);if(i===g.NONE)return null;if(this._label.getLocation(n)===g.NONE)return this._label.setLocation(n,i),null}},Ge.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Ge.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge};var Ve=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ge),Ze=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new pt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ve(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ge),ze=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};ze.prototype.setVisited=function(t){this._isVisited=t},ze.prototype.setInResult=function(t){this._isInResult=t},ze.prototype.isCovered=function(){return this._isCovered},ze.prototype.isCoveredSet=function(){return this._isCoveredSet},ze.prototype.setLabel=function(t){this._label=t},ze.prototype.getLabel=function(){return this._label},ze.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},ze.prototype.updateIM=function(t){z.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},ze.prototype.isInResult=function(){return this._isInResult},ze.prototype.isVisited=function(){return this._isVisited},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var Be=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new ke(0,g.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=g.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==g.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new ke(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof ke)for(var i=arguments[0],r=0;r<2;r++){var o=t.computeMergedLocation(i,r),s=t._label.getLocation(r);s===g.NONE&&t._label.setLocation(r,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=g.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;n=e===g.BOUNDARY?g.INTERIOR:g.BOUNDARY,this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ze),Ue=function(){this.nodeMap=new Mt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Ue.prototype.find=function(t){return this.nodeMap.get(t)},Ue.prototype.addNode=function(){if(arguments[0]instanceof h){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Be){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},Ue.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ue.prototype.iterator=function(){return this.nodeMap.values().iterator()},Ue.prototype.values=function(){return this.nodeMap.values()},Ue.prototype.getBoundaryNodes=function(t){for(var e=new pt,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===g.BOUNDARY&&e.add(i)}return e},Ue.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue};var We=function(){},qe={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We},We.isNorthern=function(t){return t===We.NE||t===We.NW},We.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},We.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},We.isInHalfPlane=function(t,e){return e===We.SE?t===We.SE||t===We.SW:t===e||t===e+1},We.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new r("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?We.NE:We.SE:e>=0?We.NW:We.SW}if(arguments[0]instanceof h&&arguments[1]instanceof h){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new r("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?We.NE:We.SE:i.y>=n.y?We.NW:We.SW}},qe.NE.get=function(){return 0},qe.NW.get=function(){return 1},qe.SW.get=function(){return 2},qe.SE.get=function(){return 3},Object.defineProperties(We,qe);var Xe=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=null;this._edge=e,this.init(n,i),this._label=r}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3];this._edge=o,this.init(s,a),this._label=l}};Xe.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Y.computeOrientation(t._p0,t._p1,this._p1)},Xe.prototype.getDy=function(){return this._dy},Xe.prototype.getCoordinate=function(){return this._p0},Xe.prototype.setNode=function(t){this._node=t},Xe.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Xe.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Xe.prototype.getDirectedCoordinate=function(){return this._p1},Xe.prototype.getDx=function(){return this._dx},Xe.prototype.getLabel=function(){return this._label},Xe.prototype.getEdge=function(){return this._edge},Xe.prototype.getQuadrant=function(){return this._quadrant},Xe.prototype.getNode=function(){return this._node},Xe.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Xe.prototype.computeLabel=function(t){},Xe.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=We.quadrant(this._dx,this._dy),z.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Xe.prototype.interfaces_=function(){return[a]},Xe.prototype.getClass=function(){return Xe};var Ye=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new ke(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ae("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,Le.LEFT)===g.INTERIOR&&t._label.getLocation(n,Le.RIGHT)===g.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Le.LEFT]+"/"+this._depth[Le.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,g.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,g.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Le.LEFT&&(i=-1);var r=Le.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===g.EXTERIOR&&e===g.INTERIOR?1:t===g.INTERIOR&&e===g.EXTERIOR?-1:0},e}(Xe),He=function(){};He.prototype.createNode=function(t){return new Be(t,null)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Je=function(){if(this._edges=new pt,this._nodes=null,this._edgeEndList=new pt,0===arguments.length)this._nodes=new Ue(new He);else if(1===arguments.length){var t=arguments[0];this._nodes=new Ue(t)}};Je.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Je.prototype.find=function(t){return this._nodes.find(t)},Je.prototype.addNode=function(){if(arguments[0]instanceof Be){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof h){var e=arguments[0];return this._nodes.addNode(e)}},Je.prototype.getNodeIterator=function(){return this._nodes.iterator()},Je.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Je.prototype.debugPrintln=function(t){T.out.println(t)},Je.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===g.BOUNDARY},Je.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Je.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&Y.computeOrientation(t,e,i)===Y.COLLINEAR&&We.quadrant(t,e)===We.quadrant(n,i)},Je.prototype.getEdgeEnds=function(){return this._edgeEndList},Je.prototype.debugPrint=function(t){T.out.print(t)},Je.prototype.getEdgeIterator=function(){return this._edges.iterator()},Je.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,i=0;i<this._edges.size();i++){var r=n._edges.get(i),o=r.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return r;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return r}return null},Je.prototype.insertEdge=function(t){this._edges.add(t)},Je.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Je.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var i=n.next();e._edges.add(i);var r=new Ye(i,!0),o=new Ye(i,!1);r.setSym(o),o.setSym(r),e.add(r),e.add(o)}},Je.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Je.prototype.getNodes=function(){return this._nodes.values()},Je.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je},Je.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ke=function(){this._geometryFactory=null,this._shellList=new pt;var t=arguments[0];this._geometryFactory=t};Ke.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},Ke.prototype.computePolygons=function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},Ke.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Ae("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},Ke.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new pt,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},Ke.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ke.prototype.buildMaximalEdgeRings=function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Ze(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},Ke.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},Ke.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ke.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&Y.isPointInRing(r,u.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=l)}return o},Ke.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return z.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ke.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Je.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new pt,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var $e=function(){};$e.prototype.getBounds=function(){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Qe=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Qe.prototype.getItem=function(){return this._item},Qe.prototype.getBounds=function(){return this._bounds},Qe.prototype.interfaces_=function(){return[$e,c]},Qe.prototype.getClass=function(){return Qe};var tn=function(){this._size=null,this._items=null,this._size=0,this._items=new pt,this._items.add(null)};tn.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},tn.prototype.size=function(){return this._size},tn.prototype.reorder=function(t){for(var e=this,n=null,i=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(i)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,i)},tn.prototype.clear=function(){this._size=0,this._items.clear()},tn.prototype.isEmpty=function(){return 0===this._size},tn.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn};var en=function(){};en.prototype.visitItem=function(t){},en.prototype.interfaces_=function(){return[]},en.prototype.getClass=function(){return en};var nn=function(){};nn.prototype.insert=function(t,e){},nn.prototype.remove=function(t,e){},nn.prototype.query=function(){},nn.prototype.interfaces_=function(){return[]},nn.prototype.getClass=function(){return nn};var rn=function(){if(this._childBoundables=new pt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},on={serialVersionUID:{configurable:!0}};rn.prototype.getLevel=function(){return this._level},rn.prototype.size=function(){return this._childBoundables.size()},rn.prototype.getChildBoundables=function(){return this._childBoundables},rn.prototype.addChildBoundable=function(t){z.isTrue(null===this._bounds),this._childBoundables.add(t)},rn.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},rn.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},rn.prototype.interfaces_=function(){return[$e,c]},rn.prototype.getClass=function(){return rn},on.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(rn,on);var sn=function(){};sn.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},sn.min=function(t){return sn.sort(t),t.get(0)},sn.sort=function(t,e){var n=t.toArray();e?Dt.sort(n,e):Dt.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},sn.singletonList=function(t){var e=new pt;return e.add(t),e};var an=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};an.prototype.expandToQueue=function(t,e){var n=an.isComposite(this._boundable1),i=an.isComposite(this._boundable2);if(n&&i)return an.area(this._boundable1)>an.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new r("neither boundable is composite")},an.prototype.isLeaves=function(){return!(an.isComposite(this._boundable1)||an.isComposite(this._boundable2))},an.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},an.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new an(o,e,this._itemDistance);s.getDistance()<i&&n.add(s)}},an.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},an.prototype.getDistance=function(){return this._distance},an.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},an.prototype.interfaces_=function(){return[a]},an.prototype.getClass=function(){return an},an.area=function(t){return t.getBounds().getArea()},an.isComposite=function(t){return t instanceof rn};var ln=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new pt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];z.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},un={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};ln.prototype.getNodeCapacity=function(){return this._nodeCapacity},ln.prototype.lastNode=function(t){return t.get(t.size()-1)},ln.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof rn?n+=t.size(r):r instanceof Qe&&(n+=1)}return n}},ln.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Qe&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},ln.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new pt:e}if(1===arguments.length){for(var n=arguments[0],i=new pt,r=n.getChildBoundables().iterator();r.hasNext();){var o=r.next();if(o instanceof rn){var s=t.itemsTree(o);null!==s&&i.add(s)}else o instanceof Qe?i.add(o.getItem()):z.shouldNeverReachHere()}return i.size()<=0?null:i}},ln.prototype.insert=function(t,e){z.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Qe(t,e))},ln.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new pt;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(z.isTrue(i>-2),r.getLevel()===i)return o.add(r),null;for(var s=r.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof rn?t.boundablesAtLevel(i,a,o):(z.isTrue(a instanceof Qe),-1===i&&o.add(a))}return null}},ln.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new pt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var i=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,r)}else if(3===arguments.length)if(_(arguments[2],en)&&arguments[0]instanceof Object&&arguments[1]instanceof rn)for(var o=arguments[0],s=arguments[1],a=arguments[2],l=s.getChildBoundables(),u=0;u<l.size();u++){var c=l.get(u);t.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof rn?t.query(o,c,a):c instanceof Qe?a.visitItem(c.getItem()):z.shouldNeverReachHere())}else if(_(arguments[2],ct)&&arguments[0]instanceof Object&&arguments[1]instanceof rn)for(var h=arguments[0],p=arguments[1],d=arguments[2],f=p.getChildBoundables(),g=0;g<f.size();g++){var y=f.get(g);t.getIntersectsOp().intersects(y.getBounds(),h)&&(y instanceof rn?t.query(h,y,d):y instanceof Qe?d.add(y.getItem()):z.shouldNeverReachHere())}},ln.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},ln.prototype.getRoot=function(){return this.build(),this._root},ln.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=this.removeItem(r,o);if(s)return!0;for(var a=null,l=r.getChildBoundables().iterator();l.hasNext();){var u=l.next();if(t.getIntersectsOp().intersects(u.getBounds(),i)&&u instanceof rn&&(s=t.remove(i,u,o))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),s}},ln.prototype.createHigherLevels=function(t,e){z.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},ln.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof rn){var o=t.depth(r);o>n&&(n=o)}}return n+1}},ln.prototype.createParentBoundables=function(t,e){var n=this;z.isTrue(!t.isEmpty());var i=new pt;i.add(this.createNode(e));var r=new pt(t);sn.sort(r,this.getComparator());for(var o=r.iterator();o.hasNext();){var s=o.next();n.lastNode(i).getChildBoundables().size()===n.getNodeCapacity()&&i.add(n.createNode(e)),n.lastNode(i).addChildBoundable(s)}return i},ln.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},ln.prototype.interfaces_=function(){return[c]},ln.prototype.getClass=function(){return ln},ln.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},un.IntersectsOp.get=function(){return cn},un.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},un.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(ln,un);var cn=function(){},hn=function(){};hn.prototype.distance=function(t,e){},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn};var pn=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){z.isTrue(t.length>0);for(var n=new pt,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},e.prototype.createNode=function(t){return new dn(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new pt;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(_(arguments[2],en)&&arguments[0]instanceof Object&&arguments[1]instanceof rn){var r=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,r,o,s)}else if(_(arguments[2],ct)&&arguments[0]instanceof Object&&arguments[1]instanceof rn){var a=arguments[0],l=arguments[1],u=arguments[2];t.prototype.query.call(this,a,l,u)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){z.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new pt(t);sn.sort(r,e.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(_(arguments[0],hn)){var t=arguments[0],n=new an(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof an){var i=arguments[0];return this.nearestNeighbour(i,o.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&_(arguments[1],hn)){var r=arguments[0],s=arguments[1],a=new an(this.getRoot(),r.getRoot(),s);return this.nearestNeighbour(a)}if(arguments[0]instanceof an&&"number"==typeof arguments[1]){var l=arguments[0],u=arguments[1],c=u,h=null,p=new tn;for(p.add(l);!p.isEmpty()&&c>0;){var d=p.poll(),f=d.getDistance();if(f>=c)break;d.isLeaves()?(c=f,h=d):d.expandToQueue(p,c)}return[h.getBoundable(0).getItem(),h.getBoundable(1).getItem()]}}else if(3===arguments.length){var g=arguments[0],y=arguments[1],m=arguments[2],v=new Qe(g,y),b=new an(this.getRoot(),v,m);return this.nearestNeighbour(b)[0]}},e.prototype.interfaces_=function(){return[nn,c]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return dn},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[u]},compare:function(n,i){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[u]},compare:function(n,i){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(ln),dn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new N(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rn),fn=function(){};fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn},fn.relativeSign=function(t,e){return t<e?-1:t>e?1:0},fn.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=fn.relativeSign(e.x,n.x),r=fn.relativeSign(e.y,n.y);switch(t){case 0:return fn.compareValue(i,r);case 1:return fn.compareValue(r,i);case 2:return fn.compareValue(r,-i);case 3:return fn.compareValue(-i,r);case 4:return fn.compareValue(-i,-r);case 5:return fn.compareValue(-r,-i);case 6:return fn.compareValue(-r,i);case 7:return fn.compareValue(i,-r)}return z.shouldNeverReachHere("invalid octant value"),0},fn.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var gn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new h(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};gn.prototype.getCoordinate=function(){return this.coord},gn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},gn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:fn.compare(this._segmentOctant,this.coord,e.coord)},gn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},gn.prototype.isInterior=function(){return this._isInterior},gn.prototype.interfaces_=function(){return[a]},gn.prototype.getClass=function(){return gn};var yn=function(){this._nodeMap=new Mt,this._edge=null;var t=arguments[0];this._edge=t};yn.prototype.getSplitCoordinates=function(){var t=new ft;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},yn.prototype.addCollapsedNodes=function(){var t=new pt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},yn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},yn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new x(e+1))}},yn.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new h(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new h(e.coord))},yn.prototype.iterator=function(){return this._nodeMap.values().iterator()},yn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},yn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},yn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new x(e[0])),i=r}},yn.prototype.getEdge=function(){return this._edge},yn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},yn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new h(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new h(e.coord)),new bn(o,this._edge.getData())},yn.prototype.add=function(t,e){var n=new gn(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(z.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},yn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new V("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new V("bad split edge end point at "+r)},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new r("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof h&&arguments[1]instanceof h){var o=arguments[0],s=arguments[1],a=s.x-o.x,l=s.y-o.y;if(0===a&&0===l)throw new r("Cannot compute the octant for two identical points "+o);return _n.octant(a,l)}};var mn=function(){};mn.prototype.getCoordinates=function(){},mn.prototype.size=function(){},mn.prototype.getCoordinate=function(t){},mn.prototype.isClosed=function(){},mn.prototype.setData=function(t){},mn.prototype.getData=function(){},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var vn=function(){};vn.prototype.addIntersection=function(t,e){},vn.prototype.interfaces_=function(){return[mn]},vn.prototype.getClass=function(){return vn};var bn=function(){this._nodeList=new yn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};bn.prototype.getCoordinates=function(){return this._pts},bn.prototype.size=function(){return this._pts.length},bn.prototype.getCoordinate=function(t){return this._pts[t]},bn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},bn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},bn.prototype.setData=function(t){this._data=t},bn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:_n.octant(t,e)},bn.prototype.getData=function(){return this._data},bn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[3],o=new h(n.getIntersection(r));this.addIntersection(o,i)}},bn.prototype.toString=function(){return G.toLineString(new pe(this._pts))},bn.prototype.getNodeList=function(){return this._nodeList},bn.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)},bn.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},bn.prototype.interfaces_=function(){return[vn]},bn.prototype.getClass=function(){return bn},bn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new pt;return bn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();o.getNodeList().addSplitEdges(i)}};var xn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new h,this.p1=new h;else if(1===arguments.length){var t=arguments[0];this.p0=new h(t.p0),this.p1=new h(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new h(e,n),this.p1=new h(i,r)}},wn={serialVersionUID:{configurable:!0}};xn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},xn.prototype.orientationIndex=function(){if(arguments[0]instanceof xn){var t=arguments[0],e=Y.orientationIndex(this.p0,this.p1,t.p0),n=Y.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof h){var i=arguments[0];return Y.orientationIndex(this.p0,this.p1,i)}},xn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},xn.prototype.isVertical=function(){return this.p0.x===this.p1.x},xn.prototype.equals=function(t){if(!(t instanceof xn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},xn.prototype.intersection=function(t){var e=new W;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},xn.prototype.project=function(){if(arguments[0]instanceof h){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new h(t);var e=this.projectionFactor(t),n=new h;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof xn){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var s=this.project(i.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new xn(s,a)}},xn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},xn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},xn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},xn.prototype.distancePerpendicular=function(t){return Y.distancePointLinePerpendicular(t,this.p0,this.p1)},xn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},xn.prototype.midPoint=function(){return xn.midPoint(this.p0,this.p1)},xn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?o.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},xn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=o.MAX_VALUE,r=null,s=this.closestPoint(t.p0);i=s.distance(t.p0),n[0]=s,n[1]=t.p0;var a=this.closestPoint(t.p1);(r=a.distance(t.p1))<i&&(i=r,n[0]=a,n[1]=t.p1);var l=t.closestPoint(this.p0);(r=l.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=l);var u=t.closestPoint(this.p1);return(r=u.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=u),n},xn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},xn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},xn.prototype.getLength=function(){return this.p0.distance(this.p1)},xn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},xn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},xn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},xn.prototype.lineIntersection=function(t){try{return R.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof M))throw t}return null},xn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},xn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,l=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*r/s,l=e*o/s}return new h(n-l,i+a)},xn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},xn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||o.isNaN(e))&&(e=1),e},xn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},xn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},xn.prototype.distance=function(){if(arguments[0]instanceof xn){var t=arguments[0];return Y.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof h){var e=arguments[0];return Y.distancePointLine(e,this.p0,this.p1)}},xn.prototype.pointAlong=function(t){var e=new h;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},xn.prototype.hashCode=function(){var t=o.doubleToLongBits(this.p0.x);t^=31*o.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=o.doubleToLongBits(this.p1.x);return n^=31*o.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},xn.prototype.interfaces_=function(){return[a,c]},xn.prototype.getClass=function(){return xn},xn.midPoint=function(t,e){return new h((t.x+e.x)/2,(t.y+e.y)/2)},wn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(xn,wn);var En=function(){this.tempEnv1=new N,this.tempEnv2=new N,this._overlapSeg1=new xn,this._overlapSeg2=new xn};En.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En};var Pn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};Pn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Pn.prototype.computeSelect=function(t,e,n,i){var r=this._pts[e],o=this._pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)},Pn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Pn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Pn.prototype.setId=function(t){this._id=t},Pn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Pn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new N(t,e)}return this._env},Pn.prototype.getEndIndex=function(){return this._end},Pn.prototype.getStartIndex=function(){return this._start},Pn.prototype.getContext=function(){return this._context},Pn.prototype.getId=function(){return this._id},Pn.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var s=this._pts[t],a=this._pts[e],l=n._pts[i],u=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);t<c&&(i<h&&this.computeOverlapsInternal(t,c,n,i,h,o),h<r&&this.computeOverlapsInternal(t,c,n,h,r,o)),c<e&&(i<h&&this.computeOverlapsInternal(c,e,n,i,h,o),h<r&&this.computeOverlapsInternal(c,e,n,h,r,o))},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn};var Cn=function(){};Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.getChainStartIndices=function(t){var e=0,n=new pt;n.add(new x(e));do{var i=Cn.findChainEnd(t,e);n.add(new x(i)),e=i}while(e<t.length-1);return Cn.toIntArray(n)},Cn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=We.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||We.quadrant(t[r-1],t[r])===i);)r++;return r-1},Cn.getChains=function(){if(1===arguments.length){var t=arguments[0];return Cn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new pt,r=Cn.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new Pn(e,r[o],r[o+1],n);i.add(s)}return i}},Cn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var On=function(){};On.prototype.computeNodes=function(t){},On.prototype.getNodedSubstrings=function(){},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On};var Sn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Sn.prototype.setSegmentIntersector=function(t){this._segInt=t},Sn.prototype.interfaces_=function(){return[On]},Sn.prototype.getClass=function(){return Sn};var In=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new pt,this._index=new pn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return bn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=Cn.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var i=n.next();i.setId(e._idCounter++),e._index.insert(i.getEnvelope(),i),e._monoChains.add(i)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Ln(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var i=n.next(),r=t._index.query(i.getEnvelope()).iterator();r.hasNext();){var o=r.next();if(o.getId()>i.getId()&&(i.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Ln},Object.defineProperties(e,n),e}(Sn),Ln=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],o=e.getContext(),s=i.getContext();this._si.processIntersections(o,n,s,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(En),Mn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Tn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Mn.prototype.getEndCapStyle=function(){return this._endCapStyle},Mn.prototype.isSingleSided=function(){return this._isSingleSided},Mn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Mn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Mn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Mn.JOIN_ROUND&&(this._quadrantSegments=Mn.DEFAULT_QUADRANT_SEGMENTS)},Mn.prototype.getJoinStyle=function(){return this._joinStyle},Mn.prototype.setJoinStyle=function(t){this._joinStyle=t},Mn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Mn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Mn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Mn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Mn.prototype.getMitreLimit=function(){return this._mitreLimit},Mn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Mn.prototype.setSingleSided=function(t){this._isSingleSided=t},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Mn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Tn.CAP_ROUND.get=function(){return 1},Tn.CAP_FLAT.get=function(){return 2},Tn.CAP_SQUARE.get=function(){return 3},Tn.JOIN_ROUND.get=function(){return 1},Tn.JOIN_MITRE.get=function(){return 2},Tn.JOIN_BEVEL.get=function(){return 3},Tn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Tn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Tn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Mn,Tn);var Rn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Y.COUNTERCLOCKWISE,this._inputLine=t||null},Nn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Rn.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)},Rn.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),i=this.findNextNonDeletedIndex(n),r=!1;i<this._inputLine.length;){var o=!1;t.isDeletable(e,n,i,t._distanceTol)&&(t._isDeleted[n]=Rn.DELETE,o=!0,r=!0),e=o?i:n,n=t.findNextNonDeletedIndex(e),i=t.findNextNonDeletedIndex(n)}return r},Rn.prototype.isShallowConcavity=function(t,e,n,i){return Y.computeOrientation(t,e,n)===this._angleOrientation&&Y.distancePointLine(e,t,n)<i},Rn.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/Rn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1;return!0},Rn.prototype.isConcave=function(t,e,n){return Y.computeOrientation(t,e,n)===this._angleOrientation},Rn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Y.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Rn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Rn.DELETE;)e++;return e},Rn.prototype.isShallow=function(t,e,n,i){return Y.distancePointLine(e,t,n)<i},Rn.prototype.collapseLine=function(){for(var t=new ft,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Rn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.simplify=function(t,e){return new Rn(t).simplify(e)},Nn.INIT.get=function(){return 0},Nn.DELETE.get=function(){return 1},Nn.KEEP.get=function(){return 1},Nn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Rn,Nn);var An=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new pt},Dn={COORDINATE_ARRAY_TYPE:{configurable:!0}};An.prototype.getCoordinates=function(){return this._ptList.toArray(An.COORDINATE_ARRAY_TYPE)},An.prototype.setPrecisionModel=function(t){this._precisionModel=t},An.prototype.addPt=function(t){var e=new h(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},An.prototype.revere=function(){},An.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},An.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},An.prototype.toString=function(){return(new xe).createLineString(this.getCoordinates()).toString()},An.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new h(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},An.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},Dn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(An,Dn);var jn=function(){},Fn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.toDegrees=function(t){return 180*t/Math.PI},jn.normalize=function(t){for(;t>Math.PI;)t-=jn.PI_TIMES_2;for(;t<=-Math.PI;)t+=jn.PI_TIMES_2;return t},jn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},jn.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},jn.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0},jn.interiorAngle=function(t,e,n){var i=jn.angle(e,t),r=jn.angle(e,n);return Math.abs(r-i)},jn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=jn.PI_TIMES_2;t>=jn.PI_TIMES_2&&(t=0)}else{for(;t>=jn.PI_TIMES_2;)t-=jn.PI_TIMES_2;t<0&&(t=0)}return t},jn.angleBetween=function(t,e,n){var i=jn.angle(e,t),r=jn.angle(e,n);return jn.diff(i,r)},jn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},jn.toRadians=function(t){return t*Math.PI/180},jn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?jn.COUNTERCLOCKWISE:n<0?jn.CLOCKWISE:jn.NONE},jn.angleBetweenOriented=function(t,e,n){var i=jn.angle(e,t),r=jn.angle(e,n)-i;return r<=-Math.PI?r+jn.PI_TIMES_2:r>Math.PI?r-jn.PI_TIMES_2:r},Fn.PI_TIMES_2.get=function(){return 2*Math.PI},Fn.PI_OVER_2.get=function(){return Math.PI/2},Fn.PI_OVER_4.get=function(){return Math.PI/4},Fn.COUNTERCLOCKWISE.get=function(){return Y.COUNTERCLOCKWISE},Fn.CLOCKWISE.get=function(){return Y.CLOCKWISE},Fn.NONE.get=function(){return Y.COLLINEAR},Object.defineProperties(jn,Fn);var kn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new xn,this._seg1=new xn,this._offset0=new xn,this._offset1=new xn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new W,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Mn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Gn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};kn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Y.computeOrientation(this._s0,this._s1,this._s2),i=n===Y.CLOCKWISE&&this._side===Le.LEFT||n===Y.COUNTERCLOCKWISE&&this._side===Le.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},kn.prototype.addLineEndCap=function(t,e){var n=new xn(t,e),i=new xn;this.computeOffsetSegment(n,Le.LEFT,this._distance,i);var r=new xn;this.computeOffsetSegment(n,Le.RIGHT,this._distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Mn.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Y.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Mn.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case Mn.CAP_SQUARE:var l=new h;l.x=Math.abs(this._distance)*Math.cos(a),l.y=Math.abs(this._distance)*Math.sin(a);var u=new h(i.p1.x+l.x,i.p1.y+l.y),c=new h(r.p1.x+l.x,r.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},kn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},kn.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=R.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof M))throw t;o=new h(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},kn.prototype.addFilletCorner=function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);i===Y.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,i,r),this._segList.addPt(n)},kn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*kn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Mn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Mn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},kn.prototype.createSquare=function(t){this._segList.addPt(new h(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new h(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new h(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new h(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},kn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},kn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},kn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},kn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},kn.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=jn.angle(r,this._seg0.p0),s=jn.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=jn.normalize(o+s),l=jn.normalize(a+Math.PI),u=i*n,c=n-u*Math.abs(Math.sin(s)),p=r.x+u*Math.cos(l),d=r.y+u*Math.sin(l),f=new h(p,d),g=new xn(r,f),y=g.pointAlongOffset(1,c),_=g.pointAlongOffset(1,-c);this._side===Le.LEFT?(this._segList.addPt(y),this._segList.addPt(_)):(this._segList.addPt(_),this._segList.addPt(y))},kn.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===Le.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),l=r*n*o/a,u=r*n*s/a;i.p0.x=t.p0.x-u,i.p0.y=t.p0.y+l,i.p1.x=t.p1.x-u,i.p1.y=t.p1.y+l},kn.prototype.addFilletArc=function(t,e,n,i,r){var o=i===Y.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var l=s/a,u=0,c=new h;u<s;){var p=e+o*u;c.x=t.x+r*Math.cos(p),c.y=t.y+r*Math.sin(p),this._segList.addPt(c),u+=l}},kn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*kn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new h((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new h((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},kn.prototype.createCircle=function(t){var e=new h(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},kn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},kn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new An,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*kn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},kn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Mn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Mn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Y.CLOCKWISE,this._distance))},kn.prototype.closeRing=function(){this._segList.closeRing()},kn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},Gn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Gn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Gn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Gn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(kn,Gn);var Vn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Vn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&gt.reverse(o),o},Vn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=Rn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Le.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=Rn.simplify(t,i),l=a.length-1;n.initSideSegments(a[0],a[1],Le.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment(),n.closeRing()},Vn.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Le.RIGHT&&(i=-i);var r=Rn.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()},Vn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=Rn.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Le.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=Rn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Le.LEFT);for(var l=a-2;l>=0;l--)e.addNextSegment(s[l],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Vn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Mn.CAP_ROUND:e.createCircle(t);break;case Mn.CAP_SQUARE:e.createSquare(t)}},Vn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},Vn.prototype.getBufferParameters=function(){return this._bufParams},Vn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Vn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Vn.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},Vn.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=Rn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Le.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=Rn.simplify(t,i),l=a.length-1;n.initSideSegments(a[0],a[1],Le.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment()},Vn.prototype.getSegGen=function(t){return new kn(this._precisionModel,this._bufParams,t)},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn},Vn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new h(t[n]);return e};var Zn=function(){this._subgraphs=null,this._seg=new xn,this._cga=new Y;var t=arguments[0];this._subgraphs=t},zn={DepthSegment:{configurable:!0}};Zn.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new pt,i=this._subgraphs.iterator();i.hasNext();){var r=i.next(),o=r.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,r.getDirectedEdges(),n)}return n}if(3===arguments.length)if(_(arguments[2],ct)&&arguments[0]instanceof h&&arguments[1]instanceof Ye)for(var s=arguments[0],a=arguments[1],l=arguments[2],u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++){t._seg.p0=u[c],t._seg.p1=u[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var p=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(p<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||Y.computeOrientation(t._seg.p0,t._seg.p1,s)===Y.RIGHT)){var d=a.getDepth(Le.LEFT);t._seg.p0.equals(u[c])||(d=a.getDepth(Le.RIGHT));var f=new Bn(t._seg,d);l.add(f)}}else if(_(arguments[2],ct)&&arguments[0]instanceof h&&_(arguments[1],ct))for(var g=arguments[0],y=arguments[1],m=arguments[2],v=y.iterator();v.hasNext();){var b=v.next();b.isForward()&&t.findStabbedSegments(g,b,m)}},Zn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:sn.min(e)._leftDepth},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn},zn.DepthSegment.get=function(){return Bn},Object.defineProperties(Zn,zn);var Bn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new xn(t),this._leftDepth=e};Bn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Bn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Bn.prototype.toString=function(){return this._upwardSeg.toString()},Bn.prototype.interfaces_=function(){return[a]},Bn.prototype.getClass=function(){return Bn};var Un=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Un.prototype.area=function(){return Un.area(this.p0,this.p1,this.p2)},Un.prototype.signedArea=function(){return Un.signedArea(this.p0,this.p1,this.p2)},Un.prototype.interpolateZ=function(t){if(null===t)throw new r("Supplied point is null.");return Un.interpolateZ(t,this.p0,this.p1,this.p2)},Un.prototype.longestSideLength=function(){return Un.longestSideLength(this.p0,this.p1,this.p2)},Un.prototype.isAcute=function(){return Un.isAcute(this.p0,this.p1,this.p2)},Un.prototype.circumcentre=function(){return Un.circumcentre(this.p0,this.p1,this.p2)},Un.prototype.area3D=function(){return Un.area3D(this.p0,this.p1,this.p2)},Un.prototype.centroid=function(){return Un.centroid(this.p0,this.p1,this.p2)},Un.prototype.inCentre=function(){return Un.inCentre(this.p0,this.p1,this.p2)},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un},Un.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Un.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Un.det=function(t,e,n,i){return t*i-e*n},Un.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,l=n.y-o,u=i.y-o,c=s*u-a*l,h=t.x-r,p=t.y-o,d=(u*h-a*p)/c,f=(-l*h+s*p)/c;return e.z+d*(n.z-e.z)+f*(i.z-e.z)},Un.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},Un.isAcute=function(t,e,n){return!!jn.isAcute(t,e,n)&&!!jn.isAcute(e,n,t)&&!!jn.isAcute(n,t,e)},Un.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,l=e.y-r,u=2*Un.det(o,s,a,l),c=Un.det(s,o*o+s*s,l,a*a+l*l),p=Un.det(o,o*o+s*s,a,a*a+l*l);return new h(i-c/u,r+p/u)},Un.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new R(t.x+n/2,t.y+i/2,1),o=new R(t.x-i+n/2,t.y+n+i/2,1);return new R(r,o)},Un.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new h(t.x+r*o,t.y+r*s)},Un.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,l=n.z-t.z,u=r*l-o*a,c=o*s-i*l,h=i*a-r*s,p=u*u+c*c+h*h;return Math.sqrt(p)/2},Un.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new h(i,r)},Un.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,l=(i*t.y+r*e.y+o*n.y)/s;return new h(a,l)};var Wn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new pt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Wn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,g.EXTERIOR,g.INTERIOR)},Wn.prototype.addPolygon=function(t){var e=this,n=this._distance,i=Le.LEFT;this._distance<0&&(n=-this._distance,i=Le.RIGHT);var r=t.getExteriorRing(),o=gt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,i,g.EXTERIOR,g.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),l=gt.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(l,n,Le.opposite(i),g.INTERIOR,g.EXTERIOR)}},Wn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Un(t[0],t[1],t[2]),i=n.inCentre();return Y.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},Wn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=gt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,g.EXTERIOR,g.INTERIOR)},Wn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new bn(t,new ke(0,g.BOUNDARY,e,n));this._curveList.add(i)},Wn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Wn.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<oe.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=oe.MINIMUM_VALID_SIZE&&Y.isCCW(t)&&(o=r,s=i,n=Le.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Wn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof ie?this.addPolygon(t):t instanceof Qt?this.addLineString(t):t instanceof ee?this.addPoint(t):(t instanceof re||t instanceof Zt||t instanceof se||t instanceof Vt)&&this.addCollection(t)},Wn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},Wn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var qn=function(){};qn.prototype.locate=function(t){},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Xn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Xn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Xn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new ht;var t=this._parent.getGeometryN(this._index++);return t instanceof Vt?(this._subcollectionIterator=new Xn(t),this._subcollectionIterator.next()):t},Xn.prototype.remove=function(){throw new Error(this.getClass().getName())},Xn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Xn.prototype.interfaces_=function(){return[ut]},Xn.prototype.getClass=function(){return Xn},Xn.isAtomic=function(t){return!(t instanceof Vt)};var Yn=function(){this._geom=null;var t=arguments[0];this._geom=t};Yn.prototype.locate=function(t){return Yn.locate(t,this._geom)},Yn.prototype.interfaces_=function(){return[qn]},Yn.prototype.getClass=function(){return Yn},Yn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Y.isPointInRing(t,e.getCoordinates())},Yn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Yn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(Yn.isPointInRing(t,r))return!1}return!0},Yn.containsPoint=function(t,e){if(e instanceof ie)return Yn.containsPointInPolygon(t,e);if(e instanceof Vt)for(var n=new Xn(e);n.hasNext();){var i=n.next();if(i!==e&&Yn.containsPoint(t,i))return!0}return!1},Yn.locate=function(t,e){return e.isEmpty()?g.EXTERIOR:Yn.containsPoint(t,e)?g.INTERIOR:g.EXTERIOR};var Hn=function(){this._edgeMap=new Mt,this._edgeList=null,this._ptInAreaLocation=[g.NONE,g.NONE]};Hn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Hn.prototype.propagateSideLabels=function(t){for(var e=g.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Le.LEFT)!==g.NONE&&(e=i.getLocation(t,Le.LEFT))}if(e===g.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Le.ON)===g.NONE&&a.setLocation(t,Le.ON,r),a.isArea(t)){var l=a.getLocation(t,Le.LEFT),u=a.getLocation(t,Le.RIGHT);if(u!==g.NONE){if(u!==r)throw new Ae("side location conflict",s.getCoordinate());l===g.NONE&&z.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=l}else z.isTrue(a.getLocation(t,Le.LEFT)===g.NONE,"found single null side"),a.setLocation(t,Le.RIGHT,r),a.setLocation(t,Le.LEFT,r)}}},Hn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Hn.prototype.print=function(t){T.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Hn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Hn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Le.LEFT);z.isTrue(i!==g.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();z.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Le.LEFT),l=s.getLocation(t,Le.RIGHT);if(a===l)return!1;if(l!==r)return!1;r=a}return!0},Hn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Hn.prototype.iterator=function(){return this.getEdges().iterator()},Hn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new pt(this._edgeMap.values())),this._edgeList},Hn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===g.NONE&&(this._ptInAreaLocation[t]=Yn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Hn.prototype.toString=function(){var t=new b;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Hn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Hn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===g.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),l=0;l<2;l++)if(a.isAnyNull(l)){var u=g.NONE;if(e[l])u=g.EXTERIOR;else{var c=s.getCoordinate();u=this.getLocation(l,c,t)}a.setAllLocationsIfNull(l,u)}},Hn.prototype.getDegree=function(){return this._edgeMap.size()},Hn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Jn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var o=t._resultAreaEdgeList.get(r),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),i){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;n=s,i=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),i=t._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===e)throw new Ae("no outgoing dirEdge found",this.getCoordinate());z.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return We.isNorthern(r)&&We.isNorthern(o)?n:We.isNorthern(r)||We.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(z.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){T.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new pt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),i=e.getDepth(Le.LEFT),r=e.getDepth(Le.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),i),s=this.computeDepths(0,n,o);if(s!==r)throw new Ae("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var a=arguments[0],l=arguments[1],u=arguments[2],c=u,h=a;h<l;h++){var p=t._edgeList.get(h);p.setEdgeDepths(Le.RIGHT,c),c=p.getDepth(Le.LEFT)}return c}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,i=null,r=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===n&&s.getEdgeRing()===t&&(n=s),r){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;i=a,r=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;i.setNextMin(s),r=e._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(z.isTrue(null!==n,"found null for first outgoing dirEdge"),z.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var i=arguments[0],r=0,o=this.iterator();o.hasNext();){var s=o.next();s.getEdgeRing()===i&&r++}return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=g.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=g.INTERIOR;break}if(i.isInResult()){t=g.EXTERIOR;break}}}if(t===g.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===g.INTERIOR):(s.isInResult()&&(r=g.EXTERIOR),a.isInResult()&&(r=g.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new ke(g.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==g.INTERIOR&&o!==g.BOUNDARY||this._label.setLocation(r,g.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hn),Kn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Be(t,new Jn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(He),$n=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};$n.prototype.compareTo=function(t){var e=t;return $n.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},$n.prototype.interfaces_=function(){return[a]},$n.prototype.getClass=function(){return $n},$n.orientation=function(t){return 1===gt.increasingDirection(t)},$n.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,l=e?0:t.length-1,u=i?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=r)===s,p=(u+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Qn=function(){this._edges=new pt,this._ocaMap=new Mt};Qn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},Qn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Qn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Qn.prototype.iterator=function(){return this._edges.iterator()},Qn.prototype.getEdges=function(){return this._edges},Qn.prototype.get=function(t){return this._edges.get(t)},Qn.prototype.findEqualEdge=function(t){var e=new $n(t.getCoordinates());return this._ocaMap.get(e)},Qn.prototype.add=function(t){this._edges.add(t);var e=new $n(t.getCoordinates());this._ocaMap.put(e,t)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var ti=function(){};ti.prototype.processIntersections=function(t,e,n,i){},ti.prototype.isDone=function(){},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti};var ei=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};ei.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(ei.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},ei.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ei.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ei.prototype.getLineIntersector=function(){return this._li},ei.prototype.hasProperIntersection=function(){return this._hasProper},ei.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},ei.prototype.hasIntersection=function(){return this._hasIntersection},ei.prototype.isDone=function(){return!1},ei.prototype.hasInteriorIntersection=function(){return this._hasInterior},ei.prototype.interfaces_=function(){return[ti]},ei.prototype.getClass=function(){return ei},ei.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var ni=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new h(t),this.segmentIndex=e,this.dist=n};ni.prototype.getSegmentIndex=function(){return this.segmentIndex},ni.prototype.getCoordinate=function(){return this.coord},ni.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},ni.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},ni.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},ni.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},ni.prototype.getDistance=function(){return this.dist},ni.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},ni.prototype.interfaces_=function(){return[a]},ni.prototype.getClass=function(){return ni};var ii=function(){this._nodeMap=new Mt,this.edge=null;var t=arguments[0];this.edge=t};ii.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ii.prototype.iterator=function(){return this._nodeMap.values().iterator()},ii.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},ii.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},ii.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new h(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new li(o,new ke(this.edge._label))},ii.prototype.add=function(t,e,n){var i=new ni(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},ii.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii};var ri=function(){};ri.prototype.getChainStartIndices=function(t){var e=0,n=new pt;n.add(new x(e));do{var i=this.findChainEnd(t,e);n.add(new x(i)),e=i}while(e<t.length-1);return ri.toIntArray(n)},ri.prototype.findChainEnd=function(t,e){for(var n=We.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&We.quadrant(t[i-1],t[i])===n;)i++;return i-1},ri.prototype.interfaces_=function(){return[]},ri.prototype.getClass=function(){return ri},ri.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var oi=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new N,this.env2=new N;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new ri;this.startIndex=e.getChainStartIndices(this.pts)};oi.prototype.getCoordinates=function(){return this.pts},oi.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},oi.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},oi.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[r],h=this.pts[o],p=s.pts[a],d=s.pts[l];if(o-r==1&&l-a==1)return u.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(c,h),this.env2.init(p,d),!this.env1.intersects(this.env2))return null;var f=Math.trunc((r+o)/2),g=Math.trunc((a+l)/2);r<f&&(a<g&&this.computeIntersectsForChain(r,f,s,a,g,u),g<l&&this.computeIntersectsForChain(r,f,s,g,l,u)),f<o&&(a<g&&this.computeIntersectsForChain(f,o,s,a,g,u),g<l&&this.computeIntersectsForChain(f,o,s,g,l,u))}},oi.prototype.getStartIndexes=function(){return this.startIndex},oi.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi};var si=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ai={NULL_VALUE:{configurable:!0}};si.prototype.getDepth=function(t,e){return this._depth[t][e]},si.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},si.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==si.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this._depth[i][1]===si.NULL_VALUE}if(2===arguments.length){var r=arguments[0],o=arguments[1];return this._depth[r][o]===si.NULL_VALUE}},si.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var i=1;i<3;i++){var r=0;t._depth[e][i]>n&&(r=1),t._depth[e][i]=r}}},si.prototype.getDelta=function(t){return this._depth[t][Le.RIGHT]-this._depth[t][Le.LEFT]},si.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?g.EXTERIOR:g.INTERIOR},si.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},si.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var r=e.getLocation(n,i);r!==g.EXTERIOR&&r!==g.INTERIOR||(t.isNull(n,i)?t._depth[n][i]=si.depthAtLocation(r):t._depth[n][i]+=si.depthAtLocation(r))}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];a===g.INTERIOR&&this._depth[o][s]++}},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si},si.depthAtLocation=function(t){return t===g.EXTERIOR?0:t===g.INTERIOR?1:si.NULL_VALUE},ai.NULL_VALUE.get=function(){return-1},Object.defineProperties(si,ai);var li=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new ii(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new si,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,ke.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(i=!1),this.pts[s].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new oi(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new N;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new h(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var l=this.pts[a];r.equals2D(l)&&(o=a,s=0)}this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new b;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Le.ON),e.getLocation(1,Le.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Le.LEFT),e.getLocation(1,Le.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Le.RIGHT),e.getLocation(1,Le.RIGHT),2))},e}(ze),ui=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Qn,this._bufParams=t||null};ui.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ui.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new ke(t.getLabel())).flip(),n.merge(i);var r=ui.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ui.depthDelta(t.getLabel()))},ui.prototype.buildSubgraphs=function(t,e){for(var n=new pt,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new Zn(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},ui.prototype.createSubgraphs=function(t){for(var e=new pt,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new je;r.create(i),e.add(r)}}return sn.sort(e,sn.reverseOrder()),e},ui.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ui.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new In,n=new W;return n.setPrecisionModel(t),e.setSegmentIntersector(new ei(n)),e},ui.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new Vn(n,this._bufParams),r=new Wn(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Je(new Kn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Ke(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},ui.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new li(r.getCoordinates(),new ke(s));this.insertUniqueEdge(a)}}},ui.prototype.setNoder=function(t){this._workingNoder=t},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},ui.depthDelta=function(t){var e=t.getLocation(0,Le.LEFT),n=t.getLocation(0,Le.RIGHT);return e===g.INTERIOR&&n===g.EXTERIOR?1:e===g.EXTERIOR&&n===g.INTERIOR?-1:0},ui.convertSegStrings=function(t){for(var e=new xe,n=new pt;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var ci=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ci.prototype.rescale=function(){var t=this;if(_(arguments[0],at))for(var e=arguments[0],n=e.iterator();n.hasNext();){var i=n.next();t.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){for(var r=arguments[0],o=0;o<r.length;o++)r[o].x=r[o].x/t._scaleFactor+t._offsetX,r[o].y=r[o].y/t._scaleFactor+t._offsetY;2===r.length&&r[0].equals2D(r[1])&&T.out.println(r)}},ci.prototype.scale=function(){var t=this;if(_(arguments[0],at)){for(var e=arguments[0],n=new pt,i=e.iterator();i.hasNext();){var r=i.next();n.add(new bn(t.scale(r.getCoordinates()),r.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new h(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);var l=gt.removeRepeatedPoints(s);return l}},ci.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ci.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ci.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ci.prototype.interfaces_=function(){return[On]},ci.prototype.getClass=function(){return ci};var hi=function(){this._li=new W,this._segStrings=null;var t=arguments[0];this._segStrings=t},pi={fact:{configurable:!0}};hi.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),i=n.getCoordinates();t.checkEndPtVertexIntersections(i[0],t._segStrings),t.checkEndPtVertexIntersections(i[i.length-1],t._segStrings)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),l=a.getCoordinates(),u=1;u<l.length-1;u++)if(l[u].equals(r))throw new V("found endpt/interior pt intersection at index "+u+" :pt "+r)},hi.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),i=this._segStrings.iterator();i.hasNext();){var r=i.next();t.checkInteriorIntersections(n,r)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),l=s.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<l.length-1;c++)t.checkInteriorIntersections(o,u,s,c);else if(4===arguments.length){var h=arguments[0],p=arguments[1],d=arguments[2],f=arguments[3];if(h===d&&p===f)return null;var g=h.getCoordinates()[p],y=h.getCoordinates()[p+1],_=d.getCoordinates()[f],m=d.getCoordinates()[f+1];if(this._li.computeIntersection(g,y,_,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,y)||this.hasInteriorIntersection(this._li,_,m)))throw new V("found non-noded intersection at "+g+"-"+y+" and "+_+"-"+m)}},hi.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},hi.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var i=arguments[0],r=i.getCoordinates(),o=0;o<r.length-2;o++)t.checkCollapse(r[o],r[o+1],r[o+2])},hi.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},hi.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new V("found non-noded collapse at "+hi.fact.createLineString([t,e,n]))},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi},pi.fact.get=function(){return new xe},Object.defineProperties(hi,pi);var di=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new r("Scale factor must be non-zero");1!==e&&(this._pt=new h(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new h,this._p1Scaled=new h),this.initCorners(this._pt)},fi={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};di.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return z.isTrue(!(s&&a),"Found bad envelope test"),a},di.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new h(this._maxx,this._maxy),this._corner[1]=new h(this._minx,this._maxy),this._corner[2]=new h(this._minx,this._miny),this._corner[3]=new h(this._maxx,this._miny)},di.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},di.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},di.prototype.getCoordinate=function(){return this._originalPt},di.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},di.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=di.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new N(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},di.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},di.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},di.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},di.prototype.interfaces_=function(){return[]},di.prototype.getClass=function(){return di},fi.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(di,fi);var gi=function(){this.tempEnv1=new N,this.selectedSegment=new xn};gi.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi};var yi=function(){this._index=null;var t=arguments[0];this._index=t},_i={HotPixelSnapAction:{configurable:!0}};yi.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new mi(e,n,i);return this._index.query(r,{interfaces_:function(){return[en]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi},_i.HotPixelSnapAction.get=function(){return mi},Object.defineProperties(yi,_i);var mi=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],i=e.getContext();if(null!==this._parentEdge&&i===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gi),vi=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new pt};vi.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},vi.prototype.isDone=function(){return!1},vi.prototype.getInteriorIntersections=function(){return this._interiorIntersections},vi.prototype.interfaces_=function(){return[ti]},vi.prototype.getClass=function(){return vi};var bi=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new W,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};bi.prototype.checkCorrectness=function(t){var e=bn.getNodedSubstrings(t),n=new hi(e);try{n.checkValid()}catch(t){if(!(t instanceof L))throw t;t.printStackTrace()}},bi.prototype.getNodedSubstrings=function(){return bn.getNodedSubstrings(this._nodedSegStrings)},bi.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},bi.prototype.findInteriorIntersections=function(t,e){var n=new vi(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},bi.prototype.computeVertexSnaps=function(){var t=this;if(_(arguments[0],at))for(var e=arguments[0],n=e.iterator();n.hasNext();){var i=n.next();t.computeVertexSnaps(i)}else if(arguments[0]instanceof bn)for(var r=arguments[0],o=r.getCoordinates(),s=0;s<o.length;s++){var a=new di(o[s],t._scaleFactor,t._li),l=t._pointSnapper.snap(a,r,s);l&&r.addIntersection(o[s],s)}},bi.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new In,this._pointSnapper=new yi(this._noder.getIndex()),this.snapRound(t,this._li)},bi.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var i=n.next(),r=new di(i,e._scaleFactor,e._li);e._pointSnapper.snap(r)}},bi.prototype.interfaces_=function(){return[On]},bi.prototype.getClass=function(){return bi};var xi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Mn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},wi={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};xi.prototype.bufferFixedPrecision=function(t){var e=new ci(new bi(new _e(1)),t.getScale()),n=new ui(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},xi.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=xi.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ae))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=xi.precisionScaleFactor(this._argGeom,this._distance,n),r=new _e(i);this.bufferFixedPrecision(r)}},xi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===_e.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},xi.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},xi.prototype.bufferOriginalPrecision=function(){try{var t=new ui(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof V))throw t;this._saveException=t}},xi.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},xi.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi},xi.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new xi(t),i=n.getResultGeometry(e);return i}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof K&&"number"==typeof arguments[1]){var r=arguments[0],o=arguments[1],s=arguments[2],a=new xi(r);a.setQuadrantSegments(s);var l=a.getResultGeometry(o);return l}if(arguments[2]instanceof Mn&&arguments[0]instanceof K&&"number"==typeof arguments[1]){var u=arguments[0],c=arguments[1],h=arguments[2],p=new xi(u,h),d=p.getResultGeometry(c);return d}}else if(4===arguments.length){var f=arguments[0],g=arguments[1],y=arguments[2],_=arguments[3],m=new xi(f);m.setQuadrantSegments(y),m.setEndCapStyle(_);var v=m.getResultGeometry(g);return v}},xi.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=m.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},wi.CAP_ROUND.get=function(){return Mn.CAP_ROUND},wi.CAP_BUTT.get=function(){return Mn.CAP_FLAT},wi.CAP_FLAT.get=function(){return Mn.CAP_FLAT},wi.CAP_SQUARE.get=function(){return Mn.CAP_SQUARE},wi.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(xi,wi);var Ei=function(){this._pt=[new h,new h],this._distance=o.NaN,this._isNull=!0};Ei.prototype.getCoordinates=function(){return this._pt},Ei.prototype.getCoordinate=function(t){return this._pt[t]},Ei.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Ei.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Ei.prototype.getDistance=function(){return this._distance},Ei.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var Pi=function(){};Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.computeDistance=function(){if(arguments[2]instanceof Ei&&arguments[0]instanceof Qt&&arguments[1]instanceof h)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=t.getCoordinates(),r=new xn,o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Ei&&arguments[0]instanceof ie&&arguments[1]instanceof h){var a=arguments[0],l=arguments[1],u=arguments[2];Pi.computeDistance(a.getExteriorRing(),l,u);for(var c=0;c<a.getNumInteriorRing();c++)Pi.computeDistance(a.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Ei&&arguments[0]instanceof K&&arguments[1]instanceof h){var p=arguments[0],d=arguments[1],f=arguments[2];if(p instanceof Qt)Pi.computeDistance(p,d,f);else if(p instanceof ie)Pi.computeDistance(p,d,f);else if(p instanceof Vt)for(var g=p,y=0;y<g.getNumGeometries();y++){var _=g.getGeometryN(y);Pi.computeDistance(_,d,f)}else f.setMinimum(p.getCoordinate(),d)}else if(arguments[2]instanceof Ei&&arguments[0]instanceof xn&&arguments[1]instanceof h){var m=arguments[0],v=arguments[1],b=arguments[2],x=m.closestPoint(v);b.setMinimum(x,v)}};var Ci=function(t){this._maxPtDist=new Ei,this._inputGeom=t||null},Oi={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ci.prototype.computeMaxMidpointDistance=function(t){var e=new Ii(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ci.prototype.computeMaxVertexDistance=function(t){var e=new Si(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ci.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Ci.prototype.getDistancePoints=function(){return this._maxPtDist},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Oi.MaxPointDistanceFilter.get=function(){return Si},Oi.MaxMidpointDistanceFilter.get=function(){return Ii},Object.defineProperties(Ci,Oi);var Si=function(t){this._maxPtDist=new Ei,this._minPtDist=new Ei,this._geom=t||null};Si.prototype.filter=function(t){this._minPtDist.initialize(),Pi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Si.prototype.getMaxPointDistance=function(){return this._maxPtDist},Si.prototype.interfaces_=function(){return[tt]},Si.prototype.getClass=function(){return Si};var Ii=function(t){this._maxPtDist=new Ei,this._minPtDist=new Ei,this._geom=t||null};Ii.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new h((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),Pi.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ii.prototype.isDone=function(){return!1},Ii.prototype.isGeometryChanged=function(){return!1},Ii.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ii.prototype.interfaces_=function(){return[Gt]},Ii.prototype.getClass=function(){return Ii};var Li=function(t){this._comps=t||null};Li.prototype.filter=function(t){t instanceof ie&&this._comps.add(t)},Li.prototype.interfaces_=function(){return[kt]},Li.prototype.getClass=function(){return Li},Li.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Li.getPolygons(t,new pt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof ie?n.add(e):e instanceof Vt&&e.apply(new Li(n)),n}};var Mi=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Mi.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof oe){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Qt&&this._lines.add(t)},Mi.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Mi.prototype.interfaces_=function(){return[J]},Mi.prototype.getClass=function(){return Mi},Mi.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Mi.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Mi.getLines(e,n))}},Mi.getLines=function(){if(1===arguments.length){var t=arguments[0];return Mi.getLines(t,!1)}if(2===arguments.length){if(_(arguments[0],at)&&_(arguments[1],at)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();Mi.getLines(r,n)}return n}if(arguments[0]instanceof K&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new pt;return o.apply(new Mi(a,s)),a}if(arguments[0]instanceof K&&_(arguments[1],at)){var l=arguments[0],u=arguments[1];return l instanceof Qt?u.add(l):l.apply(new Mi(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&_(arguments[0],at)&&_(arguments[1],at)){for(var c=arguments[0],h=arguments[1],p=arguments[2],d=c.iterator();d.hasNext();){var f=d.next();Mi.getLines(f,h,p)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof K&&_(arguments[1],at)){var g=arguments[0],y=arguments[1],m=arguments[2];return g.apply(new Mi(y,m)),y}}};var Ti=function(){if(this._boundaryRule=et.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new r("Rule must be non-null");this._boundaryRule=t}};Ti.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof h&&arguments[1]instanceof ie){var e=arguments[0],n=arguments[1];if(n.isEmpty())return g.EXTERIOR;var i=n.getExteriorRing(),r=this.locateInPolygonRing(e,i);if(r===g.EXTERIOR)return g.EXTERIOR;if(r===g.BOUNDARY)return g.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===g.INTERIOR)return g.EXTERIOR;if(a===g.BOUNDARY)return g.BOUNDARY}return g.INTERIOR}if(arguments[0]instanceof h&&arguments[1]instanceof Qt){var l=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(l))return g.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!l.equals(c[0])&&!l.equals(c[c.length-1])?Y.isOnLine(l,c)?g.INTERIOR:g.EXTERIOR:g.BOUNDARY}if(arguments[0]instanceof h&&arguments[1]instanceof ee){var p=arguments[0],d=arguments[1],f=d.getCoordinate();return f.equals2D(p)?g.INTERIOR:g.EXTERIOR}},Ti.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Y.locatePointInRing(t,e.getCoordinates()):g.EXTERIOR},Ti.prototype.intersects=function(t,e){return this.locate(t,e)!==g.EXTERIOR},Ti.prototype.updateLocationInfo=function(t){t===g.INTERIOR&&(this._isIn=!0),t===g.BOUNDARY&&this._numBoundaries++},Ti.prototype.computeLocation=function(t,e){var n=this;if(e instanceof ee&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ie)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Zt)for(var i=e,r=0;r<i.getNumGeometries();r++){var o=i.getGeometryN(r);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof se)for(var s=e,a=0;a<s.getNumGeometries();a++){var l=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,l))}else if(e instanceof Vt)for(var u=new Xn(e);u.hasNext();){var c=u.next();c!==e&&n.computeLocation(t,c)}},Ti.prototype.locate=function(t,e){return e.isEmpty()?g.EXTERIOR:e instanceof Qt||e instanceof ie?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?g.BOUNDARY:this._numBoundaries>0||this._isIn?g.INTERIOR:g.EXTERIOR)},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};var Ri=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._component=i,this._segIndex=r,this._pt=o}},Ni={INSIDE_AREA:{configurable:!0}};Ri.prototype.isInsideArea=function(){return this._segIndex===Ri.INSIDE_AREA},Ri.prototype.getCoordinate=function(){return this._pt},Ri.prototype.getGeometryComponent=function(){return this._component},Ri.prototype.getSegmentIndex=function(){return this._segIndex},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ni.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ri,Ni);var Ai=function(t){this._pts=t||null};Ai.prototype.filter=function(t){t instanceof ee&&this._pts.add(t)},Ai.prototype.interfaces_=function(){return[kt]},Ai.prototype.getClass=function(){return Ai},Ai.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof ee?sn.singletonList(t):Ai.getPoints(t,new pt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof ee?n.add(e):e instanceof Vt&&e.apply(new Ai(n)),n}};var Di=function(){this._locations=null;var t=arguments[0];this._locations=t};Di.prototype.filter=function(t){(t instanceof ee||t instanceof Qt||t instanceof ie)&&this._locations.add(new Ri(t,0,t.getCoordinate()))},Di.prototype.interfaces_=function(){return[kt]},Di.prototype.getClass=function(){return Di},Di.getLocations=function(t){var e=new pt;return t.apply(new Di(e)),e};var ji=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ti,this._minDistanceLocation=null,this._minDistance=o.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};ji.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=1-n,o=Li.getPolygons(this._geom[n]);if(o.size()>0){var s=Di.getLocations(this._geom[r]);if(this.computeContainmentDistance(s,o,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=i[0],this._minDistanceLocation[n]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&_(arguments[0],ct)&&_(arguments[1],ct)){for(var a=arguments[0],l=arguments[1],u=arguments[2],c=0;c<a.size();c++)for(var h=a.get(c),p=0;p<l.size();p++)if(t.computeContainmentDistance(h,l.get(p),u),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ri&&arguments[1]instanceof ie){var d=arguments[0],f=arguments[1],y=arguments[2],m=d.getCoordinate();if(g.EXTERIOR!==this._ptLocator.locate(m,f))return this._minDistance=0,y[0]=d,y[1]=new Ri(f,m),null}},ji.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),s=0;s<e.size();s++){var a=e.get(s);if(i.computeMinDistance(o,a,n),i._minDistance<=i._terminateDistance)return null}},ji.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Mi.getLines(this._geom[0]),n=Mi.getLines(this._geom[1]),i=Ai.getPoints(this._geom[0]),r=Ai.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},ji.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},ji.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},ji.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},ji.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Qt&&arguments[1]instanceof ee){var e=arguments[0],n=arguments[1],i=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var r=e.getCoordinates(),o=n.getCoordinate(),s=0;s<r.length-1;s++){var a=Y.distancePointLine(o,r[s],r[s+1]);if(a<t._minDistance){t._minDistance=a;var l=new xn(r[s],r[s+1]),u=l.closestPoint(o);i[0]=new Ri(e,s,u),i[1]=new Ri(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Qt&&arguments[1]instanceof Qt){var c=arguments[0],h=arguments[1],p=arguments[2];if(c.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var d=c.getCoordinates(),f=h.getCoordinates(),g=0;g<d.length-1;g++)for(var y=0;y<f.length-1;y++){var _=Y.distanceLineLine(d[g],d[g+1],f[y],f[y+1]);if(_<t._minDistance){t._minDistance=_;var m=new xn(d[g],d[g+1]),v=new xn(f[y],f[y+1]),b=m.closestPoints(v);p[0]=new Ri(c,g,b[0]),p[1]=new Ri(h,y,b[1])}if(t._minDistance<=t._terminateDistance)return null}}},ji.prototype.computeMinDistancePoints=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),s=0;s<e.size();s++){var a=e.get(s),l=o.getCoordinate().distance(a.getCoordinate());if(l<i._minDistance&&(i._minDistance=l,n[0]=new Ri(o,0,o.getCoordinate()),n[1]=new Ri(a,0,a.getCoordinate())),i._minDistance<=i._terminateDistance)return null}},ji.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new r("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},ji.prototype.computeMinDistanceLines=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),s=0;s<e.size();s++){var a=e.get(s);if(i.computeMinDistance(o,a,n),i._minDistance<=i._terminateDistance)return null}},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji},ji.distance=function(t,e){return new ji(t,e).distance()},ji.isWithinDistance=function(t,e,n){return new ji(t,e,n).distance()<=n},ji.nearestPoints=function(t,e){return new ji(t,e).nearestPoints()};var Fi=function(){this._pt=[new h,new h],this._distance=o.NaN,this._isNull=!0};Fi.prototype.getCoordinates=function(){return this._pt},Fi.prototype.getCoordinate=function(t){return this._pt[t]},Fi.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Fi.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Fi.prototype.toString=function(){return G.toLineString(this._pt[0],this._pt[1])},Fi.prototype.getDistance=function(){return this._distance},Fi.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi};var ki=function(){};ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.computeDistance=function(){if(arguments[2]instanceof Fi&&arguments[0]instanceof Qt&&arguments[1]instanceof h)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new xn,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Fi&&arguments[0]instanceof ie&&arguments[1]instanceof h){var a=arguments[0],l=arguments[1],u=arguments[2];ki.computeDistance(a.getExteriorRing(),l,u);for(var c=0;c<a.getNumInteriorRing();c++)ki.computeDistance(a.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Fi&&arguments[0]instanceof K&&arguments[1]instanceof h){var p=arguments[0],d=arguments[1],f=arguments[2];if(p instanceof Qt)ki.computeDistance(p,d,f);else if(p instanceof ie)ki.computeDistance(p,d,f);else if(p instanceof Vt)for(var g=p,y=0;y<g.getNumGeometries();y++){var _=g.getGeometryN(y);ki.computeDistance(_,d,f)}else f.setMinimum(p.getCoordinate(),d)}else if(arguments[2]instanceof Fi&&arguments[0]instanceof xn&&arguments[1]instanceof h){var m=arguments[0],v=arguments[1],b=arguments[2],x=m.closestPoint(v);b.setMinimum(x,v)}};var Gi=function(){this._g0=null,this._g1=null,this._ptDist=new Fi,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Vi={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Gi.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Gi.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new r("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Gi.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Gi.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Gi.prototype.computeOrientedDistance=function(t,e,n){var i=new Zi(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new zi(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},Gi.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Gi.prototype.interfaces_=function(){return[]},Gi.prototype.getClass=function(){return Gi},Gi.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Gi(t,e);return n.distance()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new Gi(i,r);return s.setDensifyFraction(o),s.distance()}},Vi.MaxPointDistanceFilter.get=function(){return Zi},Vi.MaxDensifiedByFractionDistanceFilter.get=function(){return zi},Object.defineProperties(Gi,Vi);var Zi=function(){this._maxPtDist=new Fi,this._minPtDist=new Fi,this._euclideanDist=new ki,this._geom=null;var t=arguments[0];this._geom=t};Zi.prototype.filter=function(t){this._minPtDist.initialize(),ki.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Zi.prototype.getMaxPointDistance=function(){return this._maxPtDist},Zi.prototype.interfaces_=function(){return[tt]},Zi.prototype.getClass=function(){return Zi};var zi=function(){this._maxPtDist=new Fi,this._minPtDist=new Fi,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};zi.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var i=t.getCoordinate(e-1),r=t.getCoordinate(e),o=(r.x-i.x)/this._numSubSegs,s=(r.y-i.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var l=i.x+a*o,u=i.y+a*s,c=new h(l,u);n._minPtDist.initialize(),ki.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},zi.prototype.isDone=function(){return!1},zi.prototype.isGeometryChanged=function(){return!1},zi.prototype.getMaxPointDistance=function(){return this._maxPtDist},zi.prototype.interfaces_=function(){return[Gt]},zi.prototype.getClass=function(){return zi};var Bi=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Ui={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Bi.prototype.checkMaximumDistance=function(t,e,n){var i=new Gi(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+G.toLineString(r[0],r[1])+")"}},Bi.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Bi.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Bi.VERBOSE&&T.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Bi.prototype.checkNegativeValid=function(){if(!(this._input instanceof ie||this._input instanceof se||this._input instanceof Vt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Bi.prototype.getErrorIndicator=function(){return this._errorIndicator},Bi.prototype.checkMinimumDistance=function(t,e,n){var i=new ji(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+G.toLineString(r[0],r[1])+" )"}},Bi.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Bi.prototype.getErrorLocation=function(){return this._errorLocation},Bi.prototype.getPolygonLines=function(t){for(var e=new pt,n=new Mi(e),i=Li.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},Bi.prototype.getErrorMessage=function(){return this._errMsg},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi},Ui.VERBOSE.get=function(){return!1},Ui.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bi,Ui);var Wi=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},qi={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Wi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Wi.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Wi.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new N(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new N(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Wi.prototype.checkDistance=function(){var t=new Bi(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Wi.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Wi.prototype.checkPolygonal=function(){this._result instanceof ie||this._result instanceof se||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Wi.prototype.getErrorIndicator=function(){return this._errorIndicator},Wi.prototype.getErrorLocation=function(){return this._errorLocation},Wi.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Wi.prototype.report=function(t){if(!Wi.VERBOSE)return null;T.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Wi.prototype.getErrorMessage=function(){return this._errorMsg},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi},Wi.isValidMsg=function(t,e,n){var i=new Wi(t,e,n);return i.isValid()?null:i.getErrorMessage()},Wi.isValid=function(t,e,n){return!!new Wi(t,e,n).isValid()},qi.VERBOSE.get=function(){return!1},qi.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Wi,qi);var Xi=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Xi.prototype.getCoordinates=function(){return this._pts},Xi.prototype.size=function(){return this._pts.length},Xi.prototype.getCoordinate=function(t){return this._pts[t]},Xi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Xi.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:_n.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Xi.prototype.setData=function(t){this._data=t},Xi.prototype.getData=function(){return this._data},Xi.prototype.toString=function(){return G.toLineString(new pe(this._pts))},Xi.prototype.interfaces_=function(){return[mn]},Xi.prototype.getClass=function(){return Xi};var Yi=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new pt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Yi.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Yi.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Yi.prototype.getIntersectionSegments=function(){return this._intSegments},Yi.prototype.count=function(){return this._intersectionCount},Yi.prototype.getIntersections=function(){return this._intersections},Yi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Yi.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Yi.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Yi.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Yi.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Yi.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Yi.prototype.interfaces_=function(){return[ti]},Yi.prototype.getClass=function(){return Yi},Yi.createAllIntersectionsFinder=function(t){var e=new Yi(t);return e.setFindAllIntersections(!0),e},Yi.createAnyIntersectionFinder=function(t){return new Yi(t)},Yi.createIntersectionCounter=function(t){var e=new Yi(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Hi=function(){this._li=new W,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Hi.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Hi.prototype.getIntersections=function(){return this._segInt.getIntersections()},Hi.prototype.isValid=function(){return this.execute(),this._isValid},Hi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Hi.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Yi(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new In;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Hi.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ae(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Hi.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+G.toLineString(t[0],t[1])+" and "+G.toLineString(t[2],t[3])},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi},Hi.computeIntersections=function(t){var e=new Hi(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Ji=function t(){this._nv=null;var e=arguments[0];this._nv=new Hi(t.toSegmentStrings(e))};Ji.prototype.checkValid=function(){this._nv.checkValid()},Ji.prototype.interfaces_=function(){return[]},Ji.prototype.getClass=function(){return Ji},Ji.toSegmentStrings=function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Xi(i.getCoordinates(),i))}return e},Ji.checkValid=function(t){new Ji(t).checkValid()};var Ki=function(t){this._mapOp=t};Ki.prototype.map=function(t){for(var e=new pt,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(xe.toGeometryArray(e))},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki},Ki.map=function(t,e){return new Ki(e).map(t)};var $i=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new pt,this._resultLineList=new pt;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};$i.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next();e.collectLineEdge(i,t,e._lineEdgesList),e.collectBoundaryTouchEdge(i,t,e._lineEdgesList)}},$i.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},$i.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},$i.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Rr.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},$i.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},$i.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},$i.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},$i.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(z.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Rr.isResultOfOp(i,e)&&e===Rr.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i};var Qi=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new pt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Qi.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Qi.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Rr.INTERSECTION)){var i=n.getLabel();Rr.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},Qi.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi};var tr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};tr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},tr.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof oe&&!i.isEmpty()||(n=!1);for(var r=new pt,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof oe||(n=!1),r.add(s))}if(n)return this._factory.createPolygon(i,r.toArray([]));var a=new pt;return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)},tr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},tr.prototype.getInputGeometry=function(){return this._inputGeom},tr.prototype.transformMultiLineString=function(t,e){for(var n=new pt,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},tr.prototype.transformCoordinates=function(t,e){return this.copy(t)},tr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},tr.prototype.transformMultiPoint=function(t,e){for(var n=new pt,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},tr.prototype.transformMultiPolygon=function(t,e){for(var n=new pt,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},tr.prototype.copy=function(t){return t.copy()},tr.prototype.transformGeometryCollection=function(t,e){for(var n=new pt,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(xe.toGeometryArray(n)):this._factory.buildGeometry(n)},tr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof ee)return this.transformPoint(t,null);if(t instanceof re)return this.transformMultiPoint(t,null);if(t instanceof oe)return this.transformLinearRing(t,null);if(t instanceof Qt)return this.transformLineString(t,null);if(t instanceof Zt)return this.transformMultiLineString(t,null);if(t instanceof ie)return this.transformPolygon(t,null);if(t instanceof se)return this.transformMultiPolygon(t,null);if(t instanceof Vt)return this.transformGeometryCollection(t,null);throw new r("Unknown Geometry subtype: "+t.getClass().getName())},tr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr};var er=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new xn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Qt&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=r}};er.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new h(o)),0===i&&this._isClosed&&t.set(t.size()-1,new h(o)))}},er.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},er.prototype.snapTo=function(t){var e=new ft(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},er.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new h(r),!1)}},er.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,i=o.MAX_VALUE,r=-1,s=0;s<e.size()-1;s++){if(n._seg.p0=e.get(s),n._seg.p1=e.get(s+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var a=n._seg.distance(t);a<n._snapTolerance&&a<i&&(i=a,r=s)}return r},er.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},er.prototype.interfaces_=function(){return[]},er.prototype.getClass=function(){return er},er.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var nr=function(t){this._srcGeom=t||null},ir={SNAP_PRECISION_FACTOR:{configurable:!0}};nr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new rr(e,n).transform(this._srcGeom)},nr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new rr(t,n,!0).transform(this._srcGeom),r=i;return e&&_(r,ne)&&(r=i.buffer(0)),r},nr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},nr.prototype.extractTargetCoordinates=function(t){for(var e=new Nt,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},nr.prototype.computeMinimumSegmentLength=function(t){for(var e=o.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},nr.prototype.interfaces_=function(){return[]},nr.prototype.getClass=function(){return nr},nr.snap=function(t,e,n){var i=new Array(2).fill(null),r=new nr(t);i[0]=r.snapTo(e,n);var o=new nr(e);return i[1]=o.snapTo(i[0],n),i},nr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=nr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===_e.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(nr.computeOverlaySnapTolerance(r),nr.computeOverlaySnapTolerance(o))}},nr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*nr.SNAP_PRECISION_FACTOR},nr.snapToSelf=function(t,e,n){return new nr(t).snapToSelf(e,n)},ir.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(nr,ir);var rr=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new er(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tr),or=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};or.prototype.getCommon=function(){return o.longBitsToDouble(this._commonBits)},or.prototype.add=function(t){var e=o.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=or.signExpBits(this._commonBits),this._isFirst=!1,null):or.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=or.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=or.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},or.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=o.longBitsToDouble(t),n=o.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+n,r=i.substring(i.length-64),s=r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]";return s}},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.getBit=function(t,e){return 0!=(t&1<<e)?1:0},or.signExpBits=function(t){return t>>52},or.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},or.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(or.getBit(t,i)!==or.getBit(e,i))return n;n++}return 52};var sr=function(){this._commonCoord=null,this._ccFilter=new lr},ar={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};sr.prototype.addCommonBits=function(t){var e=new ur(this._commonCoord);t.apply(e),t.geometryChanged()},sr.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new h(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ur(e);return t.apply(n),t.geometryChanged(),t},sr.prototype.getCommonCoordinate=function(){return this._commonCoord},sr.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ar.CommonCoordinateFilter.get=function(){return lr},ar.Translater.get=function(){return ur},Object.defineProperties(sr,ar);var lr=function(){this._commonBitsX=new or,this._commonBitsY=new or};lr.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},lr.prototype.getCommonCoordinate=function(){return new h(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},lr.prototype.interfaces_=function(){return[tt]},lr.prototype.getClass=function(){return lr};var ur=function(){this.trans=null;var t=arguments[0];this.trans=t};ur.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},ur.prototype.isDone=function(){return!1},ur.prototype.isGeometryChanged=function(){return!0},ur.prototype.interfaces_=function(){return[Gt]},ur.prototype.getClass=function(){return ur};var cr=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};cr.prototype.selfSnap=function(t){return new nr(t).snapTo(t,this._snapTolerance)},cr.prototype.removeCommonBits=function(t){this._cbr=new sr,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},cr.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},cr.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Rr.overlayOp(e[0],e[1],t);return this.prepareResult(n)},cr.prototype.checkValid=function(t){t.isValid()||T.out.println("Snapped geometry is invalid")},cr.prototype.computeSnapTolerance=function(){this._snapTolerance=nr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},cr.prototype.snap=function(t){var e=this.removeCommonBits(t);return nr.snap(e[0],e[1],this._snapTolerance)},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},cr.overlayOp=function(t,e,n){return new cr(t,e).getResultGeometry(n)},cr.union=function(t,e){return cr.overlayOp(t,e,Rr.UNION)},cr.intersection=function(t,e){return cr.overlayOp(t,e,Rr.INTERSECTION)},cr.symDifference=function(t,e){return cr.overlayOp(t,e,Rr.SYMDIFFERENCE)},cr.difference=function(t,e){return cr.overlayOp(t,e,Rr.DIFFERENCE)};var hr=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};hr.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=Rr.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof V))throw t;i=t}if(!n)try{e=cr.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof V?i:t}return e},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr},hr.overlayOp=function(t,e,n){return new hr(t,e).getResultGeometry(n)},hr.union=function(t,e){return hr.overlayOp(t,e,Rr.UNION)},hr.intersection=function(t,e){return hr.overlayOp(t,e,Rr.INTERSECTION)},hr.symDifference=function(t,e){return hr.overlayOp(t,e,Rr.SYMDIFFERENCE)},hr.difference=function(t,e){return hr.overlayOp(t,e,Rr.DIFFERENCE)};var pr=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};pr.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},pr.prototype.interfaces_=function(){return[]},pr.prototype.getClass=function(){return pr};var dr=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},fr={INSERT:{configurable:!0},DELETE:{configurable:!0}};dr.prototype.isDelete=function(){return this._eventType===dr.DELETE},dr.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},dr.prototype.getObject=function(){return this._obj},dr.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},dr.prototype.getInsertEvent=function(){return this._insertEvent},dr.prototype.isInsert=function(){return this._eventType===dr.INSERT},dr.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},dr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},dr.prototype.interfaces_=function(){return[a]},dr.prototype.getClass=function(){return dr},fr.INSERT.get=function(){return 1},fr.DELETE.get=function(){return 2},Object.defineProperties(dr,fr);var gr=function(){};gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr};var yr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};yr.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(yr.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},yr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},yr.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},yr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},yr.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},yr.prototype.hasProperIntersection=function(){return this._hasProper},yr.prototype.hasIntersection=function(){return this._hasIntersection},yr.prototype.isDone=function(){return this._isDone},yr.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},yr.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},yr.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr},yr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var _r=function(t){function e(){t.call(this),this.events=new pt,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){sn.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var i=t.events.get(n);if(i.isInsert()&&t.processOverlaps(n,i.getDeleteEventIndex(),i,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof yr&&_(arguments[0],ct)&&_(arguments[1],ct)){var r=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(r,r),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&_(arguments[0],ct)&&arguments[1]instanceof yr){var a=arguments[0],l=arguments[1],u=arguments[2];u?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(l)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new pr(n,r),s=new dr(e,n.getMinX(r),o);this.events.add(s),this.events.add(new dr(n.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=e.iterator();n.hasNext();){var i=n.next();t.addEdge(i,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.iterator();s.hasNext();){var a=s.next();t.addEdge(a,o)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gr),mr=function(){this._min=o.POSITIVE_INFINITY,this._max=o.NEGATIVE_INFINITY},vr={NodeComparator:{configurable:!0}};mr.prototype.getMin=function(){return this._min},mr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},mr.prototype.getMax=function(){return this._max},mr.prototype.toString=function(){return G.toLineString(new h(this._min,0),new h(this._max,0))},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},vr.NodeComparator.get=function(){return br},Object.defineProperties(mr,vr);var br=function(){};br.prototype.compare=function(t,e){var n=t,i=e,r=(n._min+n._max)/2,o=(i._min+i._max)/2;return r<o?-1:r>o?1:0},br.prototype.interfaces_=function(){return[u]},br.prototype.getClass=function(){return br};var xr=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mr),wr=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mr),Er=function(){this._leaves=new pt,this._root=null,this._level=0};Er.prototype.buildTree=function(){sn.sort(this._leaves,new mr.NodeComparator);for(var t=this._leaves,e=null,n=new pt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Er.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new xr(t,e,n))},Er.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Er.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Er.prototype.printNode=function(t){T.out.println(G.toLineString(new h(t._min,this._level),new h(t._max,this._level)))},Er.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Er.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new wr(t.get(n),t.get(n+1));e.add(r)}}},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er};var Pr=function(){this._items=new pt};Pr.prototype.visitItem=function(t){this._items.add(t)},Pr.prototype.getItems=function(){return this._items},Pr.prototype.interfaces_=function(){return[en]},Pr.prototype.getClass=function(){return Pr};var Cr=function(){this._index=null;var t=arguments[0];if(!_(t,ne))throw new r("Argument must be Polygonal");this._index=new Ir(t)},Or={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Cr.prototype.locate=function(t){var e=new X(t),n=new Sr(e);return this._index.query(t.y,t.y,n),e.getLocation()},Cr.prototype.interfaces_=function(){return[qn]},Cr.prototype.getClass=function(){return Cr},Or.SegmentVisitor.get=function(){return Sr},Or.IntervalIndexedGeometry.get=function(){return Ir},Object.defineProperties(Cr,Or);var Sr=function(){this._counter=null;var t=arguments[0];this._counter=t};Sr.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Sr.prototype.interfaces_=function(){return[en]},Sr.prototype.getClass=function(){return Sr};var Ir=function(){this._index=new Er;var t=arguments[0];this.init(t)};Ir.prototype.init=function(t){for(var e=Mi.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Ir.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new xn(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},Ir.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Pr;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir};var Lr=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new ye,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ti,2===arguments.length){var e=arguments[0],n=arguments[1],i=et.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;i.getLocation(t,Le.ON)===g.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new yr(n,!0,!1);o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof oe||this._parentGeom instanceof ie||this._parentGeom instanceof se,l=i||!a;return s.computeIntersections(this._edges,o,l),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new yr(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof ee){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,g.INTERIOR)}else if(arguments[0]instanceof h){var n=arguments[0];this.insertPoint(this._argIndex,n,g.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),g.EXTERIOR,g.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,g.INTERIOR,g.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],g.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],g.BOUNDARY)},e.prototype.addLineString=function(t){var e=gt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new li(e,new ke(this._argIndex,g.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),z.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===g.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=gt.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;Y.isCCW(i)&&(r=n,o=e);var s=new li(i,new ke(this._argIndex,g.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],g.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new ke(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new _r},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof se&&(this._useBoundaryDeterminationRule=!1),e instanceof ie)this.addPolygon(e);else if(e instanceof Qt)this.addLineString(e);else if(e instanceof ee)this.addPoint(e);else if(e instanceof re)this.addCollection(e);else if(e instanceof Zt)this.addCollection(e);else if(e instanceof se)this.addCollection(e);else{if(!(e instanceof Vt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return _(this._parentGeom,ne)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Cr(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?g.BOUNDARY:g.INTERIOR},e}(Je),Mr=function(){if(this._li=new W,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Lr(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=et.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Lr(0,e,i),this._arg[1]=new Lr(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Lr(0,r,s),this._arg[1]=new Lr(1,o,s)}};Mr.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Mr.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr};var Tr=function(){};Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Tr.map=function(){if(arguments[0]instanceof K&&_(arguments[1],Tr.MapOp)){for(var t=arguments[0],e=arguments[1],n=new pt,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(_(arguments[0],at)&&_(arguments[1],Tr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new pt,l=o.iterator();l.hasNext();){var u=l.next(),c=s.map(u);null!==c&&a.add(c)}return a}},Tr.MapOp=function(){};var Rr=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ti,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Qn,this._resultPolyList=new pt,this._resultLineList=new pt,this._resultPointList=new pt,this._graph=new Je(new Kn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new ke(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new pt;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==g.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new pt,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new pt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Ji.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ke(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new $i(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new Qi(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Le.RIGHT),r.getLocation(1,Le.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(z.isTrue(!i.isNull(r,Le.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Le.LEFT,i.getLocation(r,Le.LEFT)),z.isTrue(!i.isNull(r,Le.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Le.RIGHT,i.getLocation(r,Le.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Mr);Rr.overlayOp=function(t,e,n){return new Rr(t,e).getResultGeometry(n)},Rr.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Rr.createEmptyResult(Rr.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Ki.map(t,{interfaces_:function(){return[Tr.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),hr.overlayOp(t,e,Rr.INTERSECTION)},Rr.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Rr.createEmptyResult(Rr.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),hr.overlayOp(t,e,Rr.SYMDIFFERENCE)},Rr.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Rr.INTERSECTION:o=Math.min(i,r);break;case Rr.UNION:o=Math.max(i,r);break;case Rr.DIFFERENCE:o=i;break;case Rr.SYMDIFFERENCE:o=Math.max(i,r)}return o},Rr.createEmptyResult=function(t,e,n,i){var r=null;switch(Rr.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Rr.difference=function(t,e){return t.isEmpty()?Rr.createEmptyResult(Rr.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),hr.overlayOp(t,e,Rr.DIFFERENCE))},Rr.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Rr.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===g.BOUNDARY&&(r=g.INTERIOR),o===g.BOUNDARY&&(o=g.INTERIOR),s){case Rr.INTERSECTION:return r===g.INTERIOR&&o===g.INTERIOR;case Rr.UNION:return r===g.INTERIOR||o===g.INTERIOR;case Rr.DIFFERENCE:return r===g.INTERIOR&&o!==g.INTERIOR;case Rr.SYMDIFFERENCE:return r===g.INTERIOR&&o!==g.INTERIOR||r!==g.INTERIOR&&o===g.INTERIOR}return!1}},Rr.INTERSECTION=1,Rr.UNION=2,Rr.DIFFERENCE=3,Rr.SYMDIFFERENCE=4;var Nr=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ti,this._seg=new xn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Nr.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var i=e._linework.getGeometryN(n).getCoordinateSequence(),r=0;r<i.size()-1;r++)if(i.getCoordinate(r,e._seg.p0),i.getCoordinate(r+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},Nr.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?g.BOUNDARY:this._ptLocator.locate(t,this._g)},Nr.prototype.extractLinework=function(t){var e=new Ar;t.apply(e);var n=e.getLinework(),i=xe.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr};var Ar=function(){this._linework=null,this._linework=new pt};Ar.prototype.getLinework=function(){return this._linework},Ar.prototype.filter=function(t){if(t instanceof ie){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ar.prototype.interfaces_=function(){return[kt]},Ar.prototype.getClass=function(){return Ar};var Dr=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Dr.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},Dr.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Dr.prototype.getPoints=function(t){for(var e=new pt,n=Mi.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},Dr.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=n*r/s,l=n*o/s,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var p=new h(u-l,c+a);i.add(p)}if(this._doRight){var d=new h(u+l,c-a);i.add(d)}},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr};var jr=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new pt;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new Nr(this._geom[0],this._boundaryDistanceTolerance),new Nr(this._geom[1],this._boundaryDistanceTolerance),new Nr(this._geom[2],this._boundaryDistanceTolerance)]},Fr={TOLERANCE:{configurable:!0}};jr.prototype.reportResult=function(t,e,n){T.out.println("Overlay result invalid - A:"+g.toLocationSymbol(e[0])+" B:"+g.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+g.toLocationSymbol(e[2]))},jr.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},jr.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var i=t._testCoords.get(n);if(!t.checkValid(e,i))return t._invalidLocation=i,!1}return!0}if(2===arguments.length){var r=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!jr.hasLocation(this._location,g.BOUNDARY)||this.isValidResult(r,this._location)}},jr.prototype.addTestPts=function(t){var e=new Dr(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},jr.prototype.isValidResult=function(t,e){var n=Rr.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===g.INTERIOR);return i||this.reportResult(t,e,n),i},jr.prototype.getInvalidLocation=function(){return this._invalidLocation},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},jr.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},jr.computeBoundaryDistanceTolerance=function(t,e){return Math.min(nr.computeSizeBasedSnapTolerance(t),nr.computeSizeBasedSnapTolerance(e))},jr.isValid=function(t,e,n,i){return new jr(t,e,i).isValid(n)},Fr.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(jr,Fr);var kr=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};kr.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},kr.prototype.combine=function(){for(var t=new pt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.combine=function(){if(1===arguments.length){var t=arguments[0],e=new kr(t);return e.combine()}if(2===arguments.length){var n=arguments[0],i=arguments[1],r=new kr(kr.createList(n,i));return r.combine()}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=new kr(kr.createList(o,s,a));return l.combine()}},kr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},kr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new pt;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new pt;return s.add(i),s.add(r),s.add(o),s}};var Gr=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new pt)},Vr={STRTREE_NODE_CAPACITY:{configurable:!0}};Gr.prototype.reduceToGeometries=function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var i=n.next(),r=null;_(i,ct)?r=this.unionTree(i):i instanceof K&&(r=i),e.add(r)}return e},Gr.prototype.extractByEnvelope=function(t,e,n){for(var i=new pt,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},Gr.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return kr.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},Gr.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new pn(Gr.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},Gr.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Gr.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Gr.getGeometry(e,n),Gr.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i);return this.unionSafe(s,a)}},Gr.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},Gr.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Gr.prototype.unionActual=function(t,e){return Gr.restrictToPolygons(t.union(e))},Gr.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Gr.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new pt,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);return i.add(s),kr.combine(i)},Gr.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),i=n.buffer(0);return i}if(2===arguments.length){var r=arguments[0],o=arguments[1],s=r.getFactory(),a=s.createGeometryCollection([r,o]),l=a.buffer(0);return l}},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.restrictToPolygons=function(t){if(_(t,ne))return t;var e=Li.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(xe.toPolygonArray(e))},Gr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Gr.union=function(t){return new Gr(t).union()},Vr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Gr,Vr);var Zr=function(){};Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Rr.createEmptyResult(Rr.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),hr.overlayOp(t,e,Rr.UNION)}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.j=659;var i=n(85817);module.exports=i})();